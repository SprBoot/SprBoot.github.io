<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>kcfæºç å¤ç°</title>
      <link href="/2022/03/18/kcf-yuan-ma-fu-xian/"/>
      <url>/2022/03/18/kcf-yuan-ma-fu-xian/</url>
      
        <content type="html"><![CDATA[<h3 id="kcfæºç å¤ç°">kcfæºç å¤ç°</h3><p>æˆ‘åœ¨ç¼–è¯‘fhogçš„æ—¶å€™å­˜åœ¨é—®é¢˜ã€‚</p><h4 id="run-tracker">run_tracker</h4><pre class=" language-language-python"><code class="language-language-python"># author:dinggc# date:2022/3/18 ä¸‹åˆ12:37from  load_video_info import load_video_infofrom tracker import tracker,strArrayToFloat,strArrayToIntfrom kernel import Kernelfrom features import Featureskernel = Kernel('gaussian',0.5,1,9)features = Features(0,1,9)img_files,pos,target_sz,ground_truth,video_path = load_video_info('/Users/dinggongcheng/Downloads/kcf/','Bolt')target_sz = strArrayToInt(target_sz)pos = strArrayToInt(pos)positions = tracker(video_path,img_files,pos,target_sz,padding=1.5,kernel=kernel,lambd=1e-4,out_sigma_factor=0.1,interp_factor=0.02,cell_size=4,features=features,show_visualization=True)print(positions)</code></pre><h4 id="tracker">tracker</h4><pre class=" language-language-python"><code class="language-language-python"># author:dinggc# date:2022/3/18 ä¸‹åˆ12:41import mathimport numpy as npfrom gaussian_shaped_labels import gaussian_shaped_labelsimport cv2from get_subwindow import get_subwindowfrom get_features import get_features,hannfrom gaussian_correlation import gaussian_correlationimport scipymodel_xf = []model_alphaf = []def tracker(video_path,img_files,pos,target_sz,padding,kernel,lambd,out_sigma_factor,interp_factor,cell_size,features,show_visualization):    resize_image = math.sqrt(target_sz[0] * target_sz[1])    if resize_image > 100:        pos[0] = math.floor(int(pos[0]) / 2)        pos[1] = math.floor(int(pos[1]) / 2)        target_sz[0] = math.floor(int(target_sz[0]) / 2)        target_sz[1] = math.floor(int(target_sz[0]) / 2)    window_sz = []    window_sz.append(math.floor(target_sz[0] * (1 + padding)))    window_sz.append(math.floor(target_sz[1] * (1 + padding)))    out_sigma = math.sqrt(target_sz[0] * target_sz[1]) * out_sigma_factor / cell_size    yf = gaussian_shaped_labels(out_sigma,[math.floor(window_sz[0] / cell_size),math.floor(window_sz[1] / cell_size)])    cos_window = hann(len(yf) - 1, len(yf[0]) - 1)    positions = np.zeros((len(img_files),2))    for frame in range(1,len(img_files)):        im = cv2.imread(video_path + img_files[frame-1][0])        if len(im.shape) > 2:            im = cv2.cvtColor(im,cv2.COLOR_BGR2GRAY)        if resize_image > 100:            im = cv2.resize(im,0.5)        if frame > 1:            patch = get_subwindow(im,pos,window_sz)            zf = get_features(patch,cell_size,cos_window)            kzf = gaussian_correlation(zf,model_xf,kernel.sigma)            response = np.real(scipy.fft.ifft2(model_alphaf * kzf))            max = np.max(list(np.array(response).flatten()))            [vert_delta,horiz_delta] = [0,0]            out = False            for i in range(len(response)):                for j in range(len(response[0])):                    if response[i][j] == max:                        [vert_delta, horiz_delta] = [i, j]                        out = True                        break                if out:                    break            if vert_delta > len(zf) / 2:                vert_delta = vert_delta - len(zf)            if horiz_delta > len(zf[0]) / 2:                horiz_delta = horiz_delta - len(zf[0])            pos = [vert_delta * cell_size + pos[0],horiz_delta * cell_size + pos[1]]        patch = get_subwindow(im, pos, window_sz)        xf = get_features(patch, cell_size, cos_window)        kf = gaussian_correlation(xf, xf, kernel.sigma)        alphaf = np.divide(yf,(kf + lambd))        if frame == 1:            model_alphaf = alphaf            model_xf = xf        else:            model_alphaf = (1 - interp_factor) * model_alphaf + interp_factor * alphaf            model_xf = (1 - interp_factor) * model_xf + interp_factor * xf        positions[frame - 1] = pos        print('{}å¸§å·²å®Œæˆ'.format(frame))    return positionsdef strArrayToInt(arr):    result = []    for i in arr:        i = int(i)        result.append(i)    return resultdef strArrayToFloat(arr):    result = []    for i in arr:        i = float(i)        result.append(i)    return result</code></pre><h4 id="load-video-info">load_video_info</h4><pre class=" language-language-python"><code class="language-language-python"># author:dinggc# date:2022/3/18 ä¸Šåˆ11:05# è¾“å…¥è§†é¢‘æ‰€åœ¨è·¯å¾„å’Œè§†é¢‘# è¿”å›å‚æ•°ä¸ºè§†é¢‘æ¯å¸§çš„å›¾ç‰‡ï¼Œåˆå§‹ä½ç½®ï¼Œç›®æ ‡å°ºå¯¸ï¼ŒçœŸå®æ ‡ç­¾å’Œè§†é¢‘è·¯å¾„import mathimport osdef load_video_info(base_path, video):    groundtruth = []    for line in open(base_path + video + '/groundtruth_rect.txt'):      groundtruth.append(line.replace('\n','').split(','))    target_size = []    target_size.append(groundtruth[0][3])    target_size.append(groundtruth[0][2])    pos = []    pos.append(str(int(groundtruth[0][1]) +  math.floor(int(target_size[0]) / 2)))    pos.append(str(int(groundtruth[0][0]) +  math.floor(int(target_size[1]) / 2)))    if len(groundtruth) == 1:        groundtruth = []    else:        gt = groundtruth        groundtruth = []        for i in gt:            temp = []            temp.append(str(float(i[1]) +  float(i[3]) / 2))            temp.append(str(float(i[0]) + float(i[2]) / 2))            groundtruth.append(temp)    video_path = base_path + video + '/img/'    img_files = []    file_list = os.listdir(video_path)    file_list.sort()    for filename in file_list:        fileinfo = os.stat(video_path + filename)        img_file = []        img_file.append(filename)        img_file.append(base_path + video + '/img/')        img_file.append(fileinfo.st_mtime)        img_file.append(fileinfo.st_size)        img_file.append(0)        img_file.append(fileinfo.st_ctime)        img_files.append(img_file)    return img_files,pos,target_size,groundtruth,video_path</code></pre><h4 id="features">features</h4><pre class=" language-language-python"><code class="language-language-python"># author:dinggc# date:2022/3/18 ä¸‹åˆ12:52class Features():    def __init__(self,gray,hog,hog_orientations):        self.gray = gray        self.hog = hog        self.hog_orientations = hog_orientations</code></pre><h4 id="gaussian-shaped-labels">gaussian_shaped_labels</h4><pre class=" language-language-python"><code class="language-language-python"># author:dinggc# date:2022/3/18 ä¸‹åˆ1:13import numpy as npimport mathimport scipydef gaussian_shaped_labels(sigma,sz):    rs, cs = np.ogrid[1 - math.floor(sz[0] / 2):sz[0] - math.floor(sz[0]  / 2) + 1, 1 - math.floor(sz[1] / 2):sz[1] - math.floor(sz[1] / 2) + 1]    labels = np.exp(-0.5 / math.pow(sigma,2) * (rs ** 2 + cs ** 2))    labels = circshift(labels,-math.floor(sz[0] / 2) + 1,-math.floor(sz[1] / 2) + 1)    labels = scipy.fft.fft2(labels)    return labelsdef circshift(u,shiftnum1,shiftnum2):    h,w = u.shape    if shiftnum1 < 0:        u = np.vstack((u[-shiftnum1:,:],u[:-shiftnum1,:]))    else:        u = np.vstack((u[(h-shiftnum1):,:],u[:(h-shiftnum1),:]))    if shiftnum2 > 0:        u = np.hstack((u[:, (w - shiftnum2):], u[:, :(w - shiftnum2)]))    else:        u = np.hstack((u[:,-shiftnum2:],u[:,:-shiftnum2]))    return u</code></pre><h4 id="get-features">get_features</h4><pre class=" language-language-python"><code class="language-language-python"># author:dinggc# date:2022/3/18 ä¸‹åˆ2:57from skimage import feature, exposureimport numpy as npimport scipyfrom fhog import gradientHist,gradientMagdef get_features(im,cell_size,cos_window):    # x = FHOG(im / 255,cell_size)    features, x = feature.hog(im / 255, orientations=9, pixels_per_cell=(4, 4),cells_per_block=[1,1], visualize=True)    x = features.reshape((38,16,9))    # x = np.delete(x,31,axis=2)    x = addHann(x,cos_window)    return scipy.fft.fft2(x)def hann(M,N):    hann2t, hann1t = np.ogrid[0:M + 1, 0:N + 1]    hann1t = 0.5 - (0.5 * np.cos(2 * np.pi * hann1t / N))    hann2t = 0.5 - (0.5 * np.cos(2 * np.pi * hann2t / M))    hann2d = hann2t * hann1t    return np.conj(hann2d)def FHOG(img, binSize, nOrients=9, clip=.2, softBin=-1, useHog=2):    h, w = img.shape[:2]    M = np.zeros((h, w), dtype='float32')    O = np.zeros((h, w), dtype='float32')    H = np.zeros([img.shape[0] // binSize, img.shape[1] // binSize, 32], dtype='float32')    try:        print('è°ƒç”¨fhogæ–¹æ³•')        gradientMag(img.astype(np.float32), M, O, 0, 1)        print('mag')        gradientHist(M, O, H, binSize, nOrients, softBin, useHog, clip)        print('hist')    except Exception as e:        print(e)    return Hdef addHann(x,window):    window = np.expand_dims(window, 2)    window = np.repeat(window, 9, 2)    return x * window</code></pre><h4 id="get-subwindow">get_subwindow</h4><pre class=" language-language-python"><code class="language-language-python"># author:dinggc# date:2022/3/18 ä¸‹åˆ2:16import mathdef get_subwindow(im,pos,sz):    if len(sz) == 1:        sz.append(sz)    xs = []    for i in range(1 + math.floor(pos[1]) - math.floor(sz[1] / 2),sz[1] + math.floor(pos[1]) - math.floor(sz[1] / 2) + 1):        if i < 1:            i = 1        if i > im.shape[1]:            i = im.shape[1]        xs.append(i)    ys = []    for i in range(1 + math.floor(pos[0]) - math.floor(sz[0] / 2),sz[0] + math.floor(pos[0]) - math.floor(sz[0] / 2) + 1):        if i < 1:            i = 1        if i > im.shape[0]:            i = im.shape[0]        ys.append(i)    out = im[ys[0] - 1:ys[len(ys)-1],xs[0] - 1:xs[len(xs)-1]]    return out</code></pre><h4 id="kernel">kernel</h4><pre class=" language-language-python"><code class="language-language-python"># author:dinggc# date:2022/3/18 ä¸‹åˆ12:49class Kernel():    def __init__(self,type,sigma,poly_a,poly_b):        self.type = type        self.sigma = sigma        self.poly_a = poly_a        self.poly_b = poly_b</code></pre><h4 id="gaussian-correlation">gaussian_correlation</h4><pre class=" language-language-python"><code class="language-language-python"># author:dinggc# date:2022/3/18 ä¸‹åˆ3:37import numpy as npimport scipyimport mathdef gaussian_correlation(xf,yf,sigma):    N = len(xf) * len(xf[0])    xx = np.dot(np.array(list(np.array(xf).flatten())).T,np.array(list(np.array(xf).flatten()))) / N    yy = np.dot(np.array(list(np.array(yf).flatten())).T,np.array(list(np.array(yf).flatten()))) / N    xyf = xf * np.conj(xf)    xy = np.sum(np.real(scipy.fft.ifft2(xyf)),axis=2)    kf = scipy.fft.fft2(np.exp(-1 / math.pow(sigma,2) * np.maximum(0, (xx + yy - 2 * xy) / (len(xf) * len(xf[0])))))    return kf</code></pre><h4 id="gaussian-shaped-labels-2">gaussian_shaped_labels</h4><pre class=" language-language-python"><code class="language-language-python"># author:dinggc# date:2022/3/18 ä¸‹åˆ1:13import numpy as npimport mathimport scipydef gaussian_shaped_labels(sigma,sz):    rs, cs = np.ogrid[1 - math.floor(sz[0] / 2):sz[0] - math.floor(sz[0]  / 2) + 1, 1 - math.floor(sz[1] / 2):sz[1] - math.floor(sz[1] / 2) + 1]    labels = np.exp(-0.5 / math.pow(sigma,2) * (rs ** 2 + cs ** 2))    labels = circshift(labels,-math.floor(sz[0] / 2) + 1,-math.floor(sz[1] / 2) + 1)    labels = scipy.fft.fft2(labels)    return labelsdef circshift(u,shiftnum1,shiftnum2):    h,w = u.shape    if shiftnum1 < 0:        u = np.vstack((u[-shiftnum1:,:],u[:-shiftnum1,:]))    else:        u = np.vstack((u[(h-shiftnum1):,:],u[:(h-shiftnum1),:]))    if shiftnum2 > 0:        u = np.hstack((u[:, (w - shiftnum2):], u[:, :(w - shiftnum2)]))    else:        u = np.hstack((u[:,-shiftnum2:],u[:,:-shiftnum2]))    return u</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒè¿½è¸ª </category>
          
      </categories>
      
      
        <tags>
            
            <tag> KCF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>agx xavierå¼€å‘æ¿åˆ·æœºã€ç¯å¢ƒæ­å»ºä¸ç®—æ³•è®­ç»ƒ</title>
      <link href="/2022/03/16/agx-xavier-kai-fa-ban-shua-ji-huan-jing-da-jian-yu-suan-fa-xun-lian/"/>
      <url>/2022/03/16/agx-xavier-kai-fa-ban-shua-ji-huan-jing-da-jian-yu-suan-fa-xun-lian/</url>
      
        <content type="html"><![CDATA[<h3 id="agx-xavierå¼€å‘æ¿åˆ·æœºã€ç¯å¢ƒæ­å»ºä¸ç®—æ³•è®­ç»ƒ">agx xavierå¼€å‘æ¿åˆ·æœºã€ç¯å¢ƒæ­å»ºä¸ç®—æ³•è®­ç»ƒ</h3><h4 id="å¼€å‘æ¿åˆ·æœº">å¼€å‘æ¿åˆ·æœº</h4><p>ä¸»æœºéœ€è¦Linuxç³»ç»Ÿï¼Œå®‰è£…sdkmanagerã€‚</p><p>è¿™é‡Œç”±äºæˆ‘çš„ç”µè„‘æ˜¯macï¼Œä½¿ç”¨pdè™šæ‹Ÿæœºé•œåƒæ˜¯armçš„ï¼Œæ²¡æ‰¾åˆ°æ¡Œé¢ç‰ˆçš„ï¼Œè€Œä¸”sdkmanageræ˜¯debï¼Œä¸å¤ªé€‚é…ã€‚æ‰€ä»¥æˆ‘è¿™é‡Œé€‰æ‹©äº†ä½¿ç”¨windowsç³»ç»Ÿï¼Œä½¿ç”¨vmè™šæ‹Ÿæœºï¼Œè£…äº†ubuntu20.04çš„desktopç‰ˆã€‚</p><p>è¿™é‡Œæä¾›ä¸€ä¸‹sdkmanagerå’Œdesktopçš„é•œåƒåœ°å€ï¼Œå¯ä»¥ç›´æ¥ä¸‹ã€‚<strong>éœ€è¦æ³¨æ„çš„æ˜¯åœ¨åˆ›å»ºè™šæ‹Ÿæœºçš„æ—¶å€™å†…å­˜å»ºè®®è®¾ç½®8GåŠä»¥ä¸Šï¼Œç¡¬ç›˜ç©ºé—´è‡³å°‘60Gã€‚</strong></p><p><a href="https://developer.nvidia.com/nvidia-sdk-manager" target="_blank" rel="noopener">sdkmanager</a></p><p><a href="http://mirrors.aliyun.com/ubuntu-releases/18.04/ubuntu-18.04.6-desktop-amd64.iso" target="_blank" rel="noopener">ubuntu</a></p><h5 id="ä¸»æœºæ¢æº">ä¸»æœºæ¢æº</h5><p>ä¸»æœºæºå¤‡ä»½</p><pre class=" language-language-shell"><code class="language-language-shell">sudo mv /etc/apt/sources.list /etc/apt/sources.list.back</code></pre><p>æ¢æº</p><pre class=" language-language-shell"><code class="language-language-shell">sudo vi /etc/apt/sources.list</code></pre><p>ç²˜è´´ä»¥ä¸‹å†…å®¹</p><pre class=" language-language-shell"><code class="language-language-shell">##ä¸­ç§‘å¤§æºdeb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiversedeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiversedeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiversedeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiversedeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiversedeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiversedeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiversedeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiversedeb https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiversedeb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</code></pre><p>ä¿å­˜é€€å‡ºåæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><pre class=" language-language-shell"><code class="language-language-shell">sudo apt-get updatesudo apt-get upgrade</code></pre><h5 id="åˆ·æœº">åˆ·æœº</h5><p>ä¸‹è½½å¥½çš„sdkmanagerå®‰è£…åŒ…ç›´æ¥ç‚¹å‡»å®‰è£…å³å¯ã€‚</p><p>å®‰è£…æ­¥éª¤</p><p>ä¸‹é¢çš„å›¾ä¸ºtx2ï¼Œæ¥æºäºç½‘ç»œï¼Œå®é™…é…ç½®çš„æ¿å­ä¸ºagx xavierã€‚</p><p><strong>step1</strong></p><p><img src="http://dingdm.online/step01.png" alt=""></p><p><strong>æ³¨æ„</strong></p><p>hardware configurationä¸­çš„host machineæ˜¯ä¸ºè‡ªå·±å½“å‰çš„ä¸»æœºå®‰è£…ç¯å¢ƒï¼Œè¿™é‡Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œé€‰æ‹©ã€‚åé¢çš„target hardwareä¸€å®šè¦è¿æ¥åˆ°è‡ªå·±çš„å¼€å‘æ¿ã€‚ä½¿ç”¨çš„æ˜¯å‚å®¶æä¾›çš„åŸè£…çº¿ï¼Œå¹¶ä¸”type-cçš„å£ä¸€å®šè¦è¿æ¥é è¿‘ç”µæºæŒ‰é’®çš„é‚£ä¸ªæ¥å£ã€‚</p><p>å¦‚æœè¿˜æ˜¯è¿æ¥ä¸åˆ°ï¼Œåœ¨ä¿è¯å¼€å‘æ¿é€šç”µä¸”å…³æœºçš„æƒ…å†µä¸‹ï¼ŒæŒ‰ä½å¼€æœºæŒ‰é’®å’Œå¼€æœºæ—è¾¹çš„æŒ‰é’®ä¸¤ç§’é’Ÿï¼Œçœ‹åˆ°ç”µæºç¯äº®èµ·çš„æ—¶å€™æ¾å¼€ã€‚è¿™ä¸ªæ—¶å€™ç”µè„‘ä¼šå¼¹å‡ºè¿æ¥çš„é€‰é¡¹ï¼Œè¿™é‡Œè¦å°†å¼€å‘æ¿è¿æ¥åˆ°ä½ çš„è™šæ‹Ÿæœºè€Œä¸æ˜¯ä½ çš„ç”µè„‘ã€‚</p><p>jetpackç‰ˆæœ¬çš„è¯æˆ‘æœ€åˆå®‰è£…çš„æ˜¯4.5ï¼Œåæ¥åœ¨é…ç¯å¢ƒçš„æ—¶å€™çœ‹åˆ°4.5æœ‰bugï¼Œå› æ­¤åœ¨çº¿å‡çº§æˆäº†4.6ã€‚ä½ å¯ä»¥åœ¨è¯¥æ­¥éª¤ç›´æ¥é€‰æ‹©æˆ–è€…ä»¥åæ ¹æ®æƒ…å†µåœ¨æ¿å­çš„ç³»ç»Ÿä¸­è‡ªè¡Œå‡çº§ã€‚</p><p><strong>step2</strong></p><p><img src="http://dingdm.online/step02.png" alt=""></p><p><strong>æ³¨æ„</strong></p><p>è¯¥æ­¥éª¤çš„é™¤äº†é•œåƒæ˜¯çƒ§è¿›ç³»ç»Ÿä¹‹å¤–ï¼Œä¸‹é¢çš„å¼€å‘ç¯å¢ƒé…ç½®æ˜¯éœ€è¦å¼€å‘æ¿å’Œä¸»æœºåœ¨ä¸€ä¸ªå±€åŸŸç½‘å†…çš„ï¼Œä½ å¯ä»¥å°†ç”µè„‘å’Œå±€åŸŸç½‘è¿æ¥åˆ°ä¸€ä¸ªè·¯ç”±å™¨ã€‚æˆ‘è¿™é‡Œæ²¡æœ‰ç½‘çº¿æ‰€ä»¥å°±æ²¡æœ‰å®‰è£…ï¼Œæ˜¯åœ¨å¼€å‘æ¿ç³»ç»Ÿè£…å®Œä¹‹ååœ¨ç³»ç»Ÿä¸­å®‰è£…çš„ã€‚å®‰è£…æ­¥éª¤åœ¨æœ¬æ–‡çš„åé¢ã€‚æ¨èè¯¥æ­¥éª¤æ‰¾æ ¹ç½‘çº¿å°†ç¯å¢ƒå®‰è£…å®Œæ•´ã€‚</p><p><img src="http://dingdm.online/step03.png" alt=""></p><p><strong>æ³¨æ„</strong></p><p>åœ¨ç³»ç»Ÿé•œåƒä¸‹è½½å®Œæˆå¹¶å®‰è£…å®Œæˆä¹‹åï¼Œç¬¬ä¸‰æ­¥ä¼šè·³å‡ºè¯¥è§é¢é…ç½®ç¯å¢ƒä¿¡æ¯ï¼ŒåŒæ—¶è¿æ¥å¼€å‘æ¿çš„æ˜¾ç¤ºå±äº®å±è¿›è¡Œå¼€å‘æ¿ç³»ç»Ÿçš„å®‰è£…ï¼Œç³»ç»Ÿçš„å®‰è£…æŒ‰ç…§æ­¥éª¤è¿›è¡Œå³å¯ã€‚ç¯å¢ƒçš„å®‰è£…éœ€è¦é…ç½®å¼€å‘æ¿çš„å±€åŸŸç½‘ipå’Œä¿¡æ¯ï¼Œä¹‹åè¿›è¡Œå®‰è£…å³å¯ã€‚</p><h4 id="ç¯å¢ƒæ­å»º">ç¯å¢ƒæ­å»º</h4><p>ç”±äºå¼€å‘æ¿çš„ç©ºé—´è¾ƒå°ï¼Œä¸”æˆ‘æ²¡æœ‰å¤–æ¥sdkçš„æƒ…å†µä¸‹ï¼Œåœ¨ç¯å¢ƒé…ç½®çš„æ—¶å€™ï¼Œè™½ç„¶æ¿å­çš„armç³»ç»Ÿæœ‰æ›¿æ¢ancodaçš„è½¯ä»¶ï¼Œä½†æ˜¯åˆ›å»ºè™šæ‹Ÿç¯å¢ƒè€—è´¹çš„ç©ºé—´è¾ƒå¤§ï¼Œå› æ­¤æˆ‘æ²¡æœ‰åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œè€Œæ˜¯ç›´æ¥åœ¨æœ¬åœ°é»˜è®¤ç¯å¢ƒä¸‹è¿›è¡Œpythonç›¸å…³ç¯å¢ƒé…ç½®ã€‚</p><p>å¦‚æœä½ çš„å¼€å‘ç¯å¢ƒåœ¨åˆ·æœºæ—¶æœªå®‰è£…ï¼Œåˆ™åœ¨åˆ·æœºæ—¶æœªå®‰è£…å¼€å‘ç¯å¢ƒæƒ…å†µåæ·»åŠ </p><pre class=" language-language-shell"><code class="language-language-shell">sudo vi ~/.bashrc# æ·»åŠ ä»¥ä¸‹å†…å®¹export PATH=/usr/local/cuda/bin:$PATHexport LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATHexport CUDA_ROOT=/usr/local/cuda</code></pre><pre class=" language-language-shell"><code class="language-language-shell">sudo vi ~/.bashrc# æœ€åä¸€è¡Œæ·»åŠ export OPENBLAS_CORETYPE=ARMV8 </code></pre><pre class=" language-language-shell"><code class="language-language-shell">sudo vi /etc/profile# æœ€åä¸€è¡Œæ·»åŠ export OPENBLAS_CORETYPE=ARMV8 </code></pre><pre class=" language-language-shell"><code class="language-language-shell">source ~/.bashrcsource /etc/profile</code></pre><p><strong>è¯¥æ­¥éª¤ä¸ºäº†é˜²æ­¢éæ³•æŒ‡ä»¤æŠ¥é”™é—®é¢˜ã€‚</strong></p><p><strong>æ³¨æ„</strong></p><p>æ¿å­ä¸Šæˆ‘ä¸æ¨èæ¢æºã€‚</p><h5 id="æ›´æ¢é»˜è®¤pythonç‰ˆæœ¬ä¸º3-6">æ›´æ¢é»˜è®¤pythonç‰ˆæœ¬ä¸º3.6</h5><p>ç”±äºæ¿å­é»˜è®¤æä¾›python2å’Œpython3ï¼Œè€Œç›´æ¥ä½¿ç”¨pythonæŒ‡å‘çš„æ˜¯2ç‰ˆæœ¬ï¼Œå› æ­¤å¯ä»¥æ›´æ”¹ä¸€ä¸‹é»˜è®¤çš„æŒ‡å‘ã€‚</p><pre class=" language-language-shell"><code class="language-language-shell">sudo rm -rf /usr/bin/pythonsudo ln -s /usr/bin/python3.6 /usr/bin/python #æŒ‡å‘é»˜è®¤ç‰ˆæœ¬ä¸º3.6</code></pre><pre class=" language-language-shell"><code class="language-language-shell">sudo vi usr/local/bin/pip# æ›´æ”¹å†…å®¹#!/usr/bin/python3 #æŒ‡å‘é»˜è®¤ç‰ˆæœ¬ä¸º3.6</code></pre><h5 id="pipå®‰è£…">pipå®‰è£…</h5><pre class=" language-language-shell"><code class="language-language-shell">sudo apt-get install python3-pip</code></pre><h5 id="matplotlibå®‰è£…">matplotlibå®‰è£…</h5><p><strong>1.19.5çš„ç‰ˆæœ¬åœ¨ä½ å®‰è£…å…¶ä»–ç¯å¢ƒçš„æ—¶å€™å¯èƒ½å­˜åœ¨bug</strong>ï¼Œæˆ‘è¿™é‡Œæ¨èç›´æ¥å®‰è£…1.19.4ç‰ˆæœ¬çš„ï¼Œå¦‚æœå­˜åœ¨äº†é»˜è®¤çš„ç‰ˆæœ¬ï¼Œå¸è½½å³å¯ã€‚</p><h5 id="åˆ·æœºæ—¶æœªå®‰è£…å¼€å‘ç¯å¢ƒæƒ…å†µ">åˆ·æœºæ—¶æœªå®‰è£…å¼€å‘ç¯å¢ƒæƒ…å†µ</h5><pre class=" language-language-shell"><code class="language-language-shell">sudo apt updatesudo apt install nvidia-jetpack</code></pre><h5 id="å‡çº§jetpack-æ ¹æ®è‡ªå·±çš„éœ€æ±‚">å‡çº§jetpack(æ ¹æ®è‡ªå·±çš„éœ€æ±‚)</h5><pre class=" language-language-shell"><code class="language-language-shell">sudo apt install nvidia-jetpacksudo apt purge cuda-repo-l4t-10-0-local-10.0.326 libvisionworks-repo libvisionworks-sfm-repo libvisionworks-tracking-reposudo apt cleansudo apt updatesudo apt list --upgradablesudo apt upgrade</code></pre><p>æ›´æ–°å®Œæˆåé‡å¯å¼€å‘æ¿ã€‚</p><pre class=" language-language-shell"><code class="language-language-shell">sudo vi /etc/apt/sources.list.d/nvidia-l4t-apt-source.list</code></pre><p>ä¿®æ”¹å†…å®¹</p><pre class=" language-language-shell"><code class="language-language-shell">deb https://repo.download.nvidia.com/jetson/common r32.6 maindeb https://repo.download.nvidia.com/jetson/ t194 r32.6 main</code></pre><p>r32.x xå³ä¸ºä½ æƒ³å‡çº§çš„ç‰ˆæœ¬ï¼Œä¿å­˜å³å¯</p><pre class=" language-language-shell"><code class="language-language-shell">sudo apt updatesudo apt dist-upgrade</code></pre><p>å‡çº§å®Œæˆä¹‹åå†æ¬¡é‡æ–°å¯åŠ¨å¼€å‘æ¿</p><pre class=" language-language-shell"><code class="language-language-shell">sudo apt depends nvidia-jetpack | awk '{print $2}' | xargs -I {} sudo apt install -y {}</code></pre><h5 id="pytorchå®‰è£…">pytorchå®‰è£…</h5><p><strong>æ³¨æ„</strong></p><p>è¿™é‡Œçš„torchå’Œtorchvisionç‰ˆæœ¬ä¸€å®šè¦å¯¹åº”ï¼Œä¸”ç‰ˆæœ¬è¦æ»¡è¶³ä½ çš„ç®—æ³•è¿è¡Œç¯å¢ƒã€‚æˆ‘è¿™é‡Œå®‰è£…çš„ç‰ˆæœ¬ä¸º1.8.0çš„torchå’Œ0.9.0çš„torchvisionã€‚</p><p><img src="http://dingdm.online/torch-torchvision.png" alt=""></p><p>1.9.0ä»¥ä¸Šçš„torchå¯¹torchvisionå¯¹åº”çš„æ—¶å€™åœ¨è®­ç»ƒyolov5çš„æ—¶å€™æœ‰bugï¼Œæ‰€ä»¥ä½¿ç”¨äº†1.8.0ã€‚</p><p>è€Œä¸”åªæœ‰1.8.0æ‰èƒ½ä½¿ç”¨torch.fxï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œä¹Ÿä¸èƒ½ä½¿ç”¨1.7.0ï¼Œshitï¼æ‰€ä»¥ä¸€å®šè¦æ³¨æ„ç®—æ³•è¦æ±‚ã€‚</p><p><strong>å®‰è£…</strong></p><p>torchä¸jetpackç‰ˆæœ¬çš„å¯¹åº”å…³ç³»</p><p><a href="https://elinux.org/Jetson_Zoo#PyTorch_.28Caffe2.29" target="_blank" rel="noopener">https://elinux.org/Jetson_Zoo#PyTorch_.28Caffe2.29</a></p><p>ç”±äºå¼€å‘æ¿åªèƒ½ä½¿ç”¨å®˜ç½‘æä¾›çš„whlå®‰è£…ï¼Œä½†æ˜¯å»å®˜ç½‘ä¸‹è½½éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œå› æ­¤æˆ‘æä¾›ä¸‹è½½åœ°å€ã€‚</p><p><a href="http://dingdm.online/torch-1.6.0-cp36-cp36m-linux_aarch64.whl" target="_blank" rel="noopener">torch-1.6.0-cp36-cp36m-linux_aarch64.whl</a></p><p><a href="http://dingdm.online/torch-1.7.0-cp36-cp36m-linux_aarch64.whl" target="_blank" rel="noopener">torch-1.7.0-cp36-cp36m-linux_aarch64.whl</a></p><p><a href="http://dingdm.online/torch-1.8.0-cp36-cp36m-linux_aarch64.whl" target="_blank" rel="noopener">torch-1.8.0-cp36-cp36m-linux_aarch64.whl</a></p><p>ä¸‹è½½å®Œæˆå</p><pre class=" language-language-shell"><code class="language-language-shell">sudo pip install torch-1.8.0-cp36-cp36m-linux_aarch64.whl</code></pre><h5 id="torchvisionå®‰è£…">torchvisionå®‰è£…</h5><pre class=" language-language-shell"><code class="language-language-shell">sudo apt-get install libjpeg-dev zlib1g-dev libpython3-dev libavcodec-dev libavformat-dev libswscale-dev</code></pre><p>ç”±äºpipæ— æ³•ä¸‹è½½æ‰€æœ‰ç‰ˆæœ¬ï¼Œå› æ­¤torchå¯¹åº”çš„ç›¸å…³ç‰ˆæœ¬éœ€è¦è‡ªè¡Œä¸‹è½½githubåœ°å€è¿›è¡Œç¼–è¯‘ï¼Œæˆ‘è¿™é‡Œæä¾›éƒ¨åˆ†ç‰ˆæœ¬ã€‚</p><p><a href="http://dingdm.online/vision-0.8.0.tar.gz" target="_blank" rel="noopener">0.8.0</a></p><p><a href="http://dingdm.online/detect.tar.gz" target="_blank" rel="noopener">0.9.0</a></p><p>å¦‚æœæŠ¥é”™fatal error: libavcodec/avcodec.h(å»ºè®®ç¼–è¯‘å‰ä¿®æ”¹ä»¥ä¸‹å†…å®¹)</p><p>æ›´æ”¹torchvisionçš„setup.pyæºç ï¼Œæ‰¾åˆ°<strong>if has ffmpeg</strong> æ”¹ä¸º<strong>if False</strong>å³å¯</p><pre class=" language-language-shell"><code class="language-language-shell">cd visionsudo python setup.py install</code></pre><p>å¦‚æœæˆ‘æ²¡æœ‰æä¾›ä½ éœ€è¦çš„ç‰ˆæœ¬ï¼Œä¸”pipä¸­ä¹Ÿæ— ç‰ˆæœ¬</p><pre class=" language-language-shell"><code class="language-language-shell">git clone --branch v0.9.0 https://github.com/pytorch/vision torchvision cd torchvisionsudo python setup.py install</code></pre><p>v0.9.0æ›´æ¢ä¸ºä½ çš„ç‰ˆæœ¬å·å³å¯ã€‚torchvisionç¼–è¯‘æ—¶é—´è¾ƒé•¿ã€‚</p><h5 id="å…¶ä»–ç¯å¢ƒ">å…¶ä»–ç¯å¢ƒ</h5><p>è¿™é‡Œæ ¹æ®ä½ çš„éœ€æ±‚æˆ–è€…requirements.txtæ–‡ä»¶è¿›è¡Œå®‰è£…å³å¯ã€‚</p><h4 id="ç®—æ³•è®­ç»ƒ">ç®—æ³•è®­ç»ƒ</h4><h5 id="è®­ç»ƒè¿‡ç¨‹">è®­ç»ƒè¿‡ç¨‹</h5><p><img src="http://dingdm.online/trainyolov5.png" alt=""></p><h5 id="æ£€æµ‹æ•ˆæœ">æ£€æµ‹æ•ˆæœ</h5><p><img src="http://dingdm.online/masktestyolov5.jpeg" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nvdia agx Xavier </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KCFæºç è§£æ</title>
      <link href="/2022/03/09/kcf-yuan-ma-jie-xi/"/>
      <url>/2022/03/09/kcf-yuan-ma-jie-xi/</url>
      
        <content type="html"><![CDATA[<h3 id="KCFæºç è§£æ">KCFæºç è§£æ</h3><h4 id="åŒçº¿æ€§æ’å€¼">åŒçº¿æ€§æ’å€¼</h4><p>ä¾‹ï¼šå°†ä¸€ä¸ªfeature mapç”±3*3æ”¾å¤§ä¸º4*4æ—¶ï¼Œå¦‚ä½•è¿›è¡Œå¤–å›´çš„å¡«å……ï¼Ÿå¡«å……çš„æ–¹å¼å³ä¸ºæ’å€¼ã€‚</p><p>æ™®é€šçš„æ’å€¼æ–¹å¼</p><p>srcä¸ºåŸå›¾çš„åƒç´ å€¼ï¼Œdstä¸ºå¡«å……åçš„ç›®æ ‡å›¾çš„åƒç´ å€¼ï¼Œè®¡ç®—å…¬å¼ä¸ºsrcX=dstX* (srcWidth/dstWidth) , srcY = dstY * (srcHeight/dstHeight)</p><p>ä½†æ˜¯è®¡ç®—ç›®æ ‡å›¾çš„åƒç´ å€¼æ—¶ä¼šå‡ºç°å°æ•°çš„æƒ…å†µï¼Œä½¿ç”¨å››èˆäº”å…¥æˆ–è€…ä¹‹é—´å»æ‰å°æ•°ä½ä¼šå¯¼è‡´æ’å€¼åçš„ç›®æ ‡å›¾å‡ºç°é©¬èµ›å…‹æˆ–è€…å¤±çœŸç°è±¡ã€‚</p><p>åŒçº¿æ€§æ’å€¼</p><p>åŒçº¿æ€§æ’å€¼ä½¿ç”¨æºå›¾åƒåƒç´ ç‚¹å‘¨å›´çœŸå®å­˜åœ¨çš„å››ä¸ªåƒç´ å€¼æ¥å†³å®šç›®æ ‡å›¾çš„åƒç´ å€¼ã€‚</p><p>å¯¹äºä¸€ä¸ªç›®çš„åƒç´ ï¼Œè®¾ç½®åæ ‡é€šè¿‡åå‘å˜æ¢å¾—åˆ°çš„æµ®ç‚¹åæ ‡ä¸º(i+u,j+v) (å…¶ä¸­iã€jå‡ä¸ºæµ®ç‚¹åæ ‡çš„æ•´æ•°éƒ¨åˆ†ï¼Œuã€vä¸ºæµ®ç‚¹åæ ‡çš„å°æ•°éƒ¨åˆ†ï¼Œæ˜¯å–å€¼[0,1)åŒºé—´çš„æµ®ç‚¹æ•°)ï¼Œåˆ™è¿™ä¸ªåƒç´ å¾—å€¼ f(i+u,j+v) å¯ç”±åŸå›¾åƒä¸­åæ ‡ä¸º (i,j)ã€(i+1,j)ã€(i,j+1)ã€(i+1,j+1)æ‰€å¯¹åº”çš„å‘¨å›´å››ä¸ªåƒç´ çš„å€¼å†³å®šï¼Œå³ï¼šf(i+u,j+v) = (1-u)(1-v)f(i,j) + (1-u)vf(i,j+1) + u(1-v)f(i+1,j) + uvf(i+1,j+1)<br>å…¶ä¸­f(i,j)è¡¨ç¤ºæºå›¾åƒ(i,j)å¤„çš„çš„åƒç´ å€¼</p><p>å‡å¦‚ç›®æ ‡å›¾çš„è±¡ç´ åæ ‡ä¸ºï¼ˆ1ï¼Œ1ï¼‰ï¼Œé‚£ä¹ˆåæ¨å¾—åˆ°çš„å¯¹åº”äºæºå›¾çš„åæ ‡æ˜¯ï¼ˆ0.75 , 0.75ï¼‰, è¿™å…¶å®åªæ˜¯ä¸€ä¸ªæ¦‚å¿µä¸Šçš„è™šæ‹Ÿè±¡ç´ ,å®é™…åœ¨æºå›¾ä¸­å¹¶ä¸å­˜åœ¨è¿™æ ·ä¸€ä¸ªè±¡ç´ ,é‚£ä¹ˆç›®æ ‡å›¾çš„è±¡ç´ ï¼ˆ1ï¼Œ1ï¼‰çš„å–å€¼ä¸èƒ½å¤Ÿç”±è¿™ä¸ªè™šæ‹Ÿè±¡ç´ æ¥å†³å®šï¼Œè€Œåªèƒ½ç”±æºå›¾çš„è¿™å››ä¸ªè±¡ç´ å…±åŒå†³å®šï¼šï¼ˆ0ï¼Œ0ï¼‰ï¼ˆ0ï¼Œ1ï¼‰ï¼ˆ1ï¼Œ0ï¼‰ï¼ˆ1ï¼Œ1ï¼‰ï¼Œè€Œç”±äºï¼ˆ0.75,0.75ï¼‰ç¦»ï¼ˆ1ï¼Œ1ï¼‰è¦æ›´è¿‘ä¸€äº›ï¼Œé‚£ä¹ˆï¼ˆ1,1ï¼‰æ‰€èµ·çš„å†³å®šä½œç”¨æ›´å¤§ä¸€äº›ï¼Œè¿™ä»å…¬å¼1ä¸­çš„ç³»æ•°uv=0.75Ã—0.75å°±å¯ä»¥ä½“ç°å‡ºæ¥ï¼Œè€Œï¼ˆ0.75,0.75ï¼‰ç¦»ï¼ˆ0ï¼Œ0ï¼‰æœ€è¿œï¼Œæ‰€ä»¥ï¼ˆ0ï¼Œ0ï¼‰æ‰€èµ·çš„å†³å®šä½œç”¨å°±è¦å°ä¸€äº›</p><p>é¦–å…ˆï¼Œåœ¨Xæ–¹å‘ä¸Šè¿›è¡Œä¸¤æ¬¡çº¿æ€§æ’å€¼è®¡ç®—ï¼Œç„¶ååœ¨Yæ–¹å‘ä¸Šè¿›è¡Œä¸€æ¬¡æ’å€¼è®¡ç®—ã€‚<br>åœ¨å›¾åƒå¤„ç†çš„æ—¶å€™ï¼Œæˆ‘ä»¬å…ˆæ ¹æ®srcX=dstX* (srcWidth/dstWidth) ,srcY = dstY * (srcHeight/dstHeight)æ¥è®¡ç®—ç›®æ ‡åƒç´ åœ¨æºå›¾åƒä¸­çš„ä½ç½®ï¼Œè¿™é‡Œè®¡ç®—çš„srcXå’ŒsrcYä¸€èˆ¬éƒ½æ˜¯æµ®ç‚¹æ•°ï¼Œæ¯”å¦‚fï¼ˆ1.2, 3.4ï¼‰è¿™ä¸ªåƒç´ ç‚¹æ˜¯è™šæ‹Ÿå­˜åœ¨çš„ï¼Œå…ˆæ‰¾åˆ°ä¸å®ƒä¸´è¿‘çš„å››ä¸ªå®é™…å­˜åœ¨çš„åƒç´ ç‚¹<br>ã€€ã€€ï¼ˆ1ï¼Œ3ï¼‰ ï¼ˆ2ï¼Œ3ï¼‰<br>ã€€ã€€ï¼ˆ1ï¼Œ4ï¼‰ ï¼ˆ2ï¼Œ4ï¼‰<br>å†™æˆf(i+u,j+v)çš„å½¢å¼ï¼Œåˆ™u=0.2,v=0.4, i=1, j=3ï¼Œf(i+u,j+v) = (1-u)(1-v)f(i,j) + (1-u)vf(i,j+1) + u(1-v)f(i+1,j) + uvf(i+1,j+1) ã€‚</p><p><strong>çº¿æ€§æ’å€¼ç©ºé—´å› å­çš„å¼•å…¥</strong></p><p>æºå›¾åƒä¸ç›®æ ‡å›¾åƒå‡ ä½•ä¸­å¿ƒçš„å¯¹é½</p><p>srcX=dstX* (srcWidth/dstWidth)+0.5*(srcWidth/dstWidth-1)</p><p>æˆ‘ä»¬åœ¨åŸå§‹çš„æµ®ç‚¹åæ ‡ä¸ŠåŠ ä¸Šäº†0.5*<em>(srcWidth/dstWidth-1)è¿™æ ·ä¸€ä¸ªæ§åˆ¶å› å­ï¼Œè¿™é¡¹çš„ç¬¦å·å¯æ­£å¯è´Ÿï¼Œä¸srcWidth/dstWidthçš„æ¯”å€¼ä¹Ÿå°±æ˜¯å½“å‰æ’å€¼æ˜¯æ‰©å¤§è¿˜æ˜¯ç¼©å°å›¾åƒæœ‰å…³ï¼Œå‡è®¾æºå›¾åƒæ˜¯3</em>3ï¼Œä¸­å¿ƒç‚¹åæ ‡ï¼ˆ1ï¼Œ1ï¼‰ç›®æ ‡å›¾åƒæ˜¯9**9ï¼Œä¸­å¿ƒç‚¹åæ ‡ï¼ˆ4ï¼Œ4ï¼‰ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œæ’å€¼æ˜ å°„çš„æ—¶å€™ï¼Œå°½å¯èƒ½å¸Œæœ›å‡åŒ€çš„ç”¨åˆ°æºå›¾åƒçš„åƒç´ ä¿¡æ¯ï¼Œæœ€ç›´è§‚çš„å°±æ˜¯ï¼ˆ4,4ï¼‰æ˜ å°„åˆ°ï¼ˆ1,1ï¼‰ç°åœ¨ç›´æ¥è®¡ç®—srcX=4**3/9=1.3333ï¼=1ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨æ’å€¼çš„æ—¶å€™æ‰€åˆ©ç”¨çš„åƒç´ é›†ä¸­åœ¨å›¾åƒçš„å³ä¸‹æ–¹ï¼Œè€Œä¸æ˜¯å‡åŒ€åˆ†å¸ƒæ•´ä¸ªå›¾åƒã€‚</p><h4 id="é«˜æ–¯æ ¸å‡½æ•°">é«˜æ–¯æ ¸å‡½æ•°</h4><p><img src="http://dingdm.online/WX20220309-111917.png" alt=""></p><p>Ïƒæ§åˆ¶é«˜æ–¯æ ¸å‡½æ•°çš„å±€éƒ¨ä½œç”¨èŒƒå›´ã€‚å½“ x å’Œxâ€²çš„æ¬§å¼è·ç¦»å¤„äºæŸä¸€ä¸ªåŒºé—´èŒƒå›´å†…çš„æ—¶å€™ï¼Œå‡è®¾å›ºå®š xâ€²ï¼Œ k(x,xâ€²) éšxçš„å˜åŒ–è€Œå˜åŒ–çš„ç›¸å½“æ˜¾è‘—ã€‚</p><p>Ïƒ=1</p><p><img src="http://dingdm.online/WX20220309-112058.png" alt=""></p><p>Ïƒ=5</p><p><img src="http://dingdm.online/WX20220309-112108.png" alt=""></p><h4 id="hogç‰¹å¾æå–">hogç‰¹å¾æå–</h4><p>åœ¨HOGç‰¹å¾æè¿°ç¬¦ä¸­ï¼Œæ¢¯åº¦æ–¹å‘çš„åˆ†å¸ƒï¼Œä¹Ÿå°±æ˜¯æ¢¯åº¦æ–¹å‘çš„ç›´æ–¹å›¾è¢«è§†ä½œç‰¹å¾ã€‚å›¾åƒçš„æ¢¯åº¦(xå’Œyå¯¼æ•°)éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºè¾¹ç¼˜å’Œæ‹è§’(å¼ºåº¦çªå˜çš„åŒºåŸŸ)å‘¨å›´çš„æ¢¯åº¦å¹…åº¦å¾ˆå¤§ï¼Œå¹¶ä¸”è¾¹ç¼˜å’Œæ‹è§’æ¯”å¹³å¦åŒºåŸŸåŒ…å«æ›´å¤šå…³äºç‰©ä½“å½¢çŠ¶çš„ä¿¡æ¯ã€‚</p><p>åœ¨æ¯ä¸ªåƒç´ å¤„ï¼Œæ¢¯åº¦æœ‰ä¸€ä¸ªå¤§å°å’Œä¸€ä¸ªæ–¹å‘ã€‚xæ–¹å‘æ¢¯åº¦å›¾ä¼šå¼ºåŒ–å‚ç›´è¾¹ç¼˜ç‰¹å¾ï¼Œyæ–¹å‘æ¢¯åº¦å›¾ä¼šå¼ºåŒ–æ°´å¹³è¾¹ç¼˜ç‰¹å¾ã€‚è¿™å°±ä½¿å¾—æœ‰ç”¨çš„ç‰¹å¾ï¼ˆè½®å»“ï¼‰å¾—åˆ°ä¿ç•™ï¼Œæ— å…³ä¸é‡è¦çš„ä¿¡æ¯è¢«å»é™¤ã€‚</p><p>æŠŠæ•´ä¸ªå›¾åƒåˆ’åˆ†ä¸ºè‹¥å¹²ä¸ª8x8çš„å°å•å…ƒï¼Œç§°ä¸ºcellï¼Œå¹¶è®¡ç®—æ¯ä¸ªcellçš„æ¢¯åº¦ç›´æ–¹å›¾ã€‚</p><p>è®¡ç®—cellä¸­åƒç´ çš„æ¢¯åº¦ç›´æ–¹å›¾ï¼Œå…ˆå°†è§’åº¦èŒƒå›´åˆ†æˆ9ä»½ï¼Œä¹Ÿå°±æ˜¯9 binsï¼Œæ¯20Â°ä¸ºä¸€ä¸ªå•å…ƒï¼Œä¹Ÿå°±æ˜¯è¿™äº›åƒç´ å¯ä»¥æ ¹æ®è§’åº¦åˆ†ä¸º9ç»„ã€‚å°†æ¯ä¸€ä»½ä¸­æ‰€æœ‰åƒç´ å¯¹åº”çš„æ¢¯åº¦å€¼è¿›è¡Œç´¯åŠ ï¼Œå¯ä»¥å¾—åˆ°9ä¸ªæ•°å€¼ã€‚ç›´æ–¹å›¾å°±æ˜¯ç”±è¿™9ä¸ªæ•°å€¼ç»„æˆçš„æ•°ç»„ï¼Œå¯¹åº”äºè§’åº¦0ã€20ã€40ã€60â€¦ 160ã€‚å¦‚æœæŸä¸ªåƒç´ çš„æ¢¯åº¦è§’åº¦å¤§äº160åº¦ï¼Œä¹Ÿå°±æ˜¯åœ¨160åº¦åˆ°180åº¦ä¹‹é—´ï¼Œé‚£ä¹ˆæŠŠè¿™ä¸ªåƒç´ å¯¹åº”çš„æ¢¯åº¦å€¼æŒ‰æ¯”ä¾‹åˆ†ç»™0åº¦å’Œ160åº¦å¯¹åº”çš„binã€‚</p><p>HOGå°†8Ã—8çš„ä¸€ä¸ªåŒºåŸŸä½œä¸ºä¸€ä¸ªcellï¼Œå†ä»¥2Ã—2ä¸ªcellä½œä¸ºä¸€ç»„ï¼Œç§°ä¸ºblockã€‚ç”±äºæ¯ä¸ªcellæœ‰9ä¸ªå€¼ï¼Œ2Ã—2ä¸ªcellåˆ™æœ‰36ä¸ªå€¼ï¼ŒHOGæ˜¯é€šè¿‡æ»‘åŠ¨çª—å£çš„æ–¹å¼æ¥å¾—åˆ°blockçš„</p><pre class=" language-language-matlab"><code class="language-language-matlab">feature.hog(image, orientations=9, pixels_per_cell=(16, 16),                    cells_per_block=(2, 2), visualize=True)</code></pre><ul><li><code>image</code>ï¼šå¯ä»¥æ˜¯ç°åº¦å›¾æˆ–è€…å½©è‰²å›¾ï¼›</li><li>orientationsï¼šå°±æ˜¯æŠŠ180åº¦åˆ†æˆå‡ ä»½ï¼Œä¹Ÿå°±æ˜¯binçš„æ•°é‡ï¼›</li><li><code>pixels_per_cell</code>ï¼šä¸€ä¸ªcellé‡ŒåŒ…å«çš„åƒç´ ä¸ªæ•°ï¼›</li><li><code>cells_per_block</code>ï¼šä¸€ä¸ªblockåŒ…å«çš„cellä¸ªæ•°ï¼›</li><li><code>visualize</code>ï¼šæ˜¯å¦è¿”å›ä¸€ä¸ªhogå›¾åƒç”¨äºæ˜¾ç¤º</li></ul><h4 id="å‚æ•°è®¾ç½®">å‚æ•°è®¾ç½®</h4><pre class=" language-language-matlab"><code class="language-language-matlab">% é«˜æ–¯æ ¸å‡½æ•°kernel.type = 'gaussian';% é¢å¤–åŒºåŸŸï¼Œæ¯å¸§æ£€æµ‹çš„èŒƒå›´padding = 1.5;% æ§åˆ¶è¿‡æ‹Ÿåˆçš„å²­å›å½’å‚æ•°ï¼Œå³æƒ©ç½šå› å­lambda = 1e-4;% ç©ºé—´å¸¦å®½output_sigma_factor = 0.1;% çº¿æ€§æ’å€¼çš„æ§åˆ¶å› å­interp_factor = 0.02;% é«˜æ–¯æ ¸å‡½æ•°çš„å¸¦å®½ï¼Œæ§åˆ¶é«˜æ–¯æ ¸å‡½æ•°çš„å±€éƒ¨ä½œç”¨èŒƒå›´kernel.sigma = 0.5;kernel.poly_a = 1;kernel.poly_b = 9;% ä½¿ç”¨hogç‰¹å¾æå–features.hog = true;% binçš„æ•°é‡features.hog_orientations = 9;% cellçš„å¤§å°cell_size = 4;</code></pre><h4 id="tracker">tracker</h4><pre class=" language-language-matlab"><code class="language-language-matlab">function [positions, time] = tracker(video_path, img_files, pos, target_sz, ...padding, kernel, lambda, output_sigma_factor, interp_factor, cell_size, ...features, show_visualization)% åˆ¤æ–­æ¡†é€‰åŒºåŸŸå¤§å°ï¼ŒåŒºåŸŸè¾ƒå¤§å‡å°åˆ†è¾¨ç‡ï¼Œå¹¶éæå–å…¨éƒ¨ç»†èŠ‚resize_image = (sqrt(prod(target_sz)) >= 100);if resize_image,pos = floor(pos / 2);target_sz = floor(target_sz / 2);end% è®¾ç½®æ£€æµ‹çª—å£ï¼Œå¤§å°ä¸ºæ¡†é€‰åŒºåŸŸçš„ 1+paddingå€window_sz = floor(target_sz * (1 + padding));% è®¡ç®—å¸¦å®½output_sigma = sqrt(prod(target_sz)) * output_sigma_factor / cell_size;% å‚…ç«‹å¶å˜æ¢åˆ°é¢‘åŸŸè¿›è¡Œå¤„ç†ï¼Œgaussian_shaped_labelsè¿›è¡Œç§»ä½é‡‡æ ·yf = fft2(gaussian_shaped_labels(output_sigma, floor(window_sz / cell_size)));  % ä¸ºäº†é˜²æ­¢å‚…ç«‹å¶å˜æ¢ä¹‹åé¢‘åŸŸä¿¡å·æ³„éœ²ï¼Œè¿›è¡ŒåŠ çª—ï¼Œçª—å‡½æ•°å‚è€ƒä¹‹å‰kcfç®—æ³•ç›¸å…³çŸ¥è¯†cos_window = hann(size(yf,1)) * hann(size(yf,2))';  % å›¾åƒè¿½è¸ªå¯è§†åŒ–if show_visualization,update_visualization = show_video(img_files, video_path, resize_image);end  % FPSè®¡ç®—time = 0;positions = zeros(numel(img_files), 2);  % é€å¸§è·Ÿè¸ªï¼Œå³æ•°æ®é›†ä¸­çš„å›¾ç‰‡for frame = 1:numel(img_files),% å›¾ç‰‡è¯»å–ï¼Œå¹¶è½¬æ¢ä¸ºç°åº¦å›¾im = imread([video_path img_files{frame}]);if size(im,3) > 1,im = rgb2gray(im);endif resize_image,im = imresize(im, 0.5);endtic()    % ç¬¬ä¸€å¸§ä¹‹åçš„å›¾åƒè¿½è¸ªå¤„ç†ï¼Œå¯ä»¥å…ˆçœ‹ä»£ç ä¸‹æ–¹å¯¹ç¬¬ä¸€å¸§çš„åˆ†ç±»å™¨è®­ç»ƒé€»è¾‘if frame > 1,% åœ¨æ¥ä¸‹æ¥çš„å›¾åƒå¸§ä¸­æ ¹æ®è®¾å®šçš„æ£€æµ‹æ¡†å’Œä¸Šä¸€å¸§çš„è¿½è¸ªä½ç½®æå–æ£€æµ‹åŒºåŸŸpatch = get_subwindow(im, pos, window_sz);% å¯¹ç‰¹å¾åŒºåŸŸè¿›è¡Œå‚…ç«‹å¶å˜æ¢zf = fft2(get_features(patch, features, cell_size, cos_window));switch kernel.typecase 'gaussian',  % è®¡ç®—æ¯ä¸ªé‡‡æ ·çš„é«˜æ–¯å“åº”ï¼Œä¹Ÿå°±æ˜¯ä½ç»´æ˜ å°„åˆ°é«˜ç»´ä¹‹åé«˜æ–¯æ ¸å‡½æ•°çš„å¿«é€Ÿè®¡ç®—ç»“æœkzf = gaussian_correlation(zf, model_xf, kernel.sigma);case 'polynomial',kzf = polynomial_correlation(zf, model_xf, kernel.poly_a, kernel.poly_b);case 'linear',kzf = linear_correlation(zf, model_xf);end% å½’ä¸€åŒ–é€†å‚…ç«‹å¶å˜æ¢åçš„æ—¶åŸŸå›¾response = real(ifft2(model_alphaf .* kzf));% è·å–æœ€å¤§å“åº”ä½ç½®[vert_delta, horiz_delta] = find(response == max(response(:)), 1);% å¤„ç†è¿½è¸ªæ—¶ç›®æ ‡ä¸ç§»åŠ¨è€Œå¯¼è‡´çš„å³°å€¼ä¸åœ¨ä¸­å¿ƒçš„æƒ…å½¢if vert_delta > size(zf,1) / 2, vert_delta = vert_delta - size(zf,1);endif horiz_delta > size(zf,2) / 2,horiz_delta = horiz_delta - size(zf,2);endpos = pos + cell_size * [vert_delta - 1, horiz_delta - 1];end% è‹¥æ˜¯ç¬¬ä¸€å¸§ï¼Œè·å–ç¬¬ä¸€å¸§æ£€æµ‹çš„åŒºåŸŸï¼Œå¦åˆ™æ˜¯ç¬¬ä¸€å¸§ä¹‹åçš„æ£€æµ‹ä½ç½®ä¿¡æ¯patch = get_subwindow(im, pos, window_sz);% è·å–ç¬¬ä¸€å¸§æ£€æµ‹åŒºåŸŸçš„ç‰¹å¾çŸ©é˜µå¹¶è¿›è¡Œå‚…ç«‹å¶å˜æ¢åˆ°é¢‘åŸŸæˆ–åé¢å¸§çš„ç‰¹å¾çŸ©é˜µxf = fft2(get_features(patch, features, cell_size, cos_window));% æ ¹æ®ä¸åŒçš„æ ¸å‡½æ•°è°ƒç”¨ä¸åŒçš„å¤„ç†æ–¹æ³•switch kernel.typecase 'gaussian',  % è·å–é«˜æ–¯å“åº”ï¼Œä¹Ÿå°±æ˜¯ä½ç»´æ˜ å°„åˆ°é«˜ç»´ä¹‹åé«˜æ–¯æ ¸å‡½æ•°çš„å¿«é€Ÿè®¡ç®—ç»“æœkf = gaussian_correlation(xf, xf, kernel.sigma);case 'polynomial',kf = polynomial_correlation(xf, xf, kernel.poly_a, kernel.poly_b);case 'linear',kf = linear_correlation(xf, xf);end% å¿«é€Ÿè®¡ç®— lambdaä¸ºå²­å›å½’çš„æƒ©ç½šå› å­ yfä¸ºæ£€æµ‹æ¡†çš„é«˜æ–¯æ ‡ç­¾ï¼Œkfä¸ºhogç‰¹å¾æå–åç‰¹å¾çŸ©é˜µçš„é«˜æ–¯å“åº”alphaf = yf ./ (kf + lambda);    % ç¬¬ä¸€å¸§çš„åˆ†ç±»å™¨è®­ç»ƒå‚æ•°ï¼Œä¸ºä¸Šé¢è®¡ç®—çš„alphafåˆ†ç±»å™¨å‚æ•°å’Œæ£€æµ‹åŒºåŸŸç‰¹å¾çŸ©é˜µå˜æ¢åçš„é¢‘åŸŸä¿¡æ¯if frame == 1, model_alphaf = alphaf;model_xf = xf;else% interp_factorä½œä¸ºæ›´æ–°ç³»æ•°æ›´æ–°åˆ†ç±»å™¨å‚æ•°ï¼Œç†è§£ä¸ºæ’å€¼è¿ç®—ä¿ç•™ä¸Šä¸€æ¬¡åŒºåŸŸæ£€æµ‹çš„ä¿¡æ¯ï¼Ÿmodel_alphaf = (1 - interp_factor) * model_alphaf + interp_factor * alphaf;model_xf = (1 - interp_factor) * model_xf + interp_factor * xf;endpositions(frame,:) = pos;time = time + toc();% å¯è§†åŒ–if show_visualization,box = [pos([2,1]) - target_sz([2,1])/2, target_sz([2,1])];stop = update_visualization(frame, box);if stop, break, enddrawnowendendif resize_image,positions = positions * 2;endend</code></pre><h4 id="é«˜æ–¯å›å½’">é«˜æ–¯å›å½’</h4><pre class=" language-language-matlab"><code class="language-language-matlab">function labels = gaussian_shaped_labels(sigma, sz)% å‰é¢æ˜¯é«˜æ–¯Ïƒï¼Œåé¢æ˜¯ä¸€ç»´å‘é‡ï¼Œæ˜¯æ£€æµ‹æ¡†ä»¥cellä¸ºå•ä½åè®¡ç®—çš„xï¼Œyæ‰€åŒ…å«çš„4*4cellçš„ä¸ªæ•°  % ndgridçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸º 1:xè½´çš„cellä¸ªæ•°(ä¸ºå•¥å‡å»xçš„ä¸€åŠå•Š) ç¬¬äºŒä¸ªåŒç†ä¸ºyè½´æ–¹å‘  % ndgridå‡½æ•°çš„ä½œç”¨ä¸»è¦æ˜¯ç”¨äºä½ç»´åˆ°é«˜ç»´çš„æ˜ å°„  % rsçš„åˆ—æ•°ç­‰äºcsçš„åˆ—æ•°ï¼Œè€Œcsçš„è¡Œæ•°ç­‰äºrsçš„è¡Œæ•°ï¼Œå³rså¤åˆ¶äº†csçš„åˆ—ï¼Œcså¤åˆ¶äº†rsçš„è¡Œã€‚rså‚ç›´äºcsï¼Œcsæœ‰16ä¸ªåæ ‡ç‚¹ï¼Œæ‰€ä»¥rsæœ‰16åˆ—ï¼Œè€Œcså‚ç›´äºrsï¼Œrsæœ‰38ä¸ªåæ ‡ç‚¹ï¼Œæ‰€ä»¥csæœ‰18è¡Œã€‚è¿™æ ·ä½ç»´åˆ°é«˜ç»´å°±æ˜ å°„å®Œæˆäº†[rs, cs] = ndgrid((1:sz(1)) - floor(sz(1)/2), (1:sz(2)) - floor(sz(2)/2));  % rsæ˜¯ä¸€ä¸ªçŸ©é˜µ 1åˆ°xè½´æ¬¡æ•°å‡æ¬¡æ•°çš„ä¸€åŠ 1åˆ°æœ€åä¸€ä¸ªå€¼æ¯ä¸ªä»¥è¡Œä¸ºåŸºå‡†æ„æˆçŸ©é˜µ csæ˜¯yè½´ ä»¥åˆ—ä¸ºåŸºå‡†æ„æˆçŸ©é˜µ  % åœ¨é«˜ç»´çš„å›¾åƒä¸Šè®¡ç®—é«˜æ–¯å‡½æ•° è·å–æ£€æµ‹æ¡†å†…çš„ç‰¹å¾ä¿¡æ¯labels = exp(-0.5 / sigma^2 * (rs.^2 + cs.^2));% æ£€æµ‹åŒºåŸŸå†…çš„å¾ªç¯ç§»ä½æ“ä½œï¼Œåˆ—ç§»ä½å’Œè¡Œç§»ä½labels = circshift(labels, -floor(sz(1:2) / 2) + 1);  % ä¸ºä»€ä¹ˆè¦ç¡®å®šç§»ä½åˆ°å·¦ä¸Šè§’å‘¢assert(labels(1,1) == 1)end</code></pre><h4 id="é«˜æ–¯å“åº”">é«˜æ–¯å“åº”</h4><pre class=" language-language-matlab"><code class="language-language-matlab">% è¾“å…¥ä¸¤ä¸ªé¢‘ç‡åŸŸä¸Šçš„å°ºå¯¸å®Œå…¨ç›¸åŒçš„ä¸¤ä¸ªä¸‰ç»´çŸ©é˜µxf(å½“å‰å¸§ç‰¹å¾çŸ©é˜µçš„å‚…ç«‹å¶å˜æ¢)ï¼Œyf(ä¸Šä¸€å¸§ç‰¹å¾çŸ©é˜µçš„å‚…ç«‹å¶å˜æ¢)ä»¥åŠä¸»å‡½æ•°ä¸­é€‰æ‹©çš„é«˜æ–¯å¸¦å®½gaussian.sigam% è¿™é‡Œä¹Ÿå°±æ˜¯ä½¿ç”¨é«˜æ–¯æ ¸å°†ä½ç»´æ˜ å°„åˆ°é«˜ç»´ä¹‹åçš„ä½ç»´è®¡ç®—æ–¹å¼function kf = gaussian_correlation(xf, yf, sigma)N = size(xf,1) * size(xf,2);% xxå’Œyyç­‰äºxfå’Œyfä¸­å„å…ƒç´ çš„æ¨¡çš„å¹³æ–¹å’Œå†é™¤ä»¥Nï¼Œéƒ½æ˜¯å®æ•°xx = xf(:)' * xf(:) / N; yy = yf(:)' * yf(:) / N; % xyfç­‰äºxfä¸yfçš„å…±è½­çŸ©é˜µç‚¹ä¹˜ xyf = xf .* conj(yf);% xyfç»è¿‡å‚…é‡Œå¶åå˜æ¢å›åˆ°æ—¶åŸŸï¼Œå–å®éƒ¨å¹¶å°†ç¬¬ä¸‰ç»´åº¦ä¸Šçš„å€¼æ±‚å’Œï¼Œæœ€åå¾—åˆ°å°ºå¯¸ä¸è¾“å…¥xfå’Œyfç›¸åŒçš„äºŒç»´çŸ©é˜µxy xy = sum(real(ifft2(xyf)), 3); % ç”¨xx+yy-2xyå†é™¤ä»¥xfä¸­çš„å…ƒç´ æ•°ï¼Œç„¶åä¹˜ä»¥é«˜æ–¯æ ¸å‡½æ•°ï¼Œæœ€åç»è¿‡å‚…é‡Œå¶å˜æ¢å¾—åˆ°æ‰€æœ‰ä½ç½®çš„é«˜æ–¯å“åº”kf = fft2(exp(-1 / sigma^2 * max(0, (xx + yy - 2 * xy) / numel(xf))));end</code></pre><h4 id="HOGç‰¹å¾æå–">HOGç‰¹å¾æå–</h4><pre class=" language-language-matlab"><code class="language-language-matlab">function x = get_features(im, features, cell_size, cos_window)if features.hog,% hogç‰¹å¾æå–x = double(fhog(single(im) / 255, cell_size, features.hog_orientations));x(:,:,end) = [];endif features.gray,x = double(im) / 255;x = x - mean(x(:));endif ~isempty(cos_window),  % åŠ çª—å‡½æ•°çš„å¤„ç†x = bsxfun(@times, x, cos_window);endend</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒè¿½è¸ª </category>
          
      </categories>
      
      
        <tags>
            
            <tag> KCF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KCFç®—æ³•ç›¸å…³çŸ¥è¯†</title>
      <link href="/2022/03/07/kcf-suan-fa-xiang-guan-zhi-shi/"/>
      <url>/2022/03/07/kcf-suan-fa-xiang-guan-zhi-shi/</url>
      
        <content type="html"><![CDATA[<h3 id="KCFç®—æ³•ç›¸å…³çŸ¥è¯†">KCFç®—æ³•ç›¸å…³çŸ¥è¯†</h3><h4 id="ç›¸å…³æ»¤æ³¢">ç›¸å…³æ»¤æ³¢</h4><p>äº’ç›¸å…³ä¸å­ç›¸å…³</p><p><img src="http://dingdm.online/WX20220307-201016.png" alt=""></p><p>å›¾åƒè¿½è¸ª</p><p>è¾“å…¥ç¬¬ä¸€å¸§ï¼Œé€‰å®šè¿½è¸ªåŒºåŸŸæå–ç‰¹å¾ï¼Œè®­ç»ƒå¾—åˆ°ç›¸å…³æ»¤æ³¢å™¨ã€‚å¯¹ä¸ä¹‹åçš„æ¯ä¸€å¸§ï¼Œè£å‰ªä¹‹å‰çš„é¢„æµ‹åŒºåŸŸï¼Œè¿›è¡Œç‰¹å¾æå–ï¼ŒåŠ çª—å‡½æ•°è¿›è¡ŒFFTå˜æ¢ï¼Œç„¶åä¸ç›¸å…³æ»¤æ³¢å™¨ç›¸ä¹˜ï¼Œç»“æœåšIFFTï¼Œæœ€å¤§å“åº”ç‚¹æ‰€åœ¨çš„åŒºåŸŸå³ä¸ºè¦è¿½è¸ªç›®æ ‡çš„ä½ç½®ï¼Œä½¿ç”¨æ–°ä½ç½®è¿›è¡Œæ–°çš„ç›¸å…³æ»¤æ³¢å™¨çš„è®­ç»ƒåœ¨è¿›è¡Œé¢„æµ‹ã€‚</p><h4 id="å²­å›å½’">å²­å›å½’</h4><p><a href="https://blog.csdn.net/weixin_44225602/article/details/112912067" target="_blank" rel="noopener">å¯å‚è€ƒå†…å®¹</a></p><p>è‡ªå·±çš„ç†è§£</p><h5 id="ä¼˜åŒ–åŸç†">ä¼˜åŒ–åŸç†</h5><p>æœ€å°äºŒä¹˜æ³•å­˜åœ¨çš„é—®é¢˜ï¼šå½“è‡ªå˜é‡å­˜åœ¨çº¿æ€§å…³ç³»æ—¶ï¼Œæ±‚çš„çš„å›å½’ç³»æ•°æ³¢åŠ¨è¾ƒå¤§ã€‚</p><p>ä¸”å­˜åœ¨çº¿æ€§å…³ç³»æ—¶ï¼ŒçŸ©é˜µçš„å¥‡å¼‚å€¼æ¥è¿‘0ã€‚</p><p>å²­å›å½’åœ¨æœ€å°äºŒä¹˜æ³•çš„åŸºç¡€ä¸Šæ·»åŠ kå€¼ï¼Œkå€¼ç”¨äºæ”¹å˜å•ä½çŸ©é˜µçš„å¯¹è§’çº¿å€¼ã€‚</p><p>å¼•å…¥kä¸ºäº†è§£å†³åœ¨è‡ªå˜é‡å…·æœ‰çº¿æ€§å…³ç³»æ—¶å¯¼è‡´è®¡ç®—æœ€å°äºŒä¹˜æ³•æ—¶çš„ä¸æ»¡ç§©çš„æƒ…å†µã€‚</p><h5 id="Kå€¼çš„é€‰å–">Kå€¼çš„é€‰å–</h5><p>ç”±äºå¼•å…¥kä¹‹åå±äºæœ‰åä¼°è®¡ï¼Œå› æ­¤kçš„å€¼ä¸åº”è¿‡å¤§æˆ–è¿‡å°ã€‚</p><p>é€‰å–kå€¼æ—¶åº”è€ƒè™‘ç°å®æ„ä¹‰ï¼Œé˜²æ­¢å‡ºç°è‡ªå˜é‡çš„å€¼å·®è·è¿‡å¤§æ—¶ä¸”å…·æœ‰çº¿æ€§å…³ç³»æ—¶å¯¼è‡´çš„æ— ç°å®æ„ä¹‰çš„é—®é¢˜(ç¬¦å·)</p><p>kå€¼çš„é€‰å–åº”åœ¨è‡ªå˜é‡ç¨³å®šä¸‹çš„å‰æä¸‹è¿›è¡Œé€‰å–ã€‚</p><h5 id="å²­å›å½’è‡ªå˜é‡çš„é€‰å–">å²­å›å½’è‡ªå˜é‡çš„é€‰å–</h5><p>è‡ªå˜é‡åœ¨ç¨³å®šåå¯¹å› å˜é‡å½±å“è¾ƒä½çš„ä¸äºˆè€ƒè™‘ã€‚</p><p>è‡ªå˜é‡ä»¥æ³¢åŠ¨å½¢å¼ç¨³å®šçš„ä¸äºˆè€ƒè™‘ã€‚</p><p>å»é™¤è‡ªå˜é‡åå†æ¬¡è¿›è¡Œå²­å›å½’è¾ƒå¥½çš„ä¸äºˆè€ƒè™‘ã€‚</p><h4 id="å‚…ç«‹å¶å˜æ¢ä¸é€†å‚…ç«‹å¶å˜æ¢">å‚…ç«‹å¶å˜æ¢ä¸é€†å‚…ç«‹å¶å˜æ¢</h4><p>åœ¨å›¾åƒå¤„ç†ä¸­ï¼Œå°†ç©ºé—´åŸŸè½¬æ¢ä¸ºé¢‘åŸŸã€‚</p><p>åœ¨é¢‘åŸŸä¸­å¯¹åŸå›¾åƒçš„ç›¸å…³ç»†èŠ‚å¯¹åº”åˆ°é«˜é¢‘å’Œä½é¢‘è¿›è¡Œå›¾åƒå¤„ç†ã€‚</p><p>ä½¿ç”¨é€†å‚…ç«‹å¶å˜æ¢å°†å¤„ç†å®Œæˆçš„é¢‘åŸŸå›¾è½¬æ¢ä¸ºå›¾åƒã€‚</p><h4 id="å¾ªç¯çŸ©é˜µ">å¾ªç¯çŸ©é˜µ</h4><p>å–æ•°åŸŸa1-anï¼Œåˆ™å¾ªç¯çŸ©é˜µä¸º</p><p><img src="http://dingdm.online/WX20220308-150152.png" alt=""></p><p>å³é™¤ç¬¬ä¸€è¡Œå…ƒç´ ä¹‹å¤–ï¼Œå…¶ä»–è¡Œéƒ½æ˜¯ç”±ç¬¬ä¸€è¡Œå…ƒç´ è¿›è¡Œå¾ªç¯ç§»ä½å¾—åˆ°çš„ã€‚</p><h4 id="å¾ªç¯ç§»ä½">å¾ªç¯ç§»ä½</h4><p>å¯¹äºè¾“å…¥å›¾åƒæ¥è¯´ï¼Œå…¶å®é™…æ˜¯äºŒç»´çš„ï¼Œä½†åœ¨å…¬å¼ä¸­å¯¹äºè¾“å…¥ x çš„å®šä¹‰å¾€å¾€æ˜¯ä¸€ä¸ªä¸€ç»´åˆ—å‘é‡ã€‚åº”ç†è§£ä¸ºå°†å›¾åƒé€å…ƒç´ ç”±äºŒç»´æ‹‰ä¸ºä¸€ç»´ï¼Œå¾—åˆ°å¾ªç¯çŸ©é˜µçš„ç¬¬ä¸€è¡Œï¼Œä¹‹åå†è¿›è¡Œä¸€ç»´çš„å¾ªç¯ç§»ä½å¾—åˆ°å¾ªç¯çŸ©é˜µã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>å®é™…ä¸­å›¾åƒçš„å¾ªç¯ç§»ä½å¹¶ä¸æ˜¯çœŸæ­£å­˜åœ¨çš„ï¼Œåªæ˜¯ä¸€ç§å‡è®¾ã€‚æœ‰äº†è¿™ä¸ªå‡è®¾ï¼Œæ‰èƒ½åˆ©ç”¨å¾ªç¯çŸ©é˜µçš„æ€§è´¨ï¼Œå°†ç›¸å…³æ“ä½œè½¬æ¢ä¸ºé¢‘åŸŸçš„å·ç§¯æ“ä½œ</strong>ï¼Œä»¥è¾¾åˆ°å‡å°‘è®¡ç®—é‡ï¼Œæå‡è·Ÿè¸ªé€Ÿåº¦çš„æ•ˆæœã€‚</p><h4 id="æ ¸å‡½æ•°">æ ¸å‡½æ•°</h4><p><strong>æ ¸å‡½æ•°æ˜¯äºŒå…ƒå‡½æ•°ï¼Œè¾“å…¥æ˜¯æ˜ å°„ä¹‹å‰çš„ä¸¤ä¸ªå‘é‡ï¼Œå…¶è¾“å‡ºç­‰ä»·äºä¸¤ä¸ªå‘é‡æ˜ å°„ä¹‹åçš„å†…ç§¯ã€‚</strong></p><p>å³å°†ä½ç»´æ˜ å°„é«˜ç»´ï¼Œç„¶è€Œé«˜ç»´çš„å¤æ‚è®¡ç®—å¯ä»¥é€šè¿‡ä½ç»´çš„ç®€å•è®¡ç®—æ¥è·å–ã€‚</p><p><img src="http://dingdm.online/WX20220308-151343.png" alt=""></p><p><img src="http://dingdm.online/WX20220308-151419.png" alt=""></p><h4 id="æ ‡é‡ç§¯">æ ‡é‡ç§¯</h4><p><img src="http://dingdm.online/1046925-20200204093255306-1956874066.png" alt=""></p><p>å‘é‡ ğ‘Ÿ å¯¹ ğ‘  ä½œæŠ•å½±ï¼Œå¾—åˆ° ğ‘Ÿğ‘ğ‘œğ‘ ğ›½ï¼Œå†å°†æŠ•å½±çš„å¤§å° |ğ‘Ÿ|ğ‘ğ‘œğ‘ ğ›½ å’Œ ğ‘  å‘é‡çš„å¤§å° |ğ‘ | ç›¸ä¹˜ï¼ˆå¯ä»¥äº¤æ¢ï¼Œä¸ç®¡å“ªä¸ªå‘é‡å¯¹å¦ä¸€ä¸ªå‘é‡ä½œæŠ•å½±ç»“æœéƒ½æ˜¯ç›¸åŒçš„ï¼‰ã€‚</p><h4 id="æ ¸æŠ€å·§">æ ¸æŠ€å·§</h4><p>åœ¨å½“å‰å”¯ç‹¬ä¸‹çš„çº¿æ€§ä¸å¯åˆ†çš„æ•°æ®é€šè¿‡æ˜ å°„åˆ°é«˜ç»´åº¦çš„ç©ºé—´æ—¶å¯ä»¥ä¼šå˜å¾—çº¿æ€§å¯åˆ†ã€‚ç„¶åä½ç»´è½¬åˆ°é«˜ç»´ä¹‹åå¯èƒ½ä¼šé¢ä¸´ç»´åº¦ç¾éš¾é—®é¢˜(å³è®¡ç®—é‡)å’Œæ¯ä¸ªç‚¹çš„è½¬æ¢é—®é¢˜ã€‚</p><p>æ ¸æŠ€å·§å°±æ˜¯å½“ç®—æ³•çš„è¾“å…¥å‘é‡xåªä»¥æ ‡é‡ç§¯çš„å½¢å¼å‡ºç°ï¼Œå¯ä»¥ç”¨å…¶ä»–çš„æ ¸æ¥æ›¿æ¢æ ‡é‡ç§¯ã€‚</p><p>çº¿æ€§æ¨¡å‹çš„æ­£åˆ™åŒ–å¹³æ–¹è¯¯å·®å‡½æ•°(çœŸå®å€¼ä¸é¢„æµ‹å€¼ä¹‹é—´çš„è¯¯å·®)ä½¿ç”¨å¯¹å¶å…¬å¼å¯ä»¥ç”¨æ ¸å‡½æ•°è¿›è¡Œè¡¨ç¤ºï¼Œä½¿ç”¨æ ¸å‡½æ•°åœ¨æ˜ å°„åˆ°é«˜ç»´ç©ºé—´æ—¶ï¼Œå…¶è®¡ç®—é‡ä¹Ÿå¯ä»¥å‡å°‘ã€‚</p><h4 id="çª—å‡½æ•°">çª—å‡½æ•°</h4><h5 id="ä¿¡å·æ³„éœ²">ä¿¡å·æ³„éœ²</h5><p>å¯¹äºå‘¨æœŸæ€§ä¿¡å·è€Œè¨€ï¼Œ1å¸§çš„æ—¶é—´é•¿åº¦ä¸ºå‘¨æœŸæ€§ä¿¡å·çš„æ•´æ•°å€ï¼Œæˆªæ–­æ–¹å¼ä¸ºå‘¨æœŸæ€§æˆªæ–­ï¼Œæˆªæ–­åçš„ä¿¡å·ä¹Ÿä¸ºå‘¨æœŸæ€§ä¿¡å·ã€‚åœ¨è¿›è¡ŒFFTå˜æ¢ä¹‹åï¼Œå‘¨æœŸæ€§ä¿¡å·çš„é¢‘åŸŸå¹…å€¼æ˜¯ä¸åŸä¿¡å·çš„å¹…å€¼ç›¸åŒçš„ã€‚</p><p>å¯¹äºå›¾åƒè¿½è¸ªæ¥è¯´ï¼Œä¿¡å·çš„æˆªæ–­ä¸ºéå‘¨æœŸæ€§æˆªæ–­ï¼Œå¯¼è‡´æˆªå–ä¿¡å·ç»“æŸæ—¶åˆ»ä¸å¼€å§‹æ—¶åˆ»çš„å¹…å€¼æ˜¯ä¸æƒ³ç­‰çš„ï¼ŒåŒç†IFFTæ—¶ä¹Ÿæ˜¯ä¸æƒ³ç­‰çš„ï¼Œè¿™ç§æƒ…å½¢å°±æ˜¯é¢‘åŸŸæ”¾ç”Ÿäº†æ‹–å°¾ï¼Œä¹Ÿå°±æ˜¯æ³„æ¼ç°è±¡ã€‚</p><p>ä¸ºäº†å‡å°‘æ³„æ¼ï¼ŒåŠ å…¥äº†çª—å‡½æ•°ï¼Œæ»¡è¶³FFTå¤„ç†æ—¶çš„å‘¨æœŸæ€§éœ€æ±‚ï¼Œå‡å°‘å¤„ç†æ—¶çš„å¤±çœŸç°è±¡ã€‚</p><h5 id="çª—å‡½æ•°-2">çª—å‡½æ•°</h5><p><a href="https://zhuanlan.zhihu.com/p/24318554" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></p><p><strong>çª—å‡½æ•°çš„æ—¶é¢‘åŸŸç‰¹å¾</strong></p><p>åŠ çª—å®è´¨æ˜¯ç”¨ä¸€ä¸ªæ‰€è°“çš„çª—å‡½æ•°ä¸åŸå§‹çš„æ—¶åŸŸä¿¡å·ä½œä¹˜ç§¯çš„è¿‡ç¨‹ï¼ˆå½“ç„¶åŠ çª—ä¹Ÿå¯ä»¥åœ¨é¢‘åŸŸè¿›è¡Œï¼Œä½†æ—¶åŸŸæ›´ä¸ºæ™®éï¼‰ï¼Œä½¿å¾—ç›¸ä¹˜åçš„ä¿¡å·ä¼¼ä¹æ›´å¥½åœ°æ»¡è¶³å‚…ç«‹å¶å˜æ¢çš„å‘¨æœŸæ€§è¦æ±‚ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒåŸå§‹çš„ä¿¡å·æ˜¯ä¸æ»¡è¶³FFTå˜æ¢çš„å‘¨æœŸæ€§è¦æ±‚çš„ï¼Œå˜æ¢åå­˜åœ¨æ³„æ¼ï¼Œå¦‚æœæ–½åŠ ä¸€ä¸ªçª—å‡½æ•°ï¼Œä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘æ³„æ¼ã€‚ä¸ºäº†å‡å°‘æ³„æ¼ï¼Œç”¨ä¸€ä¸ªçª—å‡½æ•°ä¸åŸå§‹å‘¨æœŸä¿¡å·ç›¸ä¹˜ï¼Œå¾—åˆ°åŠ çª—åçš„ä¿¡å·ä¸ºå‘¨æœŸä¿¡å·ï¼Œä»è€Œæ»¡è¶³FFTå˜æ¢çš„å‘¨æœŸæ€§è¦æ±‚ã€‚</p><p><img src="http://dingdm.online/v2-e795a8994ccab653d0ef26fcdfcf97da_720w.jpeg" alt=""></p><p><img src="http://dingdm.online/v2-78d2244634e77047feeffacc7cb7aa80_720w.jpeg" alt=""></p><p>åŸå§‹å‘¨æœŸä¿¡å·Ã—çª—å‡½æ•°</p><p><img src="http://dingdm.online/v2-c7b8d090f913fa85f4c1903fa1ad839c_720w.jpeg" alt=""></p><p>å„ç§çª—å‡½æ•°é¢‘è°±ç‰¹å¾çš„ä¸»è¦å·®åˆ«åœ¨äºï¼šä¸»ç“£å®½åº¦ï¼ˆä¹Ÿç§°ä¸ºæœ‰æ•ˆå™ªå£°å¸¦å®½ï¼ŒENBWï¼‰ã€å¹…å€¼å¤±çœŸåº¦ã€æœ€é«˜æ—ç“£é«˜åº¦å’Œæ—ç“£è¡°å‡é€Ÿç‡ç­‰å‚æ•°ã€‚åŠ çª—çš„ä¸»è¦æƒ³æ³•æ˜¯ç”¨æ¯”è¾ƒå…‰æ»‘çš„çª—å‡½æ•°ä»£æ›¿æˆªå–ä¿¡å·æ ·æœ¬çš„çŸ©å½¢çª—å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å¯¹æˆªæ–­åçš„æ—¶åŸŸä¿¡å·è¿›è¡Œç‰¹å®šçš„ä¸ç­‰è®¡æƒï¼Œä½¿è¢«æˆªæ–­åçš„æ—¶åŸŸæ³¢å½¢ä¸¤ç«¯çªå˜å˜å¾—å¹³æ»‘äº›ï¼Œä»¥æ­¤å‹ä½è°±çª—çš„æ—ç“£ã€‚å› ä¸ºæ—ç“£æ³„éœ²é‡æœ€å¤§ï¼Œæ—ç“£å°äº†æ³„éœ²ä¹Ÿç›¸åº”å‡å°‘äº†ã€‚ä¸åŒçš„çª—å‡½æ•°å…·æœ‰ä¸åŒçš„é¢‘è°±ç‰¹å¾ï¼Œä¸‹è¡¨åˆ—å‡ºäº†ä¸€äº›å¸¸ç”¨çª—å‡½æ•°çš„ç‰¹å¾ã€‚</p><p><img src="http://dingdm.online/v2-2e03a289e32c75ef80696fbb50e62a69_720w.jpeg" alt=""></p><p>ä¸»ç“£å®½åº¦ä¸»è¦å½±å“ä¿¡å·èƒ½é‡åˆ†å¸ƒå’Œé¢‘ç‡åˆ†è¾¨èƒ½åŠ›ã€‚é¢‘ç‡çš„å®é™…åˆ†è¾¨èƒ½åŠ›ä¸ºæœ‰æ•ˆå™ªå£°å¸¦å®½ä¹˜ä»¥é¢‘ç‡åˆ†è¾¨ç‡ï¼Œå› æ­¤ï¼Œä¸»ç“£è¶Šå®½ï¼Œæœ‰æ•ˆå™ªå£°å¸¦å®½è¶Šå®½ï¼Œåœ¨é¢‘ç‡åˆ†è¾¨ç‡ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œé¢‘ç‡çš„åˆ†è¾¨èƒ½åŠ›è¶Šå·®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œçº¢è‰²ä¸ºå¹³é¡¶çª—ï¼ˆ3.77âˆ†fï¼‰ï¼Œé»‘è‰²ä¸ºæ±‰å®çª—ï¼ˆ1.5âˆ†fï¼‰ï¼Œè“è‰²ä¸ºä¿¡å·é¢‘ç‡ï¼Œå¯ä»¥æ˜æ˜¾åœ°çœ‹å‡ºï¼Œä¸»ç“£è¶Šçª„ï¼Œé¢‘ç‡åˆ†è¾¨è¶Šå‡†ç¡®ã€‚å¯¹äºçª—å‡½æ•°å®½çš„ä¸»ç“£è€Œè¨€ï¼Œå¦‚æœæœ‰é‚»è¿‘çš„å°å³°å€¼é¢‘ç‡ï¼Œåˆ™è¶Šéš¾è¾¨åˆ«å‡ºæ¥ã€‚</p><p><img src="http://dingdm.online/v2-242a1e689b0eba71ea56f24d330a9651_720w.jpeg" alt=""></p><p>æ—ç“£é«˜ä½åŠå…¶è¡°å‡ç‡å½±å“èƒ½é‡æ³„æ¼ç¨‹åº¦ï¼ˆé¢‘è°±æ‹–å°¾æ•ˆåº”ï¼‰ã€‚æ—ç“£è¶Šé«˜ï¼Œè¯´æ˜èƒ½é‡æ³„æ¼è¶Šä¸¥é‡ï¼Œè¡°å‡è¶Šæ…¢ï¼Œé¢‘è°±æ‹–å°¾è¶Šä¸¥é‡ã€‚å¯¹50.5Hzï¼ˆé¢‘ç‡åˆ†è¾¨ç‡ä¸º1Hzï¼‰çš„ä¿¡å·åˆ†åˆ«æ–½åŠ çŸ©å½¢çª—ï¼ˆçº¢è‰²ï¼‰ã€æ±‰å®çª—ï¼ˆç»¿è‰²ï¼‰å’Œå¹³é¡¶çª—ï¼ˆè“è‰²ï¼‰ï¼Œç”¨å¯¹æ•°æ˜¾ç¤ºå¹…å€¼ï¼ŒåŠ çª—åçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒçŸ©å½¢çª—çš„é¢‘è°±æ‹–å°¾æ›´ä¸¥é‡ã€‚</p><p><img src="http://dingdm.online/v2-cd978cb28377a6ad101b1d5d19db0209_720w.jpeg" alt=""></p><p>ç›¸å¯¹è€Œè¨€ï¼Œå¦‚æœæ—ç“£èƒ½é‡è¾ƒå°ï¼Œé«˜åº¦è¶‹äºé›¶ï¼Œä½¿å¾—ä¿¡å·èƒ½é‡ç›¸å¯¹é›†ä¸­äºä¸»ç“£ï¼Œåˆ™è¾ƒä¸ºæ¥è¿‘çœŸå®çš„é¢‘è°±ã€‚ä¸åŒçš„çª—å‡½æ•°å¯¹ä¿¡å·é¢‘è°±çš„å½±å“æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™ä¸»è¦æ˜¯å› ä¸ºä¸åŒçš„çª—å‡½æ•°ï¼Œäº§ç”Ÿæ³„æ¼çš„å¤§å°ä¸ä¸€æ ·ï¼Œé¢‘ç‡åˆ†è¾¨èƒ½åŠ›ä¹Ÿä¸ä¸€æ ·ã€‚</p><p>åŠ çª—å‡½æ•°æ—¶ï¼Œåº”ä½¿çª—å‡½æ•°é¢‘è°±çš„ä¸»ç“£å®½åº¦åº”å°½é‡çª„ï¼Œä»¥è·å¾—é«˜çš„é¢‘ç‡åˆ†è¾¨èƒ½åŠ›ï¼›æ—ç“£è¡°å‡åº”å°½é‡å¤§ï¼Œä»¥å‡å°‘é¢‘è°±æ‹–å°¾ï¼Œä½†é€šå¸¸éƒ½ä¸èƒ½åŒæ—¶æ»¡è¶³è¿™ä¸¤ä¸ªè¦æ±‚ã€‚å„ç§çª—çš„å·®åˆ«ä¸»è¦åœ¨äºé›†ä¸­äºä¸»ç“£çš„èƒ½é‡å’Œåˆ†æ•£åœ¨æ‰€æœ‰æ—ç“£çš„èƒ½é‡ä¹‹æ¯”ã€‚</p><p>çª—çš„é€‰æ‹©å–å†³äºåˆ†æçš„ç›®æ ‡å’Œè¢«åˆ†æä¿¡å·çš„ç±»å‹ã€‚ä¸€èˆ¬è¯´ï¼Œæœ‰æ•ˆå™ªå£°é¢‘å¸¦è¶Šå®½ï¼Œé¢‘ç‡åˆ†è¾¨èƒ½åŠ›è¶Šå·®ï¼Œè¶Šéš¾äºåˆ†æ¸…æœ‰ç›¸åŒå¹…å€¼çš„é‚»è¿‘é¢‘ç‡ã€‚é€‰æ‹©æ€§ï¼ˆå³åˆ†è¾¨å‡ºå¼ºåˆ†é‡é¢‘ç‡é‚»è¿‘çš„å¼±åˆ†é‡çš„èƒ½åŠ›ï¼‰çš„æé«˜ä¸æ—ç“£çš„è¡°å‡ç‡æœ‰å…³ã€‚é€šå¸¸ï¼Œæœ‰æ•ˆå™ªå£°å¸¦å®½çª„çš„çª—ï¼Œå…¶æ—ç“£çš„è¡°å‡ç‡è¾ƒä½ï¼Œå› æ­¤çª—çš„é€‰æ‹©æ˜¯åœ¨äºŒè€…ä¸­å–æŠ˜è¡·ã€‚</p><p>å› è€Œï¼Œ<strong>çª—å‡½æ•°çš„é€‰æ‹©ä¸€èˆ¬åŸåˆ™å¦‚ä¸‹</strong>ï¼š</p><ol><li><p>å¦‚æœæˆªæ–­çš„ä¿¡å·ä»ä¸ºå‘¨æœŸä¿¡å·ï¼Œåˆ™ä¸å­˜åœ¨æ³„æ¼ï¼Œæ— é¡»åŠ çª—ï¼Œç›¸å½“äºåŠ çŸ©å½¢çª—ã€‚</p></li><li><p>å¦‚æœä¿¡å·æ˜¯éšæœºä¿¡å·æˆ–è€…æœªçŸ¥ä¿¡å·ï¼Œæˆ–è€…æœ‰å¤šä¸ªé¢‘ç‡åˆ†é‡ï¼Œæµ‹è¯•å…³æ³¨çš„æ˜¯é¢‘ç‡ç‚¹è€Œéèƒ½é‡å¤§å°ï¼Œå»ºè®®é€‰æ‹©æ±‰å®çª—ï¼ŒåƒLMS Test.Labä¸­é»˜è®¤åŠ çš„å°±æ˜¯æ±‰å®çª—ã€‚</p></li><li><p>å¯¹äºæ ¡å‡†ç›®çš„ï¼Œåˆ™è¦æ±‚å¹…å€¼ç²¾ç¡®ï¼Œå¹³é¡¶çª—æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p></li><li><p>å¦‚æœåŒæ—¶è¦æ±‚å¹…å€¼ç²¾åº¦å’Œé¢‘ç‡ç²¾åº¦ï¼Œå¯é€‰æ‹©å‡¯å¡çª—ã€‚</p></li><li><p>å¦‚æœæ£€æµ‹ä¸¤ä¸ªé¢‘ç‡ç›¸è¿‘ã€å¹…å€¼ä¸åŒçš„ä¿¡å·ï¼Œå»ºè®®ç”¨å¸ƒè±å…‹æ›¼çª—ã€‚</p></li><li><p>é”¤å‡»æ³•è¯•éªŒåŠ›ä¿¡å·åŠ åŠ›çª—ï¼Œå“åº”å¯åŠ æŒ‡æ•°çª—ã€‚</p></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒè¿½è¸ª </category>
          
      </categories>
      
      
        <tags>
            
            <tag> KCF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu20.04å®‰è£…Hadoopå’ŒHive(PDè™šæ‹Ÿæœº MAC M1)</title>
      <link href="/2021/12/01/ubuntu20.04-an-zhuang-hadoop-he-hive-pd-xu-ni-ji-mac-m1/"/>
      <url>/2021/12/01/ubuntu20.04-an-zhuang-hadoop-he-hive-pd-xu-ni-ji-mac-m1/</url>
      
        <content type="html"><![CDATA[<h3 id="Ubuntu20-04å®‰è£…Hadoopå’ŒHive-PDè™šæ‹Ÿæœº-MAC-M1">Ubuntu20.04å®‰è£…Hadoopå’ŒHive(PDè™šæ‹Ÿæœº MAC M1)</h3><p>å¯¹äºæœ¬æ–‡ä¸­çš„markdownä¸­çš„ä»£ç æ ‡ç­¾è§£æé”™è¯¯é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä¸‹è½½è¯¥ç¬”è®°çš„pdfæ–‡ä»¶è¿›è¡Œç›´æ¥å¤åˆ¶å³å¯ï¼Œåªéœ€ä¿®æ”¹æ‰€åœ¨çš„è·¯å¾„ã€‚</p><p><a href="http://dingdm.online/Ubuntu20.04%E5%AE%89%E8%A3%85Hadoop%E5%92%8CHive%28PD%E8%99%9A%E6%8B%9F%E6%9C%BA%20MAC%20M1%29.pdf" target="_blank" rel="noopener">pdfæ–‡ä»¶ä¸‹è½½é“¾æ¥</a></p><h3 id="Ubuntu20-04å®‰è£…mysql">Ubuntu20.04å®‰è£…mysql</h3><h4 id="å®‰è£…mysql">å®‰è£…mysql</h4><pre class=" language-language-shell"><code class="language-language-shell">#æ›´æ–°æºsudo apt-get update#å®‰è£…mysqlæœåŠ¡sudo apt-get install mysql-server</code></pre><p><img src="http://dingdm.online/mysql1.png" alt=""></p><h4 id="é…ç½®mysql">é…ç½®mysql</h4><pre class=" language-language-shell"><code class="language-language-shell">sudo mysql_secure_installation</code></pre><pre class=" language-language-shell"><code class="language-language-shell">VALIDATE PASSWORD PLUGIN can be used to test passwords...Press y|Y for Yes, any other key for No: N (é€‰æ‹©N ,ä¸ä¼šè¿›è¡Œå¯†ç çš„å¼ºæ ¡éªŒ)Please set the password for root here...New password: (è¾“å…¥å¯†ç )Re-enter new password: (é‡å¤è¾“å…¥)By default, a MySQL installation has an anonymous user,allowing anyone to log into MySQL without having to havea user account created for them...Remove anonymous users? (Press y|Y for Yes, any other key for No) : N (é€‰æ‹©Nï¼Œä¸åˆ é™¤åŒ¿åç”¨æˆ·)Normally, root should only be allowed to connect from'localhost'. This ensures that someone cannot guess atthe root password from the network...Disallow root login remotely? (Press y|Y for Yes, any other key for No) : N (é€‰æ‹©Nï¼Œå…è®¸rootè¿œç¨‹è¿æ¥)By default, MySQL comes with a database named 'test' thatanyone can access...Remove test database and access to it? (Press y|Y for Yes, any other key for No) : N (é€‰æ‹©Nï¼Œä¸åˆ é™¤testæ•°æ®åº“)Reloading the privilege tables will ensure that all changesmade so far will take effect immediately.Reload privilege tables now? (Press y|Y for Yes, any other key for No) : Y (é€‰æ‹©Yï¼Œä¿®æ”¹æƒé™ç«‹å³ç”Ÿæ•ˆ)</code></pre><h4 id="é…ç½®è¿œç¨‹è®¿é—®">é…ç½®è¿œç¨‹è®¿é—®</h4><pre class=" language-language-shell"><code class="language-language-shell">sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf #æ‰¾åˆ°bind-address ä¿®æ”¹å€¼ä¸º 0.0.0.0sudo /etc/init.d/mysql restart #é‡å¯mysql</code></pre><p><img src="http://dingdm.online/mysql2.png" alt=""></p><p><strong>åˆ·æ–°æƒé™</strong></p><p><img src="http://dingdm.online/mysql3.png" alt=""></p><h4 id="è¿œç¨‹è¿æ¥-navicat">è¿œç¨‹è¿æ¥(navicat)</h4><p>ipåœ°å€ä¸º10.211.55.4</p><p><img src="http://dingdm.online/mysql4.png" alt=""></p><h3 id="ubuntu20-04å®‰è£…Hadoop">ubuntu20.04å®‰è£…Hadoop</h3><h4 id="å®‰è£…jdk1-8">å®‰è£…jdk1.8</h4><p><a href="https://www.oracle.com/java/technologies/javase-downloads.html" target="_blank" rel="noopener">å®˜æ–¹é“¾æ¥</a></p><pre class=" language-language-shell"><code class="language-language-shell">mkdir dingdm                                        #åˆ›å»ºdingdmæ–‡ä»¶å¤¹</code></pre><p><img src="http://dingdm.online/jdk1.png" alt=""></p><p>ä¸Šä¼ jdkæ–‡ä»¶åˆ°pdè™šæ‹Ÿæœº</p><pre class=" language-language-shell"><code class="language-language-shell">sudo tar zxvf jdk-8u311-linux-aarch64.tar.gz  -C /dingdm  #/è§£å‹åˆ°/dingdmç›®å½•ä¸‹mv  jdk1.8.0_311 java                          #é‡å‘½åä¸ºjavavi ~/.bashrc                                              #ç»™JDKé…ç½®ç¯å¢ƒå˜é‡</code></pre><p>åœ¨ ~/.bashrc æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç </p><pre class=" language-language-shell"><code class="language-language-shell">export JAVA_HOME=/dingdm/javaexport JRE_HOME=${JAVA_HOME}/jreexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/libexport PATH=${JAVA_HOME}/bin:$PATH</code></pre><pre class=" language-language-shell"><code class="language-language-shell">source ~/.bashrc                       #ä½¿æ–°é…ç½®çš„ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</code></pre><h4 id="å®‰è£…hadoop">å®‰è£…hadoop</h4><p><a href="https://archive.apache.org/dist/hadoop/common/" target="_blank" rel="noopener">å®˜æ–¹é“¾æ¥</a></p><p>ä¸Šä¼ hadoopæ–‡ä»¶åˆ°pdè™šæ‹Ÿæœº</p><p><img src="http://dingdm.online/hadoop1.png" alt=""></p><h5 id="é…ç½®ç¯å¢ƒå˜é‡">é…ç½®ç¯å¢ƒå˜é‡</h5><pre class=" language-language-shell"><code class="language-language-shell">sudo tar -zxvf  hadoop-3.2.0.tar.gz                   #è§£å‹sudo mv  hadoop-3.2.0    hadoop                      #é‡å‘½åä¸ºhadoopï¼Œå¯æ”¹å¯ä¸æ”¹ï¼Œå¦‚æœä¿®æ”¹ä¸‹è¾¹çš„åå­—ä¹Ÿè¦å¯¹åº”</code></pre><pre class=" language-language-shell"><code class="language-language-shell">export HADOOP_HOME=/dingdm/hadoopexport CLASSPATH=$($HADOOP_HOME/bin/hadoop classpath):$CLASSPATHexport HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_HOME/lib/nativeexport PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</code></pre><pre class=" language-language-shell"><code class="language-language-shell">source ~/.bashrc</code></pre><h4 id="ä¼ªåˆ†å¸ƒå¼é…ç½®">ä¼ªåˆ†å¸ƒå¼é…ç½®</h4><pre class=" language-language-shell"><code class="language-language-shell">cd /dingdm/hadoop/etc/hadoop/ </code></pre><p>hadoop-env.shä¸­é…ç½®javaç¯å¢ƒ</p><pre class=" language-language-sh"><code class="language-language-sh">export JAVA_HOME=/dingdm/java</code></pre><p>ä¿®æ”¹core-site.xmlä¸hdfs-site.xmlæ–‡ä»¶ï¼Œåœ¨configurationä¸‹æ·»åŠ propertyæ ‡ç­¾é…ç½®</p><pre class=" language-language-xml"><code class="language-language-xml">\*<property>    <name>hadoop.tmp.dir</name>    <value>file:/dingdm/hadoop/tmp</value>    <description>Abase for other temporary directories.</description></property><property>    <name>fs.defaultFS</name>    <value>hdfs://localhost:9000</value></property></code></pre><pre class=" language-language-xml"><code class="language-language-xml"> <property>     <name>dfs.replication</name>     <value>1</value></property><property>     <name>dfs.namenode.name.dir</name>     <value>file:/dingdm/hadoop/tmp/dfs/name</value></property><property>     <name>dfs.datanode.data.dir</name>     <value>file:/dingdm/hadoop/tmp/dfs/data</value></property><property>     <name>dfs.http.address</name>     <value>0.0.0.0:50070</value></property></code></pre><p>æ‰§è¡Œ NameNode çš„æ ¼å¼åŒ–</p><pre class=" language-language-shell"><code class="language-language-shell">cd /dingdm/hadoop/binhdfs namenode -format</code></pre><p>å¯åŠ¨hadoop</p><pre class=" language-language-shell"><code class="language-language-shell">cd /dingdm/hadoop/sbinstart-dfs.shjps</code></pre><p><img src="http://dingdm.online/hadoop2.png" alt=""></p><p><img src="http://dingdm.online/hadoop3.png" alt=""></p><h3 id="ubuntu20-04å®‰è£…Hive">ubuntu20.04å®‰è£…Hive</h3><h4 id="æ–‡ä»¶ä¸Šä¼ ">æ–‡ä»¶ä¸Šä¼ </h4><p><img src="http://dingdm.online/hive1.png" alt=""></p><h4 id="é…ç½®ç¯å¢ƒå˜é‡-2">é…ç½®ç¯å¢ƒå˜é‡</h4><pre class=" language-language-shell"><code class="language-language-shell">export HIVE_HOME=/dingdm/hiveexport PATH=$PATH:$HIVE_HOME/bin</code></pre><pre class=" language-language-shell"><code class="language-language-shell">source ~/.bashrc</code></pre><h4 id="Hiveé…ç½®æ–‡ä»¶">Hiveé…ç½®æ–‡ä»¶</h4><p>æŒ‡å®š Hive æ•°æ®ä»“åº“çš„æ•°æ®å­˜å‚¨åœ¨ HDFS ä¸Šçš„ç›®å½•</p><pre class=" language-language-shell"><code class="language-language-shell">sudo mkdir -p /user/hive/warehousesudo mkdir -p /tmp/hivesudo chmod -R 777 /user/hive/warehousesudo chmod -R 777 /tmp/hive</code></pre><p>åœ¨/dingdm/hive/confç›®å½•ä¸‹ï¼Œåˆ›å»ºhive-site.xmlï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç </p><pre class=" language-language-xml"><code class="language-language-xml"><configuration><property>    <name>hive.metastore.schema.verification</name>    <value>false</value>     <description>          Enforce metastore schema version consistency.          True: Verify that version information stored in metastore matches with one from Hive jars.  Also disable automatic          schema migration attempt. Users are required to manully migrate schema after Hive upgrade which ensures          proper metastore schema migration. (Default)          False: Warn if the version information stored in metastore doesn't match with one from in Hive jars.      </description>    </property>    <!-- å­˜å‚¨åœ¨hdfsä¸Šçš„æ•°æ®è·¯å¾„ -->    <property>    <name>hive.metastore.warehouse.dir</name>    <value>/user/hive/warehouse</value>    <description>location of default database for the warehouse</description>  </property>  <property>    <name>hive.exec.scratchdir</name>    <value>/tmp/hive</value>    <description>HDFS root scratch dir for Hive jobs which gets created with write all (733) permission. For each connecting user, an HDFS scratch dir: ${hive.exec.scratchdir}/&lt;username&gt; is created, with ${hive.scratch.dir.permission}.</description>  </property>    <!-- æœ¬åœ°mysql -->  <property>                <name>javax.jdo.option.ConnectionURL</name>                <value>jdbc:mysql://localhost:3306/hive?createDatabaseIfNotExist=true</value>                <description>JDBC connect string for a JDBC metastore</description>                <!-- å¦‚æœ mysql å’Œ hive åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¯·æ›´æ”¹ hadoop02 ä¸º localhost -->        </property>        <property>                <name>javax.jdo.option.ConnectionDriverName</name>                <value>com.mysql.cj.jdbc.Driver</value>                <description>Driver class name for a JDBC metastore</description>        </property>        <property>                <name>javax.jdo.option.ConnectionUserName</name>                <value>root</value>                <description>username to use against metastore database</description>        </property>        <property>                <name>javax.jdo.option.ConnectionPassword</name>                <value>ä½ çš„æ•°æ®åº“å¯†ç </value>        <description>password to use against metastore database</description>        </property></configuration></code></pre><p>åœ¨/dingdm/hive/confä¸‹æ‰§è¡Œ</p><pre class=" language-language-shell"><code class="language-language-shell">cp hive-env.sh.template hive-env.sh</code></pre><p>æ·»åŠ ä»¥ä¸‹å†…å®¹</p><pre class=" language-language-shell"><code class="language-language-shell">export HADOOP_HOME=/dingdm/hadoopexport HIVE_CONF_DIR=/dingdm/hive/conf</code></pre><p>æ‹·è´jdbcçš„åŒ…åˆ°/dingdm/hive/libç›®å½•ä¸‹</p><p><img src="http://dingdm.online/hive2.png" alt=""></p><p>åœ¨dingdm/hive/binç›®å½•ä¸‹å¯åŠ¨hive</p><pre class=" language-language-shell"><code class="language-language-shell">schematool -dbType mysql -initSchemaschematool -dbType mysql -infohive</code></pre><p><img src="http://dingdm.online/hive3.png" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>L0æ¢¯åº¦æœ€å°åŒ–å»é›¨è®ºæ–‡ä»£ç </title>
      <link href="/2021/11/29/l0-ti-du-zui-xiao-hua-qu-yu-lun-wen-dai-ma/"/>
      <url>/2021/11/29/l0-ti-du-zui-xiao-hua-qu-yu-lun-wen-dai-ma/</url>
      
        <content type="html"><![CDATA[<h3 id="Rain-Removal-From-Still-Images-Using-L0-Gradient-Minimization-Techniqueè®ºæ–‡ä»£ç ">Rain Removal From Still Images Using L0 Gradient Minimization Techniqueè®ºæ–‡ä»£ç </h3><h4 id="åŸå›¾åƒ">åŸå›¾åƒ</h4><p><img src="http://dingdm.online/f1.png" alt=""></p><h4 id="find-rain">find_rain</h4><pre class=" language-language-matlab"><code class="language-language-matlab">function [No_Of_RainPixels OnlyRainImage] = find_rain(I)% ä¸‰é€šé“å½©è‰²å›¾è½¬æ¢ä¸ºç°åº¦äºŒå€¼å›¾if ndims(I) == 3   I2=rgb2gray(I);else   I2 = I;end% å¯¹äºŒå€¼å›¾è¿›è¡Œå½¢æ€å­¦æ“ä½œ% åˆ›å»ºä¸€ä¸ªä»»æ„å½¢çŠ¶çš„ç»“æ„å…ƒç´ ï¼Œ5*5çš„çŸ©é˜µï¼Œç”¨äºæŒ‡å®šå½¢çŠ¶å¯ä»¥ç”¨se=strel(NHOOD)ç®€åŒ– è¿›è¡Œå›¾åƒè…èš€%å¼€è¿ç®—æ•°å­¦ä¸Šæ˜¯å…ˆè…èš€åè†¨èƒ€çš„ç»“æœ%å¼€è¿ç®—çš„ç‰©ç†ç»“æœä¸ºå®Œå…¨åˆ é™¤äº†ä¸èƒ½åŒ…å«ç»“æ„å…ƒç´ çš„å¯¹è±¡åŒºåŸŸï¼Œå¹³æ»‘äº†å¯¹è±¡çš„è½®å»“ï¼Œæ–­å¼€äº†ç‹­çª„çš„è¿æ¥ï¼Œå»æ‰äº†ç»†å°çš„çªå‡ºéƒ¨åˆ†SE = strel('arbitrary',eye(5));BW2 = imerode(I2,SE);% å›¾åƒè†¨èƒ€BW3 = imdilate(BW2,SE);% å¯¹å›¾åƒå®ç°é—­è¿ç®—%é—­è¿ç®—åœ¨æ•°å­¦ä¸Šæ˜¯å…ˆè†¨èƒ€å†è…èš€çš„ç»“æœ%é—­è¿ç®—çš„ç‰©ç†ç»“æœä¹Ÿæ˜¯ä¼šå¹³æ»‘å¯¹è±¡çš„è½®å»“ï¼Œä½†æ˜¯ä¸å¼€è¿ç®—ä¸åŒçš„æ˜¯ï¼Œé—­è¿ç®—ä¸€èˆ¬ä¼šå°†ç‹­çª„çš„ç¼ºå£è¿æ¥èµ·æ¥å½¢æˆç»†é•¿çš„å¼¯å£ï¼Œå¹¶å¡«å……æ¯”ç»“æ„å…ƒç´ å°çš„æ´closeBW = imclose(BW3,SE);% å›¾åƒè†¨èƒ€Iobrd = imdilate(BW2, SE );% é‡æ„æ˜¯æ¶‰åŠä¸¤å¹…å›¾å’Œä¸€ä¸ªç»“æ„å…ƒç´ çš„å½¢æ€å­¦å˜æ¢ï¼Œimcomplement(Iobrd)æˆä¸ºæ ‡è®°ï¼Œä½œä¸ºå˜æ¢çš„å¼€å§‹ç‚¹ï¼Œimcomplement(closeBW)æ©æ¨¡ï¼Œç”¨æ¥çº¦æŸå˜æ¢è¿‡ç¨‹ã€‚% imcomplement(closeBW) ä¸­ç¬¦åˆ imcomplement(Iobrd) çš„ç‰¹å¾% ç»“æ„å…ƒç´ ç”¨äºå®šä¹‰è¿ç»“æ€§ã€‚% é‡æ„ä¸æ˜¯ä»ä¸€å‰¯ç¼ºå¤±çš„å›¾åƒä¸­é‡æ–°æ„å»ºå®Œæ•´å›¾åƒï¼Œè€Œæ˜¯æå–åŸå§‹å›¾åƒä¸­çš„å«æœ‰æŸäº›ç‰¹å¾çš„è¿é€šåŒºåŸŸæ¥æ„å»ºæ–°çš„å›¾åƒã€‚% å¯¹å›¾åƒæ©è†œä¸‹çš„å›¾åƒæ ‡è®°è¿›è¡Œå½¢æ€é‡å»ºï¼Œå¹¶è¿”å›Iobrcbrä¸­çš„é‡å»ºIobrcbr = imreconstruct(imcomplement(Iobrd), imcomplement(closeBW));% å¯¹å›¾åƒæ•°æ®è¿›è¡Œå–åè¿ç®—ï¼ˆå®ç°åº•ç‰‡æ•ˆæœï¼‰ã€‚åè½¬å›¾åƒçš„åƒç´ å¼ºåº¦ï¼Œä½¿å›¾åƒä¸­çš„å‰æ™¯å˜ä¸ºèƒŒæ™¯ï¼ŒèƒŒæ™¯å˜ä¸ºå‰æ™¯ã€‚Iobrcbr = imcomplement(Iobrcbr);% è¿”å›è¯†åˆ«Iobrcbrä¸­çš„åŒºåŸŸæœ€å¤§å€¼çš„äºŒå€¼å›¾åƒBW åŒºåŸŸæœ€å¤§å€¼æ˜¯å…·æœ‰æ’å®šå¼ºåº¦å€¼tçš„åƒç´ çš„è¿é€šåˆ†é‡ï¼Œå…¶å¤–éƒ¨è¾¹ç•Œåƒç´ éƒ½å…·æœ‰å°äºtçš„å€¼ã€‚åœ¨BWä¸­ï¼Œè®¾ç½®ä¸º1çš„åƒç´ æ ‡è¯†åŒºåŸŸæœ€% % å¤§å€¼ï¼›æ‰€æœ‰å…¶ä»–åƒç´ éƒ½è®¾ç½®ä¸º0ã€‚OnlyRainImage = imregionalmax(Iobrcbr);% æ‰¾å‡ºäºŒå€¼å›¾åƒä¸­æ‰€æœ‰çš„è¿é€šåŒºåŸŸã€‚æ‰€éœ€çš„è¿é€šæ€§ä¸º8 cc = bwconncomp(OnlyRainImage,8); No_Of_RainPixels = cc.NumObjects;</code></pre><h5 id="å›¾ç‰‡è…èš€">å›¾ç‰‡è…èš€</h5><p><img src="http://dingdm.online/kai.png" alt=""></p><h5 id="å›¾ç‰‡è†¨èƒ€">å›¾ç‰‡è†¨èƒ€</h5><p><img src="http://dingdm.online/peng.png" alt=""></p><h5 id="å›¾åƒé—­è¿ç®—">å›¾åƒé—­è¿ç®—</h5><p><img src="http://dingdm.online/bi.png" alt=""></p><h5 id="åŒºåŸŸæœ€å¤§å€¼çš„äºŒå€¼å›¾åƒå³é›¨æ»´å›¾åƒ">åŒºåŸŸæœ€å¤§å€¼çš„äºŒå€¼å›¾åƒå³é›¨æ»´å›¾åƒ</h5><p><img src="http://dingdm.online/iyd.png" alt=""></p><h4 id="train">train</h4><h5 id="Labè‰²å½©ç©ºé—´">Labè‰²å½©ç©ºé—´</h5><p>Labæ˜¯ä¸€ç§ä¸å¸¸ç”¨çš„è‰²å½©ç©ºé—´ã€‚å®ƒæ˜¯åœ¨1931å¹´å›½é™…ç…§æ˜å§”å‘˜ä¼šï¼ˆCIEï¼‰åˆ¶å®šçš„é¢œè‰²åº¦é‡å›½é™…æ ‡å‡†çš„åŸºç¡€ä¸Šå»ºç«‹èµ·æ¥çš„ã€‚1976å¹´ï¼Œç»ä¿®æ”¹åè¢«æ­£å¼å‘½åä¸ºCIELabã€‚å®ƒæ˜¯ä¸€ç§è®¾å¤‡æ— å…³çš„é¢œè‰²ç³»ç»Ÿï¼Œä¹Ÿæ˜¯ä¸€ç§åŸºäºç”Ÿç†ç‰¹å¾çš„é¢œè‰²ç³»ç»Ÿã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œå®ƒæ˜¯ç”¨æ•°å­—åŒ–çš„æ–¹æ³•æ¥æè¿°äººçš„è§†è§‰æ„Ÿåº”ã€‚Labé¢œè‰²ç©ºé—´ä¸­çš„Låˆ†é‡ç”¨äºè¡¨ç¤ºåƒç´ çš„äº®åº¦ï¼Œå–å€¼èŒƒå›´æ˜¯[0,100],è¡¨ç¤ºä»çº¯é»‘åˆ°çº¯ç™½ï¼›aè¡¨ç¤ºä»çº¢è‰²åˆ°ç»¿è‰²çš„èŒƒå›´ï¼Œå–å€¼èŒƒå›´æ˜¯[127,-128]ï¼›bè¡¨ç¤ºä»é»„è‰²åˆ°è“è‰²çš„èŒƒå›´ï¼Œå–å€¼èŒƒå›´æ˜¯[127,-128]ã€‚</p><h5 id="å³°å€¼ä¿¡å™ªæ¯”">å³°å€¼ä¿¡å™ªæ¯”</h5><p><img src="http://dingdm.online/fengzhi.png" alt=""></p><p>MSEè¡¨ç¤ºå½“å‰å›¾åƒXå’Œå‚è€ƒå›¾åƒYçš„å‡æ–¹è¯¯å·®ï¼ˆMean Square Errorï¼‰ï¼ŒHã€Wåˆ†åˆ«ä¸ºå›¾åƒçš„é«˜åº¦å’Œå®½åº¦ï¼›nä¸ºæ¯åƒç´ çš„æ¯”ç‰¹æ•°ï¼Œä¸€èˆ¬å–8ï¼Œå³åƒç´ ç°é˜¶æ•°ä¸º256. PSNRçš„å•ä½æ˜¯dBï¼Œæ•°å€¼è¶Šå¤§è¡¨ç¤ºå¤±çœŸè¶Šå°ã€‚</p><pre class=" language-language-matlab"><code class="language-language-matlab">I = imread(['/Users/dinggongcheng/Documents/MATLAB/2/','02.png']);I_Large = imresize(I,[650,950]);imshow(I_Large);title('Rainy Image');% è¿”å›è¾“å…¥å›¾åƒä¸­æ²¡æœ‰è¢«é›¨æ»´è¦†ç›–çš„åƒç´ æ•°é‡å’Œçº¯é›¨æ»´çš„å›¾åƒ[No_Of_RainPixels1 OnlyRainImage1] = find_rain(I);Rain = imresize(OnlyRainImage1,[350,650]);figure,imshow(Rain);title('OnlyRainImage1');Img = I;% è°ƒèŠ‚ç°åº¦å›¾åƒçš„äº®åº¦æˆ–å½©è‰²å›¾åƒçš„é¢œè‰²çŸ©é˜µ% stretchlimè‡ªé€‚åº”æ‰¾åˆ°ä¸€ä¸ªåˆ†å‰²é˜ˆå€¼å‘é‡æ¥æ”¹å˜ä¸€å¹…å›¾åƒçš„å¯¹æ¯”åº¦Img = imadjust(Img,stretchlim(Img));% L0èŒƒæ•°å¹³æ»‘S = L0Smoothing(Img);% å¯¹æ¯”åº¦å¢å¼ºS = imadjust(S,stretchlim(S));% å®šä¹‰æŒ‡å®šçš„é¢œè‰²ç©ºé—´è½¬æ¢çš„ç±»å‹ã€‚æ‰§è¡Œè½¬æ¢,å°†é¢œè‰²è½¬æ¢ç»“æ„ä½œä¸ºå‚æ•°ä¼ é€’ç»™applycformåŠŸèƒ½ã€‚srgb2lab = makecform('srgb2lab'); % RGBè½¬labå…¬å¼lab2srgb = makecform('lab2srgb'); % labè½¬RGBå…¬å¼% å°†rgbé¢œè‰²ç©ºé—´è½¬æ¢ä¸ºLabé¢œè‰²ç©ºé—´shadow_lab = applycform(S, srgb2lab);% ç¼©æ”¾äº®åº¦å€¼åˆ°[0,1] ç¬¬ä¸€ä¸ªäº®åº¦ä¸ºåº¦ç¼©å°100å€max_luminosity = 100;L = shadow_lab(:,:,1)/max_luminosity;shadow_imadjust = shadow_lab;% å°†ç°åº¦å›¾åƒL(äº®åº¦ç¼©æ”¾)ä¸­çš„ç°åº¦å€¼æ˜ å°„æˆè¾“å‡ºå›¾åƒshadow_imadjustä¸­çš„äº®åº¦ç»´åº¦æ–°å€¼ï¼Œä½¿å¾—ç°åº¦å›¾åƒLåœ¨ä½ç°åº¦å€¼å’Œé«˜ç°åº¦å€¼ä¸Š1%çš„æ•°æ®æ˜¯é¥±å’Œçš„ã€‚è¿™å¢å¼ºäº†è¾“å‡ºå›¾åƒ% shadow_imadjustçš„å¯¹æ¯”åº¦ã€‚% imadjust(L)*max_luminosity shadow_imadjust(:,:,1) = imadjust(L) * max_luminosity;% å°†Labé¢œè‰²ç©ºé—´è½¬æ¢ä¸ºrgbé¢œè‰²ç©ºé—´shadow_imadjust = applycform(shadow_imadjust, lab2srgb);% è¿”å›è¾“å…¥å›¾åƒä¸­æ²¡æœ‰è¢«é›¨æ»´è¦†ç›–çš„åƒç´ ä¸ªæ•°å’Œçº¯é›¨æ»´çš„å›¾åƒ[No_Of_RainPixels2 OnlyRainImage2] = find_rain(shadow_imadjust);shadow = imresize(shadow_imadjust,[650,950]);Rain2 = imresize(OnlyRainImage2,[350,650]);figure,imshow(Rain2);title('OnlyRainImage2');figure,imshow(shadow);title(' Rain Removed Image ');% è®¡ç®—å³°å€¼ä¿¡å™ªæ¯”im1 = double(Img);im2 = double(shadow_imadjust);mse = sum((im1(:)-im2(:)).^2)/prod(size(im1));psnr1 = 10*log10(255*255/mse);im3 = double(S);mse2 = sum((im1(:)-im3(:)).^2)/prod(size(im1));psnr2 = 10*log10(255*255/mse2);psnr = [psnr2,psnr1];% ç›´æ–¹å›¾æ˜¾ç¤ºfigure,bar(psnr,0.25);title('PSNR values before & after Rain Removal');A1 = No_Of_RainPixels1;A2 = No_Of_RainPixels2;kk = bwconncomp(OnlyRainImage2,8);NoOfRainPixels2 = kk.NumObjects;Original = A1Removed = NoOfRainPixels2Remove = NoOfRainPixels2/A1;Removed = 1-Remove;R= Removed*100;</code></pre><h5 id="å¯¹æ¯”åº¦å¢å¼ºå›¾ç‰‡">å¯¹æ¯”åº¦å¢å¼ºå›¾ç‰‡</h5><p><img src="http://dingdm.online/duibidu.png" alt=""></p><h5 id="L0èŒƒæ•°å¹³æ»‘åçš„å¯¹æ¯”åº¦å›¾åƒ">L0èŒƒæ•°å¹³æ»‘åçš„å¯¹æ¯”åº¦å›¾åƒ</h5><p><img src="http://dingdm.online/L.png" alt=""></p><h5 id="ç¼©æ”¾100æ¯”ä¾‹äº®åº¦å¹¶åœ¨Labè‰²å½©ç©ºé—´æ›´æ–°äº®åº¦ç»´åº¦åæ‰¾åˆ°åŒºåŸŸæœ€å¤§å€¼çš„äºŒå€¼å›¾åƒ">ç¼©æ”¾100æ¯”ä¾‹äº®åº¦å¹¶åœ¨Labè‰²å½©ç©ºé—´æ›´æ–°äº®åº¦ç»´åº¦åæ‰¾åˆ°åŒºåŸŸæœ€å¤§å€¼çš„äºŒå€¼å›¾åƒ</h5><p><img src="http://dingdm.online/f3.png" alt=""></p><h5 id="å»é›¨å›¾åƒ">å»é›¨å›¾åƒ</h5><p><img src="http://dingdm.online/f4.png" alt=""></p><h5 id="PSNR">PSNR</h5><p><img src="http://dingdm.online/psnr.png" alt=""></p><h4 id="å…¶ä»–æµ‹è¯•å›¾">å…¶ä»–æµ‹è¯•å›¾</h4><h5 id="1-åŸå›¾">1 åŸå›¾</h5><p><img src="http://dingdm.online/01y.png" alt=""></p><h5 id="1-å»é›¨">1 å»é›¨</h5><p><img src="http://dingdm.online/01q.png" alt=""></p><h5 id="1-PSNR">1 PSNR</h5><p><img src="http://dingdm.online/01p.png" alt=""></p><h5 id="2-åŸå›¾">2 åŸå›¾</h5><p><img src="http://dingdm.online/03y.png" alt=""></p><h5 id="2-å»é›¨">2 å»é›¨</h5><p><img src="http://dingdm.online/03q.png" alt=""></p><h5 id="2-PSNR">2 PSNR</h5><p><img src="http://dingdm.online/03p.png" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¼–ç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>leetcodeåˆ·é¢˜(11.24)</title>
      <link href="/2021/11/24/leetcode-shua-ti-11.24/"/>
      <url>/2021/11/24/leetcode-shua-ti-11.24/</url>
      
        <content type="html"><![CDATA[<h3 id="leetcodeåˆ·é¢˜-11-24">leetcodeåˆ·é¢˜(11.24)</h3><h4 id="é¢˜ç›®">é¢˜ç›®</h4><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head å’Œä¸€ä¸ªç‰¹å®šå€¼ x ï¼Œè¯·ä½ å¯¹é“¾è¡¨è¿›è¡Œåˆ†éš”ï¼Œä½¿å¾—æ‰€æœ‰ å°äº x çš„èŠ‚ç‚¹éƒ½å‡ºç°åœ¨ å¤§äºæˆ–ç­‰äº x çš„èŠ‚ç‚¹ä¹‹å‰ã€‚</p><p>ä½ åº”å½“ ä¿ç•™ ä¸¤ä¸ªåˆ†åŒºä¸­æ¯ä¸ªèŠ‚ç‚¹çš„åˆå§‹ç›¸å¯¹ä½ç½®ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="http://dingdm.online/partition.jpeg" alt=""></p><pre><code>è¾“å…¥ï¼šhead = [1,4,3,2,5,2], x = 3è¾“å‡ºï¼š[1,2,2,4,3,5]</code></pre><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><pre><code>è¾“å…¥ï¼šhead = [2,1], x = 2è¾“å‡ºï¼š[1,2]</code></pre><h4 id="é¢˜è§£">é¢˜è§£</h4><pre class=" language-language-java"><code class="language-language-java">/** * Definition for singly-linked list. * public class ListNode { *     int val; *     ListNode next; *     ListNode() {} *     ListNode(int val) { this.val = val; } *     ListNode(int val, ListNode next) { this.val = val; this.next = next; } * } */class Solution {    public ListNode partition(ListNode head, int x) {        ListNode small = new ListNode(0);        // å¤´èŠ‚ç‚¹        ListNode smallHead = small;        // å¤´èŠ‚ç‚¹        ListNode big = new ListNode(0);        ListNode bigHead = big;        while(head != null){            if(head.val < x){                small.next = head;                small = small.next;            }else{                big.next = head;                big = big.next;            }            head = head.next;        }        big.next = null;        small.next = bigHead.next;        return smallHead.next;    }}</code></pre><h4 id="å­¦ä¹ ç‚¹">å­¦ä¹ ç‚¹</h4><p>1.åˆ†å‰²æ€æƒ³</p><p>2.é“¾è¡¨æŒ‡é’ˆæ€æƒ³</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FPNç½‘ç»œç†è®º</title>
      <link href="/2021/11/11/fpn-wang-luo-li-lun/"/>
      <url>/2021/11/11/fpn-wang-luo-li-lun/</url>
      
        <content type="html"><![CDATA[<h3 id="FPNç½‘ç»œç†è®º">FPNç½‘ç»œç†è®º</h3><h4 id="FPNè®ºæ–‡">FPNè®ºæ–‡</h4><h5 id="æ‘˜è¦">æ‘˜è¦</h5><p>ç‰¹å¾é‡‘å­—å¡”æ˜¯è¯†åˆ«ç³»ç»Ÿä¸­ç”¨äºæ£€æµ‹ä¸åŒå°ºåº¦å¯¹è±¡çš„åŸºæœ¬ç»„ä»¶ã€‚ä½†æ˜¯æœ€è¿‘çš„æ·±åº¦å­¦ä¹ å¯¹è±¡æ£€æµ‹å™¨é¿å…äº†é‡‘å­—å¡”è¡¨ç¤ºï¼Œéƒ¨åˆ†åŸå› æ˜¯å®ƒä»¬æ˜¯è®¡ç®—å’Œå†…å­˜å¯†é›†å‹çš„ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨æ·±åº¦å·ç§¯ç½‘ç»œå›ºæœ‰çš„å¤šå°ºåº¦é‡‘å­—å¡”å±‚æ¬¡ç»“æ„æ¥æ„å»ºæ²¡æœ‰é¢å¤–æˆæœ¬çš„ç‰¹å¾é‡‘å­—å¡”ã€‚å¼€å‘äº†ä¸€ç§å…·æœ‰æ¨ªå‘è¿æ¥çš„è‡ªé¡¶å‘ä¸‹æ¶æ„ï¼Œç”¨äºæ„å»ºæ‰€æœ‰å°ºåº¦çš„é«˜çº§è¯­ä¹‰ç‰¹å¾å›¾ã€‚è¿™ç§ç§°ä¸ºç‰¹å¾é‡‘å­—å¡”ç½‘ç»œ (FPN) çš„æ¶æ„åœ¨å¤šä¸ªåº”ç”¨ç¨‹åºä¸­ä½œä¸ºé€šç”¨ç‰¹å¾æå–å™¨æ‹¥æœ‰æ˜¾è‘—çš„æ”¹è¿›ã€‚åœ¨åŸºæœ¬çš„ Faster R-CNN ç³»ç»Ÿä¸­ä½¿ç”¨ FPNï¼Œæˆ‘ä»¬çš„æ–¹æ³•åœ¨COCOæ£€æµ‹åŸºå‡†ä¸Šå®ç°äº†æœ€å…ˆè¿›çš„å•æ¨¡å‹ç»“æœï¼Œè¶…è¶Šäº†æ‰€æœ‰ç°æœ‰çš„å•æ¨¡å‹ï¼ŒåŒ…æ‹¬æ¥è‡ªCOCO 2016çš„æŒ‘æˆ˜èƒœåˆ©è€…ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çš„æ–¹æ³•å¯ä»¥åœ¨ GPU ä¸Šä»¥ 6 FPS çš„é€Ÿåº¦è¿è¡Œï¼Œå› æ­¤æ˜¯å¤šå°ºåº¦ç›®æ ‡æ£€æµ‹çš„å®ç”¨ä¸”å‡†ç¡®çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åˆ©ç”¨å·ç§¯ç½‘ç»œçš„é‡‘å­—å¡”å…·æœ‰ä»ä½çº§åˆ°é«˜çº§çš„è¯­ä¹‰ç‰¹å¾å±‚æ¬¡ç»“æ„ï¼Œå¹¶æ„å»ºä¸€ä¸ªå§‹ç»ˆå…·æœ‰é«˜çº§è¯­ä¹‰çš„ç‰¹å¾é‡‘å­—å¡”ã€‚ ç”±æ­¤äº§ç”Ÿçš„ç‰¹å¾é‡‘å­—å¡”ç½‘ç»œæ˜¯é€šç”¨çš„ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸“æ³¨äºæ»‘åŠ¨çª—å£åŒºåŸŸå€™é€‰å™¨å’ŒåŸºäºåŒºåŸŸçš„æ£€æµ‹å™¨ï¼ˆFast R-CNNï¼‰ã€‚æˆ‘ä»¬è¿˜å°† FPN æ¨å¹¿åˆ°å®ä¾‹åˆ†å‰²ä¸­ã€‚</p><p>æˆ‘ä»¬çš„æ–¹æ³•å°†ä»»æ„å¤§å°çš„å•å°ºåº¦å›¾åƒä½œä¸ºè¾“å…¥ï¼Œå¹¶ä»¥å®Œå…¨å·ç§¯çš„æ–¹å¼åœ¨å¤šä¸ªçº§åˆ«è¾“å‡ºæŒ‰æ¯”ä¾‹å¤§å°çš„ç‰¹å¾å›¾ã€‚ è¯¥è¿‡ç¨‹ç‹¬ç«‹äºä¸»å¹²å·ç§¯æ¶æ„ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ ResNetså±•ç¤ºäº†ç»“æœã€‚ æˆ‘ä»¬é‡‘å­—å¡”çš„æ„å»ºæ¶‰åŠè‡ªä¸‹è€Œä¸Šçš„è·¯å¾„ã€è‡ªä¸Šè€Œä¸‹çš„è·¯å¾„å’Œæ¨ªå‘è¿æ¥ï¼Œå¦‚ä¸‹æ‰€è¿°ã€‚</p><h5 id="è‡ªä¸‹è€Œä¸Šçš„è·¯å¾„">è‡ªä¸‹è€Œä¸Šçš„è·¯å¾„</h5><p>è‡ªä¸‹è€Œä¸Šçš„è·¯å¾„æ˜¯ä¸»å¹²å·ç§¯ç½‘ç»œçš„å‰é¦ˆè®¡ç®—ï¼Œå®ƒè®¡ç®—ç”±å¤šä¸ªå°ºåº¦çš„ç‰¹å¾å›¾ç»„æˆçš„ç‰¹å¾å±‚æ¬¡ç»“æ„ï¼Œç¼©æ”¾æ­¥é•¿ä¸º 2ã€‚é€šå¸¸æœ‰è®¸å¤šå±‚äº§ç”Ÿç›¸åŒå¤§å°çš„è¾“å‡ºå›¾ï¼Œæˆ‘ä»¬è¯´è¿™äº›å±‚åœ¨åŒä¸€ä¸ªç½‘ç»œé˜¶æ®µã€‚ å¯¹äºæˆ‘ä»¬çš„ç‰¹å¾é‡‘å­—å¡”ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªé˜¶æ®µå®šä¹‰ä¸€ä¸ªé‡‘å­—å¡”çº§åˆ«ã€‚ æˆ‘ä»¬é€‰æ‹©æ¯ä¸ªé˜¶æ®µæœ€åä¸€å±‚çš„è¾“å‡ºä½œä¸ºæˆ‘ä»¬çš„ç‰¹å¾å›¾å‚è€ƒé›†ï¼Œæˆ‘ä»¬å°†å¯¹å…¶è¿›è¡Œä¸°å¯Œä»¥åˆ›å»ºæˆ‘ä»¬çš„é‡‘å­—å¡”ã€‚ è¿™ç§é€‰æ‹©å¾ˆè‡ªç„¶ï¼Œå› ä¸ºæ¯ä¸ªé˜¶æ®µçš„æœ€æ·±å±‚åº”è¯¥å…·æœ‰æœ€å¼ºçš„ç‰¹å¾ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå¯¹äº ResNetsï¼Œæˆ‘ä»¬ä½¿ç”¨æ¯ä¸ªé˜¶æ®µçš„æœ€åä¸€ä¸ªæ®‹å·®å—è¾“å‡ºçš„ç‰¹å¾æ¿€æ´»ã€‚ å¯¹äº conv2ã€conv3ã€conv4 å’Œ conv5 è¾“å‡ºï¼Œæˆ‘ä»¬å°†è¿™äº›æœ€åæ®‹å·®å—çš„è¾“å‡ºè¡¨ç¤ºä¸º {C2ã€C3ã€C4ã€C5}ï¼Œå¹¶æ³¨æ„åˆ°å®ƒä»¬çš„æ­¥é•¿ä¸º {4, 8, 16, 32} ä¸ªåƒç´ è¾“å…¥å›¾åƒã€‚ ç”±äºå…¶å¤§å†…å­˜å ç”¨ï¼Œæˆ‘ä»¬æ²¡æœ‰å°† conv1 åŒ…å«åœ¨é‡‘å­—å¡”ä¸­ã€‚</p><h5 id="è‡ªä¸Šè€Œä¸‹çš„è·¯å¾„å’Œæ¨ªå‘è¿æ¥">è‡ªä¸Šè€Œä¸‹çš„è·¯å¾„å’Œæ¨ªå‘è¿æ¥</h5><p>è‡ªä¸Šè€Œä¸‹çš„è·¯å¾„é€šè¿‡å¯¹æ¥è‡ªæ›´é«˜é‡‘å­—å¡”çº§åˆ«çš„ç©ºé—´ä¸Šæ›´ç²—ç³™ä½†è¯­ä¹‰ä¸Šæ›´å¼ºå¤§çš„ç‰¹å¾å›¾è¿›è¡Œä¸Šé‡‡æ ·æ¥äº§ç”Ÿæ›´é«˜åˆ†è¾¨ç‡çš„ç‰¹å¾ã€‚ è¿™äº›ç‰¹å¾é€šè¿‡æ¨ªå‘è¿æ¥ä»è‡ªä¸‹è€Œä¸Šçš„è·¯å¾„ä¸­å¾—åˆ°å¢å¼ºã€‚ æ¯ä¸ªæ¨ªå‘è¿æ¥ä»è‡ªä¸‹è€Œä¸Šçš„è·¯å¾„å’Œè‡ªä¸Šè€Œä¸‹çš„è·¯å¾„ä¸­åˆå¹¶ç›¸åŒç©ºé—´å¤§å°çš„ç‰¹å¾å›¾ã€‚ è‡ªä¸‹è€Œä¸Šçš„ç‰¹å¾å›¾å…·æœ‰è¾ƒä½çº§åˆ«çš„è¯­ä¹‰ï¼Œä½†å› ä¸ºå®ƒè¢«å­é‡‡æ ·çš„æ¬¡æ•°æ›´å°‘å…¶æ¿€æ´»æ›´å‡†ç¡®ã€‚</p><p>å›¾ 3 æ˜¾ç¤ºäº†æ„å»ºè‡ªé¡¶å‘ä¸‹ç‰¹å¾å›¾çš„æ„å»ºå—ã€‚ å¯¹äºè¾ƒç²—ç³™åˆ†è¾¨ç‡çš„ç‰¹å¾å›¾ï¼Œæˆ‘ä»¬å°†ç©ºé—´åˆ†è¾¨ç‡ä¸Šé‡‡æ · 2 å€ï¼ˆä¸ºç®€å•èµ·è§ï¼Œä½¿ç”¨æœ€è¿‘é‚»ä¸Šé‡‡æ ·ï¼‰ã€‚ ç„¶åé€šè¿‡é€ç»´åº¦åŠ æ³•å°†ä¸Šé‡‡æ ·æ˜ å°„ä¸ç›¸åº”çš„è‡ªåº•å‘ä¸Šæ˜ å°„ï¼ˆç»è¿‡ 1Ã—1 å·ç§¯å±‚ä»¥å‡å°‘é€šé“å°ºå¯¸ï¼‰åˆå¹¶ã€‚ è¿™ä¸ªè¿‡ç¨‹ä¼šä¸æ–­è¿­ä»£ï¼Œç›´åˆ°ç”Ÿæˆæœ€ç²¾ç»†çš„åˆ†è¾¨ç‡ç‰¹å¾å›¾ã€‚ å¼€å§‹è¿­ä»£ä¹‹å‰ï¼Œæˆ‘ä»¬ç®€å•åœ°åœ¨ C5 ä¸Šé™„åŠ ä¸€ä¸ª 1Ã—1 çš„å·ç§¯å±‚æ¥ç”Ÿæˆæœ€ç²—ç³™çš„åˆ†è¾¨ç‡å›¾ã€‚ æœ€åï¼Œæˆ‘ä»¬åœ¨æ¯ä¸ªåˆå¹¶å›¾ä¸Šé™„åŠ ä¸€ä¸ª 3 Ã— 3 çš„å·ç§¯æ¥ç”Ÿæˆæœ€ç»ˆçš„ç‰¹å¾å›¾ï¼Œè¿™æ˜¯ä¸ºäº†å‡å°‘ä¸Šé‡‡æ ·çš„æ··å æ•ˆåº”ã€‚ è¿™æœ€åä¸€ç»„ç‰¹å¾å›¾ç§°ä¸º{P2ï¼ŒP3ï¼ŒP4ï¼ŒP5}ï¼Œå¯¹åº”äºåˆ†åˆ«å…·æœ‰ç›¸åŒç©ºé—´å¤§å°çš„{C2ï¼ŒC3ï¼ŒC4ï¼ŒC5}ã€‚</p><p>ç®€å•æ€§æ˜¯æˆ‘ä»¬è®¾è®¡çš„æ ¸å¿ƒï¼Œæˆ‘ä»¬å‘ç°æˆ‘ä»¬çš„æ¨¡å‹å¯¹è®¸å¤šè®¾è®¡é€‰æ‹©éƒ½æ˜¯ç¨³å¥çš„ã€‚ æˆ‘ä»¬å·²ç»å¯¹æ›´å¤æ‚çš„å—è¿›è¡Œäº†å®éªŒï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨å¤šå±‚æ®‹å·®å—ä½œä¸ºè¿æ¥ï¼‰å¹¶è§‚å¯Ÿåˆ°ç¨å¾®å¥½ä¸€ç‚¹çš„ç»“æœã€‚ è®¾è®¡æ›´å¥½çš„è¿æ¥æ¨¡å—ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬é€‰æ‹©äº†ä¸Šè¿°çš„ç®€å•è®¾è®¡ã€‚</p><h4 id="ç›¸å…³ç†è®º">ç›¸å…³ç†è®º</h4><p><img src="http://dingdm.online/fpn3.png" alt=""></p><p>FPNæ˜¯ä¸ºäº†è‡ªç„¶åœ°åˆ©ç”¨CNNå±‚çº§ç‰¹å¾çš„é‡‘å­—å¡”å½¢å¼ï¼Œ<strong>åŒæ—¶ç”Ÿæˆåœ¨æ‰€æœ‰å°ºåº¦ä¸Šéƒ½å…·æœ‰å¼ºè¯­ä¹‰ä¿¡æ¯çš„ç‰¹å¾é‡‘å­—å¡”</strong>ã€‚æ‰€ä»¥FPNçš„ç»“æ„è®¾è®¡äº†top-downç»“æ„å’Œæ¨ªå‘è¿æ¥ï¼Œä»¥æ­¤èåˆå…·æœ‰é«˜åˆ†è¾¨ç‡çš„æµ…å±‚layerå’Œå…·æœ‰ä¸°å¯Œè¯­ä¹‰ä¿¡æ¯çš„æ·±å±‚layerã€‚è¿™æ ·å°±å®ç°äº†ä»å•å°ºåº¦çš„å•å¼ è¾“å…¥å›¾åƒï¼Œå¿«é€Ÿæ„å»ºåœ¨æ‰€æœ‰å°ºåº¦ä¸Šéƒ½å…·æœ‰å¼ºè¯­ä¹‰ä¿¡æ¯çš„ç‰¹å¾é‡‘å­—å¡”ï¼ŒåŒæ—¶ä¸äº§ç”Ÿæ˜æ˜¾çš„ä»£ä»·ã€‚</p><p>å› ä¸ºæ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œå…·æœ‰å†…åœ¨çš„å¤šå°ºåº¦æ€§è´¨ï¼ˆæ± åŒ–å¸¦æ¥çš„ä¸åŒsizeçš„feature mapï¼‰ï¼Œç½‘ç»œç”±æµ…å³æ·±ï¼Œåˆ†è¾¨ç‡è¶Šæ¥è¶Šç²—ç³™ï¼Œä½†æ˜¯è¯­ä¹‰ä¿¡æ¯è¶Šæ¥è¶Šä¸°å¯Œã€‚ç›¸ä¼¼çš„æ€æƒ³åˆ©ç”¨åœ¨FCNçš„skip layerã€‚è¦è¯†åˆ«å¤šå°ºåº¦çš„ç›®æ ‡ï¼Œä¹Ÿéœ€è¦åˆ©ç”¨ä¸åŒlevelçš„feature mapã€‚ä½œè€…åˆ©ç”¨äº†è¿™ç§å†…åœ¨å¤šå°ºåº¦æ€§è´¨ï¼Œè®¾è®¡å‡ºFPNã€‚</p><p>FPNä¸­çš„ç¼©æ”¾æ¯”ä¾‹ä¸º2çš„æ•´æ•°å€ï¼Œåˆå¹¶çš„é¡¹ä¸ºæ¨ªå‘è¿æ¥çš„1*1å·ç§¯æ ¸å’Œè‡ªä¸Šè€Œä¸‹çš„2å€çš„ä¸Šé‡‡æ ·ã€‚</p><p>ä½¿ç”¨æœ€è¿‘é‚»å€¼æ’å€¼æ³•ï¼Œå¯ä»¥åœ¨ä¸Šé‡‡æ ·çš„è¿‡ç¨‹ä¸­æœ€å¤§ç¨‹åº¦åœ°ä¿ç•™ç‰¹å¾å›¾çš„è¯­ä¹‰ä¿¡æ¯(æœ‰åˆ©äºåˆ†ç±»)ï¼Œä»è€Œä¸bottom-up è¿‡ç¨‹ä¸­ç›¸åº”çš„å…·æœ‰ä¸°å¯Œçš„ç©ºé—´ä¿¡æ¯(é«˜åˆ†è¾¨ç‡ï¼Œæœ‰åˆ©äºå®šä½)çš„ç‰¹å¾å›¾è¿›è¡Œèåˆï¼Œä»è€Œå¾—åˆ°æ—¢æœ‰è‰¯å¥½çš„ç©ºé—´ä¿¡æ¯åˆæœ‰è¾ƒå¼ºçƒˆçš„è¯­ä¹‰ä¿¡æ¯çš„ç‰¹å¾å›¾ã€‚</p><p><img src="http://dingdm.online/fpn1.png" alt=""></p><p>ä»£ç æ˜å¤©æ ¹æ®è¿™å¼ æ¨¡å‹å›¾æ…¢æ…¢å†™ã€‚è¿™ä¸ªæ¨¡å‹æ˜¯ç”¨äºfaster rcnnçš„ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ResNetç½‘ç»œç†è®º</title>
      <link href="/2021/11/11/resnet-wang-luo-jie-gou-li-lun/"/>
      <url>/2021/11/11/resnet-wang-luo-jie-gou-li-lun/</url>
      
        <content type="html"><![CDATA[<h3 id="ResNetç½‘ç»œç†è®º">ResNetç½‘ç»œç†è®º</h3><h4 id="ResNetè®ºæ–‡">ResNetè®ºæ–‡</h4><h5 id="æ‘˜è¦">æ‘˜è¦</h5><p>æ›´æ·±çš„ç¥ç»ç½‘ç»œæ›´éš¾è®­ç»ƒã€‚æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªæ®‹å·®å­¦ä¹ æ¡†æ¶ï¼Œä»¥ç®€åŒ–æ¯”æ™®é€šç½‘ç»œæ›´æ·±çš„ç½‘ç»œçš„è®­ç»ƒã€‚æˆ‘ä»¬æä¾›äº†å…¨é¢çš„ç»éªŒè¯æ®ï¼Œè¡¨æ˜è¿™äº›æ®‹å·®ç½‘ç»œæ›´å®¹æ˜“ä¼˜åŒ–ï¼Œå¹¶ä¸”å¯ä»¥ä»æ˜¾ç€å¢åŠ çš„æ·±åº¦ä¸­è·å¾—å‡†ç¡®æ€§ã€‚åœ¨ ImageNet æ•°æ®é›†ä¸Šï¼Œæˆ‘ä»¬è¯„ä¼°äº†æ·±åº¦é«˜è¾¾ 152 å±‚çš„æ®‹å·®ç½‘ç»œâ€”â€”æ¯” VGG ç½‘ç»œæ·±8å€ï¼Œä½†ä»ç„¶å…·æœ‰è¾ƒä½çš„å¤æ‚æ€§ã€‚è¿™äº›æ®‹å·®ç½‘ç»œçš„é›†åˆåœ¨ ImageNet æµ‹è¯•é›†ä¸Šå®ç°äº† 3.57% çš„é”™è¯¯ç‡ã€‚è¯¥ç»“æœåœ¨ ILSVRC 2015 åˆ†ç±»ä»»åŠ¡ä¸­è·å¾—ç¬¬ä¸€åã€‚æˆ‘ä»¬è¿˜å¯¹å…·æœ‰ 100 å±‚å’Œ 1000 å±‚çš„ CIFAR-10 è¿›è¡Œäº†åˆ†æã€‚</p><h5 id="æ®‹å·®å­¦ä¹ ">æ®‹å·®å­¦ä¹ </h5><p>è®©æˆ‘ä»¬å°† H(x) è§†ä¸ºé€‚åˆå‡ ä¸ªå †å å±‚ï¼ˆä¸ä¸€å®šæ˜¯æ•´ä¸ªç½‘ç»œï¼‰çš„åº•å±‚æ˜ å°„ï¼Œå…¶ä¸­ x è¡¨ç¤ºè¿™äº›å±‚ä¸­ç¬¬ä¸€å±‚çš„è¾“å…¥ï¼Œå¦‚æœå‡è®¾å¤šä¸ªéçº¿æ€§å±‚å¯ä»¥æ¸è¿‘é€¼è¿‘å¤æ‚å‡½æ•°ï¼Œé‚£ä¹ˆå‡è®¾å®ƒä»¬å¯ä»¥æ¸è¿‘é€¼è¿‘æ®‹å·®å‡½æ•°ï¼Œå³ H(x) âˆ’ xï¼ˆå‡è®¾è¾“å…¥å’Œè¾“å‡ºæ˜¯å°ºå¯¸ç›¸åŒï¼‰ã€‚ å› æ­¤ï¼Œä¸å…¶æœŸæœ›å †å å±‚è¿‘ä¼¼ H(x)ï¼Œæˆ‘ä»¬æ˜ç¡®åœ°è®©è¿™äº›å±‚è¿‘ä¼¼ä¸€ä¸ªæ®‹å·®å‡½æ•° F(x) = H(x) âˆ’ xã€‚åŸæ¥çš„å‡½æ•°å› æ­¤å˜æˆäº† F(x)+xã€‚ å°½ç®¡è¿™ä¸¤ç§å½¢å¼éƒ½åº”è¯¥èƒ½å¤Ÿæ¸è¿‘é€¼è¿‘æ‰€éœ€çš„å‡½æ•°ï¼ˆå¦‚å‡è®¾çš„é‚£æ ·ï¼‰ï¼Œä½†å­¦ä¹ çš„éš¾æ˜“ç¨‹åº¦å¯èƒ½ä¸åŒã€‚</p><p>è¿™ç§é‡æ–°è¡¨è¿°çš„åŠ¨æœºæ˜¯å…³äºé€€åŒ–é—®é¢˜çš„è¿åç›´è§‰çš„ç°è±¡ã€‚ æ­£å¦‚æˆ‘ä»¬åœ¨ä»‹ç»ä¸­æ‰€è®¨è®ºçš„ï¼Œå¦‚æœæ·»åŠ çš„å±‚å¯ä»¥æ„å»ºä¸ºæ’ç­‰æ˜ å°„ï¼Œé‚£ä¹ˆæ›´æ·±çš„æ¨¡å‹çš„è®­ç»ƒè¯¯å·®åº”è¯¥ä¸å¤§äºå…¶æ›´æµ…çš„å¯¹åº”éƒ¨åˆ†ã€‚ é€€åŒ–é—®é¢˜è¡¨æ˜æ±‚è§£å™¨å¯èƒ½éš¾ä»¥é€šè¿‡å¤šä¸ªéçº¿æ€§å±‚é€¼è¿‘æ’ç­‰æ˜ å°„ã€‚ é€šè¿‡æ®‹å·®å­¦ä¹ é‡æ–°è¡¨è¿°ï¼Œå¦‚æœæ’ç­‰æ˜ å°„æ˜¯æœ€ä¼˜çš„ï¼Œæ±‚è§£å™¨å¯ä»¥ç®€å•åœ°å°†å¤šä¸ªéçº¿æ€§å±‚çš„æƒé‡æ¨å‘é›¶ä»¥æ¥è¿‘æ’ç­‰æ˜ å°„ã€‚</p><p>åœ¨å®é™…æƒ…å†µä¸‹ï¼Œæ’ç­‰æ˜ å°„ä¸å¤ªå¯èƒ½æ˜¯æœ€ä½³çš„ï¼Œä½†æˆ‘ä»¬çš„é‡æ–°è¡¨è¿°å¯èƒ½æœ‰åŠ©äºå…ˆå†³é—®é¢˜ã€‚ å¦‚æœæœ€ä¼˜å‡½æ•°æ›´æ¥è¿‘æ’ç­‰æ˜ å°„è€Œä¸æ˜¯é›¶æ˜ å°„ï¼Œåˆ™æ±‚è§£å™¨åº”è¯¥æ›´å®¹æ˜“å‚è€ƒæ’ç­‰æ˜ å°„æ‰¾åˆ°æ‰°åŠ¨ï¼Œè€Œä¸æ˜¯å°†å‡½æ•°ä½œä¸ºæ–°å‡½æ•°å­¦ä¹ ã€‚ æˆ‘ä»¬é€šè¿‡å®éªŒè¡¨æ˜ï¼Œå­¦ä¹ åˆ°çš„æ®‹å·®å‡½æ•°é€šå¸¸å…·æœ‰å¾ˆå°çš„å“åº”ï¼Œè¿™è¡¨æ˜æ’ç­‰æ˜ å°„æä¾›äº†åˆç†çš„é¢„å¤„ç†ã€‚</p><h5 id="é€šè¿‡æ·å¾„è¿›è¡Œæ’ç­‰æ˜ å°„">é€šè¿‡æ·å¾„è¿›è¡Œæ’ç­‰æ˜ å°„</h5><p>æˆ‘ä»¬å¯¹æ¯å‡ ä¸ªå †å å±‚é‡‡ç”¨æ®‹å·®å­¦ä¹ ã€‚ ä¸€ä¸ªæ„æˆå¦‚å›¾æ‰€ç¤ºã€‚æ­£å¼åœ°ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªå…¬å¼å®šä¹‰ä¸º</p><p><img src="http://dingdm.online/resnet5.png" alt=""></p><p>è¿™é‡Œ x å’Œ y æ˜¯æ‰€è€ƒè™‘å±‚çš„è¾“å…¥å’Œè¾“å‡ºå‘é‡ã€‚ å‡½æ•° F (x, {Wi }) è¡¨ç¤ºè¦å­¦ä¹ çš„æ®‹å·®æ˜ å°„ã€‚ å¯¹äºå›¾ ä¸­å…·æœ‰ä¸¤å±‚çš„ç¤ºä¾‹ï¼ŒF = W2Ïƒ(W1x) å…¶ä¸­ Ïƒ è¡¨ç¤º ReLUæ¿€æ´»å‡½æ•°ï¼Œå¹¶ä¸”ä¸ºäº†ç®€åŒ–ç¬¦å·çœç•¥äº†åå·®ã€‚ æ“ä½œ F + x æ˜¯é€šè¿‡å¿«æ·è¿æ¥å’Œé€å…ƒç´ åŠ æ³•æ¥æ‰§è¡Œçš„ã€‚</p><p>ç­‰å¼ä¸­çš„å¿«æ·è¿æ¥æ—¢ä¸å¼•å…¥é¢å¤–å‚æ•°ï¼Œä¹Ÿä¸å¼•å…¥è®¡ç®—å¤æ‚åº¦ã€‚ è¿™ä¸ä»…åœ¨å®è·µä¸­å¾ˆæœ‰å¸å¼•åŠ›ï¼Œè€Œä¸”åœ¨æˆ‘ä»¬æ¯”è¾ƒæ™®é€šç½‘ç»œå’Œæ®‹å·®ç½‘ç»œæ—¶ä¹Ÿå¾ˆé‡è¦ã€‚ æˆ‘ä»¬å¯ä»¥å…¬å¹³åœ°æ¯”è¾ƒåŒæ—¶å…·æœ‰ç›¸åŒæ•°é‡å‚æ•°ã€æ·±åº¦ã€å®½åº¦å’Œè®¡ç®—æˆæœ¬çš„æ™®é€š/æ®‹å·®ç½‘ç»œã€‚</p><p>x å’Œ F çš„ç»´åº¦åœ¨ç­‰å¼ä¸­å¿…é¡»ç›¸ç­‰ã€‚ å¦‚æœä¸æ˜¯è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¿«æ·è¿æ¥è¿›è¡Œçº¿æ€§æŠ•å½± Ws ä»¥åŒ¹é…ç»´åº¦</p><p><img src="http://dingdm.online/resnet6.png" alt=""></p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ–¹ç¨‹ä¸­ä½¿ç”¨æ–¹Wsã€‚ ä½†æ˜¯æˆ‘ä»¬å°†é€šè¿‡å®éªŒè¯æ˜æ’ç­‰æ˜ å°„è¶³ä»¥è§£å†³é€€åŒ–é—®é¢˜å¹¶ä¸”æ˜¯ä¾¿å®œçš„ï¼Œå› æ­¤Wsä»…åœ¨åŒ¹é…ç»´åº¦æ—¶ä½¿ç”¨ã€‚</p><p>æ®‹å·®å‡½æ•° F çš„å½¢å¼æ˜¯çµæ´»çš„ã€‚ æœ¬æ–‡ä¸­çš„å®éªŒæ¶‰åŠå…·æœ‰ä¸¤å±‚æˆ–ä¸‰å±‚çš„å‡½æ•° Fï¼Œä½†æ›´å¤šå±‚ä¹Ÿæ˜¯å¯èƒ½çš„ã€‚ ä½†å¦‚æœFåªæœ‰å•å±‚ï¼Œå¯¹æ­¤æˆ‘ä»¬æ²¡æœ‰è§‚å¯Ÿåˆ°ä¼˜åŠ¿ã€‚</p><p>æˆ‘ä»¬è¿˜æ³¨æ„åˆ°ï¼Œè™½ç„¶ä¸Šè¿°å…³äºå…¨è¿æ¥å±‚çš„ç¬¦å·æ˜¯ç®€åŒ–çš„ï¼Œä½†å®ƒä»¬é€‚ç”¨äºå·ç§¯å±‚ã€‚ å‡½æ•° F(x,{Wi}) å¯ä»¥è¡¨ç¤ºå¤šä¸ªå·ç§¯å±‚ï¼Œé€ä¸ªé€šé“åœ°åœ¨ä¸¤ä¸ªç‰¹å¾å›¾ä¸Šæ‰§è¡Œç»´åº¦æ·»åŠ ã€‚</p><h5 id="ç½‘ç»œæ¶æ„">ç½‘ç»œæ¶æ„</h5><h6 id="æ®‹å·®ç½‘ç»œ">æ®‹å·®ç½‘ç»œ</h6><p>åŸºäºä¸Šè¿°æ™®é€šç½‘ç»œï¼Œæˆ‘ä»¬æ’å…¥å¿«æ·è¿æ¥ï¼Œå°†ç½‘ç»œè½¬æ¢ä¸ºå…¶å¯¹åº”çš„æ®‹å·®ç‰ˆæœ¬ã€‚ å½“è¾“å…¥å’Œè¾“å‡ºçš„ç»´åº¦ç›¸åŒæ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æ’ç­‰å¿«æ·è¿æ¥ã€‚ å½“ç»´åº¦å¢åŠ æ—¶ï¼Œæˆ‘ä»¬è€ƒè™‘ä¸¤ä¸ªé€‰é¡¹ï¼šï¼ˆAï¼‰å¿«æ·è¿æ¥ä»ç„¶æ‰§è¡Œæ’ç­‰æ˜ å°„ï¼Œå¡«å……é¢å¤–çš„é›¶æ¡ç›®ä»¥å¢åŠ ç»´åº¦ã€‚ è¿™ä¸ªé€‰é¡¹æ²¡æœ‰å¼•å…¥é¢å¤–çš„å‚æ•°ï¼› (B) ä½¿ç”¨æŠ•å½±å¿«æ·æ–¹å¼åŒ¹é…ç»´åº¦ï¼ˆç”± 1Ã—1 å·ç§¯å®Œæˆï¼‰ã€‚ å¯¹äºè¿™ä¸¤ä¸ªé€‰é¡¹ï¼Œå½“å¿«æ·è¿æ¥è¿æ¥ä¸¤ç§å°ºå¯¸çš„ç‰¹å¾å›¾æ—¶ï¼Œå®ƒä»¬çš„æ­¥é•¿ä¸º 2ã€‚</p><h4 id="å®ç°">å®ç°</h4><p>æˆ‘ä»¬å¯¹ ImageNet çš„å®ç°éµå¾ªå‰äººçš„åšæ³•ã€‚å›¾åƒè¢«è°ƒæ•´å¤§å°ï¼Œå…¶è¾ƒçŸ­çš„è¾¹åœ¨ [256, 480] ä¸­éšæœºé‡‡æ ·ä»¥è¿›è¡Œç¼©æ”¾ ã€‚ä¸€ä¸ª 224Ã—224 çš„è£å‰ªæ˜¯ä»å›¾åƒæˆ–å…¶æ°´å¹³ç¿»è½¬ä¸­éšæœºé‡‡æ ·çš„ï¼Œå‡å»æ¯ä¸ªåƒç´ çš„å¹³å‡å€¼ ã€‚ä½¿ç”¨äº† [21] ä¸­çš„æ ‡å‡†é¢œè‰²å¢å¼ºã€‚æˆ‘ä»¬åœ¨æ¯æ¬¡å·ç§¯ä¹‹åå’Œæ¿€æ´»ä¹‹å‰é‡‡ç”¨æ‰¹é‡å½’ä¸€åŒ–ï¼ˆBNï¼‰ï¼Œéµå¾ª [16]ã€‚æˆ‘ä»¬æŒ‰ç…§ [13] ä¸­çš„æ–¹æ³•åˆå§‹åŒ–æƒé‡ï¼Œå¹¶ä»å¤´å¼€å§‹è®­ç»ƒæ‰€æœ‰æ™®é€š/æ®‹å·®ç½‘ç»œã€‚æˆ‘ä»¬ä½¿ç”¨å°æ‰¹é‡å¤§å°ä¸º 256 çš„ SGDä¼˜åŒ–å‡½æ•°ã€‚å­¦ä¹ ç‡ä» 0.1 å¼€å§‹ï¼Œå¹¶åœ¨è¯¯å·®å¹³ç¨³æ—¶é™¤ä»¥ 10ï¼Œå¹¶ä¸”æ¨¡å‹æœ€å¤šè®­ç»ƒ 60 Ã— 104 æ¬¡è¿­ä»£ã€‚æˆ‘ä»¬ä½¿ç”¨ 0.0001 çš„æƒé‡è¡°å‡å’Œ 0.9 çš„åŠ¨é‡ã€‚æˆ‘ä»¬ä¸ä½¿ç”¨ dropout [14]ï¼Œéµå¾ª [16] ä¸­çš„åšæ³•ã€‚<br>åœ¨æµ‹è¯•ä¸­ï¼Œå¯¹äºæ¶ˆèå®éªŒï¼Œæˆ‘ä»¬é‡‡ç”¨æ ‡å‡†çš„ 10 è£å‰ªæµ‹è¯• [21]ã€‚ä¸ºäº†è·å¾—æœ€ä½³ç»“æœï¼Œæˆ‘ä»¬é‡‡ç”¨ [41, 13] ä¸­çš„å…¨å·ç§¯å½¢å¼ï¼Œå¹¶åœ¨å¤šä¸ªå°ºåº¦ä¸Šå–å¹³å‡å¾—åˆ†ï¼ˆè°ƒæ•´å›¾åƒå¤§å°ï¼Œä½¿çŸ­è¾¹åœ¨ {224, 256, 384, 480, 640} ä¸­ï¼‰ã€‚</p><p>æ¢¯åº¦æ¶ˆå¤±æˆ–æ¢¯åº¦çˆ†ç‚¸<br>é€€åŒ–é—®é¢˜</p><p>æ®‹å·®ç½‘ç»œçš„ç›¸åŠ æ˜¯ç»´åº¦çš„ç›¸åŠ </p><h4 id="æ®‹å·®å—">æ®‹å·®å—</h4><p><img src="http://dingdm.online/resnet1.png" alt=""></p><p>ä½¿ç”¨1*1çš„å·ç§¯æ ¸å¯ä»¥æœ‰æ•ˆçš„å‡å°‘å·ç§¯è¿‡ç¨‹ä¸­çš„å‚æ•°ä¸ªæ•°</p><h4 id="ResNetå·ç§¯ç½‘ç»œ">ResNetå·ç§¯ç½‘ç»œ</h4><p><img src="http://dingdm.online/resnet2.png" alt=""></p><p><img src="http://dingdm.online/resnet7.png" alt=""></p><p>åœ¨ä½¿ç”¨æ®‹å·®å—æ—¶ï¼Œå¯¹è¾“å…¥å’Œè¾“å‡ºç‰¹å¾è¿›è¡Œç›¸åŠ æ—¶è¦ä¿è¯çŸ©é˜µçš„shapeç›¸åŒï¼Œå› æ­¤å¯¹äºè¾“å…¥å’Œè¾“å‡ºçŸ©é˜µshapeä¸ç›¸åŒçš„æƒ…å†µï¼Œåœ¨è¿›è¡Œç›¸åŠ å‰ï¼Œéœ€è¦å¯¹è¾“å…¥ç‰¹å¾çŸ©é˜µè¿›è¡Œ1*1çš„å·ç§¯æ“ä½œæ¥æ”¹å˜ç‰¹å¾çŸ©é˜µçš„é€šé“æ•°ã€‚</p><h4 id="BN">BN</h4><p>å¯¹äºä¸€ä¸ªå…·æœ‰nå±‚æ·±åº¦çš„è¾“å…¥ç‰¹å¾çŸ©é˜µï¼Œå³ä¸€ä¸ªæ‹¥æœ‰nç»´çš„è¾“å…¥xï¼Œbnæ ‡å‡†åŒ–å¤„ç†å°±æ˜¯å¯¹è¿™nä¸ªé€šé“åˆ†åˆ«è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ä½¿å¾—æ¯ä¸ªé€šé“çš„ç‰¹å¾çŸ©é˜µéƒ½æ»¡è¶³æŸä¸ªåˆ†å¸ƒè§„å¾‹ã€‚</p><p><img src="http://dingdm.online/resnet4.png" alt=""></p><p><img src="http://dingdm.online/resnet3.png" alt=""></p><p>æ ¹æ®ç‰¹å¾çŸ©é˜µæ±‚çš„å‡å€¼å’Œæ–¹å·®ï¼Œå‡å€¼å’Œæ–¹å·®éƒ½ä¸ºnç»´å‘é‡ï¼Œå†é€šè¿‡bnçš„å…¬å¼è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ã€‚</p><p>1.è®­ç»ƒæ—¶è¦å°†trainingå‚æ•°è®¾ç½®ä¸ºTrueï¼Œåœ¨éªŒè¯æ—¶å°†trainingå‚æ•°è®¾ç½®ä¸ºFalseã€‚ä½¿ç”¨å†å²ç»Ÿè®¡çš„å‡å€¼å’Œæ–¹å·®ã€‚<br>2.batch sizeå°½å¯èƒ½è®¾ç½®å¤§ç‚¹ï¼Œè®¾ç½®å°åè¡¨ç°å¯èƒ½å¾ˆå·®ï¼Œè®¾ç½®çš„è¶Šå¤§æ±‚çš„å‡å€¼å’Œæ–¹å·®è¶Šæ¥è¿‘æ•´ä¸ªè®­ç»ƒé›†çš„å‡å€¼å’Œæ–¹å·®ã€‚<br>3.å»ºè®®å°†bnå±‚æ”¾åœ¨å·ç§¯å±‚å’Œæ¿€æ´»å±‚ä¹‹é—´ï¼Œä¸”å·ç§¯å±‚ä¸è¦ä½¿ç”¨åç½®biasã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yoloç›¸å…³ç†è®ºè¡¥å……</title>
      <link href="/2021/11/09/yolo-xiang-guan-li-lun/"/>
      <url>/2021/11/09/yolo-xiang-guan-li-lun/</url>
      
        <content type="html"><![CDATA[<h3 id="yoloç›¸å…³ç†è®ºè¡¥å……">yoloç›¸å…³ç†è®ºè¡¥å……</h3><p>TP:iouå¤§äºé˜ˆå€¼æ£€æµ‹æ¡†æ•°é‡<br>FP:iouå°äºç­‰äºé˜ˆå€¼çš„æ£€æµ‹æ¡†æ•°é‡<br>FN:æ²¡æœ‰æ£€æµ‹åˆ°çš„GTçš„æ•°é‡</p><p>precision:æŸ¥å‡†ç‡ï¼ŒTP/(TP+FP)ï¼Œé¢„æµ‹æ­£ç¡®çš„æ¯”ä¾‹<br>recall:æŸ¥å…¨ç‡ï¼ŒTP/(TP+FN)ï¼ŒçœŸå®ç›®æ ‡ä¸­ï¼Œæ¨¡å‹é¢„æµ‹æ­£ç¡®çš„ç›®æ ‡æ¯”ä¾‹</p><p>AP:P-Ræ›²çº¿ä¸‹é¢ç§¯<br>P-Ræ›²çº¿:precision-recallæ›²çº¿</p><p>mAP:å„ç±»APçš„å¹³å‡å€¼</p><h4 id="yolo-v1">yolo v1</h4><p><img src="http://dingdm.online/yolo%20v.png" alt=""></p><p>1.å°†ä¸€å¹…å›¾åƒåˆ†æˆS*Sä¸ªç½‘æ ¼ï¼Œå¦‚æœæŸä¸ªobjectçš„ä¸­å¿ƒè½åœ¨è¿™ä¸ªç½‘æ ¼ä¸­ï¼Œåˆ™è¿™ä¸ªç½‘ç»œå°±è´Ÿè´£é¢„æµ‹è¿™ä¸ªobjectã€‚</p><p>2.æ¯ä¸ªç½‘æ ¼è¦é¢„æµ‹Bä¸ªbounding boxï¼Œæ¯ä¸ªbounding boxé™¤äº†è¦é¢„æµ‹ä½ç½®ä¹‹å¤–ï¼Œè¿˜è¦é™„å¸¦é¢„æµ‹ä¸€ä¸ªconfidenceå€¼ã€‚æ¯ä¸ªç½‘æ ¼è¿˜è¦é¢„æµ‹Cä¸ªç±»åˆ«çš„åˆ†æ•°ã€‚</p><p><img src="http://dingdm.online/yolo%20v1%20art.png" alt=""></p><p>åœ¨yolo v1çš„æ¶æ„ä¸­ï¼Œæ¯ä¸€ä¸ªç½‘æ ¼è¿›è¡Œé¢„æµ‹æ—¶è¦é¢„æµ‹ä¸¤ä¸ªbounding boxï¼Œå³ä¸¤å¯¹ä½ç½®å‚æ•°å’Œä¸¤å¯¹confidenceï¼Œä»¥åŠæ•°æ®é›†è®¾å®šçš„åˆ†ç±»æ•°é‡ã€‚å³ä¸€å…±30ä¸ªå‚æ•°ã€‚</p><p><img src="http://dingdm.online/yolov1%20in.png" alt=""></p><p>yolo v1çš„ç½‘ç»œæ¶æ„ä¸­ï¼Œå‰é¢çš„éƒ¨åˆ†éƒ½æ˜¯æ­£å¸¸çš„å·ç§¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ç”±äºæ˜¯ç«¯åˆ°ç«¯çš„è®­ç»ƒï¼Œåœ¨æœ€åçš„å…¨è¿æ¥å±‚è¾“å‡º4096ç»´çš„å‘é‡ä¹‹åï¼Œéœ€è¦è¿›è¡Œreshapeæœ€ç»ˆè¾“å‡º7*7*30çš„tensorï¼Œè€Œå…¶ä¸­å¯¹åº”çš„æŸä¸€åˆ—çš„ç»“æ„åœ¨ä¸Šå›¾ä¸­å·²ç»è¯´æ˜ã€‚</p><p><img src="http://dingdm.online/yolo%20v1%20loss.png" alt=""></p><p>åœ¨yoloçš„è¾¹ç•ŒæŸå¤±å‡½æ•°ä¸­ï¼Œå¯¹äºé«˜å’Œå®½ä¸¤ä¸ªå±æ€§å€¼ï¼Œå¯¹äºç›¸åŒçš„åç§»ï¼Œå°ç‰©ä½“çš„æ£€æµ‹æ¡†ä¸å¤§ç‰©ä½“çš„æ£€æµ‹æ¡†çš„è¯¯å·®æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¯¹äºå°ç‰©ä½“æ¥è¯´ï¼Œiouæ›´å°ï¼Œå› æ­¤åº”è¯¥å¯¹è¿™ä¸¤ä¸ªå‚æ•°è¿›è¡Œå¼€æ–¹ï¼Œä½¿ç”¨å¹‚å‡½æ•°è¿›è¡ŒlossæŸå¤±è®¡ç®—ã€‚å…¶ä»–çš„æŸå¤±éƒ½æ˜¯ä½¿ç”¨è¯¯å·®å¹³æ–¹å’Œè¿›è¡Œè®¡ç®—ã€‚</p><h4 id="yolo-v3">yolo v3</h4><p><img src="http://dingdm.online/yolo%20v3%20ar.png" alt=""></p><p>æ®‹å·®æ¨¡å—å’Œä¸»åˆ†æ”¯ä¸Šçš„è¾“å‡ºè¿›è¡Œç›¸åŠ ã€‚æ¯ä¸ªæ¡†èµ·æ¥çš„å°±æ˜¯ä¸€ä¸ªæ®‹å·®ã€‚</p><p><img src="http://dingdm.online/anchor.png" alt=""></p><p>å¯¹äºyolo v3çš„tensorçš„å‚æ•°ä¸º85ä¸ªï¼Œå››ä¸ªé¢„æµ‹çš„ä½ç½®å‚æ•°ï¼Œä¸€ä¸ªconfidenceå’ŒCOCOæ•°æ®é›†çš„80ä¸ªåˆ†ç±»ã€‚</p><p><img src="http://dingdm.online/yolo%20v3%20xia.png" alt=""></p><p>åœ¨yolov3ä¸­è¿›è¡Œè¾“å‡ºé¢„æµ‹æ—¶ï¼Œå¯¹äºç‰¹å¾å›¾çš„æ‹¼æ¥å’ŒFPNçš„ç»´åº¦æ‹¼æ¥ä¸åŒï¼Œyolov3ä¸­çš„æ‹¼æ¥æ˜¯æ·±åº¦çš„æ‹¼æ¥ã€‚é¢„æµ‹è¾“å‡ºæ—¶ä½¿ç”¨çš„ä¸º1*1å·ç§¯ï¼Œè€Œä¸æ˜¯å·ç§¯å½’ä¸€å’Œæ¿€æ´»ã€‚</p><p><img src="http://dingdm.online/yolov3%20mu.png" alt=""></p><p>yolov3åœ¨è¿›è¡Œç›®æ ‡è¾¹ç•Œæ¡†æ£€æµ‹æ—¶ä½¿ç”¨äº†sigmoidå‡½æ•°æ¥å›ºå®šé¢„æµ‹åæ ‡çš„ä½ç½®åœ¨å•å…ƒæ ¼ä¹‹å†…ã€‚</p><p>ç½®ä¿¡åº¦æŸå¤±</p><p><img src="http://dingdm.online/yolo%20v3%20zhi.png" alt=""></p><p>ç½®ä¿¡åº¦æŸå¤±ä½¿ç”¨çš„æ˜¯äºŒå…ƒäº¤å‰ç†µæŸå¤±ï¼Œoiä¸ºé¢„æµ‹ç›®æ ‡è¾¹ç•Œæ¡†ä¸çœŸå®ç›®æ ‡è¾¹ç•Œæ¡†çš„IOUï¼Œcä¸ºé¢„æµ‹å€¼ï¼ŒCi hatä¸ºcé€šè¿‡sigmodå‡½æ•°å¾—åˆ°çš„é¢„æµ‹ç½®ä¿¡åº¦ï¼ŒNä¸ºæ­£è´Ÿæ ·æœ¬çš„æ€»å’Œã€‚</p><p>ç±»åˆ«æŸå¤±</p><p><img src="http://dingdm.online/yolo%20v3%20lei.png" alt=""></p><p>å…¶ä¸­Oijä¸ºé¢„æµ‹ç›®æ ‡è¾¹ç•Œæ¡†iä¸­æ˜¯å¦å­˜åœ¨ç¬¬jç±»ç›®æ ‡ï¼ŒCijä¸ºé¢„æµ‹å€¼ï¼ŒCij hatä¸ºCijé€šè¿‡Sigmodå‡½æ•°å¾—åˆ°çš„ç›®æ ‡æ¦‚ç‡ï¼ŒNposä¸ºæ­£æ ·æœ¬ä¸ªæ•°ã€‚</p><p>å®šä½æŸå¤±</p><p><img src="http://dingdm.online/yolo%20v3%20ding.png" alt=""></p><p><img src="http://dingdm.online/yolov3%20can.png" alt=""></p><p>å®šä½æŸå¤±ä¸­çš„g hatå€¼ç”±çœŸå®æ ‡ç­¾çš„ä¸­å¿ƒç‚¹ä½ç½®å‡å»ä¸Šå›¾è¾¹ç•Œæ¡†æ£€æµ‹å›¾ä¸­çš„å•å…ƒæ ¼çš„å·¦ä¸Šè§’å·¦è¾¹æ±‚çš„ã€‚å¯¹åº”çš„gwå’Œgh hatç”±é¢„æµ‹çš„å…¬å¼åå‘è®¡ç®—å¾—åˆ°ã€‚</p><h4 id="SPP">SPP</h4><p><img src="http://dingdm.online/yolov3%20spp.png" alt=""></p><p>DIOU</p><p><img src="http://dingdm.online/diou.png" alt=""></p><p>ä¸Šè¿°æŸå¤±å‡½æ•°ä¸­ï¼Œ<code>bï¼Œbgt</code>åˆ†åˆ«ä»£è¡¨äº†anchoræ¡†å’Œç›®æ ‡æ¡†çš„ä¸­å¿ƒç‚¹ï¼Œä¸”<code>p</code>ä»£è¡¨çš„æ˜¯è®¡ç®—ä¸¤ä¸ªä¸­å¿ƒç‚¹é—´çš„æ¬§å¼è·ç¦»ã€‚<code>c</code>ä»£è¡¨çš„æ˜¯èƒ½å¤ŸåŒæ—¶è¦†ç›–anchorå’Œç›®æ ‡æ¡†çš„æœ€å°çŸ©å½¢çš„å¯¹è§’çº¿è·ç¦»ã€‚å› æ­¤DIoUä¸­å¯¹anchoræ¡†å’Œç›®æ ‡æ¡†ä¹‹é—´çš„å½’ä¸€åŒ–è·ç¦»è¿›è¡Œäº†å»ºæ¨¡ã€‚</p><p><img src="http://dingdm.online/dioupp.png" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AUNetè®ºæ–‡é˜…è¯»</title>
      <link href="/2021/10/07/aunet-lun-wen-yue-du/"/>
      <url>/2021/10/07/aunet-lun-wen-yue-du/</url>
      
        <content type="html"><![CDATA[<h3 id="AUNetè®ºæ–‡é˜…è¯»">AUNetè®ºæ–‡é˜…è¯»</h3><h5 id="è®ºæ–‡ç†è§£">è®ºæ–‡ç†è§£</h5><p>ä½œè€…é‡‡ç”¨FPNé‡‘å­—å¡”ä½œä¸ºä¸»å¹²ç½‘ç»œï¼Œå¯¹å®ä¾‹å’Œè¯­ä¹‰åˆ†å‰²è¿›è¡Œèåˆï¼Œä½¿ç”¨äº†RoIUpsampleå’ŒPAMï¼ŒMAMã€‚</p><p>æ ¸å¿ƒç‚¹å°±æ˜¯é€šè¿‡å‰æ™¯çš„è¯­å¢ƒä¿¡æ¯å¸®åŠ©èƒŒæ™¯è¿›è¡Œäº‹ç‰©åˆ†å‰²ã€‚</p><p>PAMï¼šé€šè¿‡RPNçš„ç²—ç³™å‰æ™¯æŒ‡å¯¼èƒŒæ™¯åˆ†å‰²çš„åˆ†æ”¯ã€‚</p><p>MAMï¼šå°†Maskè¿›è¡Œä¸Šé‡‡æ ·æ¢å¤åˆ°feature mapå¤§å°ï¼Œä¹‹åé‡‡ç”¨PAMçš„æ“ä½œã€‚</p><p>ä»£ç å®ç°åé¢åœ¨å†™ã€‚ä¸ç®¡æ˜¯ä»€ä¹ˆï¼Œæˆ‘å°æœºçµå…ˆæ”¾ä¸€å¼ æ¨¡å‹å›¾åœ¨è¿™å°±å®Œäº‹äº†ã€‚</p><p><img src="http://dingdm.online/AUNettu2" alt=""></p><h5 id="ç›¸å…³çŸ¥è¯†">ç›¸å…³çŸ¥è¯†</h5><h6 id="æ³¨æ„åŠ›æœºåˆ¶">æ³¨æ„åŠ›æœºåˆ¶</h6><p>attentionæœºåˆ¶å¯ä»¥å®ƒè®¤ä¸ºæ˜¯ä¸€ç§èµ„æºåˆ†é…çš„æœºåˆ¶ï¼Œå¯ä»¥ç†è§£ä¸ºå¯¹äºåŸæœ¬å¹³å‡åˆ†é…çš„èµ„æºæ ¹æ®attentionå¯¹è±¡çš„é‡è¦ç¨‹åº¦é‡æ–°åˆ†é…èµ„æºï¼Œé‡è¦çš„å•ä½å°±å¤šåˆ†ä¸€ç‚¹ï¼Œä¸é‡è¦æˆ–è€…ä¸å¥½çš„å•ä½å°±å°‘åˆ†ä¸€ç‚¹ï¼Œåœ¨æ·±åº¦ç¥ç»ç½‘ç»œçš„ç»“æ„è®¾è®¡ä¸­ï¼Œattentionæ‰€è¦åˆ†é…çš„èµ„æºåŸºæœ¬ä¸Šå°±æ˜¯æƒé‡äº†</p><p>è§†è§‰æ³¨æ„åŠ›åˆ†ä¸ºå‡ ç§ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯åŸºäºåŸæœ‰çš„æ•°æ®æ‰¾åˆ°å…¶ä¹‹é—´çš„å…³è”æ€§ï¼Œç„¶åçªå‡ºå…¶æŸäº›é‡è¦ç‰¹å¾ï¼Œæœ‰é€šé“æ³¨æ„åŠ›ï¼Œåƒç´ æ³¨æ„åŠ›ï¼Œå¤šé˜¶æ³¨æ„åŠ›ç­‰ï¼Œä¹Ÿæœ‰æŠŠNLPä¸­çš„è‡ªæ³¨æ„åŠ›å¼•å…¥ã€‚</p><p>æ³¨æ„åŠ›æœºåˆ¶çš„å„ç§ç±»å‹ä»‹ç»https://zhuanlan.zhihu.com/p/146130215</p><p>ç›¸å…³è®ºæ–‡ä»¥åé˜…è¯»ï¼Œè¿™é‡Œåªæ˜¯è¿›è¡Œåˆæ­¥çš„äº†è§£ã€‚</p><h6 id="RPN">RPN</h6><p>Region Proposal Networkï¼Œç›´æ¥ç¿»è¯‘æ˜¯â€œ<strong>åŒºåŸŸç”Ÿæˆç½‘ç»œ</strong>â€ï¼Œé€šä¿—è®²æ˜¯â€œç­›é€‰å‡ºå¯èƒ½ä¼šæœ‰ç›®æ ‡çš„æ¡†â€ã€‚å…¶æœ¬è´¨æ˜¯åŸºäºæ»‘çª—çš„æ— ç±»åˆ«objectæ£€æµ‹å™¨ï¼Œè¾“å…¥æ˜¯ä»»æ„å°ºåº¦çš„å›¾åƒï¼Œè¾“å‡ºæ˜¯ä¸€ç³»åˆ—çŸ©å½¢å€™é€‰åŒºåŸŸã€‚</p><p><a href="https://zhuanlan.zhihu.com/p/138515680" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/138515680</a></p><h6 id="å½’ä¸€åŒ–">å½’ä¸€åŒ–</h6><p>ç¥ç»ç½‘ç»œå­¦ä¹ è¿‡ç¨‹æœ¬è´¨å°±æ˜¯ä¸ºäº†å­¦ä¹ æ•°æ®åˆ†å¸ƒï¼Œä¸€æ—¦è®­ç»ƒæ•°æ®ä¸æµ‹è¯•æ•°æ®çš„åˆ†å¸ƒä¸åŒï¼Œé‚£ä¹ˆç½‘ç»œçš„æ³›åŒ–èƒ½åŠ›ä¹Ÿå¤§å¤§é™ä½ï¼›å¦å¤–ä¸€æ–¹é¢ï¼Œä¸€æ—¦æ¯æ‰¹è®­ç»ƒæ•°æ®çš„åˆ†å¸ƒå„ä¸ç›¸åŒ(batch æ¢¯åº¦ä¸‹é™)ï¼Œé‚£ä¹ˆç½‘ç»œå°±è¦åœ¨æ¯æ¬¡è¿­ä»£éƒ½å»å­¦ä¹ é€‚åº”ä¸åŒçš„åˆ†å¸ƒï¼Œè¿™æ ·å°†ä¼šå¤§å¤§é™ä½ç½‘ç»œçš„è®­ç»ƒé€Ÿåº¦ï¼Œè¿™ä¹Ÿæ­£æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å¯¹æ•°æ®éƒ½è¦åšä¸€ä¸ªå½’ä¸€åŒ–é¢„å¤„ç†çš„åŸå› ã€‚<br>åœ¨ç½‘ç»œçš„æ¯ä¸€å±‚è¾“å…¥çš„æ—¶å€™ï¼Œåˆæ’å…¥äº†ä¸€ä¸ªå½’ä¸€åŒ–å±‚ï¼Œä¹Ÿå°±æ˜¯å…ˆåšä¸€ä¸ªå½’ä¸€åŒ–å¤„ç†ï¼Œç„¶åå†è¿›å…¥ç½‘ç»œçš„ä¸‹ä¸€å±‚ã€‚</p><p><a href="https://blog.csdn.net/qq_41853758/article/details/82930944" target="_blank" rel="noopener">https://blog.csdn.net/qq_41853758/article/details/82930944</a></p><h5 id="æ‘˜è¦">æ‘˜è¦</h5><p>æœ¬ç¯‡è®ºæ–‡ç ”ç©¶äº†æœ€è¿‘æå‡ºçš„å‰æ™¯ç”±å®ä¾‹åˆ†å‰²ï¼ŒèƒŒæ™¯ç”±è¯­ä¹‰åˆ†å‰²çš„å…¨æ™¯åˆ†å‰²ä»»åŠ¡ã€‚ç°åœ¨çš„æ–¹æ³•å¤§å¤šæ•°éƒ½æ˜¯åˆ†å¼€å¤„ç†è¿™ä¸¤ä¸ªé—®é¢˜çš„ï¼Œä½†æ˜¯åœ¨è®ºæ–‡ä¸­ï¼Œæˆ‘ä»¬æ­ç¤ºäº†å®ƒä»¬ä¹‹é—´å­˜åœ¨çš„æ½œåœ¨å…³ç³»ï¼Œå®é™…ä¸Šï¼Œå‰æ™¯ç‰©ä½“ä¸ºå¸®åŠ©èƒŒæ™¯çš„ç†è§£æä¾›äº†è¡¥å……çš„çº¿ç´¢ã€‚æˆ‘ä»¬çš„æ–¹æ³•å°±æ˜¯AUNetï¼Œä¸€ç§åŒæ—¶åŒ…æ‹¬å‰æ™¯å’ŒèƒŒæ™¯åˆ†å‰²ä¸¤ä¸ªåˆ†æ”¯çš„ç»Ÿä¸€æ¡†æ¶ã€‚æˆ‘ä»¬åœ¨èƒŒæ™¯åˆ†æ”¯ä¸­æ·»åŠ äº†RPNå’Œå‰æ™¯åˆ†å‰²æ©è†œæ¥åˆ†åˆ«æä¾›ç‰©ä½“çº§åˆ«å’Œåƒç´ çº§åˆ«çš„æ³¨æ„åŠ›ã€‚æˆ‘ä»¬çš„ç½‘ç»œå¯ä»¥æ³›åŒ–åœ¨å„ç§çš„éª¨æ¶æ¨¡å‹ä¸­ï¼Œå¹¶ä¸”æ‹¥æœ‰ç€åœ¨å‰æ™¯å’ŒèƒŒæ™¯åˆ†å‰²ä¸­ç¨³å®šçš„æ­£ç¡®ç‡ã€‚æˆ‘ä»¬çš„ç½‘ç»œåœ¨COCOå’ŒCityscapesæ•°æ®é›†ä¸Šæœ‰ç€ä¼˜å¼‚çš„è¡¨ç°ã€‚</p><h5 id="å¼•è¨€">å¼•è¨€</h5><p>åœºæ™¯ç†è§£æ˜¯è®¡ç®—é¢†åŸŸæŒ‘æˆ˜ä»»åŠ¡çš„åŸºç¡€é€‰æ‹©ï¼ŒåŒæ—¶åœ¨å…¶ä»–è¯¸å¦‚è‡ªåŠ¨é©¾é©¶å’Œæœºå™¨äººé¢†åŸŸä¹Ÿæœ‰ç€éå¸¸é‡è¦çš„å½±å“ã€‚æ°å‡ºçš„åº”ç”¨åœºæ™¯ç†è§£çš„é¢†åŸŸåŒ…æ‹¬ç‰©ä½“æ£€æµ‹ï¼Œå®ä¾‹åˆ†å‰²å’Œè¯­ä¹‰åˆ†å‰²ã€‚æœ¬ç¯‡è®ºæ–‡ä»‹ç»äº†å…¨æ™¯åˆ†å‰²ï¼Œæ—¨åœ¨é€šè¿‡å®ä¾‹åˆ†å‰²æ¥æ‰¾åˆ°æ‰€æœ‰çš„å‰æ™¯ç‰©ä½“å’Œé€šè¿‡è¯­ä¹‰åˆ†å‰²è§£æèƒŒæ™¯è¯­ä¹‰ä¿¡æ¯ã€‚åŸºç¡€çš„ç®—æ³•å’ŒCOCOæŒ‘æˆ˜çš„èƒœè€…éƒ½æ˜¯é€šè¿‡ç›´æ¥å°†å‰æ™¯å®ä¾‹åˆ†å‰²æ¨¡å‹å’ŒèƒŒæ™¯åœºæ™¯è§£æç®—æ³•ç›´æ¥ç»“åˆæ¥è§£å†³çš„ï¼Œç„¶è€Œè¿™æ ·å°±å¿½è§†äº†ä¸¤è€…ä¹‹é—´æ½œåœ¨çš„å…³ç³»å’Œæ²¡æœ‰å€Ÿé‰´å‰æ™¯ä¿¡æ¯å’ŒèƒŒæ™¯ä¿¡æ¯ä¹‹é—´ä¸°å¯Œçš„è¯­å¢ƒå…³ç³»ã€‚</p><p>åœ¨è®ºæ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ¦‚å¿µä¸Šç®€å•çš„ç”¨äºå…¨æ™¯åˆ†å‰²çš„ç»Ÿä¸€çš„æ¡†æ¶ã€‚ä¸ºäº†ç®€åŒ–å‰æ™¯äº‹ç‰©å’ŒèƒŒæ™¯äº‹ç‰©ä¹‹é—´çš„ä¿¡æ¯æµï¼Œæˆ‘ä»¬ç»“åˆäº†å·ç§¯åŒ–çš„å®ä¾‹åˆ†å‰²å’Œè¯­ä¹‰åˆ†å‰²ç½‘ç»œï¼Œä»è€Œäº§ç”Ÿä¸€ç§æ‹¥æœ‰ä¸¤ä¸ªåˆ†æ”¯çš„ç»Ÿä¸€ç½‘ç»œã€‚è¿™ç§ç­–ç•¥ä¸ºåˆ†å‰²çš„å‡†ç¡®æ€§å¸¦æ¥äº†æ˜¾è‘—çš„æä¾›å¹¶ä¸”æä¾›äº†è¿ç®—çš„æ•ˆç‡ã€‚è¿™æ„å‘³ç€å…¨æ™¯åˆ†å‰²å¯ä»¥ä»å‰æ™¯ç‰©ä½“å’ŒèƒŒæ™¯è¯­ä¹‰ä¸­çš„è¡¥å……ä¿¡æ¯ä¸­å—ç›Šï¼ŒåŒæ—¶è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ–¹æ³•çš„åŸºæœ¬åŸç†ã€‚</p><p>æ¥ç€å¾€ä¸‹ï¼Œæˆ‘ä»¬æ¢ç´¢äº†ç»“åˆæ›´é«˜çº§åˆ«è§†è§‰çº¿ç´¢æ¥æé«˜åˆ†å‰²å‡†ç¡®æ€§çš„å¯èƒ½ã€‚é€šè¿‡ä¸¤ç§åˆ†åˆ«ä½œç”¨äºç‰©ä½“çº§åˆ«å’Œåƒç´ çº§åˆ«çš„æ³¨æ„åŠ›æœºåˆ¶æ¨¡å‹æˆ‘ä»¬å®ç°äº†è¯¥åŠŸèƒ½ã€‚å¯¹äºç¬¬ä¸€ä¸ªæ¨¡å‹ï¼Œæˆ‘ä»¬å‚è€ƒå±€éƒ¨ç”Ÿæˆï¼Œæ¯ä¸€ä¸ªå±€éƒ¨éƒ½è¡¨ç¤ºå¯èƒ½çš„å‰æ™¯äº‹ç‰©ï¼Œå¹¶ä¸”è°ƒæ•´äº†å…¶å¯¹åº”åŒºåŸŸè¢«è®¤ä¸ºæ˜¯å‰æ™¯å’ŒèƒŒæ™¯äº‹ç‰©çš„æ¦‚ç‡ã€‚å¯¹äºç¬¬äºŒä¸ªæ¨¡å‹ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å‰æ™¯åˆ†å‰²æ©è†œï¼Œå¹¶é‡æ–°å®šä¹‰å‰æ™¯å’ŒèƒŒæ™¯äº‹ç‰©çš„è¾¹ç•Œã€‚åœ¨æˆ‘ä»¬çš„ç½‘ç»œä¸­ï¼Œè¿™ä¸¤ç§æ¨¡å‹è¢«ç§°ä¸ºPAMå’ŒMAMï¼Œæ˜¯é€šè¿‡åœ¨å‰æ™¯å’ŒèƒŒæ™¯åˆ†æ”¯ä¹‹é—´æ·»åŠ é¢å¤–çš„è¿æ¥å®ç°çš„ã€‚é€šè¿‡MAMï¼Œä¸€ä¸ªå«åšRoIUpsampleçš„æ–°å±‚è®¾è®¡ç”¨äºåœ¨å›ºå®šå½¢çŠ¶çš„å‰æ™¯æ©è†œå’Œå¯¹åº”çš„ç‰¹å¾å›¾ä¸­çš„åƒç´ é—´å®šä¹‰å‡†ç¡®çš„æ˜ å°„å‡½æ•°ã€‚äº‹å®ä¸Šï¼Œæ ¹æ®è§‚å¯Ÿç»“æœä¸­å‰æ™¯åˆ†å‰²çš„å‡†ç¡®ç‡æ˜¯é«˜çš„æ¥çœ‹ï¼Œæ‰€æœ‰çš„é¢å¤–è¿æ¥åœ¨ç”±å‰æ™¯åˆ†æ”¯åˆ°èƒŒæ™¯åˆ†æ”¯ä¸­è¢«ä¸¢å¼ƒäº†ã€‚æ›´è¿›ä¸€æ­¥ï¼ŒèƒŒæ™¯çš„äº‹ç‰©åœ¨è¢«å‰æ™¯äº‹ç‰©ç²¾ç‚¼çš„åŒæ—¶ï¼ŒèƒŒæ™¯äº‹ç‰©ä¹Ÿå¯ä»¥é€šè¿‡æ¢¯åº¦è¿›è¡Œåé¦ˆï¼Œå› æ­¤ã€‚å‰æ™¯å’ŒèƒŒæ™¯çš„åˆ†å‰²å‡†ç¡®ç‡éƒ½å¾—åˆ°äº†æé«˜ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬çš„AUNetï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„åº”ç”¨äºå„ç§ç½‘ç»œæ¶æ„ï¼Œå¹¶ä¸”é€šè¿‡ç«¯åˆ°ç«¯çš„æ–¹å¼è¿›è¡Œä¼˜åŒ–ã€‚æˆ‘ä»¬é€šè¿‡ä¸¤ç§åŸºç¡€æµè¡Œçš„æ•°æ®é›†æ¥è¯„ä¼°æˆ‘ä»¬çš„ç½‘ç»œï¼ŒCOCOå’ŒCitysapceï¼Œå¹¶å°±PQè€Œè¨€ï¼Œæˆ‘ä»¬çš„ç½‘ç»œå–å¾—äº†æœ€ä¼˜å¼‚çš„æ•ˆæœã€‚é™¤æ­¤ä¹‹å¤–ï¼Œé€šè¿‡ä¼˜åŒ–è¿æ¥ä¹Ÿå¸¦æ¥äº†å—ç›Šä¸”é€šè¿‡æ¶ˆèå­¦ä¹ ï¼Œä¸¤ç§æ³¨æ„åŠ›æœºåˆ¶æ¨¡å‹ä¹Ÿè¯å®äº†å…¶æœ‰æ•ˆæ€§ã€‚</p><p>æˆ‘ä»¬ç ”ç©¶çš„æœ€å¤§è´¡çŒ®å°±æ˜¯æå‡ºäº†ä¸€ç§ç®€å•ç»Ÿä¸€åŒæ—¶åŒ…å«å‰æ™¯åˆ†å‰²å’ŒèƒŒæ™¯åˆ†å‰²çš„æ¡†æ¶ï¼Œå¹¶ä¸”åœ¨COCOå’ŒCityspacesæ•°æ®é›†ä¸Šå–å¾—äº†ä¼˜å¼‚çš„è¡¨ç°ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬çš„å·¥ä½œä¹Ÿè°ƒæŸ¥äº†åœ¨å‰æ™¯ç‰©ä½“å’ŒèƒŒæ™¯è¯­ä¹‰ä¿¡æ¯ä¹‹é—´ä¼ é€’çš„äº’è¡¥ä¿¡æ¯ã€‚å…¨æ™¯åˆ†å‰²æ˜¯ä½œä¸ºå­¦ä¹ è¿™ç§é—®é¢˜çš„è‡ªç„¶é€‰æ‹©ï¼Œä»–åº”ç”¨äºå¹¿æ³›çš„è§†è§‰ä»»åŠ¡ã€‚æˆ‘ä»¬åœ¨è¿™ä¸ªé¢†åŸŸåªæ˜¯è¿›è¡Œäº†åˆæ­¥çš„æ¢ç´¢ï¼Œæˆ‘ä»¬ä¼šæ²¿ç€è¿™ä¸ªæ–¹å‘æ›´åŠ åŠªåŠ›ã€‚</p><p>è®ºæ–‡ä¸­å‰©ä¸‹çš„éƒ¨åˆ†å¦‚ä¸‹ï¼Œç¬¬äºŒéƒ¨åˆ†ä¸­æˆ‘ä»¬ç®€æ´çš„è¯´æ˜äº†æˆ‘ä»¬çš„ç›¸å…³å·¥ä½œï¼Œç¬¬ä¸‰éƒ¨åˆ†è¯¦ç»†é˜è¿°äº†æˆ‘ä»¬çš„AUNetç½‘ç»œæ¶æ„ï¼Œåœ¨ç¬¬å››éƒ¨åˆ†çš„å®éªŒä¹‹åï¼Œæˆ‘ä»¬åœ¨ç¬¬äº”éƒ¨åˆ†æ€»ç»“äº†å®éªŒç»“æœã€‚</p><h5 id="ç›¸å…³å·¥ä½œ">ç›¸å…³å·¥ä½œ</h5><p>åŸºäºåœºæ™¯ç†è§£çš„ä¼ ç»Ÿçš„æ·±åº¦å­¦ä¹ ç ”ç©¶ç»å¸¸å…³æ³¨ä¸å‰æ™¯æˆ–è€…èƒŒæ™¯ç›®æ ‡ã€‚éšç€ç‰©ä½“æ£€æµ‹çš„é«˜é€Ÿå‘å±•ï¼Œå®ä¾‹åˆ†å‰²ä½¿ç‰©ä½“å®šä¸ºå’Œåˆ†å‰²å‘å±•æˆä¸ºäº†å¯èƒ½ã€‚ä¸æ­¤åŒæ—¶ï¼Œå…¨æ™¯åˆ†å‰²åœ¨åœºæ™¯è§£æä¸Šçš„è¡¨ç°ä¹Ÿå¾—åˆ°äº†å‘å±•ã€‚å°½ç®¡å®ƒä»¬å¾ˆæœ‰æ•ˆï¼Œä½†æ˜¯åˆ†ç¦»çš„ä»»åŠ¡å¼•èµ·äº†å®ä¾‹åˆ†å‰²ä¸­è¯­å¢ƒä¿¡æ¯çš„ä¸¢å¤±ä»¥åŠç‹¬ç«‹çš„è¯­ä¹‰åˆ†å‰²å¸¦æ¥äº†ä¿¡æ¯çš„æ··ä¹±ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæå‡ºäº†å…¨æ™¯åˆ†å‰²ï¼Œå¯ä»¥åŒæ—¶è¿›è¡Œå‰æ™¯å’ŒèƒŒæ™¯çš„åˆ†å‰²ä»»åŠ¡ã€‚</p><h6 id="å…¨æ™¯åˆ†å‰²">å…¨æ™¯åˆ†å‰²</h6><p>åœ¨å‰äººçš„è®ºæ–‡ä¸­ï¼Œä½œè€…ç»™å‡ºäº†ä¸€ç§ç»“åˆå®ä¾‹å’Œè¯­ä¹‰åˆ†å‰²æ¨¡å‹çš„ä¸€ç§åŸºç¡€ç®—æ³•ã€‚åæ¥ï¼Œåœ¨åˆå§‹åŒ–åˆ†å‰²ç»“æœä¹‹ä¸Šåˆæå‡ºäº†ä¸€ç§å¼±ç›‘ç£çš„æ–¹æ³•ï¼Œå¹¶ä¸”é€šè¿‡ç«¯åˆ°ç«¯çš„æ–¹å¼æ¥ç»“åˆå‰æ™¯å’ŒèƒŒæ™¯çº¿ç´¢ã€‚ç„¶åï¼Œè¿™ç§æ–¹æ³•çš„è¡¨ç°è¿œä¸å¦‚åŸºç¡€ç®—æ³•ã€‚å’Œä»–ä»¬ä¸åŒï¼Œæˆ‘ä»¬çš„ç«¯åˆ°ç«¯çš„AUNetæ¡†æ¶å¾—åˆ°äº†æœ€ä¼˜å¼‚çš„è¡¨ç°ã€‚æ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬åœ¨åŸºäºç”Ÿæˆçš„å®ä¾‹å’ŒåŸºäºFCNçš„è¯­ä¹‰åˆ†å‰²ä¹‹é—´å»ºç«‹äº†è”ç³»ã€‚</p><h6 id="å®ä¾‹åˆ†å‰²">å®ä¾‹åˆ†å‰²</h6><p>å®ä¾‹åˆ†å‰²æ—¨åœ¨åˆ¤åˆ«åŒç§ç‰©ä½“çš„ä¸åŒå®ä¾‹ã€‚å¯ä»¥é€šè¿‡åŸºç”Ÿæˆå’ŒåŸºäºåˆ†å‰²çš„æ–¹æ³•æ¥è§£å†³ã€‚é€šè¿‡åŒºåŸŸç”Ÿæˆå‡†ç¡®çš„å¸®åŠ©ï¼ŒåŸºäºç”Ÿæˆçš„æ–¹æ³•å–å¾—äº†è¾ƒé«˜çš„è¡¨ç°ï¼ŒåŒ…æ‹¬MNCï¼ŒFCISï¼ŒMASK R-CNNå’ŒPANetã€‚</p><h6 id="è¯­ä¹‰åˆ†å‰²">è¯­ä¹‰åˆ†å‰²</h6><p>ä¼´éšç±»ä¼¼FCNè¿™ç§ç¼–ç è§£ç ç½‘ç»œçš„å‘å±•ï¼Œè¯­ä¹‰åˆ†å‰²ä¹Ÿå–å¾—äº†é£é€Ÿçš„å‘å±•ã€‚åˆ†å‰²ä¸­ï¼Œæ•è·è¯­å¢ƒä¿¡æ¯å‘æŒ¥äº†é‡è¦çš„ä½œç”¨ã€‚</p><h6 id="æ³¨æ„åŠ›æ¨¡å‹">æ³¨æ„åŠ›æ¨¡å‹</h6><p>æ³¨æ„åŠ›æ¨¡å‹å·²ç»è¢«å¹¿æ³›çš„åº”ç”¨äºè§†è§‰ä»»åŠ¡ï¼ŒåŒ…æ‹¬å›¾åƒå¤„ç†ï¼Œè§†é¢‘ç†è§£å’Œç‰©ä½“è¿½è¸ªã€‚äº‹å®ä¸Šï¼ŒSENeté€šè¿‡attention-and-gatingæœºåˆ¶é˜è¿°äº†é€šé“å…³ç³»ï¼Œnon-loaclç½‘ç»œå°†æœºå™¨ç¿»è¯‘çš„è‡ªæ³¨æ„åŠ›æ¡¥æ¥åˆ°ä½¿ç”¨non-localè¿‡æ»¤å™¨çš„è§†é¢‘åˆ†ç±»ã€‚åœ¨åœºæ™¯ç†è§£èŒƒå›´å†…ï¼Œå¢åŠ å…¨å±€è¯­å¢ƒä¿¡æ¯å’Œé€šè¿‡é€šé“æ³¨æ„æ“ä½œçš„ç‰¹å¾ä¿¡æ¯ã€‚è‡ªæ³¨æ„åŠ›å’Œé€šé“æ³¨æ„åŠ›è¢«ç”¨äºå¤„ç†ç©ºé—´å’Œé€šé“ç»´åº¦ä¸­é•¿è·ç¦»çš„è¯­å¢ƒä¿¡æ¯ã€‚åœ¨æˆ‘ä»¬çš„å·¥ä½œä¸­ï¼Œæˆ‘ä»¬åœ¨å…¨æ™¯åˆ†å‰²ä¸­é€šè¿‡ä¸€ç³»åˆ—ç²—ç³™åˆ°ç²¾ç»†çš„æ³¨æ„åŠ›å—åœ¨å‰æ™¯äº‹ç‰©å’ŒèƒŒæ™¯äº‹ç‰©ä¹‹é—´å»ºç«‹äº†è”ç³»ã€‚</p><h5 id="AUNet">AUNet</h5><h6 id="é—®é¢˜å’Œå‚ç…§ç‰©">é—®é¢˜å’Œå‚ç…§ç‰©</h6><p>å…¨æ™¯åˆ†å‰²ä»»åŠ¡æ—¨åœ¨ç†è§£å•è§†é‡å†…çš„æ‰€æœ‰å¯è§äº‹ç‰©ï¼Œè¿™æ„å‘³ç€è¦ä¸ºå›¾åƒçš„æ¯ä¸ªåƒç´ åˆ†é…ä¸€ä¸ªåˆ†å‰²æ ‡ç­¾å’Œå®ä¾‹IDã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå½“å‰æœ€å¥½çš„ç®—æ³•ç›´æ¥ç»“åˆä»åˆ†ç¦»æ¨¡å‹ä¸­å¾—åˆ°çš„å®ä¾‹å’Œè¯­ä¹‰åˆ†å‰²çš„ç»“æœï¼Œä¾‹å¦‚Mask R-CNNå’ŒPSPNetã€‚</p><p>æˆ‘ä»¬å°†å…¨æ™¯åˆ†å‰²é—®é¢˜è¡¨è¿°ä¸ºè¯†åˆ«å’Œåˆ†å‰²æ‰€æœ‰å‰æ™¯äº‹ç‰©å¹¶ç†è§£æ‰€æœ‰èƒŒæ™¯äº‹ç‰©ã€‚æˆ‘ä»¬ä»æˆ‘ä»¬ç»Ÿä¸€ç½‘ç»œä¸­çš„å‰æ™¯åˆ†æ”¯å’ŒèƒŒæ™¯åˆ†æ”¯ä¸¤ä¸ªæ–¹é¢æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬ç»™å®šè¾“å…¥å›¾åƒXï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯äº§ç”Ÿå‰æ™¯äº‹ç‰©åˆ†å‰²ç»“æœYthå’ŒèƒŒæ™¯äº‹ç‰©åˆ†å‰²ç»“æœYstï¼Œå› æ­¤ï¼Œå…¨æ™¯åˆ†å‰²ç»“æœYpaå¯ä»¥ç›´æ¥ä½¿ç”¨èåˆæ–¹æ³•ä»Ythå’ŒYstä¸­äº§ç”Ÿã€‚å…¨æ™¯åˆ†å‰²çš„ç»“æœè¡¨ç°é€šè¿‡PQæ¥è¯„ä¼°ã€‚æˆ‘ä»¬è¯¦ç»†é˜è¿°äº†æˆ‘ä»¬ç½‘ç»œä¸­çš„å…³é”®éƒ¨åˆ†å³PAMå’ŒMAMï¼Œæˆ‘ä»¬åœ¨æœ€åç»™å‡ºäº†æˆ‘ä»¬çš„å®ç°ç»†èŠ‚ã€‚</p><p>åœ¨å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å°†ä»åˆ†ç¦»æ¨¡å‹ä¸­äº§ç”Ÿçš„å‰æ™¯å’ŒèƒŒæ™¯äº‹ç‰©æ–¹æ³•ä½œä¸ºæˆ‘ä»¬çš„å‚ç…§ã€‚å…·ä½“æ¥è¯´ï¼ŒåŸºç¡€çš„æ–¹æ³•åˆ†åˆ«ç»™å‡ºäº†æ¥è‡ªåˆ†ç¦»æ¨¡å‹MThå’ŒMStçš„äº‹ç‰©YThå’Œäº‹ç‰©YStçš„ç»“æœã€‚å‰æ™¯æ¨¡å‹MThå’ŒèƒŒæ™¯æ¨¡å‹MStä¸ºä»¥ä¸‹ç»Ÿä¸€æ¡†æ¶æä¾›äº†ç›¸ä¼¼çš„ä¸»å¹²ç½‘ç»œã€‚</p><h6 id="ç»Ÿä¸€çš„æ¡†æ¶">ç»Ÿä¸€çš„æ¡†æ¶</h6><p>ä¸ºäº†æ¡¥æ¥å‰æ™¯äº‹ç‰©å’ŒèƒŒæ™¯äº‹ç‰©ï¼Œæˆ‘ä»¬æå‡ºäº†AUNetã€‚å’ŒåŸºç¡€æ–¹æ³•ç›¸æ¯”ï¼ŒAUNeté€šè¿‡åˆ†äº«ç›¸åŒçš„ä¸»å¹²ç½‘ç»œæ¥èåˆä¸¤ç§æ¨¡å‹äº§ç”ŸYthå’ŒYstã€‚å¦‚å›¾2æ‰€è¯´æ˜ï¼ŒAUNetæ˜¯æ¦‚å¿µç®€å•çš„ï¼ŒFPNè¢«ç”¨æ¥ä½œä¸ºä¸»å¹²ç½‘ç»œæ¥ä»ä¸åŒçš„å°ºåº¦å’Œåˆ†æ”¯ä¸­æå–ç‰¹å¾åˆ¤åˆ«ã€‚</p><p>å’Œä¼ ç»Ÿçš„ç›´æ¥èåˆMthå’ŒMstç»“æœçš„æ–¹æ³•ä¸åŒï¼ŒAUNeté€šè¿‡è¿æ¥æŸå¤±å‡½æ•°æ¥è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶ç®€åŒ–äº†ç½‘ç»œä¸­çš„ä»»åŠ¡ã€‚æˆ‘ä»¬é‡‡ç”¨äº†ä¸€ç§åŸºäºç”Ÿæˆçš„å®ä¾‹åˆ‡å‰²æ¨¡å‹æ¥ç”Ÿæˆå‰æ™¯åˆ†æ”¯è¾ƒå¥½çš„æ©è†œMï¼Œè€Œå¯¹äºèƒŒæ™¯åˆ†æ”¯ï¼Œé‡è¦çš„æ˜¯ä»åˆ†äº«çš„å¤šå°ºåº¦ç‰¹å¾ä¸­èšåˆåœºæ™¯ä¿¡æ¯ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä¸»å¹²ç½‘ç»œåŒæ—¶è¢«å‰æ™¯å’ŒèƒŒæ™¯äº‹ç‰©ç›‘ç£ï¼Œæ¨åŠ¨äº†ä¸¤ä¸ªåˆ†æ”¯åœ¨ç©ºé—´ç‰¹å¾ä¸Šçš„è”ç³»ã€‚ä¸ºäº†æ›´åŠ æ˜ç¡®çš„åœ¨å‰æ™¯äº‹ç‰©å’ŒèƒŒæ™¯è¯­ä¹‰ä¹‹é—´å»ºç«‹å…³ç³»ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ç§æºæ³¨æ„åŠ›æ¨¡å‹ã€‚æˆ‘ä»¬è€ƒè™‘iä¸ªå°ºåº¦èƒŒæ™¯feature mapä¸ç›¸åº”çš„RPN feature mapä¹‹é—´çš„ç²—æ³¨æ„åŠ›æ“ä½œï¼Œåˆ†åˆ«ç”¨Siå’ŒPiè¡¨ç¤ºã€‚æ³¨æ„åŠ›æ¨¡å—å¯ä»¥è¡¨ç¤ºä¸ºSi âŠ— Pi ï¼Œå…¶ä¸­â€œâŠ—â€è¡¨ç¤ºæ³¨æ„åŠ›æ“ä½œï¼Œå¦‚å›¾ 2 æ‰€ç¤ºã€‚æ­¤å¤–ï¼Œé€šè¿‡å¤„ç†åçš„feature map Spamå’Œç”Ÿæˆçš„å‰æ™¯åˆ†å‰²æ©è†œä¹‹é—´çš„æ³¨æ„åŠ›å»ºç«‹æ›´ç²¾ç»†çš„å…³ç³»ï¼Œå¯ä»¥è¡¨è¿°ä¸ºSpam âŠ— Proiã€‚ è¯¦ç»†ä¿¡æ¯å°†åœ¨ä»¥ä¸‹éƒ¨åˆ†è¿›è¡Œç ”ç©¶ã€‚</p><h6 id="æ³¨æ„åŠ›å¼•å¯¼æ¨¡å‹">æ³¨æ„åŠ›å¼•å¯¼æ¨¡å‹</h6><p><strong>PAM</strong></p><p>åœ¨ä¼ ç»Ÿçš„ä¸¤é˜¶æ®µçš„æ£€æµ‹æ¡†æ¶ä¸­ï¼ŒRPNè¢«ç”¨æ¥è¿›è¡ŒäºŒå…ƒæ ‡ç­¾åˆ†ç±»å’Œè¾¹ç•Œåæ ‡çš„é¢„æµ‹ã€‚è¿™æ„å‘³ç€RPN featuresåŒ…æ‹¬åªä»èƒŒæ™¯åˆ†æ”¯çš„äº‹ç‰©æ³¨é‡Šä¸­è·å¾—çš„ä¸°å¯ŒèƒŒæ™¯ä¿¡æ¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„æ–¹æ³•åœ¨å‰æ™¯å…ƒç´ å’ŒèƒŒæ™¯è¯­ä¹‰ä¹‹é—´å»ºç«‹äº’è¡¥å…³ç³»ï¼Œè¢«ç§°ä¸ºPAMã€‚å¦‚å›¾3æ‰€ç¤ºï¼Œæˆ‘ä»¬åˆ©ç”¨ä»RPNåˆ†æ”¯ä¸­è·å¾—çš„è¯­å¢ƒä¿¡æ¯æ¥è¿›è¡Œæ³¨æ„åŠ›æ“ä½œã€‚æˆ‘ä»¬ç»™å‡ºäº†è¯¥è¿‡ç¨‹çš„ç»†èŠ‚ã€‚ç»™å®šä¸€ä¸ªä»ç¬¬iä¸ªRPNåˆ†æ”¯å°ºåº¦è¾“å…¥çš„feature map Piï¼Œåœ¨sigmoidæ¿€æ´»å‰å‰æ™¯çš„æƒé‡map Miå¦‚ä¸‹è¡¨ç¤ºï¼š</p><p><img src="http://dingdm.online/AUNet1" alt=""></p><p>få‡½æ•°è¡¨ç¤ºå·ç§¯æ“ä½œï¼Œå‚æ•°è¡¨ç¤ºReLUæ¿€æ´»å‡½æ•°ï¼ŒMiè¡¨ç¤ºç”Ÿæˆçš„å‰æ™¯æƒé‡mapï¼ŒWi,1å’ŒWi,2è¡¨ç¤ºå·ç§¯å‚æ•°ã€‚</p><p>ä¸ºäº†åŠ å¼ºèƒŒæ™¯çš„è¯­ä¹‰ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†æ³¨æ„åŠ›æƒé‡mapè¡¨ç¤ºä¸º1-sigmoid(Mi)ã€‚ç„¶åï¼Œç¬¬iä¸ªå°ºåº¦çš„æ¿€æ´»çš„feature map Sâ€™iè¡¨ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="http://dingdm.online/AUNet2" alt=""></p><p>âŠ—å’ŒâŠ•åˆ†åˆ«è¡¨ç¤ºå…ƒç´ ç´¯ä¹˜å’Œç´¯åŠ ï¼ŒSi,jè¡¨ç¤ºç¬¬jå±‚çš„åˆ†å‰²feature map Si</p><p>å—åŒè¡Œå¯å‘ï¼Œè®¾è®¡ä¸€ç§ç®€å•çš„èƒŒæ™¯é‡æ–°åŠ æƒæ–¹æ³•ç”¨æ¥åœ¨æ³¨æ„åŠ›æ“ä½œåå¯¹æ— ç”¨çš„èƒŒæ™¯çš„å±‚è¿›è¡Œæƒé‡å‡å°‘ã€‚é‡æ–°åŠ æƒfeature mapSâ€™'iå¦‚ä¸‹è¡¨ç¤ºï¼š</p><p><img src="http://dingdm.online/AUNet3" alt=""></p><p>Gå’ŒGNè¡¨ç¤ºå…¨å±€å¹³å‡æ± åŒ–å’Œç¾¤ä½“èŒƒæ•°ã€‚Niè¡¨ç¤ºé‡æ–°åŠ æƒæ“ä½œï¼ŒWi,3è¡¨ç¤ºå·ç§¯å‚æ•°ï¼ŒSâ€™i,kè¡¨ç¤ºSâ€™iä¸­çš„ç¬¬kä¸ªåƒç´ é€šé“ã€‚</p><p>åŸºäº PAM çš„ä¸Šè¿°å…¬å¼ï¼Œæˆ‘ä»¬é€šè¿‡æ³¨æ„åŠ›æ“ä½œå’ŒèƒŒæ™¯é‡åŠ æƒå‡½æ•°çªå‡ºå…±äº«feature mapä¸­çš„èƒŒæ™¯åŒºåŸŸã€‚å®ƒè¿˜é€šè¿‡åœ¨åå‘ä¼ æ’­æœŸé—´å¢å¼ºæ¿€æ´»çš„å‰æ™¯åŒºåŸŸçš„æƒé‡æ¥æ–¹ä¾¿å‰æ™¯äº‹ç‰©çš„å­¦ä¹ ã€‚</p><p><strong>MAM</strong></p><p>éšç€PAMå¼•å…¥è¯­å¢ƒä¿¡æ¯ï¼ŒèƒŒæ™¯åˆ†æ”¯è¢«é¼“åŠ±æ›´å¤šåœ°å…³æ³¨äº‹ç‰©çš„åŒºåŸŸã€‚ç„¶è€Œï¼Œä»RPNåˆ†æ”¯ä¸­é¢„æµ‹çš„ç²—ç³™çš„åŒºåŸŸç¼ºå°‘è¶³å¤Ÿçš„çº¿ç´¢æ¥å¯¹èƒŒæ™¯è¿›è¡Œç²¾ç¡®çš„é™ˆè¿°ã€‚å’ŒRPN featureä¸åŒï¼Œä»å‰æ™¯åˆ†æ”¯ç”Ÿæˆçš„mÃ—må›ºå®šå½¢çŠ¶æ©ç å¯ä»¥ç¼–ç æ›´ç²¾ç»†çš„å‰æ™¯å¸ƒå±€ã€‚å› æ­¤æˆ‘ä»¬æå‡ºäº†MAMæ¥è¿›ä¸€æ­¥æ¨¡æ‹Ÿè¿™ç§å…³ç³»ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„RoIUpsampleå±‚ã€‚RoIUpsampleå±‚è®¾è®¡çš„å’ŒRoIAlignçš„è¿‡ç¨‹åè½¬æ¯”è¾ƒç›¸ä¼¼ï¼Œå¦‚å›¾å››æ‰€ç¤ºã€‚åœ¨RoIUpsampleå±‚ä¸­ï¼ŒmÃ—mçš„æ©è†œç¬¬ä¸€æ¬¡è¢«é‡å¡‘ä¸ºå’ŒRoIsä¸€æ ·çš„å½¢çŠ¶ã€‚ç„¶åæˆ‘ä»¬åˆ©ç”¨è®¾è®¡çš„é€†åŒçº¿æ€§æ’å€¼è®¡ç®—æ¯ä¸ªæ©ç ç®±ä¸­å››ä¸ªè§„åˆ™é‡‡æ ·ä½ç½®çš„è¾“å‡ºç‰¹å¾å€¼ï¼Œç„¶åå°†æœ€ç»ˆç»“æœç´¯åŠ ç”Ÿæˆæ©ç feature mapã€‚ä¸ºäº†æ»¡è¶³åŒçº¿æ€§æ’å€¼çš„è¦æ±‚ï¼Œå…¶ä¸­æ¥è¿‘ç‚¹è¢«èµ‹äºˆæ›´å¤šçš„æƒé‡ï¼Œå¯¹äºé€†åŒçº¿æ€§æ’å€¼è¡¨ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="http://dingdm.online/AUNet4" alt=""></p><p>R(pj,k)è¡¨ç¤ºåœ¨é€†åŒçº¿æ€§æ’å€¼ä¹‹åç‚¹Pj,kçš„ç»“æœï¼ŒR(pg)è¾“å…¥æ©ç å¯¹åº”å€¼çš„å››åˆ†ä¹‹ä¸€ï¼Œå¹¶ä¸”è§„èŒƒåŒ–çš„æƒé‡valuexå’Œvalueyå®šä¹‰å¦‚ä¸‹ï¼š</p><p><img src="http://dingdm.online/AUNet5" alt=""></p><p>å…¶ä¸­xpå’Œypåˆ†åˆ«è¡¨ç¤ºä¸¤ä¸ªè½´ä¸Šç½‘æ ¼ç‚¹pgå’Œç”Ÿæˆçš„p1,1ä¹‹é—´çš„è·ç¦»ï¼Œå¦‚å›¾4bæ‰€ç¤ºï¼Œæ³¨æ„åˆ°å…¬å¼5å’Œ6ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‰å‘åŒçº¿æ€§æ’å€¼ä»ç”Ÿæˆçš„ Wâ€™Ã—Hâ€™ feature mapè¿˜åŸmÃ—mæ©ç ã€‚</p><p>ç„¶åï¼Œæ ¹æ®RoIsçš„å°ºå¯¸å°†ç”Ÿæˆçš„feature mapåˆ†é…åˆ°å››ä¸ªä¸åŒçš„å°ºåº¦ï¼Œè¿™ä¸FPNä¸­çš„ç›¸ä¼¼ã€‚ç”Ÿæˆçš„å‰æ™¯feature mapæ˜¯é€šè¿‡ä»¥ä¸‹æ“ä½œå®ç°çš„ã€‚</p><p><strong>æ³¨æ„åŠ›æ“ä½œ</strong></p><p>å’Œä¼ ç»Ÿçš„å®ä¾‹åˆ†å‰²ä»»åŠ¡ä¸åŒï¼Œé¢„æµ‹çš„å‰æ™¯æ©è†œå¯ä»¥åˆ©ç”¨æ¥ä¸ºèƒŒæ™¯åˆ†æ”¯åœ¨åƒç´ çº§åˆ«ä¸Šæä¾›æ›´å¤šçš„è¯­å¢ƒå¯¼å‘ã€‚æˆ‘ä»¬ç¬¬ä¸€æ¬¡ä½¿ç”¨RoIUpsampleå°†å®ƒä»¬èšåˆåˆ°Cm*Wâ€™*Hâ€˜ feature mapä¸­ã€‚ç„¶åï¼Œå°±å¯ä»¥äº§ç”Ÿ1*Wâ€™*Hâ€™çš„ç²¾ç»†çš„èƒŒæ™¯æ¿€æ´»åŒºåŸŸï¼Œè¿™ä¸PAMä¸­çš„æ“ä½œç›¸ä¼¼ã€‚éšç€æ³¨æ„åŠ›çš„å¼•å…¥ï¼Œå‰æ™¯æ©è†œä¹Ÿè¢«åˆ†å‰²æŸå¤±å‡½æ•°ç›‘ç£ï¼Œè¿™æ„å‘³ç€åœ¨åœºæ™¯ç†è§£çš„èƒ½åŠ›å¯ä»¥è¿›ä¸€æ­¥æé«˜ã€‚ä¸€ç§ç›¸ä¼¼çš„èƒŒæ™¯é‡æ–°åŠ æƒå‡½æ•°è¢«é‡‡ç”¨æ¥èšåˆæœ‰ç”¨çš„èƒŒæ™¯feature mapã€‚æˆ‘ä»¬ä½¿ç”¨PAMå’ŒMAMä¸ºå‰æ™¯äº‹ç‰©å’ŒèƒŒæ™¯äº‹ç‰©æä¾›äº’è¡¥ä¿¡æ¯ã€‚</p><h5 id="å®ç°ç»†èŠ‚">å®ç°ç»†èŠ‚</h5><p>ä½œè€…åœ¨æœ¬èŠ‚ç»™å‡ºäº†åœ¨è®­ç»ƒå’Œæ¨ç†é˜¶æ®µçš„ç›¸å…³å®ç°ç»†èŠ‚ã€‚</p><h6 id="è®­ç»ƒ">è®­ç»ƒ</h6><p>åƒåœ¨3.2ä¸­å·²ç»è¯¦ç»†é˜è¿°çš„ä¸€æ ·ï¼Œæ‰€ä»¥æå‡ºçš„æ–¹æ³•åœ¨ç»Ÿä¸€çš„æ¡†æ¶ä¸­éƒ½è¿›è¡Œäº†è®­ç»ƒã€‚æ•´ä¸ªç½‘ç»œåœ¨è®­ç»ƒé˜¶æ®µé€šè¿‡è¿æ¥çš„losså‡½æ•°è¿›è¡Œä¼˜åŒ–ï¼ŒæŸå¤±å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="http://dingdm.online/AUNet6" alt=""></p><p>å…¶ä¸­çš„LRPNï¼ŒLRCNNï¼ŒLMASKå’ŒLSegåˆ†åˆ«ä»£è¡¨äº†RPNï¼ŒRCNNï¼Œå®ä¾‹åˆ†å‰²å’Œè¯­ä¹‰åˆ†å‰²çš„æŸå¤±å‡½æ•°ã€‚å…·ä½“æ¥è¯´ï¼Œè¶…å‚æ•°è¢«ç”¨æ¥å¹³è¡¡è®­ç»ƒè¿‡ç¨‹ï¼ŒÎ»1åˆ°Î»4åœ¨COCOæ•°æ®é›†ä¸Šè¢«è®¾ä¸º1ï¼Œ1ï¼Œ1ï¼Œ0.3ï¼Œåœ¨Cityspacesæ•°æ®é›†ä¸Šè¢«è®¾ä¸º1ï¼Œ0.75ï¼Œ1ï¼Œ1ã€‚</p><p>åœ¨ç»†èŠ‚ä¸Šï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ResNet-FPNä½œä¸ºæˆ‘ä»¬çš„ä¸»å¹²ç½‘ç»œã€‚å‰æ™¯åˆ†æ”¯çš„è¶…å‚æ•°æ¥è‡ªMask R-CNNã€‚ä¸»å¹²ç½‘ç»œåœ¨ImageNetæ•°æ®é›†ä¸Šè¿›è¡Œäº†é¢„è®­ç»ƒï¼Œå‰©ä¸‹çš„å‚æ•°æ¥è‡ªäºå‚è€ƒçš„å¦ä¸€ç¯‡è®ºæ–‡ã€‚ä½œä¸ºæ ‡å‡†è®­ç»ƒï¼Œä½¿ç”¨8ä¸ªGPUæ¥è®­ç»ƒæ‰€æœ‰æ¨¡å‹ã€‚å¯¹äºåŸºäºResNet-50å’ŒResNet-101çš„ç½‘ç»œï¼Œæ¯ä¸ªå°æ‰¹é‡å¤„ç†çš„GPUæœ‰2ä¸ªå›¾åƒï¼Œå…¶ä»–æ¯ä¸ªGPUæœ‰1ä¸ªå›¾åƒã€‚ç½‘ç»œé€šè¿‡ä½¿ç”¨4e-5çš„æƒé‡è¡°å‡å’Œ0.9çš„åŠ¨é‡è¿›è¡Œè¿­ä»£çš„ä¼˜åŒ–ã€‚ä¸»å¹²ç½‘ç»œä¸­çš„æ‰¹é‡å½’ä¸€åŒ–æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”åœ¨æˆ‘ä»¬çš„æœ€ç»ˆç»“æœä¸­å°†ç»„å½’ä¸€åŒ–æ·»åŠ åˆ°æ‰€æœ‰åˆ†æ”¯ä¸­ã€‚å¯¹äºCOCOæ•°æ®é›†ï¼Œåœ¨å‰åä¸‰æ¬¡è¿­ä»£çš„å­¦ä¹ ç‡ä¸º0.02å¹¶åœ¨ç¬¬åäº”æ¬¡å’Œç¬¬åå…«æ¬¡çš„æ—¶å€™å°†å­¦ä¹ ç‡é™¤10ã€‚è¾“å…¥çš„å›¾åƒåœ¨è®­ç»ƒæ—¶è¿›è¡Œæ°´å¹³ç¿»è½¬å¹¶é‡å¡‘çŸ­è¾¹ä¸º600ä¸ªåƒç´ ã€‚å¤šå°ºåº¦æµ‹è¯•åœ¨æœ€åçš„ç»“æœä¸­è¢«é‡‡ç”¨ã€‚å¯¹äºCityspacesæ•°æ®é›†æ¥è¯´ï¼Œåˆå§‹å­¦ä¹ ç‡è®¾ç½®ä¸º0.01å¹¶åœ¨ç¬¬68æ¬¡å’Œç¬¬88æ¬¡è¿­ä»£ååˆ†åˆ«é™¤10ã€‚åœ¨å°†æ¯ä¸ªå›¾åƒéšæœºç¿»è½¬å’Œç¼©æ”¾0.5åˆ°2.0å€ä¹‹åï¼Œæˆ‘ä»¬ä»16ä¸ªéšæœº512Ã—1024å›¾åƒè£å‰ªæ„å»ºmini-batchç”¨äºè®­ç»ƒã€‚</p><h6 id="æ¨ç†">æ¨ç†</h6><p>åœ¨å‚è€ƒçš„è®ºæ–‡ä¸­ï¼Œæ¨ç†é˜¶æ®µçš„å…¨æ™¯åˆ†å‰²ç»“æœé€šè¿‡èåˆå‰æ™¯äº‹ç‰©å’ŒèƒŒæ™¯äº‹ç‰©äº§ç”Ÿã€‚åœ¨è¯¥é˜¶æ®µï¼Œå‰æ™¯äº‹ç‰©çš„é‡å éƒ¨åˆ†é€šè¿‡NMSæå¤§å€¼æŠ‘åˆ¶è¿›è¡Œå¤„ç†ï¼Œå¯ä»¥é€šè¿‡è¾ƒé«˜çš„ç½®ä¿¡åº¦æ¥é¢„æµ‹åˆ†å‰²ä»»åŠ¡ã€‚åœ¨ç¨‹åºä¸­ï¼Œåˆ†ç±»ä¹‹é—´çš„å…³ç³»ä¹Ÿè¢«è€ƒè™‘åœ¨å†…ã€‚æ— é‡å çš„å®ä¾‹åˆ†å‰²å’Œé¦–æ¬¡æŒ‡é…å®ä¾‹æ ‡ç­¾çš„èƒŒæ™¯äº‹ç‰©è¿›è¡Œç»“åˆæ¥æ”¯æŒå‰æ™¯äº‹ç‰©ã€‚</p><h5 id="å®éªŒ">å®éªŒ</h5><p>ä½œè€…åœ¨COCOå’ŒCityspacesæ•°æ®é›†ä¸Šè¿›è¡Œå®éªŒå¹¶å’ŒåŒè¡Œç®—æ³•ç›¸æ¯”ã€‚ç®€è¨€ä¹‹å°±æ˜¯å¹ã€‚æ‰€ä»¥ç•¥ã€‚</p><h5 id="é™„åŠ æ–‡ä»¶">é™„åŠ æ–‡ä»¶</h5><h6 id="å›¾1">å›¾1</h6><p><img src="http://dingdm.online/AUNettu1" alt=""></p><h6 id="å›¾2">å›¾2</h6><p><img src="http://dingdm.online/AUNettu2" alt=""></p><h6 id="å›¾3">å›¾3</h6><p><img src="http://dingdm.online/AUNettu3" alt=""></p><h6 id="å›¾4">å›¾4</h6><p><img src="http://dingdm.online/AUNettu4" alt=""></p><h6 id="å›¾5">å›¾5</h6><p><img src="http://dingdm.online/AUNettu5" alt=""></p><h6 id="å›¾6">å›¾6</h6><p><img src="http://dingdm.online/AUNettu6" alt=""></p><h6 id="å›¾7">å›¾7</h6><p><img src="http://dingdm.online/AUNettu7" alt=""></p><h6 id="è¡¨1">è¡¨1</h6><p><img src="http://dingdm.online/AUNetbiao1" alt=""></p><h6 id="è¡¨2">è¡¨2</h6><p><img src="http://dingdm.online/AUNetbiao2" alt=""></p><h6 id="è¡¨3">è¡¨3</h6><p><img src="http://dingdm.online/AUNetbiao3" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UNetç¼–ç </title>
      <link href="/2021/10/06/unet-bian-ma/"/>
      <url>/2021/10/06/unet-bian-ma/</url>
      
        <content type="html"><![CDATA[<h3 id="UNetç¼–ç ">UNetç¼–ç </h3><h5 id="UNetæ¨¡å‹å›¾">UNetæ¨¡å‹å›¾</h5><p><img src="http://dingdm.online/unettu1" alt=""></p><h5 id="3-3å·ç§¯">3*3å·ç§¯</h5><pre class=" language-language-python"><code class="language-language-python">class DoubleConvWithThreeKernnel(torch.nn.Module):    def __init__(self,in_channel,out_channel):        super(DoubleConvWithThreeKernnel,self).__init__()        # é€šè¿‡åºåˆ—å‰åçš„æ–¹å¼è¿›è¡Œä¸¤æ¬¡å·ç§¯å’Œæ¿€æ´»        self.doubleConv = torch.nn.Sequential(            torch.nn.Conv2d(in_channel,out_channel,padding=1,kernel_size=3),            torch.nn.BatchNorm2d(out_channel),            torch.nn.ReLU(),            torch.nn.Conv2d(out_channel,out_channel,padding=1,kernel_size=3),            torch.nn.BatchNorm2d(out_channel),            torch.nn.ReLU()        )    def forward(self,x):        return self.doubleConv(x)</code></pre><h5 id="æœ€å¤§æ± åŒ–">æœ€å¤§æ± åŒ–</h5><pre class=" language-language-python"><code class="language-language-python">class MaxPooling(torch.nn.Module):    def __init__(self,in_channel,out_channel):        super(MaxPooling,self).__init__()        self.maxPooling = torch.nn.Sequential(            torch.nn.MaxPool2d(kernel_size=2),            # ä»ç¬¬ä¸€æ¬¡æ± åŒ–å¼€å§‹ï¼Œæ± åŒ–å®Œæˆåè¿›è¡Œä¸¤æ¬¡å·ç§¯æ“ä½œ            DoubleConvWithThreeKernnel(in_channel,out_channel)        )    def forward(self,x):        return self.maxPooling(x)</code></pre><h5 id="åå·ç§¯">åå·ç§¯</h5><pre class=" language-language-python"><code class="language-language-python">class UpConv(torch.nn.Module):    def __init__(self,in_channel,out_channel):        super(UpConv,self).__init__()        # åå·ç§¯        self.up = torch.nn.ConvTranspose2d(in_channel,in_channel//2,kernel_size=2,stride=2)        # åå·ç§¯åä¸¤æ¬¡å·ç§¯        self.conv = DoubleConvWithThreeKernnel(in_channel,out_channel)    def forward(self,x2,x1):        # åå·ç§¯åé€šè¿‡æ”¶ç¼©å±‚å’Œæ‰©å¼ å±‚çš„feature mapå°ºå¯¸å¯¹æµ…å±‚çš„feature mapè¿›è¡Œpadæ“ä½œï¼Œåœ¨ä¸æ‰©å±•å±‚feature mapè¿›è¡Œæ‹¼æ¥        x1 = self.up(x1)        diffY = x2.size()[2] - x1.size()[2]        diffX = x2.size()[3] - x1.size()[3]        x1 = F.pad(x1, [diffX // 2, diffX - diffX // 2,                        diffY // 2, diffY - diffY // 2])        x = torch.cat([x2, x1], dim=1)        return self.conv(x)</code></pre><h5 id="1-1å·ç§¯è¾“å‡º">1*1å·ç§¯è¾“å‡º</h5><pre class=" language-language-python"><code class="language-language-python">class OneMultiOne(torch.nn.Module):    def __init__(self,in_channel,out_channel):        super(OneMultiOne,self).__init__()        self.conv = torch.nn.Conv2d(in_channel,out_channel,padding=0,kernel_size=1)    def forward(self,x):        return self.conv(x)</code></pre><h5 id="æ¨¡å‹æ­å»º">æ¨¡å‹æ­å»º</h5><pre class=" language-language-python"><code class="language-language-python">class UNet(torch.nn.Module):    def __init__(self,in_channels,out_classes):        super(UNet,self).__init__()        self.in_channels = in_channels        self.out_classes = out_classes        self.conv = DoubleConvWithThreeKernnel(in_channels,64)        self.maxPooling1 = MaxPooling(64, 128)        self.maxPooling2 = MaxPooling(128, 256)        self.maxPooling3 = MaxPooling(256, 512)        self.maxPooling4 = MaxPooling(512, 1024)        self.upConv1 = UpConv(1024, 512)        self.upConv2 = UpConv(512, 256)        self.upConv3 = UpConv(256, 128)        self.upConv4 = UpConv(128, 64)        self.out = OneMultiOne(64,out_classes)    def forward(self,x):        # é¦–æ¬¡å·ç§¯        x = self.conv(x)        # å››æ¬¡æ± åŒ–        x1 = self.maxPooling1(x)        x2 = self.maxPooling2(x1)        x3 = self.maxPooling3(x2)        x4 = self.maxPooling4(x3)        # å››æ¬¡åå·ç§¯        x5 = self.upConv1(x3,x4)        x6 = self.upConv2(x2,x5)        x7 = self.upConv3(x1,x6)        x8 = self.upConv4(x,x7)        # æœ€åè¾“å‡º        return self.out(x8)</code></pre><h5 id="æ•°æ®å¢å¼º">æ•°æ®å¢å¼º</h5><pre class=" language-language-python"><code class="language-language-python">class ISBI_Loader(Dataset):    def __init__(self, data_path):        # åˆå§‹åŒ–å‡½æ•°ï¼Œè¯»å–æ‰€æœ‰data_pathä¸‹çš„å›¾ç‰‡        self.data_path = data_path        self.imgs_path = glob.glob(os.path.join(data_path, 'image/*.png'))    def augment(self, image, flipCode):        # ä½¿ç”¨cv2.flipè¿›è¡Œæ•°æ®å¢å¼ºï¼ŒfilpCodeä¸º1æ°´å¹³ç¿»è½¬ï¼Œ0å‚ç›´ç¿»è½¬ï¼Œ-1æ°´å¹³+å‚ç›´ç¿»è½¬        flip = cv2.flip(image, flipCode)        return flip    def __getitem__(self, index):        # æ ¹æ®indexè¯»å–å›¾ç‰‡        image_path = self.imgs_path[index]        # æ ¹æ®image_pathç”Ÿæˆlabel_path        label_path = image_path.replace('image', 'label')        # è¯»å–è®­ç»ƒå›¾ç‰‡å’Œæ ‡ç­¾å›¾ç‰‡        image = cv2.imread(image_path)        label = cv2.imread(label_path)        # å°†æ•°æ®è½¬ä¸ºå•é€šé“çš„å›¾ç‰‡        image = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)        label = cv2.cvtColor(label, cv2.COLOR_BGR2GRAY)        image = image.reshape(1, image.shape[0], image.shape[1])        label = label.reshape(1, label.shape[0], label.shape[1])        # å¤„ç†æ ‡ç­¾ï¼Œå°†åƒç´ å€¼ä¸º255çš„æ”¹ä¸º1        if label.max() > 1:            label = label / 255        # éšæœºè¿›è¡Œæ•°æ®å¢å¼ºï¼Œä¸º2æ—¶ä¸åšå¤„ç†        flipCode = random.choice([-1, 0, 1, 2])        if flipCode != 2:            image = self.augment(image, flipCode)            label = self.augment(label, flipCode)        return image, label    def __len__(self):        # è¿”å›è®­ç»ƒé›†å¤§å°        return len(self.imgs_path)</code></pre><h5 id="è®­ç»ƒå‡½æ•°">è®­ç»ƒå‡½æ•°</h5><pre class=" language-language-python"><code class="language-language-python">def train_net(model,data,device,batch_size,lr,epochs):    # åŠ è½½è®­ç»ƒé›†    isbi_dataset = ISBI_Loader(data)    train_loader = Data.DataLoader(dataset=isbi_dataset,batch_size=batch_size,shuffle=True)    # ä¼˜åŒ–å™¨    optimizer = optim.RMSprop(model.parameters(),weight_decay=1e-8,lr=lr,momentum=0.9)    # losså‡½æ•°    criterion = torch.nn.BCEWithLogitsLoss()    best_loss = float('inf')    for epoch in range(epochs):        model.train()        for image,label in train_loader:            # æ¢¯åº¦å½’0            optimizer.zero_grad()            image = image.to(device=device, dtype=torch.float32)            label = label.to(device=device,dtype=torch.float32)            yhat = model(image)            # è®¡ç®—æŸå¤±            loss = criterion(yhat,label)            print('loss',loss)            if loss < best_loss:                best_loss = loss                torch.save(model.state_dict(), 'best_model.pth')            # åå‘ä¼ æ’­            loss.backward()            optimizer.step()</code></pre><h5 id="æ•°æ®é›†">æ•°æ®é›†</h5><p><a href="http://dingdm.online/data.zip" target="_blank" rel="noopener">http://dingdm.online/data.zip</a></p><h5 id="è®­ç»ƒè¿‡ç¨‹åŠæœ€ä¼˜æ¨¡å‹">è®­ç»ƒè¿‡ç¨‹åŠæœ€ä¼˜æ¨¡å‹</h5><p><img src="http://dingdm.online/rununet.png" alt=""></p><h5 id="æµ‹è¯•">æµ‹è¯•</h5><pre class=" language-language-python"><code class="language-language-python">    device = torch.device('cuda' if torch.cuda.is_available() else 'cpu')    model = UNet(1,1)    model.to(device=device)    # åŠ è½½æ¨¡å‹    model.load_state_dict(torch.load('./best.pt', map_location=device))    model.eval()    # è¯»å–æ‰€æœ‰å›¾ç‰‡è·¯å¾„    tests = glob.glob('./data/test/3.png')    for test in tests:        # ä¿å­˜ç»“æœåœ°å€        save_res_path = test.split('.')[0] + '_res.png'        img = cv2.imread(test)        img = cv2.cvtColor(img, cv2.COLOR_RGB2GRAY)        # è½¬ä¸ºbatchä¸º1ï¼Œé€šé“ä¸º1ï¼Œå¤§å°ä¸º512*512çš„æ•°ç»„        img = img.reshape(1, 1, img.shape[0], img.shape[1])        img_tensor = torch.from_numpy(img)        img_tensor = img_tensor.to(device=device, dtype=torch.float32)        pred = model(img_tensor)        # æå–ç»“æœ        pred = np.array(pred.data.cpu()[0])[0]        # å¤„ç†ç»“æœ        pred[pred >= 0.5] = 255        pred[pred < 0.5] = 0        cv2.imwrite(save_res_path, pred)</code></pre><h5 id="æµ‹è¯•ç»“æœ">æµ‹è¯•ç»“æœ</h5><p><img src="http://dingdm.online/trainresult.png" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒåˆ†å‰² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>U-Netè®ºæ–‡é˜…è¯»</title>
      <link href="/2021/10/05/u-net-lun-wen-yue-du/"/>
      <url>/2021/10/05/u-net-lun-wen-yue-du/</url>
      
        <content type="html"><![CDATA[<h3 id="U-Netè®ºæ–‡é˜…è¯»">U-Netè®ºæ–‡é˜…è¯»</h3><h5 id="ç›¸å…³çŸ¥è¯†">ç›¸å…³çŸ¥è¯†</h5><h6 id="å±€éƒ¨æ„ŸçŸ¥">å±€éƒ¨æ„ŸçŸ¥</h6><p>ç½‘ç»œéƒ¨åˆ†è¿é€šï¼Œæ¯ä¸ªç¥ç»å…ƒåªä¸ä¸Šä¸€å±‚çš„éƒ¨åˆ†ç¥ç»å…ƒç›¸è¿ï¼Œåªæ„ŸçŸ¥å±€éƒ¨ï¼Œè€Œä¸æ˜¯æ•´å¹…å›¾åƒã€‚</p><h5 id="æ‘˜è¦">æ‘˜è¦</h5><p>é»˜è®¤çš„æˆåŠŸçš„æ·±å±‚ç½‘ç»œçš„è®­ç»ƒéœ€è¦ä¸Šåƒä¸ªè¢«æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬ã€‚åœ¨è®ºæ–‡ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†ä¸€ç§ç½‘ç»œå’Œä¸€ç§ä¾èµ–äºæ•°æ®å¢å¼ºçš„è®­ç»ƒç­–ç•¥æ¥æ›´åŠ æœ‰æ•ˆçš„ä½¿ç”¨å¯è·å¾—çš„æ³¨é‡Šæ ·æœ¬ã€‚æˆ‘ä»¬çš„æ¶æ„ç”±å¯ä»¥æ•è·ä¸Šä¸‹æ–‡çš„æ”¶ç¼©è·¯å¾„å’Œèƒ½å¤Ÿç²¾ç¡®å®šä½çš„æ‰©å±•è·¯å¾„æ„æˆã€‚å¯¹äºåˆ†å‰²ç”µå­æ˜¾å¾®é•œä¸‹ç¥ç»å…ƒè¿½è¸ªçš„ISBIæŒ‘æˆ˜ï¼Œæˆ‘ä»¬å±•ç¤ºäº†æˆ‘ä»¬ç«¯åˆ°ç«¯è®­ç»ƒæ¨¡å‹çš„ä¼˜è¶Šæ€§ã€‚å°†åŒæ ·çš„æ¨¡å‹åº”ç”¨äºå…‰å­¦æ˜¾å¾®é•œå›¾åƒï¼Œæˆ‘ä»¬çš„ç½‘ç»œæ¶æ„ä»å…·æœ‰è‰¯å¥½çš„ä¼˜è¶Šæ€§ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬çš„ç½‘ç»œçš„è®­ç»ƒé€Ÿåº¦è¾ƒå¿«ã€‚åœ¨æœ€è¿‘çš„GPUä¸Šï¼Œåˆ†å‰²ä¸€å¼ 512*512çš„å›¾ç‰‡çš„æ—¶é—´ä¸åˆ°ä¸€ç§’ã€‚</p><h5 id="å¼•è¨€">å¼•è¨€</h5><p>åœ¨è¿‡å»çš„ä¸¤å¹´ï¼Œæ·±åº¦å·ç§¯ç½‘ç»œåœ¨å¾ˆå¤šè§†è§‰è¯†åˆ«é¢†åŸŸæ‹¥æœ‰ä¼˜å¼‚çš„è¡¨ç°ã€‚å°½ç®¡å·ç§¯ç½‘ç»œå·²ç»åº”ç”¨äº†å¾ˆä¹…ï¼Œä½†æ˜¯å¯ç”¨è®­ç»ƒé›†çš„å°ºå¯¸å’Œç½‘ç»œçš„å°ºå¯¸é™åˆ¶äº†å®ƒçš„æ€§èƒ½ã€‚Krizhevskyç­‰äººä½¿ç”¨åœ¨æ‹¥æœ‰1ç™¾ä¸‡è®­ç»ƒå›¾åƒçš„ImageNetæ•°æ®é›†ä¸Šé€šè¿‡8å±‚çš„ç½‘ç»œå’Œç™¾ä¸‡çš„å‚æ•°è¿›è¡Œç›‘ç£å­¦ä¹ ä»è€Œå–å¾—äº†çªç ´ã€‚ä¹‹åï¼Œæ›´å¤šæ›´å¤§å’Œæ›´æ·±çš„æ¨¡å‹å‡ºç°äº†ã€‚</p><p>ä¼ ç»Ÿçš„å·ç§¯ç½‘ç»œä¸»è¦ç”¨äºåˆ†ç±»ä»»åŠ¡ï¼Œè¾“å‡ºä¸ºå•ä¸€çš„ç±»å‹æ ‡ç­¾ã€‚ç„¶è€Œï¼Œåœ¨è®¸å¤šè§†è§‰ä»»åŠ¡ä¸­ï¼Œç‰¹åˆ«æ˜¯ç”Ÿç‰©åŒ»å­¦çš„å›¾åƒå¤„ç†ï¼Œäººä»¬æƒ³è¦çš„è¾“å‡ºåº”åŒ…æ‹¬å±€éƒ¨æ„ŸçŸ¥å’Œæ¯ä¸ªåƒç´ å¯¹åº”çš„æ ‡ç­¾åˆ†ç±»ã€‚è€Œä¸”å¯¹äºç”Ÿç‰©åŒ»å­¦ä»»åŠ¡ï¼Œè·å–å¤§é‡çš„è®­ç»ƒå›¾åƒæ˜¯ä¸ç°å®çš„ã€‚å› æ­¤ï¼ŒCiresanç­‰äººé€šè¿‡æä¾›è¾“å…¥åƒç´ å‘¨å›´çš„å±€éƒ¨åŒºåŸŸå¹¶è®¾ç½®åˆ°æ»‘åŠ¨çª—å£æ¥è¿›è¡Œæ¯ä¸ªåƒç´ æ ‡ç­¾åˆ†ç±»çš„é¢„æµ‹ã€‚ç¬¬ä¸€ï¼Œè¿™ç§ç½‘ç»œå…·æœ‰å±€éƒ¨æ„ŸçŸ¥èƒ½åŠ›ã€‚ç¬¬äºŒï¼Œè®­ç»ƒçš„æ•°æ®å—çš„æ•°é‡è¿œå¤§äºè®­ç»ƒè®­ç»ƒå›¾åƒçš„æ•°é‡ã€‚è¿™ç§ç½‘ç»œåœ¨ISBI 2012ä¸Šèµ¢å¾—äº†EMåˆ†å‰²æŒ‘æˆ˜ã€‚</p><p>å¾ˆæ˜æ˜¾çš„ï¼ŒCiresanç­‰äººçš„è¿™ç§ç­–ç•¥æœ‰ä¸¤ä¸ªç¼ºç‚¹ã€‚ç¬¬ä¸€ï¼Œåœ¨æ¯ä¸ªå—ä¸­éƒ½è¦è¿›è¡Œè®­ç»ƒä¼šæ¶ˆè€—å¤§é‡çš„æ—¶é—´ï¼Œä¸”åœ¨é‡å çš„å¿«ä¸Šè®­ç»ƒä¼šå¸¦æ¥æ›´å¤šçš„å†—ä½™ã€‚ç¬¬äºŒï¼Œå­˜åœ¨å±€éƒ¨æ ‡è®°å‡†ç¡®ç‡å’Œä¸Šä¸‹æ–‡ä½¿ç”¨ä¹‹é—´å¹³è¡¡çš„é—®é¢˜ã€‚å¤§çš„å›¾åƒå—éœ€è¦æ›´å¤šçš„æœ€å¤§æ± åŒ–å±‚ï¼Œè€Œè¾ƒå¤šçš„æ± åŒ–å±‚ä¼šå‡å°‘å±€éƒ¨æ ‡è®°çš„å‡†ç¡®ç‡ï¼Œç„¶è€Œå¾ˆå°çš„å›¾åƒå—åªèƒ½çœ‹åˆ°å¾ˆå°‘çš„ä¸Šä¸‹æ–‡ã€‚æœ€è¿‘çš„å¾ˆå¤šæ–¹æ³•æå‡ºäº†ä¸€ç§è€ƒè™‘å¤šç§å±‚çš„ç‰¹å¾çš„è¾“å‡ºåˆ†ç±»å™¨ï¼Œå¯ä»¥ä¿è¯è‰¯å¥½çš„å±€éƒ¨æ ‡è®°å’Œä¸Šä¸‹æ–‡æ„ŸçŸ¥ã€‚</p><p>åœ¨è®ºæ–‡ä¸­ï¼Œåœ¨FCNçš„æ¶æ„ä¸Šï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ç§æ›´ä¼˜ç§€çš„æ¶æ„ã€‚æˆ‘ä»¬ä¿®æ”¹å¹¶æ‰©å±•äº†æ¶æ„æ¥ä½¿å®ƒä½¿ç”¨è¾ƒå°‘çš„è®­ç»ƒå›¾åƒå¹¶äº§ç”Ÿæ›´åŠ ç²¾ç¡®çš„åˆ†å‰²ç»“æœã€‚ä¸»è¦çš„æ€æƒ³æ˜¯é€šè¿‡è¿ç»­å±‚æ¥è¡¥å……å¹³å¸¸çš„æ”¶ç¼©ç½‘ç»œã€‚æˆ‘ä»¬é€šè¿‡ä¸Šé‡‡æ ·æ“ä½œæ¥ä»£æ›¿æ± åŒ–æ“ä½œï¼Œå› æ­¤æé«˜äº†è¾“å‡ºå±‚çš„è§£æåº¦ã€‚ä¸ºäº†å±€éƒ¨åŒ–ï¼Œå°†æ”¶ç¼©ç½‘ç»œä¸­äº§ç”Ÿçš„é«˜è§£æåº¦ç‰¹å¾å’Œä¸Šé‡‡æ ·çš„è¾“å‡ºç›¸ç»“åˆã€‚è¿ç»­çš„å·ç§¯å±‚å°±å¯ä»¥åŸºäºæ­¤å­¦ä¹ èšåˆæ›´åŠ ç²¾ç¡®çš„è¾“å‡ºã€‚</p><p>åœ¨æˆ‘ä»¬æ¶æ„ä¸­ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ä¿®æ”¹æ˜¯åœ¨ä¸Šé‡‡æ ·éƒ¨åˆ†æˆ‘ä»¬ä¹Ÿæœ‰å¤§é‡çš„ç‰¹å¾é€šé“ï¼Œè¿™æ„å‘³ç€ç½‘ç»œå¯ä»¥å°†è¯­ä¹‰ä¿¡æ¯ä¼ æ’­åˆ°æ›´é«˜çš„è§£æå±‚ã€‚ä½œä¸ºç»“è®ºï¼Œæ‰©å±•å±‚å°±æˆ–å¤šæˆ–å°‘çš„ä¸æ”¶ç¼©å±‚ç›¸å¯¹ç§°ï¼Œäº§ç”Ÿäº†ä¸€ç§Uå‹çš„æ¶æ„ã€‚è¿™ç§ç½‘ç»œä¸å†ä½¿ç”¨å…¨è¿æ¥å±‚ï¼Œå¹¶ä¸”åªä½¿ç”¨å·ç§¯ä¸­çš„æœ‰æ•ˆéƒ¨åˆ†ã€‚åˆ†å‰²çš„mapåªåŒ…å«åƒç´ ï¼Œå¯¹äºè¾“å…¥çš„å›¾åƒå¯ä»¥è·å¾—å…¨éƒ¨çš„è¯­ä¹‰ä¿¡æ¯ã€‚é€šè¿‡overlap-tileç­–ç•¥å¯ä»¥å¯¹ä»»æ„å¤§å°çš„å›¾ç‰‡è¿›è¡Œæ— ç¼åˆ†å‰²ã€‚ä¸ºäº†é¢„æµ‹å›¾åƒåŒºåŸŸè¾¹ç¼˜çš„åƒç´ ï¼Œä¸¢å¤±çš„è¯­ä¹‰ä¿¡æ¯å¯ä»¥é€šè¿‡é•œåƒæ³•è¿›è¡Œæ¨ç†ã€‚è¿™ç§tilingç­–ç•¥å¯¹äºè¾ƒå¤§çš„å›¾ç‰‡æ˜¯éå¸¸é‡è¦çš„ï¼Œç”±äºGPUæ˜¾å­˜çš„åŸå› ä¼šå¯¼è‡´è§£æåº¦çš„é™åˆ¶ã€‚</p><p>å¯¹äºæˆ‘ä»¬çš„ä»»åŠ¡åªæœ‰å¾ˆå°‘ä¸€éƒ¨åˆ†è®­ç»ƒæ•°æ®æ˜¯å¯ä½¿ç”¨çš„ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹å¯ä½¿ç”¨çš„è®­ç»ƒå›¾åƒè¿›è¡Œå¼¹æ€§å½¢å˜æ¥è¿›è¡Œé¢å¤–çš„æ•°æ®å¢å¼ºã€‚è¿™æ„å‘³ç€ç½‘ç»œå¯ä»¥ä¸é€šè¿‡æ³¨é‡Šå›¾ç‰‡èµ„æ–™çš„è½¬å˜æ¥å­¦ä¹ åˆ°å½¢å˜çš„ä¸å˜æ€§ã€‚è¿™åœ¨ç”Ÿç‰©åŒ»å­¦åˆ†å‰²é¢†åŸŸæ˜¯éå¸¸é‡è¦çš„ï¼Œå½¢å˜åœ¨æ­¤ç±»é—®é¢˜ä¸­æ˜¯éå¸¸æ™®éçš„è½¬å˜æ–¹å¼ä¸”å¼¹æ€§å½¢å˜å¯ä»¥æœ‰æ•ˆçš„æ¨¡ä»¿ã€‚åœ¨Dosovitskiyç­‰äººçš„è®ºæ–‡ä¸­ï¼Œåœ¨éç›‘ç£å­¦ä¹ é‚£å—ï¼Œæ•°æ®å¢å¼ºç”¨äºå­¦ä¹ ä¸å˜æ€§çš„ä»·å€¼å·²ç»è¢«è¯´æ˜äº†ã€‚</p><p>è®¸å¤šç»†èƒåˆ†å‰²ä»»åŠ¡çš„å¦ä¸€ä¸ªæŒ‘æˆ˜æ˜¯å¯¹ç›¸åŒç»†èƒçš„åˆ†ç¦»ï¼Œå¦‚å›¾3æ‰€ç¤ºã€‚æˆ‘ä»¬æå‡ºäº†ä¸€ç§åŠ æƒæŸå¤±çš„æ–¹æ³•ï¼Œåœ¨æ¥è§¦çš„ç»†èƒä¸­åˆ†ç¦»èƒŒæ™¯ç™½æµ…æ¥è·å¾—æŸå¤±å‡½æ•°ä¸­è¾ƒå¤§çš„æƒé‡ã€‚</p><p>æˆ‘ä»¬çš„ç½‘ç»œå¯ä»¥åº”ç”¨äºå„ç§å„æ ·çš„ç”Ÿç‰©åŒ»å­¦çš„åˆ†å‰²é—®é¢˜ã€‚åœ¨è®ºæ–‡ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†åœ¨EMæ¯”èµ›ä¸­æˆ‘ä»¬å¯¹äºç¥ç»å…ƒç»“æ„åˆ†å‰²çš„ç»“æœï¼Œæ¯”Ciresanç­‰äººçš„ç½‘ç»œå…·æœ‰æ›´å¥½çš„è¡¨ç°æ•ˆæœã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå±•ç¤ºäº†ç”¨äºå…‰å­¦æ˜¾å¾®é•œå›¾åƒçš„åˆ†å‰²ç»“æœã€‚</p><h5 id="ç½‘ç»œæ¶æ„">ç½‘ç»œæ¶æ„</h5><p>ç½‘ç»œæ¶æ„å¦‚å›¾1æ‰€ç¤ºï¼Œå®ƒåŒ…å«äº†å·¦è¾¹çš„æ”¶ç¼©ç½‘ç»œå’Œå³è¾¹çš„æ‰©å±•ç½‘ç»œã€‚æ”¶ç¼©ç½‘ç»œä½¿ç”¨çš„æ˜¯ä¼ ç»Ÿçš„å·ç§¯ç½‘ç»œçš„æ¶æ„ã€‚æ‹¥æœ‰å«æœ‰ä¸¤ä¸ª3*3çš„å·ç§¯æ“ä½œï¼ŒReLuçš„æ¿€æ´»å’Œç”¨äºä¸‹é‡‡æ ·æ­¥å¹…ä¸º2çš„2*2æœ€å¤§æ± åŒ–æ“ä½œçš„é‡å¤å—ã€‚åœ¨æ¯æ¬¡ä¸‹é‡‡æ ·ä¸­ï¼Œæˆ‘ä»¬åŠ å€ç‰¹å¾é€šé“çš„æ•°é‡ï¼Œæ‰©å±•ç½‘ç»œä¸­æ¯ä¸€å±‚éƒ½åŒ…å«2*2å·ç§¯çš„ä¸Šé‡‡æ ·æ¥å‡åŠç‰¹å¾é€šé“çš„æ•°é‡ï¼Œç´§æ¥ç€ä¸€ä¸ªå’Œæ”¶ç¼©ç½‘ç»œå¯¹åº”çš„feature mapsè£å‰ªå’Œ3*3å·ç§¯ä»¥åŠreluæ¿€æ´»å‡½æ•°ã€‚ç”±äºæ¯å±‚å·ç§¯è¾¹ç•Œåƒç´ çš„ä¸¢å¤±ï¼Œå› æ­¤è£å‰ªæ“ä½œæ˜¯éå¸¸é‡è¦çš„ã€‚æœ€åçš„1*1å·ç§¯ç”¨æ¥å°†64ä¸ªå…ƒç´ çš„ç‰¹å¾æ•°ç»„è¾“å‡ºä¸ºæƒ³è¦çš„åˆ†ç±»æ•°é‡ã€‚æ•´ä¸ªç½‘ç»œä¸€å…±å«æœ‰32ä¸ªå·ç§¯å±‚ã€‚</p><p>ä¸ºäº†ä½¿è¾“å‡ºçš„åˆ†å‰²mapå¯ä»¥æ— ç¼tilingï¼Œè¾“å…¥çš„tileå°ºå¯¸éå¸¸é‡è¦ï¼Œå¯ä»¥ä½¿æ‰€æœ‰çš„æœ€å¤§æ± åŒ–æ“ä½œåº”ç”¨äºå¶æ•°xå’Œyã€‚</p><h5 id="è®­ç»ƒ">è®­ç»ƒ</h5><p>é€šè¿‡Caffeæ¡†æ¶å¹¶ä½¿ç”¨SGDæ¥è®­ç»ƒç½‘ç»œï¼Œä½¿ç”¨è¾“å…¥å›¾åƒå’Œå¯¹åº”çš„è¾“å‡ºåˆ†å‰²mapã€‚ç”±äºæ˜¯ä¸ºæ‰©å±•çš„å·ç§¯ï¼Œå› æ­¤è¾“å‡ºçš„å›¾åƒçš„å›ºå®šè¾¹ç•Œå®½åº¦æ¯”è¾“å…¥çš„å°ã€‚ä¸ºäº†æœ€å°åŒ–ç³»ç»Ÿæ¶ˆè€—å’Œæœ€å¤§åŒ–GPUæ˜¾å­˜çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¸ºå¤§çš„batché€‰æ‹©å¤§çš„è¾“å…¥tileå› æ­¤å‡å°‘äº†å•å¼ å›¾ç‰‡çš„batchã€‚æˆ‘ä»¬ä½¿ç”¨äº†0.99çš„é«˜åŠ¨é‡ï¼Œæ‰€ä»¥å…ˆå‰è®­ç»ƒçš„å¤§é‡çš„æ ·æœ¬å†³å®šäº†å½“å‰ä¼˜åŒ–æ­¥éª¤çš„æ›´æ–°ã€‚</p><p>èƒ½é‡å‡½æ•°æ˜¯é€šè¿‡æœ€åçš„feature mapä½¿ç”¨sofxmaxå‡½æ•°è®¡ç®—å¾—åˆ°çš„ï¼Œä»¥åŠä½¿ç”¨äº¤å‰ç†µè®¡ç®—feature mapã€‚softmaxå‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p><p><img src="http://dingdm.online/unet1" alt=""></p><p>ak(x)è¡¨ç¤ºåƒç´ xä½ç½®å¯¹åº”çš„ç‰¹å¾é€šé“kçš„æ¿€æ´»ï¼ŒKè¡¨ç¤ºåˆ†ç±»çš„æ•°é‡ä»¥åŠpk(x)æ˜¯kå¯¹xçš„åˆ†ç±»ç»“æœï¼Œpk(x)çº¦ç­‰äº1è¡¨ç¤ºæœ€å¤§æ¿€æ´»ak(x)ï¼Œçº¦ç­‰äº0è¡¨ç¤ºå…¶ä»–æƒ…å†µã€‚äº¤å‰ç†µå¯¹æ¯ä¸ªä½ç½®çš„pl(x)(X)è¿›è¡Œæƒ©ç½šï¼Œå…¬å¼ä¸º</p><p><img src="http://dingdm.online/unet2" alt=""></p><p>lå±äº1,kæ˜¯æ¯ä¸ªåƒç´ çš„çœŸå®æ ‡ç­¾ï¼Œwæ˜¯ç”¨æ¥è®©åœ¨è®­ç»ƒä¸­çš„ä¸€äº›å…ƒç´ æ›´åŠ é‡è¦çš„æƒé‡mapã€‚</p><p>æˆ‘ä»¬ä¸ºæ¯ä¸€ä¸ªçœŸå®æ ‡ç­¾åˆ†å‰²é¢„è®¡ç®—æƒé‡mapæ¥è¡¥å¿è®­ç»ƒé›†ä¸­æŸä¸ªç±»çš„åƒç´ é¢‘ç‡ï¼Œå¹¶å¼ºè¿«ç½‘ç»œå­¦ä¹ æˆ‘ä»¬åœ¨ç»†èƒæ¥è§¦ä¹‹é—´å¼•å…¥çš„å°åˆ†ç¦»è¾¹ç•Œã€‚</p><p>å°åˆ†ç¦»è¾¹ç•Œæ˜¯é€šè¿‡å½¢æ€å­¦æ“ä½œè¿›è¡Œè®¡ç®—çš„ï¼Œç„¶åé€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®—æƒé‡å›¾ã€‚</p><p><img src="http://dingdm.online/unet4" alt=""></p><p>wcæ˜¯å¹³è¡¡ç±»å‹é¢‘ç‡çš„æƒé‡mapï¼Œd1è¡¨ç¤ºåˆ°è¾¹ç•Œè·ç¦»æœ€è¿‘çš„ç»†èƒï¼Œd2è¡¨ç¤ºç¬¬è¾¹ç•Œå·¨é¹¿ç¬¬äºŒè¿‘çš„ç»†èƒã€‚åœ¨æˆ‘ä»¬çš„å®éªŒä¸­ï¼Œæˆ‘ä»¬å°†å‚æ•°è®¾ä¸º10å’Œçº¦5ä¸ªåƒç´ ã€‚</p><p>åœ¨æ·±åº¦ç½‘ç»œä¸­æ‹¥æœ‰å¾ˆå¤šå·ç§¯å±‚å’Œé€šè¿‡ç½‘ç»œçš„ä¸åŒè·¯å¾„ï¼Œå¥½çš„æƒé‡åˆå§‹åŒ–ç‰¹åˆ«é‡è¦ã€‚å¦åˆ™ï¼Œå³ä½¿ç½‘ç»œä¸­çš„æŸéƒ¨åˆ†æ²¡æœ‰å‘æŒ¥ä½œç”¨ï¼Œä½†ä»è¿›è¡Œäº†å¤šä½™çš„æ¿€æ´»ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œåˆå§‹æƒé‡åº”è¯¥è¢«è°ƒæ•´ä¸ºä½¿ç½‘ç»œä¸­çš„æ¯ä¸ªfeature mapéƒ½æœ‰è¿‘ä¼¼å•å…ƒæ–¹å·®ã€‚æˆ‘ä»¬æ¶æ„ä¸­çš„ç½‘ç»œé€šè¿‡ä»¥å›ºå®šåå·®æ ¹å·ä¸‹2/Nçš„é«˜æ–¯åˆ†å¸ƒä¸­ç§»åŠ¨åˆå§‹æƒé‡æ¥å®ç°çš„ï¼ŒNè¡¨ç¤ºä¸€ä¸ªç¥ç»å…ƒè¾“å…¥ç‚¹çš„æ•°é‡ã€‚å¯¹äºä¸€ä¸ª3*3å·ç§¯å’Œ64ä¸ªfeature channelsæ¥è¯´ï¼Œå‰ä¸€å±‚çš„Nä¸º9*64 = 576ã€‚</p><h6 id="3-1-æ•°æ®å¢å¼º">3.1 æ•°æ®å¢å¼º</h6><p>å½“åªæœ‰å¾ˆå°‘çš„è®­ç»ƒæ ·æœ¬å¯ç”¨æ—¶ï¼Œå¯¹äºæƒ³è¦æ•™ä¼šç½‘ç»œå­¦ä¼šä¸å˜æ€§å’Œé²æ£’æ€§æ¥è¯´æ•°æ®å¢å¼ºæ˜¯åŸºæœ¬çš„ã€‚åœ¨æ˜¾å¾®é•œå›¾åƒä¸­ï¼Œæˆ‘ä»¬æœ€åˆéœ€è¦ç§»ä½å’Œæ—‹è½¬ä¸å˜æ€§ä»¥åŠå½¢å˜å’Œç°åº¦å€¼å˜åŒ–çš„é²æ£’æ€§ã€‚å°¤å…¶æ˜¯è®­ç»ƒæ ·æœ¬éšæœºçš„å¼¹æ€§å½¢å˜å¯¹äºåªæœ‰å¾ˆå°‘çš„æ³¨é‡Šå›¾åƒæ¥è®­ç»ƒçš„åˆ†å‰²ç½‘ç»œæ¥è¯´æ˜¯æ¯”è¾ƒå…³é”®çš„ã€‚æˆ‘ä»¬åœ¨3*3ç²—ç½‘æ ¼ä¸Šä½¿ç”¨éšæœºä½ç§»å‘é‡æ¥ç”Ÿæˆå¹³æ»‘å½¢å˜ã€‚è¿™äº›ä½ç½®ä»å…·æœ‰10ä¸ªåƒç´ åå·®çš„é«˜æ–¯åˆ†å¸ƒä¸­é‡‡æ ·ã€‚ç„¶åä½¿ç”¨åŒä¸‰æ¬¡æ’å€¼è®¡ç®—åƒç´ ä½ç§»ã€‚æ”¶ç¼©è·¯å¾„æœ«ç«¯çš„ä¸¢å¼ƒå±‚æ¥è¿›ä¸€æ­¥éšå¼æ•°æ®å¢å¼ºã€‚</p><h5 id="å®éªŒ">å®éªŒ</h5><p>æˆ‘ä»¬æ¼”ç¤ºäº† u-net åœ¨ä¸‰ç§ä¸åŒçš„åˆ†å‰²ä»»åŠ¡ä¸­çš„åº”ç”¨ã€‚ç¬¬ä¸€é¡¹ä»»åŠ¡æ˜¯åœ¨ç”µå­æ˜¾å¾®é•œè®°å½•ä¸­åˆ†å‰²ç¥ç»å…ƒç»“æ„ã€‚æ•°æ®é›†å’Œæˆ‘ä»¬è·å¾—çš„åˆ†å‰²ç¤ºä¾‹å¦‚å›¾ 2 æ‰€ç¤ºã€‚æˆ‘ä»¬æä¾›å®Œæ•´ç»“æœä½œä¸ºè¡¥å……ææ–™ã€‚è¯¥æ•°æ®é›†ç”±EMåˆ†å‰²æŒ‘æˆ˜æä¾›ï¼Œè¯¥æŒ‘æˆ˜å§‹äº 2012 å¹´ ISBIï¼Œå¹¶ä¸”ä»ç„¶å¯¹æ–°çš„å‚ä¸è€…å¼€æ”¾ã€‚è®­ç»ƒæ•°æ®æ˜¯ä¸€ç»„æ¥è‡ªæœè‡ä¸€é¾„å¹¼è™«è…¹ç¥ç»ç´¢ (VNC) çš„ä¸²è¡Œåˆ‡ç‰‡é€å°„ç”µå­æ˜¾å¾®é•œçš„ 30 å¼ å›¾åƒã€‚æ¯ä¸ªå›¾åƒéƒ½å¸¦æœ‰ç›¸åº”çš„å®Œå…¨æ³¨é‡Šçš„ç»†èƒï¼ˆç™½è‰²ï¼‰å’Œè†œï¼ˆé»‘è‰²ï¼‰çš„çœŸå®æ ‡ç­¾åˆ†å‰²å›¾ã€‚æµ‹è¯•é›†æ˜¯å…¬å¼€å¯ç”¨çš„ï¼Œä½†å…¶åˆ†å‰²å›¾æ˜¯ä¿å¯†çš„ã€‚å¯ä»¥é€šè¿‡å°†é¢„æµ‹çš„è†œæ¦‚ç‡å›¾å‘é€ç»™ç»„ç»‡è€…æ¥è·å¾—è¯„ä¼°ã€‚è¯„ä¼°æ˜¯é€šè¿‡åœ¨ 10 ä¸ªä¸åŒçº§åˆ«å¯¹åˆ†å‰²å›¾è¿›è¡Œé˜ˆå€¼å¤„ç†å¹¶è®¡ç®—â€œæ‰­æ›²è¯¯å·®â€ã€â€œå…°å¾·è¯¯å·®â€å’Œâ€œåƒç´ è¯¯å·®â€æ¥å®Œæˆçš„ã€‚</p><p>u-netåœ¨æ²¡æœ‰ä»»ä½•è¿›ä¸€æ­¥é¢„å¤„ç†æˆ–åå¤„ç†çš„æƒ…å†µä¸‹å®ç°äº†0.0003529å’Œ0.0382çš„éšæœºè¯¯å·®ã€‚</p><p>è¿™æ˜æ˜¾ä¼˜äº Ciresan ç­‰äººçš„æ»‘åŠ¨çª—å£å·ç§¯ç½‘ç»œç»“æœã€‚å…¶æœ€ä½³æäº¤çš„æ‰­æ›²è¯¯å·®ä¸º0.000420ï¼Œå…°ç‰¹è¯¯å·®ä¸º0.0504ã€‚å°±å…°ç‰¹è¯¯å·®è€Œè¨€ï¼Œè¿™æ˜¯æœ€å¥½çš„è¡¨ç°ç®—æ³•é€šè¿‡ä½¿ç”¨æ•°æ®é›†ç‰¹å®šçš„åå¤„ç†æ–¹æ³•æ¥åº”ç”¨äº Ciresan ç­‰äººçš„æ¦‚ç‡å›¾ã€‚</p><p>æˆ‘ä»¬è¿˜å°† u-net åº”ç”¨äºå…‰æ˜¾å¾®å›¾åƒä¸­çš„ç»†èƒåˆ†å‰²ä»»åŠ¡ã€‚ è¯¥åˆ†å‰²ä»»åŠ¡æ˜¯ 2014 å¹´å’Œ 2015 å¹´ ISBI å•å…ƒè¿½è¸ªæŒ‘æˆ˜çš„ä¸€éƒ¨åˆ†ã€‚ç¬¬ä¸€ä¸ªæ•°æ®é›†â€œPhC-U373â€2 åŒ…å«é€šè¿‡ç›¸å·®æ˜¾å¾®é•œè®°å½•çš„èšä¸™çƒ¯é…°äºšèƒºåŸºè´¨ä¸Šçš„èƒ¶è´¨æ¯ç»†èƒç˜¤-æ˜Ÿå½¢ç»†èƒç˜¤ U373 ç»†èƒã€‚å®ƒåŒ…å« 35 ä¸ªéƒ¨åˆ†æ³¨é‡Šçš„è®­ç»ƒå›¾åƒã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®ç°äº† 92% çš„å¹³å‡ IOUï¼Œè¿™æ˜æ˜¾ä¼˜äºç¬¬äºŒå¥½çš„ç®—æ³• 83%ã€‚ ç¬¬äºŒä¸ªæ•°æ®é›†â€œDIC-HeLaâ€3 æ˜¯é€šè¿‡å¾®åˆ†å¹²æ¶‰å¯¹æ¯”æ˜¾å¾®é•œè®°å½•çš„å¹³æ¿ç»ç’ƒä¸Šçš„ HeLa ç»†èƒã€‚å®ƒåŒ…å« 20 ä¸ªéƒ¨åˆ†æ³¨é‡Šçš„è®­ç»ƒå›¾åƒã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®ç°äº† 77.5% çš„å¹³å‡ IOUï¼Œè¿™æ˜æ˜¾ä¼˜äºç¬¬äºŒå¥½çš„ç®—æ³• 46%ã€‚</p><h5 id="ç»“è®º">ç»“è®º</h5><p>u-netæ¶æ„åœ¨ä¸åŒçš„ç”Ÿç‰©åŒ»å­¦åˆ†å‰²åº”ç”¨ä¸­å®ç°äº†éå¸¸å¥½çš„æ€§èƒ½ã€‚ ç”±äºå¯ä»¥è¿›è¡Œå¼¹æ€§å½¢å˜çš„æ•°æ®å¢å¼ºï¼Œå®ƒåªéœ€è¦å¾ˆå°‘çš„æ³¨é‡Šå›¾åƒï¼Œå¹¶ä¸”åœ¨NVidia Titan GPUä¸Šçš„è®­ç»ƒæ—¶é—´åªéœ€è¦10ä¸ªå°æ—¶ã€‚ æˆ‘ä»¬æä¾›å®Œæ•´çš„åŸºäºCaffe å®ç°å’Œè®­ç»ƒå¥½çš„ç½‘ç»œã€‚ æˆ‘ä»¬ç›¸ä¿¡ï¼Œu-netæ¶æ„å¯ä»¥è½»æ¾åº”ç”¨äºæ›´å¤šçš„ä»»åŠ¡ã€‚</p><h5 id="é™„åŠ æ–‡ä»¶">é™„åŠ æ–‡ä»¶</h5><h6 id="å›¾1">å›¾1</h6><p><img src="http://dingdm.online/unettu1" alt=""></p><h6 id="å›¾2">å›¾2</h6><p><img src="http://dingdm.online/unettu2" alt=""></p><h6 id="å›¾3">å›¾3</h6><p><img src="http://dingdm.online/unettu3" alt=""></p><h6 id="å›¾å››">å›¾å››</h6><p><img src="http://dingdm.online/unettu4" alt=""></p><h6 id="è¡¨1">è¡¨1</h6><p><img src="http://dingdm.online/unetbiao1" alt=""></p><h6 id="è¡¨2">è¡¨2</h6><p><img src="http://dingdm.online/unetbiao2" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ç¬¬äºŒéƒ¨åˆ†</title>
      <link href="/2021/10/01/lun-wen-yue-du-di-er-bu-fen/"/>
      <url>/2021/10/01/lun-wen-yue-du-di-er-bu-fen/</url>
      
        <content type="html"><![CDATA[<h3 id="è®ºæ–‡é˜…è¯»ç¬¬äºŒéƒ¨åˆ†">è®ºæ–‡é˜…è¯»ç¬¬äºŒéƒ¨åˆ†</h3><h4 id="ç›¸å…³çŸ¥è¯†">ç›¸å…³çŸ¥è¯†</h4><h5 id="æ®‹å·®å­¦ä¹ ">æ®‹å·®å­¦ä¹ </h5><p>å¯¹äºä¼ ç»Ÿçš„CNNç½‘ç»œï¼Œç®€å•çš„å¢åŠ ç½‘ç»œçš„æ·±åº¦ï¼Œå®¹æ˜“<strong>å¯¼è‡´æ¢¯åº¦æ¶ˆå¤±å’Œçˆ†ç‚¸</strong>ã€‚é’ˆå¯¹æ¢¯åº¦æ¶ˆå¤±å’Œçˆ†ç‚¸çš„è§£å†³æ–¹æ³•ä¸€èˆ¬æ˜¯<strong>æ­£åˆ™åˆå§‹åŒ–(<strong>normalized initialization</strong>)<strong>å’Œ</strong>ä¸­é—´çš„æ­£åˆ™åŒ–å±‚(<strong>intermediate normalization layers</strong>)ï¼Œ<strong>ä½†æ˜¯è¿™ä¼šå¯¼è‡´å¦ä¸€ä¸ªé—®é¢˜ï¼Œ<strong>é€€åŒ–é—®é¢˜</strong>ï¼Œéšç€ç½‘ç»œå±‚æ•°çš„å¢åŠ ï¼Œåœ¨</strong>è®­ç»ƒé›†ä¸Šçš„å‡†ç¡®ç‡å´é¥±å’Œç”šè‡³ä¸‹é™</strong>äº†ã€‚è¿™ä¸ªå’Œè¿‡æ‹Ÿåˆä¸ä¸€æ ·ï¼Œå› ä¸ºè¿‡æ‹Ÿåˆåœ¨è®­ç»ƒé›†ä¸Šçš„è¡¨ç°ä¼šæ›´åŠ å‡ºè‰²ã€‚</p><p>æŒ‰ç…§å¸¸ç†æ›´æ·±å±‚çš„ç½‘ç»œç»“æ„çš„è§£ç©ºé—´æ˜¯åŒ…æ‹¬æµ…å±‚çš„ç½‘ç»œç»“æ„çš„è§£ç©ºé—´çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ·±å±‚çš„ç½‘ç»œç»“æ„èƒ½å¤Ÿå¾—åˆ°æ›´ä¼˜çš„è§£ï¼Œæ€§èƒ½ä¼šæ¯”æµ…å±‚ç½‘ç»œæ›´ä½³ã€‚ä½†æ˜¯å®é™…ä¸Šå¹¶éå¦‚æ­¤ï¼Œæ·±å±‚ç½‘ç»œæ— è®ºä»è®­ç»ƒè¯¯å·®æˆ–æ˜¯æµ‹è¯•è¯¯å·®æ¥çœ‹ï¼Œéƒ½æœ‰å¯èƒ½æ¯”æµ…å±‚è¯¯å·®æ›´å·®ï¼Œè¿™ä¹Ÿè¯æ˜äº†å¹¶éæ˜¯ç”±äºè¿‡æ‹Ÿåˆçš„åŸå› ã€‚å¯¼è‡´è¿™ä¸ªåŸå› å¯èƒ½æ˜¯å› ä¸º<strong>éšæœºæ¢¯åº¦ä¸‹é™çš„ç­–ç•¥</strong>ï¼Œå¾€å¾€è§£åˆ°çš„å¹¶ä¸æ˜¯å…¨å±€æœ€ä¼˜è§£ï¼Œè€Œæ˜¯å±€éƒ¨æœ€ä¼˜è§£ï¼Œ<strong>ç”±äºæ·±å±‚ç½‘ç»œçš„ç»“æ„æ›´åŠ å¤æ‚ï¼Œæ‰€ä»¥æ¢¯åº¦ä¸‹é™ç®—æ³•å¾—åˆ°å±€éƒ¨æœ€ä¼˜è§£çš„å¯èƒ½æ€§å°±ä¼šæ›´å¤§</strong>ã€‚</p><p>è¿™é‡Œæä¾›äº†ä¸€ç§æƒ³æ³•ï¼šæ—¢ç„¶æ·±å±‚ç½‘ç»œç›¸æ¯”äºæµ…å±‚ç½‘ç»œå…·æœ‰é€€åŒ–é—®é¢˜ï¼Œé‚£ä¹ˆæ˜¯å¦å¯ä»¥ä¿ç•™æ·±å±‚ç½‘ç»œçš„æ·±åº¦ï¼Œåˆå¯ä»¥æœ‰æµ…å±‚ç½‘ç»œçš„ä¼˜åŠ¿å»é¿å…é€€åŒ–é—®é¢˜å‘¢ï¼Ÿå¦‚æœå°†æ·±å±‚ç½‘ç»œçš„åé¢è‹¥å¹²å±‚å­¦ä¹ æˆæ’ç­‰æ˜ å°„h(x)=xé‚£ä¹ˆæ¨¡å‹å°±é€€åŒ–æˆæµ…å±‚ç½‘ç»œã€‚ä½†æ˜¯ç›´æ¥å»å­¦ä¹ è¿™ä¸ªæ’ç­‰æ˜ å°„æ˜¯å¾ˆå›°éš¾çš„ï¼Œé‚£ä¹ˆå°±æ¢ä¸€ç§æ–¹å¼ï¼ŒæŠŠç½‘ç»œè®¾è®¡æˆï¼š</p><p>H(x) = F(x) + x =&gt; F(x) = H(x) - x</p><p>åªè¦F(x) = 0å°±æ„æˆäº†ä¸€ä¸ªæ’ç­‰æ˜ å°„H(x) = xï¼Œè¿™é‡ŒF(x)ä¸ºæ®‹å·®ã€‚</p><p><a href="https://zhuanlan.zhihu.com/p/72679537" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/72679537</a></p><h6 id="4-3-ç½‘ç»œæ¶æ„çš„æ”¹å–„">4.3 ç½‘ç»œæ¶æ„çš„æ”¹å–„</h6><p>ç½‘ç»œçš„æ½œåŠ›è¿˜æ²¡æœ‰å®Œå…¨è¢«æŒ–æ˜ã€‚äº¤å‰åˆ†è§£çš„å·¥ä½œä¸­å·²ç»è¯å®feature mapså¸¸å¸¸æŠ˜å ä¸ºä¸€ä¸ªå°çš„å­é›†ã€‚ä»è¿™ä¸ªçœ‹æ³•æ¥è¯´ï¼Œä¸æ˜¯æ¯ä¸€ä¸ªfeature mapéƒ½æœ‰å¿…è¦è¿›è¡Œä¸‹ä¸€å±‚çš„å·ç§¯ã€‚æ ¹æ®è¿™ç§ç°è±¡ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ç§æ”¹è‰¯å‹çš„ç½‘ç»œæ¶æ„æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p><strong>ç½‘ç»œæ¶æ„</strong></p><p>ä½œè€…æå‡ºäº†ä¸€ç§å¦‚å›¾3æ‰€ç¤ºçš„ç”±å—ç»„æˆçš„å®Œå…¨å¼€å‘ç½‘ç»œå³FE-Netã€‚åœ¨è¯¥å—ä¸­ï¼Œåªæœ‰feature mapsçš„å­é›†è¢«ç”¨æ¥è®¡ç®—ï¼Œå…¶ä½™çš„ç›´æ¥ä¼ æ’­åˆ°ä¸‹ä¸€å±‚å·ç§¯æ¥ç¡®ä¿ä¿¡æ¯æµåŠ¨ã€‚å¦‚ä¸‹å…¬å¼ï¼š</p><p><img src="https://dingdm.online/yiwei8" alt=""></p><p>Iå’ŒOåˆ†åˆ«è¡¨ç¤ºè¾“å…¥å’Œè¾“å‡ºçš„feature mapsï¼Œç®­å¤´è¡¨ç¤ºé€šé“æ‹†åˆ†ï¼Œæˆ–ç¬¦åˆè¡¨ç¤ºé€šé“çš„åˆå¹¶ã€‚åœ¨è®­ç»ƒä¸­ï¼ŒI1å‚åŠ è®¡ç®—å¹¶ä¸”f(I1)çš„è¾“å‡ºè¢«é‡å†™å›I1çš„åˆå§‹å†…å­˜ä½ç½®çš„è®¡ç®—æ¨¡å¼å¯ä»¥éå¸¸é«˜æ•ˆçš„å®ç°ã€‚å‰©ä¸‹çš„I2ä¸éœ€è¦ä»»ä½•çš„æ“ä½œã€‚éšç€å·ç§¯å±‚çš„æ·±åº¦å¢åŠ ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è®¡ç®—ä¸­æ··åˆæ›´å¤šçš„feature mapsã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¯ä¸€ä¸ªè¾“å…¥çš„feature mapåœ¨æœ€åéƒ½å¯ä»¥å‚ä¸ä¼˜åŒ–ï¼Œå¹¶ä¸”å¯ä»¥è·å¾—ç”¨äºé¢„æµ‹çš„å¤šå°ºåº¦feature mapsã€‚æˆ‘ä»¬åœ¨å®éªŒçš„5.4ä¸­è¯æ˜äº†å®ƒçš„æœ‰æ•ˆæ€§ã€‚</p><p><strong>åŸºç¡€è®¡ç®—å•å…ƒ</strong></p><p>åœ¨è®ºæ–‡ä¸­ï¼Œå¦‚å›¾å››æ‰€ç¤ºã€‚æˆ‘ä»¬é‡‡ç”¨äº†å€’ç“¶é¢ˆçš„æ–¹å¼ä½œä¸ºåŸºç¡€è®¡ç®—å•å…ƒæ¥æ„å»ºæˆ‘ä»¬é«˜æ•ˆçš„ç½‘ç»œã€‚æ²¡æœ‰å…·ä½“çš„è¯´æ˜ï¼Œå®ƒä»¬çš„æ‰©å……é€Ÿç‡é»˜è®¤è®¾ç½®ä¸º6ï¼Œæ„å‘³ç€æ€»æ˜¯ä½¿ç”¨ç¬¬ä¸€ä¸ª1*1å·ç§¯æ ¸å°†è¾“å…¥é€šé“æ‰©å±•ä¸º6å€ã€‚ä¸ºäº†ç»“åˆæ®‹å·®å­¦ä¹ çš„ä¼˜åŠ¿ï¼Œå¯¹äºå›¾ä¸‰ä¸­æ¯ä¸€ä¸ªè®¡ç®—å—ï¼Œé™¤äº†æœ€åä¸€ä¸ªæˆ‘ä»¬ä¸»è¦ä½¿ç”¨äº†å›¾å››bæ¥ä½œä¸ºåŸºç¡€è¿ç®—å•å…ƒã€‚å¯¹äºæ¯ä¸ªè®¡ç®—å—çš„æœ€åä¸€ä¸ªè®¡ç®—å•å…ƒï¼Œæˆ‘ä»¬ä½¿ç”¨å›¾å››aæ¥ä¸ºä¸‹ä¸€ä¸ªè®¡ç®—å—æ”¹å˜é€šé“æ•°é‡ã€‚å›¾å››cç”¨äºç©ºé—´ä¸‹é‡‡æ ·ã€‚</p><h5 id="å®éªŒ">å®éªŒ</h5><p>åœ¨å®éªŒä¸­ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡åœ¨CIFA10å’ŒCIFAR100é‡‡ç”¨ä¸€äº›æ¶ˆèå®éªŒæ¥è¯å®SSLçš„æœ‰æ•ˆæ€§ã€‚åœ¨è¿™äº›å®éªŒä¸­ï¼Œæˆ‘ä»¬è¯å®äº†åªä½¿ç”¨ä¸€äº›è¾ƒå°‘çš„ç§»ä½æ“ä½œå°±è¶³å¤Ÿæä¾›ç©ºé—´ä¿¡æ¯äº¤æµå’Œæ„å»ºç´§å‡‘çš„å·ç§¯ç¥ç»ç½‘ç»œã€‚ç„¶åæˆ‘ä»¬åœ¨ILSSVRC-2012æ•°æ®é›†ä¸Šè¿›è¡Œå®éªŒæ¥è¯æ˜å¯¹äºå¤§å°ºåº¦æ•°æ®é›†çš„æ³›ç”¨æ€§ã€‚</p><h6 id="5-1-åŸºå‡†å’Œè®­ç»ƒè®¾ç½®">5.1 åŸºå‡†å’Œè®­ç»ƒè®¾ç½®</h6><p>CIFAR10å’ŒCIFAR100åˆ†åˆ«æ˜¯åŒ…å«10ç§åˆ†ç±»å’Œ100ç§å›¾åƒåˆ†ç±»ã€‚éƒ½åŒ…å«äº†32*32åˆ†è¾¨ç‡çš„5ä¸‡å¼ è®­ç»ƒå›¾åƒå’Œ1ä¸‡å¼ æµ‹è¯•å›¾åƒã€‚</p><p>åœ¨CIFARçš„å®éªŒä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ç”±CSCæ¨¡å‹æ„å»ºçš„ShiftResNetæ¥ä¼°è®¡SSLçš„èƒ½åŠ›ã€‚CSCæ¨¡å‹æ˜¯ç”±ä¸€äº›å¤¹åœ¨1*1ç”¨äºç»´åº¦ä¸Šå‡å·ç§¯å’Œ1*1ç”¨äºç»´åº¦ä¸‹é™å·ç§¯ä¹‹é—´çš„ç§»ä½å±‚ç»„æˆã€‚æ¨¡å‹ä¸­åªæœ‰ç§»ä½å±‚æ˜¯å¹³è¡¡ç©ºé—´ä¿¡æ¯äº¤æ¢çš„ï¼Œé€šè¿‡ä½¿ç”¨SSLæ¥æ›¿ä»£ç§»ä½å±‚ï¼Œä½¿ç”¨å…¬å¼4ä¸­çš„å¯è°ƒæ•´è¶…å‚æ•°Î»ï¼Œæˆ‘ä»¬å­¦ä¹ åˆ°è‡³å°‘éœ€è¦å¤šå°‘çš„ç§»ä½æ“ä½œå¯ä»¥ç»´æŒåœ¨ShiftResNetä¸Šçš„è¡¨ç°ã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨é»˜è®¤ä¸º6çš„æ‰©äº§é€Ÿç‡çš„ShiftResNet-20å’ŒShiftResNet-56æ¥ä½œä¸ºæ¶ˆèå­¦ä¹ çš„ä¸¤ä¸ªä»£è¡¨ï¼Œæˆ‘ä»¬ä½¿ç”¨128çš„mini-batchå’Œ0.1çš„å­¦ä¹ ç‡çš„ä¸¤å—GPUæ¥è¿›è¡Œè®­ç»ƒï¼Œåœ¨ä¸‰ä¸‡ä¸¤åƒæ¬¡å’Œå››ä¸‡å…«åƒæ¬¡è¿­ä»£åï¼Œå­¦ä¹ ç‡è¡°å‡äº†10å€ï¼Œå¹¶ä¸”åœ¨å…­ä¸‡å››åƒæ¬¡è¿­ä»£åè®­ç»ƒåœæ­¢äº†ã€‚åœ¨å››ä¸‡å…«åƒæ¬¡è¿­ä»£åï¼Œæˆ‘ä»¬ä¸“é—¨åœæ­¢äº†SSLè®­ç»ƒæ¥ä¿®å¤å­¦ä¹ åˆ°çš„ç§»ä½æ¨¡å¼ã€‚æˆ‘ä»¬åªé‡‡ç”¨äº†æ°´å¹³æ–¹å‘çš„ç¿»è½¬å’Œéšæœºçš„å‰ªææ¥è¿›è¡Œæ•°æ®åŠ å¼ºã€‚å› ä¸ºå‘ç°L2èŒƒæ•°çš„æ­£åˆ™åŒ–è¦å¥½äºL1èŒƒæ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ¥ä¸‹æ¥çš„å®éªŒä¸­ä½¿ç”¨äº†L2èŒƒæ•°æ­£åˆ™åŒ–æ¥è¿›è¡Œå€¼çš„ç§»ä½ã€‚</p><p>ImageNet2019æ˜¯æ‹¥æœ‰1.28millionå¼ è®­ç»ƒå›¾åƒå’Œ5ä¸‡å¼ éªŒè¯å›¾åƒçš„å¤§è§„æ¨¡å›¾åƒåˆ†ç±»æ•°æ®é›†ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨å¦‚æ­¤å¤§çš„æ•°æ®é›†ä¸­ä½¿ç”¨è½»é‡åŒ–çš„ç¥ç»ç½‘ç»œæ¥è®­ç»ƒæ˜¯å¾ˆéš¾å¾—åˆ°å¥½çš„è¡¨ç°çš„ã€‚ä¸ºäº†æ›´è¿›ä¸€æ­¥å¢åŠ ä½¿ç”¨SSLæ„å»ºç½‘ç»œçš„è¡¨ç°èƒ½åŠ›ï¼Œæˆ‘ä»¬é‡æ–°è®¾è®¡äº†å¦‚å›¾ä¸‰æ‰€ç¤ºçš„ç¥ç»ç½‘ç»œæ¶æ„æ¥å¼€å‘ç½‘ç»œçš„æ½œåŠ›ã€‚</p><p>åœ¨ImageNetæ•°æ®é›†çš„å®éªŒä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨1024çš„mini-batchï¼Œ0.00004çš„æƒé‡è¡°å‡å’Œ0.9çš„åŠ¨é‡æ¥è¿›è¡Œè®­ç»ƒã€‚ä½¿ç”¨0.6çš„å­¦ä¹ ç‡æ¥å¼€å§‹è®­ç»ƒï¼Œåœ¨ç¬¬480æ¬¡epochsåçº¿æ€§è¡°å‡ç­–ç•¥åœæ­¢ï¼Œåœ¨240æ¬¡epochsåSSLçš„è®­ç»ƒåœæ­¢ã€‚è®­ç»ƒçš„è¿­ä»£æ¬¡æ•°ä¸å‚è€ƒçš„å…¶ä»–åŒè¡Œè®ºæ–‡ä¸­çš„æ¬¡æ•°ç›¸å½“ã€‚æˆ‘ä»¬å°†å›¾åƒçš„çŸ­è¾¹ç¼©æ”¾åˆ°256å¹¶é‡‡ç”¨224*224çš„éšæœºè£å‰ªå°ºå¯¸å’Œæ°´å¹³ç¿»è½¬æ¥åŠ å¼ºè®­ç»ƒçš„æ•°æ®é›†ã€‚ä¸ºäº†æ›´è¿›ä¸€æ­¥ä¸°å¯Œè®­ç»ƒå›¾åƒï¼Œåƒåœ¨åˆå§‹è®­ç»ƒä¸­çš„ä¸€æ ·æä¾›äº†æ›´å¤šçš„å¤±çœŸå›¾åƒï¼Œä½†æ˜¯ä¼šåœ¨æœ€åçš„ä¸€äº›epochsä¸­æ’¤å›ã€‚åœ¨éªŒè¯é˜¶æ®µï¼Œæˆ‘ä»¬ä»…è£å‰ªè°ƒæ•´ä¸º224*224çš„é¦ˆé€å›¾åƒçš„ä¸­å¿ƒå¹¶ä»¥å•è§†å›¾çš„æ–¹å¼å‘ˆç°ç»“æœã€‚</p><h6 id="5-2-æ¶ˆèå­¦ä¹ ">5.2 æ¶ˆèå­¦ä¹ </h6><p>æˆ‘ä»¬ä»ä¸‰ä¸ªç›¸ä¼¼é€‰é¡¹æ¢ç´¢SSLçš„ç‰¹å¾ï¼Œç»„ç§»ä½å’Œç¨€ç–ç§»ä½ï¼Œæ·±å±‚ç½‘ç»œå’Œæµ…å±‚ç½‘ç»œå’ŒÎ»çš„è®¾ç½®ã€‚</p><p><strong>ç»„ç§»ä½å’Œç¨€ç–ç§»ä½</strong></p><p>ä¸ä½¿ç”¨ç§»ä½æƒ©ç½šï¼Œå¦‚è¡¨1æ‰€ç¤ºï¼Œç§»ä½å­¦ä¹ çš„ç»“æœè¦ç”±äºåœ¨CIFAR10å’ŒCIFAR100ä¸Šçš„å¯å‘å¼è®¾ç½®ã€‚é€šè¿‡ä¸åŒçš„ä»»åŠ¡å’Œä¸åŒçš„æ•°æ®é›†ï¼Œä½¿ç”¨ç§»ä½å­¦ä¹ å¯ä»¥ä½¿ç½‘ç»œæ¥è‡ªé€‚åº”è°ƒæ•´ä½ä½ç½®å’Œç§»ä½æ“ä½œçš„æ–¹å‘ã€‚ä½¿ç”¨ç§»ä½æƒ©ç½šæœºåˆ¶ï¼Œå’ŒåŸå§‹ç½‘ç»œç›¸æ¯”ä¹Ÿå¯ä»¥ä¿æŒå‡†ç¡®æ€§å°½ç®¡æ’é™¤äº†ç§»ä½æ“ä½œçš„ä¸€å¤§éƒ¨åˆ†ã€‚å³ä½¿æ˜¯æ’é™¤äº†è¶…è¿‡90%ç©ºé—´ä¸Šçš„ç§»ä½æ“ä½œï¼Œç½‘ç»œä»ç„¶å¯ä»¥ç»´æŒå¥½çš„è¡¨ç°ï¼Œè¿™æç¤ºæˆ‘ä»¬åœ¨å›¾åƒåˆ†ç±»ä¸­åªæœ‰ä¸€äº›ç§»ä½æ“ä½œåœ¨ç©ºé—´ä¿¡æ¯äº¤æ¢ä¸Šå‘æŒ¥äº†å…³é”®æ€§çš„ä½œç”¨ã€‚</p><p><strong>æ·±å±‚ç½‘ç»œå’Œæµ…å±‚ç½‘ç»œ</strong></p><p>æˆ‘ä»¬åˆ†åˆ«åœ¨æ·±å±‚å’Œæµ…å±‚ç½‘ç»œä¸Šä½¿ç”¨CIFAR10å’ŒCIFAR100æ•°æ®é›†æ¥åˆ†æSSLçš„ç¨€ç–æ€§ï¼Œæ¯”å¦‚ShiftResNet-20å’ŒShiftResNet-56.å¦‚è¡¨1æ‰€ç¤ºï¼Œåœ¨ShiftResNet-56ä¸Šçš„ç§»ä½ç¨€ç–æ€§è¦å¤šäºShiftResNet-20.å®ƒè¯å®äº†åœ¨ShiftResNet-56ä¸Šå³ä½¿æ˜¯è¶…è¿‡95%çš„ç¨€ç–ä¹Ÿå¯ä»¥æœ‰å¾ˆå¥½çš„è¡¨ç°ã€‚æ·±åº¦çš„å¢åŠ å¸¦æ¥äº†ç§»ä½å±‚ä¸Šæ›´å¤šçš„å†—ä½™ã€‚</p><p><strong>Î»çš„ä¸åŒè®¾ç½®</strong></p><p>æˆ‘ä»¬å°†Î»ä»0å¢åŠ åˆ°5e-4ï¼Œå°½ç®¡ç½‘ç»œçš„å‡†ç¡®ç‡ä¸‹é™äº†ä¸€ç‚¹ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†çš„ç§»ä½æ“ä½œè¢«æ’é™¤äº†ã€‚Î»ä¸º0çš„SSLç›¸å½“äºé‡åŒ–æ„ŸçŸ¥ä¸­çš„ä¸»åŠ¨ç§»ä½ã€‚å½“æˆ‘ä»¬æ˜¾è‘—çš„å¢åŠ Î»çš„å€¼æ—¶ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰çš„ä½ç§»ç¼©å°ä¸º0ï¼Œæ„å‘³ç€æœ‰1*1å·ç§¯ç»„æˆçš„åŸºç¡€æ¨¡å‹åªæœ‰ä¸‰ä¸ªæ± åŒ–å±‚åœ¨æä¾›ç©ºé—´ä¿¡æ¯äº¤æ¢ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ­£ç¡®ç‡ä¸‹é™è¾ƒå¤šï¼Œåæ˜ äº†åœ¨ç©ºé—´ä¿¡æ¯äº¤æ¢ä¸­ï¼Œå¦‚æ­¤å°‘çš„ç§»ä½å´å‘æŒ¥äº†å¾ˆå¤§çš„ä½œç”¨ã€‚æ‹¿CIFAR100æ•°æ®é›†å¹¶ä½¿ç”¨ShiftResNet-56ä½œä¸ºä¾‹å­ï¼Œä»…ä½¿ç”¨3.9%çš„feature mapsä½ç§»ï¼Œå‡†ç¡®ç‡å¯ä»¥ä»56.1%æå‡åˆ°69.9%ã€‚</p><h6 id="5-3-æ¡ˆä¾‹åˆ†æ">5.3 æ¡ˆä¾‹åˆ†æ</h6><p>æˆ‘ä»¬ä½¿ç”¨ShiftResNet-20ç½‘ç»œåœ¨CIFAR10å’ŒCIFAR100æ•°æ®é›†ä¸­ä½¿ç”¨5e-4çš„Î»å€¼è¿›è¡Œæ›´å¤šçš„ç»†èŠ‚ç ”ç©¶ã€‚åœ¨è¡¨2ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†æ¯å±‚ä¸Šç©ºé—´ç§»ä½çš„ç»†èŠ‚ã€‚åœ¨æŸäº›è®¡ç®—å—ä¸­ï¼Œå¤§å¤šæ•°çš„feature mapsæ²¡æœ‰ä½ç§»è¯´æ˜è¿™äº›ä½ç½®çš„ç§»ä½å±‚æ˜¯ä¸é‡è¦çš„ã€‚å®é™…ä¸Šï¼Œè¿™äº›ç§»ä½å±‚å¯ä»¥çœ‹åšè¡¡é‡è¿™äº›å±‚çš„é‡è¦æ€§æŒ‡æ ‡ã€‚å®ƒå¯ä»¥å†³å®šå½“å‰çš„ç§»ä½å±‚æ˜¯å¦é‡è¦ä¸”æ˜¯å¦å¯ä»¥ç§»é™¤è€Œæ²¡æœ‰æ­£ç¡®ç‡çš„ä¸‹é™ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨ShiftResNet-20ç½‘ç»œä¸Šï¼Œå—2-1çš„ç§»ä½å±‚è¿œä¸å¦‚å—2-2ç§»ä½å±‚çš„é‡è¦æ€§ã€‚åœ¨å›¾5ä¸­æˆ‘ä»¬å°†2-2çš„ç§»ä½å±‚è¿›è¡Œå¯è§†åŒ–ï¼Œè™½ç„¶å¤§å¤šæ•°çš„é€šé“æ²¡æœ‰ç§»ä½ï¼Œå‰©ä¸‹çš„å¯ä»¥å­¦ä¹ ä¸€ç§æœ‰æ„ä¹‰çš„ç§»ä½æ¨¡å¼å¹¶æä¾›æ›´å¤šçš„æ„Ÿå—é‡ã€‚è¿™ä¹Ÿæ˜¯ç§»ä½å±‚æ¯”å·ç§¯ç½‘ç»œå±‚çš„ä¼˜åŠ¿æ‰€åœ¨ã€‚</p><p>ä¸ºäº†è¿›ä¸€æ­¥çš„åˆ†æï¼Œæˆ‘ä»¬æ ¹æ®è¡¨2ä¸­çš„ç¨€ç–æ€§è¿›è¡Œç§»é™¤ä½¿ç”¨CIFAR10å’ŒCIFAR100æ•°æ®é›†å’ŒShiftResNet-20ç½‘ç»œä¸­æœ€ä¸é‡è¦çš„ç§»ä½å±‚çš„å®éªŒã€‚å¦‚è¡¨3æ‰€ç¤ºï¼Œå½“æˆ‘ä»¬é€æ¸ç§»å‡ºä¸é‡è¦çš„ç§»ä½å±‚æ—¶ï¼Œå‡†ç¡®ç‡åªä¸‹é™äº†ä¸€ç‚¹ã€‚ç”šè‡³æˆ‘ä»¬åªä¿ç•™å—2-2ä¸­çš„ä¸€ä¸ªç§»ä½å±‚ï¼Œå‡†ç¡®ç‡ä»ç»´æŒåœ¨å¯æ¥å—çš„ç¨‹åº¦ã€‚</p><h6 id="5-4-åœ¨ImageNetä¸Šçš„è¡¨ç°">5.4 åœ¨ImageNetä¸Šçš„è¡¨ç°</h6><p>æˆ‘ä»¬é‡æ–°è®¾è®¡çš„ç½‘ç»œæ¶æ„åœ¨ImageNet2012åˆ†ç±»ä»»åŠ¡ä¸Šçš„è¡¨ç°å¦‚è¡¨4.ä¸»è¦æ˜¯ç”±ä½¿ç”¨SSLçš„FEå—ç»„æˆã€‚æˆ‘ä»¬ä½¿ç”¨å®½åº¦ä¹˜æ•°ä½œä¸ºè¶…å‚æ•°æ¥è°ƒèŠ‚æ­£ç¡®ç‡å’Œè®¡ç®—æ¶ˆè€—ä¹‹é—´çš„å¹³è¡¡ã€‚</p><p><strong>å’Œå…¶ä»–åŒè¡Œç›¸æ¯”</strong></p><p>å¦‚è¡¨5æ‰€ç¤ºï¼Œä½¿ç”¨æ”¹è¿›çš„ç½‘ç»œæ¶æ„ï¼Œæˆ‘ä»¬åœ¨ShiftNetå’ŒAS-ResNetä¸Šçš„æ­£ç¡®ç»“æœå¤§å¹…åº¦å¢åŠ ã€‚æ›´å¤šçš„æ˜¯ï¼Œåœ¨æˆ‘ä»¬çš„å·¥ä½œä¹‹å‰ï¼Œæµ®ç‚¹æ•°è¿ç®—å’Œå‡†ç¡®ç‡ä¸€ç›´ç”±æ·±å±‚å¯åˆ†ç¦»å·ç§¯æ„æˆçš„ç½‘ç»œæ‰€æ”¯é…ã€‚æˆ‘ä»¬ç¬¬ä¸€æ¬¡æ²¡æœ‰ä½¿ç”¨æ·±åº¦å¯åˆ†ç¦»å·ç§¯æ¥æ„å»ºç´§å‡‘ç½‘ç»œï¼Œä½†æ˜¯å´è¾¾åˆ°äº†æ¯”å…¶ä»–ä½¿ç”¨æ·±åº¦å¯å·ç§¯æ„å»ºç½‘ç»œçš„åŒè¡Œæ‰€æ²¡èƒ½è¾¾åˆ°çš„é«˜åº¦ã€‚å°±åƒè¡¨5ï¼Œæˆ‘ä»¬çš„ç½‘ç»œè¶…è¿‡äº†MobileNetå’ŒShuffleNetç­‰ä¸€ç³»åˆ—ç½‘ç»œï¼Œè¿™è¡¨æ˜SSLå¯ä»¥è¢«å½“ä½œè¶…è¿‡æ·±åº¦å¯åˆ†ç¦»å·ç§¯çš„å¦å¤–ä¸€ç§é€‰æ‹©ã€‚</p><p>åœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸»è¦å’Œç›®å‰ç”±æ·±åº¦å¯åˆ†ç¦»æ„å»ºçš„ç´§å‡‘ç½‘ç»œçš„ä»£è¡¨MobileNetV2ç›¸æ¯”ï¼Œå¦‚å›¾6æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„ç½‘ç»œåœ¨CPUå’ŒGPUä¸Šè¾¾åˆ°äº†æœ€é«˜çš„å‡†ç¡®ç‡ä¸”æ¨ç†çš„é€Ÿåº¦æ˜¾è‘—å¢åŠ ï¼Œè¯å®äº†SSLæ˜¯ä¸€ç§æ›´åŠ å‹å¥½çš„åŸºç¡€éƒ¨ä»¶å¯¹äºè®­ç»ƒåº”ç”¨åœºæ™¯æ¥è¯´ã€‚</p><p><strong>FE-Netçš„æ¶ˆèå­¦ä¹ </strong></p><p>æˆ‘ä»¬åŒæ—¶ä½¿ç”¨äº†æ·±åº¦å¯å·ç§¯æ¥è®­ç»ƒç½‘ç»œæ¥åˆ†è§£SSLå’Œæ”¹è¿›çš„ç½‘ç»œä¹‹é—´çš„ä¼˜è¶Šæ€§ã€‚å¦‚è¡¨6æ‰€ç¤ºï¼Œåœ¨SSLå’ŒåŸºäºDWç½‘ç»œçš„æ­£ç¡®ç‡å·®è·éšç€è®­ç»ƒæ—¶é—´çš„æ˜¾è‘—å¢å¤§æ˜¯å·®è·å¾ˆå°çš„ï¼Œè¿™è¿›ä¸€æ­¥éªŒè¯äº†SSLå’ŒFE-Netçš„ä¼˜è¶Šæ€§ã€‚</p><h5 id="å›¾ç‰‡åŠè¡¨æ ¼">å›¾ç‰‡åŠè¡¨æ ¼</h5><h6 id="å›¾1">å›¾1</h6><p><img src="https://dingdm.online/tu1" alt=""></p><h6 id="å›¾2">å›¾2</h6><p><img src="https://dingdm.online/tu2" alt=""></p><h6 id="å›¾3">å›¾3</h6><p><img src="https://dingdm.online/tu3" alt=""></p><h6 id="å›¾4">å›¾4</h6><p><img src="https://dingdm.online/tu4" alt=""></p><h6 id="å›¾5">å›¾5</h6><p><img src="https://dingdm.online/tu5" alt=""></p><h6 id="å›¾6">å›¾6</h6><p><img src="https://dingdm.online/tu6" alt=""></p><h6 id="å›¾7">å›¾7</h6><p><img src="https://dingdm.online/tu7" alt=""></p><h6 id="è¡¨1">è¡¨1</h6><p><img src="https://dingdm.online/biao1" alt=""></p><h6 id="è¡¨2">è¡¨2</h6><p><img src="https://dingdm.online/biao2" alt=""></p><h6 id="è¡¨3">è¡¨3</h6><p><img src="https://dingdm.online/biao3" alt=""></p><h6 id="è¡¨4">è¡¨4</h6><p><img src="https://dingdm.online/biao4" alt=""></p><h6 id="è¡¨5">è¡¨5</h6><p><img src="https://dingdm.online/biao5" alt=""></p><h6 id="è¡¨6">è¡¨6</h6><p><img src="https://dingdm.online/biao6" alt=""></p><h6 id="è¡¨7">è¡¨7</h6><p><img src="https://dingdm.online/biao7" alt=""></p><h6 id="è¡¨8">è¡¨8</h6><p><img src="https://dingdm.online/biao8" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ç¬¬ä¸€éƒ¨åˆ†</title>
      <link href="/2021/09/29/lun-wen-yue-du-di-yi-bu-fen/"/>
      <url>/2021/09/29/lun-wen-yue-du-di-yi-bu-fen/</url>
      
        <content type="html"><![CDATA[<h3 id="è®ºæ–‡é˜…è¯»ç¬¬ä¸€éƒ¨åˆ†">è®ºæ–‡é˜…è¯»ç¬¬ä¸€éƒ¨åˆ†</h3><h5 id="ä½¿ç”¨ä¸€äº›ç§»ä½æ“ä½œæ¥è®¾è®¡æ›´åŠ é«˜æ•ˆçš„å›¾ç‰‡åˆ†ç±»å·ç§¯ç¥ç»ç½‘ç»œ">ä½¿ç”¨ä¸€äº›ç§»ä½æ“ä½œæ¥è®¾è®¡æ›´åŠ é«˜æ•ˆçš„å›¾ç‰‡åˆ†ç±»å·ç§¯ç¥ç»ç½‘ç»œ</h5><h5 id="æ·±åº¦å­¦ä¹ æ¨¡å‹åŠç›¸å…³æœ¯è¯­">æ·±åº¦å­¦ä¹ æ¨¡å‹åŠç›¸å…³æœ¯è¯­</h5><h6 id="é‡åŒ–æ„ŸçŸ¥">é‡åŒ–æ„ŸçŸ¥</h6><p>æˆ‘ä»¬ç»å¸¸å°†ç½‘ç»œè¾“å‡ºçš„èŒƒå›´åœ¨ 0.0~1.0 ä¹‹é—´çš„å¼ é‡è°ƒæ•´æˆæ•°å€¼ä¸º 0~255ã€uint8 ç±»å‹çš„å›¾ç‰‡æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯<strong>é‡åŒ–</strong>ã€‚å°†ä¸€å¼  uint8 ç±»å‹ã€æ•°å€¼èŒƒå›´åœ¨ 0~255 çš„å›¾ç‰‡å½’ä¸€æˆ float32 ç±»å‹ã€æ•°å€¼èŒƒå›´åœ¨ 0.0~1.0 çš„å¼ é‡ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯<strong>åé‡åŒ–</strong>ã€‚</p><p><img src="https://dingdm.online/lianghua1.png" alt=""></p><p>ğ‘† æ˜¯ scaleï¼Œè¡¨ç¤ºå®æ•°å’Œæ•´æ•°ä¹‹é—´çš„æ¯”ä¾‹å…³ç³»ï¼Œğ‘ æ˜¯ zero pointï¼Œè¡¨ç¤ºå®æ•°ä¸­çš„ 0 ç»è¿‡é‡åŒ–åå¯¹åº”çš„æ•´æ•°ã€‚</p><p>è¿™ä¸ªç½‘ç»œåªæœ‰ä¸‰ä¸ªæ¨¡å—ï¼Œç°åœ¨éœ€è¦æŠŠ convã€fcã€relu é‡åŒ–ã€‚å‡è®¾è¾“å…¥ä¸º ğ‘¥ï¼Œæˆ‘ä»¬å¯ä»¥äº‹å…ˆç»Ÿè®¡æ ·æœ¬çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œç„¶åè®¡ç®—å‡º ğ‘†ğ‘¥(scale) å’Œ ğ‘ğ‘¥(zero point)ã€‚åŒæ ·åœ°ï¼Œå‡è®¾ convã€fc çš„å‚æ•°ä¸º ğ‘¤1ã€ğ‘¤2ï¼Œä»¥åŠ scale å’Œ zero point ä¸º ğ‘†ğ‘¤1ã€ğ‘ğ‘¤1ã€ğ‘†ğ‘¤2ã€ğ‘ğ‘¤2ã€‚ä¸­é—´å±‚çš„ feature map ä¸º ğ‘1ï¼Œğ‘2ï¼Œå¹¶ä¸”äº‹å…ˆç»Ÿè®¡å‡ºå®ƒä»¬çš„ scale å’Œ zero point ä¸º ğ‘†ğ‘1ã€ğ‘ğ‘1ã€ğ‘†ğ‘2ã€ğ‘ğ‘2ã€‚</p><p>å·ç§¯è¿ç®—å’Œå…¨è¿æ¥å±‚çš„æœ¬è´¨éƒ½æ˜¯çŸ©é˜µè¿ç®—ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠå·ç§¯è¿ç®—è¡¨ç¤ºæˆ</p><p><img src="https://dingdm.online/lianghua2.png" alt=""></p><p>æ ¹æ®ä¹‹å‰çš„è½¬æ¢ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š</p><p><img src="https://dingdm.online/lianghua3.png" alt=""></p><p>å…¶ä¸­ ğ‘€=ğ‘†ğ‘¤1ğ‘†ğ‘¥/ğ‘†ğ‘1ï¼Œå¾—åˆ° conv çš„è¾“å‡ºåï¼Œæˆ‘ä»¬ä¸ç”¨åé‡åŒ–å› ğ‘1ï¼Œç›´æ¥ç”¨ ğ‘ğ‘1 ç»§ç»­åé¢çš„è®¡ç®—å³å¯ã€‚å¯¹äºé‡åŒ–çš„ relu æ¥è¯´ï¼Œè®¡ç®—å…¬å¼ä¸å†æ˜¯ ğ‘ğ‘2=ğ‘šğ‘ğ‘¥(ğ‘ğ‘1,0)ï¼Œè€Œæ˜¯ ğ‘ğ‘2=ğ‘šğ‘ğ‘¥(ğ‘ğ‘1,ğ‘ğ‘1)ï¼Œå¹¶ä¸” ğ‘†ğ‘1=ğ‘†ğ‘2ï¼Œğ‘ğ‘1=ğ‘ğ‘2 ã€‚å¦å¤–ï¼Œåœ¨å®é™…éƒ¨ç½²çš„æ—¶å€™ï¼Œrelu æˆ–è€… bn é€šå¸¸æ˜¯ä¼šæ•´åˆåˆ° conv ä¸­ä¸€èµ·è®¡ç®—ã€‚</p><p>å¾—åˆ° ğ‘ğ‘2 åï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ¥è®¡ç®— fc å±‚ã€‚å‡è®¾ç½‘ç»œè¾“å‡ºä¸º ğ‘¦ï¼Œå¯¹åº”çš„ scale å’Œ zero point ä¸º ğ‘†ğ‘¦ã€ğ‘ğ‘¦ï¼Œåˆ™é‡åŒ–åçš„ fc å±‚å¯ä»¥ç”¨å¦‚ä¸‹å…¬å¼è®¡ç®—ï¼š</p><p><img src="https://dingdm.online/lianghua4.png" alt=""></p><p>ç„¶åé€šè¿‡å…¬å¼ ğ‘¦=ğ‘†ğ‘¦(ğ‘ğ‘¦âˆ’ğ‘ğ‘¦)æŠŠç»“æœåé‡åŒ–å›å»ï¼Œå°±å¯ä»¥å¾—åˆ°è¿‘ä¼¼åŸæ¥å…¨ç²¾åº¦æ¨¡å‹çš„è¾“å‡ºäº†ã€‚</p><h6 id="æ¶ˆèå­¦ä¹ ">æ¶ˆèå­¦ä¹ </h6><p>ä¸ºäº†æå‡baselineçš„æ€§èƒ½ï¼Œç»™å®ƒåŠ äº†ä¸¤ä¸ªæ¨¡å—A,B ä¸ºäº†éªŒè¯Aã€Bä¸¤ä¸ªæ¨¡å—æ˜¯ä¸æ˜¯çœŸçš„éƒ½æœ‰ç”¨ï¼Œä½ éœ€è¦åšablation studyã€‚<br>å®éªŒ1ï¼šåœ¨baselineçš„åŸºç¡€ä¸ŠåŠ ä¸Šæ¨¡å—Aï¼Œçœ‹æ•ˆæœã€‚ å®éªŒ2ï¼šåœ¨baselineçš„åŸºç¡€ä¸ŠåŠ ä¸Šæ¨¡å—Bï¼Œçœ‹æ•ˆæœã€‚<br>å®éªŒ3ï¼šåœ¨baselineçš„åŸºç¡€ä¸ŠåŒæ—¶åŠ ä¸Šæ¨¡å—ABï¼Œçœ‹æ•ˆæœã€‚ ç„¶åç»“æœå¯èƒ½æ˜¯ï¼Œå®éªŒ1å’Œå®éªŒ2çš„ç»“æœéƒ½ä¸å¦‚å®éªŒ3ï¼Œé‚£ä¹ˆè¯´æ˜ABéƒ½æ˜¯æœ‰ç”¨çš„ï¼›<br>ç„¶è€Œä¹Ÿæœ‰å¯èƒ½ä½ ä¼šå‘ç°å®éªŒ1çš„ç»“æœå’Œå®éªŒ3ä¸€æ ·ï¼Œç”šè‡³æ›´å¥½ã€‚è¿™å°±è¯´æ˜ä½ çš„æƒ³æ³•æ˜¯æœ‰é—®é¢˜çš„ï¼Œæ¨¡å—Bå…¶å®å¹¶æ²¡æœ‰èµ·åˆ°ä½œç”¨ï¼Œæå‡åªæ¥è‡ªäºæ¨¡å—Aã€‚</p><h6 id="å‰ªææŠ€æœ¯">å‰ªææŠ€æœ¯</h6><p><a href="https://blog.csdn.net/jacke121/article/details/79450321?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-5.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-5.no_search_link" target="_blank" rel="noopener">https://blog.csdn.net/jacke121/article/details/79450321?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~default-5.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~default-5.no_search_link</a></p><p>ç›¸å…³è®ºæ–‡ä»¥åé˜…è¯»ã€‚</p><h6 id="çŸ¥è¯†è’¸é¦">çŸ¥è¯†è’¸é¦</h6><p>è¯†è’¸é¦ä½¿ç”¨çš„æ˜¯Teacherâ€”Studentæ¨¡å‹ï¼Œå…¶ä¸­teacheræ˜¯â€œçŸ¥è¯†â€çš„è¾“å‡ºè€…ï¼Œstudentæ˜¯â€œçŸ¥è¯†â€çš„æ¥å—è€…ã€‚çŸ¥è¯†è’¸é¦çš„è¿‡ç¨‹åˆ†ä¸º2ä¸ªé˜¶æ®µ:</p><ol><li>åŸå§‹æ¨¡å‹è®­ç»ƒ: è®­ç»ƒ"Teacheræ¨¡å‹", ç®€ç§°ä¸ºNet-Tï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯æ¨¡å‹ç›¸å¯¹å¤æ‚ï¼Œä¹Ÿå¯ä»¥ç”±å¤šä¸ªåˆ†åˆ«è®­ç»ƒçš„æ¨¡å‹é›†æˆè€Œæˆã€‚æˆ‘ä»¬å¯¹"Teacheræ¨¡å‹"ä¸ä½œä»»ä½•å…³äºæ¨¡å‹æ¶æ„ã€å‚æ•°é‡ã€æ˜¯å¦é›†æˆæ–¹é¢çš„é™åˆ¶ï¼Œå”¯ä¸€çš„è¦æ±‚å°±æ˜¯ï¼Œå¯¹äºè¾“å…¥X, å…¶éƒ½èƒ½è¾“å‡ºYï¼Œå…¶ä¸­Yç»è¿‡softmaxçš„æ˜ å°„ï¼Œè¾“å‡ºå€¼å¯¹åº”ç›¸åº”ç±»åˆ«çš„æ¦‚ç‡å€¼ã€‚</li><li>ç²¾ç®€æ¨¡å‹è®­ç»ƒ: è®­ç»ƒ"Studentæ¨¡å‹", ç®€ç§°ä¸ºNet-Sï¼Œå®ƒæ˜¯å‚æ•°é‡è¾ƒå°ã€æ¨¡å‹ç»“æ„ç›¸å¯¹ç®€å•çš„å•æ¨¡å‹ã€‚åŒæ ·çš„ï¼Œå¯¹äºè¾“å…¥Xï¼Œå…¶éƒ½èƒ½è¾“å‡ºYï¼ŒYç»è¿‡softmaxæ˜ å°„ååŒæ ·èƒ½è¾“å‡ºå¯¹åº”ç›¸åº”ç±»åˆ«çš„æ¦‚ç‡å€¼ã€‚</li></ol><h6 id="æ­£åˆ™åŒ–">æ­£åˆ™åŒ–</h6><p>æˆ‘ä»¬ç®¡Rempf(f)å«åš<strong>ç»éªŒé£é™©</strong>ï¼Œç®¡ä¸Šé¢æˆ‘ä»¬æ€ç»´å¯¼å›¾çš„è¿‡ç¨‹å«åš<strong>æ­£åˆ™åŒ–</strong>ï¼Œæ‰€ä»¥é¡ºå…¶è‡ªç„¶çš„ç®¡r(d)å«åš<strong>æ­£åˆ™åŒ–é¡¹</strong>ï¼Œç„¶åç®¡Remp(f)+r(d) å«åš<strong>ç»“æ„é£é™©</strong>ï¼Œæ‰€ä»¥é¡ºå…¶è‡ªç„¶çš„<strong>æ­£åˆ™åŒ–</strong>å°±æ˜¯æˆ‘ä»¬å°†<strong>ç»“æ„é£é™©</strong>æœ€å°åŒ–çš„è¿‡ç¨‹ï¼Œå®ƒä»¬æ˜¯ç­‰ä»·çš„ã€‚</p><p>è¯¦ç»†è§£ç­”https://www.zhihu.com/question/20924039</p><h5 id="æ‘˜è¦">æ‘˜è¦</h5><p>ç§»ä½æ“ä½œæ˜¯é™¤äº†æ·±åº¦å¯åˆ†ç¦»å·ç§¯ç½‘ç»œä¹‹å¤–çš„å¦ä¸€ç§å¯ä¾›é€‰æ‹©çš„ç½‘ç»œã€‚ç„¶è€Œå®ƒçš„å®ç°æ–¹å¼å’Œè®°å¿†ç‚¹æ˜¯å®ƒå‘å±•çš„ç“¶é¢ˆã€‚æœ¬ç¯‡è®ºæ–‡ä½œè€…å¼•å…¥äº†ä¸€ç§æ–°çš„å«åšSSLçš„å·ç§¯å±‚æ¥æ„å»ºé«˜æ•ˆçš„å·ç§¯ç¥ç»ç½‘ç»œã€‚åœ¨è¿™ç§æ¶æ„ä¸­ï¼Œæœ€åŸºæœ¬çš„å—æ˜¯ç”±åªæœ‰ä¸€äº›ç§»ä½æ“ä½œå¹¶ç”¨äºä¸­é—´å±‚feature mapçš„1*1çš„å·ç§¯å±‚æ„æˆã€‚ä½œè€…ä¸ºäº†è¯å®è¿™ç§æ–¹æ³•çš„å¯è¡Œæ€§ï¼Œä»‹ç»äº†åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­çš„ç§»ä½æ“ä½œæƒ©ç½šæœºåˆ¶å’Œè¿›ä¸€æ­¥æå‡ºäº†ä¸€ç§é‡åŒ–æ„ŸçŸ¥çš„ç§»ä½å­¦ä¹ æ–¹æ³•æ¥ä½¿æ¨ç†è¿‡ç¨‹ä¸­çš„å¼ºåŠ å­¦ä¹ ä½ç§»æ›´å‹å¥½ã€‚å¹¿æ³›çš„æ¶ˆèå­¦ä¹ è¡¨æ˜åªæœ‰ä¸€äº›ç§»ä½æ“ä½œå¯ä»¥æ›´é«˜æ•ˆçš„æä¾›ç©ºé—´ä¿¡æ¯äº¤æµçš„èƒ½åŠ›ã€‚æ›´è¿›ä¸€æ­¥ä¸ºäº†æœ€å¤§åŒ–SSLçš„èƒ½åŠ›ï¼Œä½œè€…é‡æ–°è®¾è®¡äº†ä¸€ç§æ”¹è¿›å¼çš„ç½‘ç»œæ¶æ„æ¥å®Œå…¨å¼€å‘ç¥ç»ç½‘ç»œè¢«é™åˆ¶çš„æ½œåŠ›ï¼Œä¹Ÿå°±æ˜¯FE-Netã€‚ä½¿ç”¨SSLï¼Œç½‘ç»œå¯ä»¥åœ¨ImageNetæ•°æ®é›†ä¸Šè¾¾åˆ°ç¬¬ä¸€ä½75%çš„å‡†ç¡®ç‡ã€‚å°±å‡†ç¡®ç‡å’Œè®­ç»ƒé€Ÿåº¦è€Œè¨€å®ƒè¶…è¿‡äº†å…¶ä»–åŒè¡ŒåŸºäºæ·±åº¦å¯åˆ†ç¦»çš„å·ç§¯æ„å»ºçš„ç½‘ç»œå’ŒNASçš„æœç´¢ç½‘ç»œã€‚</p><h5 id="å¼•è¨€">å¼•è¨€</h5><p>ä¸å¤šä»‹ç»ã€‚</p><h5 id="ç›¸å…³å·¥ä½œ">ç›¸å…³å·¥ä½œ</h5><p>æœ€è¿‘å‡ å¹´ï¼Œå°±å­˜å‚¨ï¼Œè®¡ç®—å’Œè®­ç»ƒæ¨ç†æ—¶é—´é—®é¢˜æå‡ºäº†è¶Šæ¥è¶Šå¤šçš„æ–¹æ³•å»ç®€åŒ–ç¥ç»ç½‘ç»œï¼ŒåŒæ—¶ä¿è¯å®ƒçš„å¼ºå¤§çš„è¡¨ç°ã€‚æˆ‘ä»¬é€šè¿‡è§‚å¯Ÿæ˜¯å¦æœ‰é¢„è®­ç»ƒçš„æ¨¡å‹å°†è¿™äº›æ–¹æ³•åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚</p><h6 id="2-1-å‹ç¼©ç¥ç»ç½‘ç»œ">2.1 å‹ç¼©ç¥ç»ç½‘ç»œ</h6><p>æœ‰å››ç§æ–¹æ³•å°†ç»™å®šçš„é¢„è®­ç»ƒæ¨¡å‹ç®€åŒ–ã€‚å‰ªææŠ€æœ¯ä¸ºäº†ç§»é™¤ä¸€äº›ä¸å¿…è¦çš„å‚æ•°æ¥ç¨€ç–æƒé‡çŸ©é˜µã€‚å¼ é‡åˆ†è§£å¼€å‘é€šé“å’Œæƒé‡çŸ©é˜µçš„å†—ä½™ç©ºé—´æ¥å¯»æ±‚ä½ç§©è¿‘ä¼¼ã€‚é‡åŒ–å¯¹äºæ¯ä¸ªæƒé‡å‚æ•°é‡‡ç”¨ä½æ¯”ç‰¹æ¥ä»£æ›¿æµ®ç‚¹æ•°ã€‚çŸ¥è¯†è’¸é¦å°†æ•™å¸ˆæ¨¡å‹ç®€åŒ–ä¸ºå­¦ç”Ÿæ¨¡å‹ã€‚</p><p>è¿™äº›æ–¹æ³•éƒ½å¯ä»¥å¾ˆé«˜æ•ˆçš„å‹ç¼©ç¥ç»ç½‘ç»œï¼Œä½†æ˜¯ä»–ä»¬çš„è¡¨ç°éƒ½éå¸¸ä¾èµ–é¢„è®­ç»ƒæ¨¡å‹ï¼Œæ²¡æœ‰æ¶æ„çš„æ”¹å–„ï¼Œå‡†ç¡®ç‡å¾ˆéš¾æé«˜ã€‚</p><h6 id="2-2-ç´§å‡‘ç½‘ç»œå‘å±•">2.2 ç´§å‡‘ç½‘ç»œå‘å±•</h6><p>å¦‚ä½•è®¾è®¡ç´§å‡‘çš„ç¥ç»å…ƒæ¶æ„å¸ˆå½“å‰çš„æœç´¢çƒ­ç‚¹è¯é¢˜ã€‚ä¸€äº›ç›¸å…³å·¥ä½œä½¿ç”¨ç»„å·ç§¯æ¥æ„å»ºç´§å‡‘ç½‘ç»œã€‚æœ€å‡ºåçš„MobileNeté‡‡ç”¨äº†æ·±å±‚å¯åˆ†ç¦»å·ç§¯æ¥æ„å»ºå‡†ç¡®ä¸”è½»é‡åŒ–çš„ç½‘ç»œï¼Œåœ¨é¢†åŸŸä¸Šè¿ˆè¿›äº†ä¸€å¤§æ­¥ã€‚ä¹‹åï¼Œå¾ˆå¤šçš„ç ”ç©¶è€…æ•ˆä»¿ä»–ä»¬çš„å·¥ä½œè®¾è®¡å‡ºè¶Šæ¥è¶Šå¤šç´§å‡‘å¼ºå¤§çš„æ¶æ„ï¼Œä¾‹å¦‚ShuffleNetï¼ŒMobileNetV2ï¼ŒShuffleNetV2ï¼ŒIGCV2ã€‚ç„¶è€Œï¼Œå³ä½¿æ·±å±‚å¯åˆ†ç¦»å·ç§¯åªéœ€è¦ä¸€ç‚¹ç†è®ºä¸Šçš„è®¡ç®—æ¶ˆè€—ï¼Œä½†ç”±äºç®—æ•°å¼ºåº¦å¤ªä½ä¹Ÿå¾ˆéš¾åœ¨è®­ç»ƒä¸­é«˜æ•ˆçš„å®ç°ã€‚</p><p>2018cvprä¸Šçš„ä¸€ç¯‡ç§»ä½è®ºæ–‡ç»™å‡ºäº†ä¸€ç§å¯ä¾›é€‰æ‹©çš„æ–¹æ³•ï¼Œç§»ä½æ“ä½œï¼Œå³ç§»ä½feature mapè€Œä¸è¿›è¡Œè®¡ç®—ã€‚é€šè¿‡äº¤é”™è¿™ç§ç§»ä½å’Œé€ç‚¹å·ç§¯æ¥æ„å»ºç´§å‡‘çš„ç½‘ç»œã€‚2019 NIPSçš„ä¸€ç¯‡è®ºæ–‡æå‡ºäº†ä¸€ç§æ–¹æ³•æ¥ä½¿ç§»ä½æ“ä½œæ˜¯å¯ä»¥å­¦ä¹ çš„ï¼Œæ„å‘³ç€æ¯ä¸€å±‚çš„æ„Ÿå—é‡æ˜¯å¯ä»¥è‡ªåŠ¨å­¦ä¹ çš„ã€‚ç”±äºå®ƒæ˜¯é€šè¿‡å†…å­˜ç§»åŠ¨æ¥å®ç°çš„ï¼Œå› æ­¤ä¼šå ç”¨å¤§é‡çš„æ¨ç†æ—¶é—´ã€‚è€Œä½œè€…åœ¨è®ºæ–‡ä¸­è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><h5 id="èƒŒæ™¯çŸ¥è¯†">èƒŒæ™¯çŸ¥è¯†</h5><p>ç§»ä½æ“ä½œçš„å…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://dingdm.online/yiwei1" alt=""></p><p>Iä¸ºè¾“å…¥çš„feature mapsï¼ŒOä¸ºè¾“å‡ºçš„feature mapsã€‚cä¸ºé€šé“ç´¢å¼•ï¼Œiå’Œjè¡¨ç¤ºç©ºé—´çš„ä½ç½®ã€‚Î±cå’ŒÎ²cè¡¨ç¤ºç›¸å¯¹äºè¾“å…¥çš„ç¬¬cä¸ªfeature mapçš„æ°´å¹³å’Œå‚ç›´ä½ç§»ã€‚Î±å’ŒÎ²å‚æ•°çš„æ•°é‡å’Œè¾“å…¥feature mapsçš„é€šé“æ•°é‡ä¸€è‡´ï¼Œå’Œå·ç§¯å±‚çš„å‚æ•°ç›¸æ¯”æ˜¯å‡ ä¹å¯ä»¥å¿½è§†çš„ã€‚</p><h6 id="ç»„ä½ç§»">ç»„ä½ç§»</h6><p>åŒæ ·çš„åœ¨ä¸Šé¢æåˆ°çš„cvpr2018è®ºæ–‡ä¸­ï¼Œå¯¹äºç§»ä½æ“ä½œä½¿ç”¨äº†Kå°ºå¯¸çš„å·ç§¯æ ¸ï¼Œè¾“å…¥çš„feature mapæœ€ç»ˆè¢«åˆ†ä¸ºK^2ä¸ªç»„ï¼Œæ¯ç»„å¦‚å›¾ä¸€æ‰€ç¤ºæŒ‡å®šä¸€ä¸ªä½ç§»æ–¹å‘ï¼Œæ–¹å‘å…¬å¼å¦‚ä¸‹ï¼š</p><p><img src="https://dingdm.online/weiyi2" alt=""></p><p>ç¬¦å·ä¸ºå‘ä¸‹å–å€¼ï¼Œç„¶è€Œè¿™ç§æŒ‡å®šä¸æ˜¯ä»»åŠ¡é©±åŠ¨çš„ã€‚æ¯ä¸ªç§»ä½æ“ä½œçš„å·ç§¯æ ¸éƒ½æ˜¯é€šè¿‡å¤§é‡è¯•é”™å®éªŒæ¥ç¡®å®šå¥½çš„ï¼Œä½ç§»çš„å‡åŒ€åˆ†é…å¹¶ä¸é€‚åˆæ‰€æœ‰çš„ä»»åŠ¡ã€‚</p><h6 id="ä¸»åŠ¨ç§»ä½">ä¸»åŠ¨ç§»ä½</h6><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæå‡ºäº†ä¸€ç§å°†Î±å’ŒÎ²çš„æ•´æ•°çº¦æŸåˆ°æ”¾å®½åˆ°å®æ•°å’Œæ”¾å®½ç§»ä½æ“ä½œåˆ°åŒçº¿æ€§æ’å€¼æ¥ä½¿Î±å’ŒÎ²å¯å¾®çš„æ–¹æ³•ã€‚ç¬¬ä¸€ä¸ªå…¬å¼å¯ä»¥æ”¾å®½åˆ°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://dingdm.online/weiyi3" alt=""></p><p>Î©æ˜¯ç”±å››ä¸ªç›¸è¿‘çš„æ•´æ•°ç‚¹ç»„æˆçš„(i+Î±c,j+Î²c)çš„é‚»é›†ã€‚å› æ­¤ï¼ŒÎ±å’ŒÎ²å¯ä»¥é€šè¿‡åå‘ä¼ æ’­çš„æ¢¯åº¦ä¸‹é™ä¼˜åŒ–å™¨æ¥è‡ªé€‚åº”ä¼˜åŒ–ã€‚è¿™ç§ç§»ä½æ¨¡å¼è§å›¾1ä¸­çš„bã€‚</p><h5 id="ä½¿ç”¨å°‘é‡çš„ç§»ä½æ¥è®¾è®¡é«˜æ•ˆçš„å·ç§¯ç¥ç»ç½‘ç»œ">ä½¿ç”¨å°‘é‡çš„ç§»ä½æ¥è®¾è®¡é«˜æ•ˆçš„å·ç§¯ç¥ç»ç½‘ç»œ</h5><p>cvpr2018çš„ç§»ä½è®ºæ–‡ä¸­é€šè¿‡ç›¸å…³å·¥ä½œè¯å®äº†åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ç§»ä½æ“ä½œå¯ä»¥ä¸ºç©ºé—´ä¿¡æ¯äº¤æµæä¾›æ„Ÿå—é‡ã€‚ç„¶è€Œï¼Œä¸æ˜¯æ‰€æœ‰çš„feature mapéƒ½éœ€è¦ç§»ä½ï¼Œå¤šä½™çš„ç§»ä½æ“ä½œå°†ä¼šå¸¦æ¥å¤šä½™çš„å†…å­˜ç§»åŠ¨å’Œè¿›ä¸€æ­¥å½±å“ç¥ç»ç½‘ç»œçš„æ¨ç†æ—¶é—´ã€‚ä»è¿™ä¸ªç‚¹å‡ºå‘ï¼Œæˆ‘ä»¬åº”è¯¥è®¾è®¡ä¸€ä¸ªæ–¹æ³•æ¥ä½¿ç”¨è¾ƒå°‘çš„ç§»ä½æ“ä½œæ„å»ºé«˜æ•ˆçš„å·ç§¯ç¥ç»ç½‘ç»œã€‚</p><h6 id="4-1-ç¨€ç–ç§»ä½æ“ä½œ">4.1 ç¨€ç–ç§»ä½æ“ä½œ</h6><p>ä¸ºäº†é¿å…æ— æ„ä¹‰çš„å†…å­˜ç§»åŠ¨ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä½ç½®æƒ©ç½šæœºåˆ¶æ¥æ·˜æ±°æŸå¤±å‡½æ•°ä¸­æ²¡æœ‰ç”¨çš„ç§»ä½æ“ä½œã€‚å› ä¸ºå¤§çš„ä½ç§»å¯ä»¥å¯¼è‡´æœ‰ç”¨çš„ä¿¡æ¯è¾¹ç•Œçš„ä¸¢å¤±ï¼Œæ‰€ä»¥å®ƒè¿˜å¯ä»¥é¿å…ç§»ä½å­¦ä¹ çš„æ‰©æ•£ç‰¹åˆ«æ˜¯å¯¹äºä½è§£æåº¦çš„feature mapã€‚æˆ‘ä»¬å¯¹Î±å’ŒÎ²æ·»åŠ äº†L1æ­£åˆ™åŒ–æ¥æ·˜æ±°å¤šä½™çš„ç§»ä½ï¼Œå…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://dingdm.online/yiwei3" alt=""></p><p>(x,y)æ˜¯è¾“å…¥çš„æ•°æ®å’Œå¯¹åº”çš„æ ‡ç­¾ï¼ŒWè¡¨ç¤ºé™¤äº†Î±å’ŒÎ²ä¹‹å¤–çš„è®­ç»ƒå‚æ•°ï¼Œfå‡½æ•°æ˜¯è¾“å‡ºæ ‡ç­¾çš„é¢„æµ‹ï¼ŒLå‡½æ•°æ˜¯ç¥ç»ç½‘ç»œçš„æŸå¤±å‡½æ•°ï¼ŒÎ»å¹³è¡¡è¿™ä¸¤é¡¹ã€‚</p><p>é€šè¿‡è¿™ç§ç¨€ç–æ€§æƒ©ç½šï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æœ€å°çš„å†…å­˜ç§»åŠ¨æ¥æ„å»ºå‡†ç¡®ä¸”è¾ƒå¿«çš„ç¥ç»ç½‘ç»œã€‚æˆ‘ä»¬æŠŠå®ƒå‘½åä¸ºSSLï¼Œå¦‚å›¾1ä¸­çš„cæ‰€ç¤ºã€‚</p><h6 id="4-2-é‡åŒ–æ„ŸçŸ¥ç§»ä½å­¦ä¹ ">4.2 é‡åŒ–æ„ŸçŸ¥ç§»ä½å­¦ä¹ </h6><p>å°½ç®¡çµæ´»æ€§å’Œç¨€ç–æ€§ä½¿ç”¨äº†ï¼Œä½†è¿˜æœ‰é—®é¢˜æ²¡æœ‰è§£å†³ã€‚å°½ç®¡ä¸ºäº†å­¦ä¹ ç§»ä½æ“ä½œå°†æ•´æ•°Î±å’ŒÎ²æ”¾å®½ä¸ºå®æ•°ï¼Œæ ‡å‡†çš„ç§»ä½æ“ä½œåœ¨æ¨ç†æ—¶è™½ç„¶åªéœ€è¦å†…å­˜ç§»åŠ¨ä½†æ˜¯æ’å€¼ä»ç„¶éœ€è¦ä¹˜æ³•ï¼Œåœ¨æŸç§ç¨‹åº¦ä¸Šå®ƒå¼±åŒ–äº†ç§»ä½æ“ä½œçš„æ¨ç†ä¼˜åŠ¿ã€‚</p><p>å—é‡åŒ–è®­ç»ƒç¥ç»ç½‘ç»œçš„å¯å‘ï¼Œæˆ‘ä»¬æå‡ºäº†é‡åŒ–æ„ŸçŸ¥ç§»ä½å­¦ä¹ æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åœ¨æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åœ¨å‰é¦ˆæ—¶é‡åŒ–å›æ•´æ•°ï¼Œä»ä¿æŒç§»ä½æ“ä½œæ˜¯å¯å­¦ä¹ çš„ã€‚</p><p><strong>å‰é¦ˆ</strong></p><p>æˆ‘ä»¬ä½¿ç”¨Î±å’ŒÎ²çš„è¿‘ä¼¼æ•´æ•°æ¥æ¢å¤ç§»ä½æ“ä½œä»£æ›¿æ’å€¼ï¼Œå¦‚ä¸‹å…¬å¼æ‰€ç¤º</p><p><img src="https://dingdm.online/yiwei4" alt=""></p><p>ç»å¯¹å€¼ä»£è¡¨å®æ•°çš„èˆå…¥è¿‘ä¼¼å€¼ï¼Œè¿™ç§æ–¹å¼å…¬å¼3é€šè¿‡é‡åŒ–åˆè½¬å›äº†å…¬å¼1ï¼Œæ„å‘³ç€å¯ä»¥ä½¿ç”¨ç§»ä½æ“ä½œè€Œä¸æ˜¯æ’å€¼æ¥è®¡ç®—ç½‘ç»œæŸå¤±ã€‚</p><p><strong>åå‘ä¼ æ’­</strong></p><p>å’Œå‰é¦ˆä¸åŒï¼Œå®æ•°ç§»ä½éœ€è¦è®¡ç®—ä»–ä»¬çš„æ¢¯åº¦å¹¶é€šè¿‡SGDä¼˜åŒ–ã€‚æ ¹æ®å…¬å¼3ï¼ŒÎ±å’ŒÎ²çš„æ¢¯åº¦æŸå¤±å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://dingdm.online/yiwei5" alt=""></p><p>wå’Œhæ˜¯è¾“å…¥feature mapçš„ç©ºé—´å°ºå¯¸ï¼Œsignå‡½æ•°æ ¹æ®è¾“å…¥å€¼çš„æ ‡å¿—æ¥ç¡®å®šåŠ ä¸€è¿˜æ˜¯å‡ä¸€ã€‚</p><p>å°†æŸå¤±æ¢¯åº¦ç›¸å¯¹äºç‰¹å¾å›¾ä»é«˜å±‚åå‘ä¼ æ’­åˆ°æµ…å±‚ï¼Œç¬¬ä¸‰å’Œç¬¬äº”å…¬å¼éƒ½å¯ä»¥è®¡ç®—åå¯¼æ•°ã€‚è€ƒè™‘åˆ°åœ¨å‰é¦ˆè¿‡ç¨‹ä¸­æˆ‘ä»¬ä½¿ç”¨äº†å…¬å¼5æ¥ä»£æ›¿å…¬å¼3ã€‚æ‰€ä»¥ä½¿ç”¨å…¬å¼5æ¥è®¡ç®—æ¢¯åº¦æ˜¯æ¯”è¾ƒåˆç†ä¸”æœ‰æ•ˆçš„ï¼Œå…¬å¼å¦‚ä¸‹ï¼š</p><p><img src="https://dingdm.online/yiwei6" alt=""></p><p>å’Œå…¬å¼5ç›¸æ¯”è¿™æ˜¯ä¸€ç§é€†å†…å­˜ç§»åŠ¨ã€‚</p><p><strong>è®¨è®º</strong></p><p>åœ¨è®­ç»ƒåï¼Œä½ç½®çš„èˆå…¥è¿‘ä¼¼å€¼è¢«ä¿å­˜ä¸‹æ¥å¹¶ä¸”åœ¨æ¨ç†æ—¶åªæœ‰ç§»ä½æ“ä½œåœ¨æ‰§è¡Œã€‚æ›´å¤šçš„æ˜¯ï¼Œå¦ä¸€ä¸ªæƒŠäººçš„å‰¯ä½œç”¨æ˜¯è¿™ç§æ–¹æ³•å°†L1æ­£åˆ™åŒ–è½¬å˜ä¸ºäº†è¢«æˆªæ–­å¼çš„æ­£åˆ™åŒ–ï¼Œå°†å‘ç²¾ç¡®0æ”¶ç¼©æ›´å°çš„ä½ç§»ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yolov5æºç è§£æä¸€</title>
      <link href="/2021/09/27/yolov5-yuan-ma-jie-xi/"/>
      <url>/2021/09/27/yolov5-yuan-ma-jie-xi/</url>
      
        <content type="html"><![CDATA[<h3 id="yolov5æºç è§£æä¸€">yolov5æºç è§£æä¸€</h3><h5 id="yolov5æ¨¡å‹">yolov5æ¨¡å‹</h5><p><img src="http://dingdm.online/yolov5.png" alt=""></p><p>**ï¼ˆ1ï¼‰è¾“å…¥ç«¯ï¼š**Mosaicæ•°æ®å¢å¼ºã€è‡ªé€‚åº”é”šæ¡†è®¡ç®—ã€è‡ªé€‚åº”å›¾ç‰‡ç¼©æ”¾<br>**ï¼ˆ2ï¼‰Backboneï¼š**Focusç»“æ„ï¼ŒCSPç»“æ„<br>**ï¼ˆ3ï¼‰Neckï¼š**FPN+PANç»“æ„<br>**ï¼ˆ4ï¼‰Predictionï¼š**GIOU_Loss</p><p><strong>Mosaicæ•°æ®å¢å¼º</strong></p><p>éšæœºä½¿ç”¨<strong>4å¼ å›¾ç‰‡</strong>ï¼Œéšæœºç¼©æ”¾ï¼Œå†éšæœºåˆ†å¸ƒè¿›è¡Œæ‹¼æ¥ï¼Œå¤§å¤§ä¸°å¯Œäº†æ£€æµ‹æ•°æ®é›†ï¼Œç‰¹åˆ«æ˜¯éšæœºç¼©æ”¾å¢åŠ äº†å¾ˆå¤šå°ç›®æ ‡ï¼Œè®©ç½‘ç»œçš„é²æ£’æ€§æ›´å¥½ã€‚Mosaicå¢å¼ºè®­ç»ƒæ—¶ï¼Œå¯ä»¥ç›´æ¥è®¡ç®—4å¼ å›¾ç‰‡çš„æ•°æ®ï¼Œä½¿å¾—Mini-batchå¤§å°å¹¶ä¸éœ€è¦å¾ˆå¤§ï¼Œä¸€ä¸ªGPUå°±å¯ä»¥è¾¾åˆ°æ¯”è¾ƒå¥½çš„æ•ˆæœã€‚</p><p><strong>è‡ªé€‚åº”é”šæ¡†è®¡ç®—</strong></p><p>ä½¿ç”¨è‡ªé€‚åº”çš„é”šæ¡†æ¥å¾—åˆ°æ›´å¤§çš„äº¤å¹¶æ¯”ã€‚ä¼ ç»Ÿçš„å›ºå®šå°ºå¯¸çš„anchorå¯¹äºç›®æ ‡æ£€æµ‹æ—¶ï¼Œè‹¥ç‰©ä½“åœ¨å°ºå¯¸å†…é«˜åº¦é‡åˆï¼Œå°±å¾ˆéš¾è·å–è¾“å‡ºçš„ç‰¹å¾ï¼Œè€Œä¸åŒå°ºå¯¸çš„anchorå¯ä»¥è¾ƒå¥½çš„åŒºåˆ†ä¸åŒåˆ†ç±»ã€‚é€šè¿‡ä¸åŒçš„anchorå°ºå¯¸å’Œä¸äººä¸ºæ ‡æ³¨çš„æ ‡ç­¾ä¼šäº§ç”Ÿä¸åŒçš„äº¤å¹¶æ¯”ï¼Œé€šè¿‡å¯¹äº¤å¹¶æ¯”çš„æ¯”è¾ƒå¯ä»¥è¾ƒä¸ºå‡†ç¡®çš„å¾—åˆ°æ‰€å±çš„åˆ†ç±»ã€‚</p><p>åœ¨Yoloç®—æ³•ä¸­ï¼Œé’ˆå¯¹ä¸åŒçš„æ•°æ®é›†ï¼Œéƒ½ä¼šæœ‰<strong>åˆå§‹è®¾å®šé•¿å®½çš„é”šæ¡†</strong>ã€‚åœ¨ç½‘ç»œè®­ç»ƒä¸­ï¼Œç½‘ç»œåœ¨åˆå§‹é”šæ¡†çš„åŸºç¡€ä¸Šè¾“å‡ºé¢„æµ‹æ¡†ï¼Œè¿›è€Œå’Œ<strong>çœŸå®æ¡†groundtruth</strong>è¿›è¡Œæ¯”å¯¹ï¼Œè®¡ç®—ä¸¤è€…å·®è·ï¼Œå†åå‘æ›´æ–°ï¼Œ<strong>è¿­ä»£ç½‘ç»œå‚æ•°</strong>ã€‚</p><p>Yolov5ä¸­å°†æ­¤åŠŸèƒ½åµŒå…¥åˆ°ä»£ç ä¸­ï¼Œæ¯æ¬¡è®­ç»ƒæ—¶ï¼Œè‡ªé€‚åº”çš„è®¡ç®—ä¸åŒè®­ç»ƒé›†ä¸­çš„æœ€ä½³é”šæ¡†å€¼ã€‚</p><p><strong>è‡ªé€‚åº”å›¾ç‰‡ç¼©æ”¾</strong></p><p>ä¸€èˆ¬çš„ç®—æ³•ä¸­éƒ½æ˜¯å°†ä¸åŒçš„å›¾ç‰‡ç¼©æ”¾åˆ°ç»Ÿä¸€å°ºå¯¸ï¼Œè¿™æ ·çš„æ–¹æ³•å¯èƒ½ä¼šå¯¼è‡´è¾ƒå¤§çš„å›¾ç‰‡ç¼©æ”¾çš„è¾ƒå°æ—¶äº§ç”Ÿé¢å¤–çš„é»‘è¾¹ï¼Œå¯¼è‡´è®­ç»ƒçš„é€Ÿåº¦å˜æ…¢ã€‚åœ¨yolov5ä¸­é€šè¿‡è‡ªé€‚åº”çš„å›¾ç‰‡çš„æ–¹æ³•å°½å¯èƒ½å‡å°‘å›¾åƒç¼©æ”¾æ—¶äº§ç”Ÿçš„é»‘è¾¹ï¼Œä»è€ŒåŠ å¿«è¿ç®—é€Ÿåº¦ã€‚</p><pre class=" language-language-python"><code class="language-language-python"># ä»¥color=(114, 114, 114)ç°è‰²è¿›è¡Œå¡«å……def letterbox(im, new_shape=(640, 640), color=(114, 114, 114), auto=True, scaleFill=False, scaleup=True, stride=32):    # Resize and pad image while meeting stride-multiple constraints    shape = im.shape[:2]  # current shape [height, width]    if isinstance(new_shape, int):        new_shape = (new_shape, new_shape)    # è®¡ç®—ç¼©æ”¾æ¯”ä¾‹ ç¼©æ”¾å°ºå¯¸é™¤åŸå§‹çš„å°ºå¯¸è·å–è¾ƒå°çš„ç¼©æ”¾ç³»æ•°    r = min(new_shape[0] / shape[0], new_shape[1] / shape[1])    if not scaleup:  # only scale down, do not scale up (for better val mAP)        r = min(r, 1.0)    # å¡«å……é»‘è¾¹     ratio = r, r  # width, height ratios    new_unpad = int(round(shape[1] * r)), int(round(shape[0] * r))    # è·å–å®½å’Œé«˜åŸæœ¬çš„å¡«å……é«˜åº¦     dw, dh = new_shape[1] - new_unpad[0], new_shape[0] - new_unpad[1]  # wh padding    if auto:  # minimum rectangle        # stride=32 ç½‘ç»œä¸­è¿›è¡Œäº†äº”æ¬¡ä¸‹é‡‡æ · ä½¿ç”¨å¡«å……é«˜åº¦å¯¹32è¿›è¡Œå–ä½™æ“ä½œ        dw, dh = np.mod(dw, stride), np.mod(dh, stride)  # wh padding    elif scaleFill:  # stretch        dw, dh = 0.0, 0.0        new_unpad = (new_shape[1], new_shape[0])        ratio = new_shape[1] / shape[1], new_shape[0] / shape[0]  # width, height ratios    # å–ä½™åé™¤2 å¾—åˆ°å¯¹åº”çš„å®½é«˜çš„å¡«å……é‡    dw /= 2  # divide padding into 2 sides    dh /= 2    if shape[::-1] != new_unpad:  # resize        im = cv2.resize(im, new_unpad, interpolation=cv2.INTER_LINEAR)    top, bottom = int(round(dh - 0.1)), int(round(dh + 0.1))    left, right = int(round(dw - 0.1)), int(round(dw + 0.1))    im = cv2.copyMakeBorder(im, top, bottom, left, right, cv2.BORDER_CONSTANT, value=color)  # add border    return im, ratio, (dw, dh)</code></pre><p><strong>Backbone</strong></p><p><strong>1.Focusç»“æ„</strong></p><p>å¯¹å›¾åƒè¿›è¡Œåˆ‡ç‰‡æ“ä½œåï¼Œä½¿ç”¨32ä¸ªå·ç§¯æ ¸å¯¹åˆ‡ç‰‡è¿›è¡Œå·ç§¯</p><p><strong>2.CSPç»“æ„</strong></p><p>æ¯ä¸ªCSPæ¨¡å—å‰é¢çš„å·ç§¯æ ¸çš„å¤§å°éƒ½æ˜¯3<em>3ï¼Œstride=2ï¼Œå› æ­¤å¯ä»¥èµ·åˆ°ä¸‹é‡‡æ ·çš„ä½œç”¨ã€‚å› ä¸ºBackboneæœ‰5ä¸ª<strong>CSPæ¨¡å—</strong>ï¼Œè¾“å…¥å›¾åƒæ˜¯<strong>608*608</strong>ï¼Œæ‰€ä»¥ç‰¹å¾å›¾å˜åŒ–çš„è§„å¾‹æ˜¯ï¼š<strong>608-&gt;304-&gt;152-&gt;76-&gt;38-&gt;19</strong>ã€‚ç»è¿‡5æ¬¡CSPæ¨¡å—åå¾—åˆ°19</em>19å¤§å°çš„ç‰¹å¾å›¾ã€‚</p><p>CSPNetçš„ä½œè€…è®¤ä¸ºæ¨ç†è®¡ç®—è¿‡é«˜çš„é—®é¢˜æ˜¯ç”±äºç½‘ç»œä¼˜åŒ–ä¸­çš„<strong>æ¢¯åº¦ä¿¡æ¯é‡å¤</strong>å¯¼è‡´çš„ã€‚å› æ­¤é‡‡ç”¨CSPæ¨¡å—å…ˆå°†åŸºç¡€å±‚çš„ç‰¹å¾æ˜ å°„åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç„¶åé€šè¿‡è·¨é˜¶æ®µå±‚æ¬¡ç»“æ„å°†å®ƒä»¬åˆå¹¶ï¼Œåœ¨å‡å°‘äº†è®¡ç®—é‡çš„åŒæ—¶å¯ä»¥ä¿è¯å‡†ç¡®ç‡ã€‚</p><p>CSPçš„æ¨¡å‹å›¾</p><p><a href="http://dingdm.online/csp.png" target="_blank" rel="noopener">http://dingdm.online/csp.png</a></p><p><strong>3.SPPç»“æ„</strong></p><p>ä½¿ç”¨k={1*1,5*5,9*9,13*13}çš„æœ€å¤§æ± åŒ–çš„æ–¹å¼ï¼Œå†å°†ä¸åŒå°ºåº¦çš„ç‰¹å¾å›¾è¿›è¡ŒConcatæ“ä½œã€‚æœ€å¤§æ± åŒ–é‡‡ç”¨<strong>paddingæ“ä½œ</strong>ï¼Œç§»åŠ¨çš„æ­¥é•¿ä¸º1ï¼Œæ¯”å¦‚13Ã—13çš„è¾“å…¥ç‰¹å¾å›¾ï¼Œä½¿ç”¨5Ã—5å¤§å°çš„æ± åŒ–æ ¸æ± åŒ–ï¼Œ<strong>padding=2</strong>ï¼Œå› æ­¤æ± åŒ–åçš„ç‰¹å¾å›¾ä»ç„¶æ˜¯13Ã—13å¤§å°ã€‚</p><p><strong>Neck</strong></p><p><strong>1.FPNç»“æ„</strong></p><p>å¯¹äºFPNçš„ç†è§£æ¥è‡ªäºhttps://blog.csdn.net/WZZ18191171661/article/details/79494534ï¼Œæˆ‘è§‰å¾—è®²çš„å¾ˆå¥½</p><p><img src="http://dingdm.online/fpn.png" alt=""></p><p>è¯†åˆ«ä¸åŒå¤§å°çš„ç‰©ä½“æ˜¯è®¡ç®—æœºè§†è§‰ä¸­çš„ä¸€ä¸ªåŸºæœ¬æŒ‘æˆ˜ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯æ„é€ å¤šå°ºåº¦é‡‘å­—å¡”ã€‚å¦‚ä¸Šå›¾aæ‰€ç¤ºï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹å¾å›¾åƒé‡‘å­—å¡”ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯å…ˆå¯¹åŸå§‹å›¾åƒæ„é€ å›¾åƒé‡‘å­—å¡”ï¼Œç„¶ååœ¨å›¾åƒé‡‘å­—å¡”çš„æ¯ä¸€å±‚æå‡ºä¸åŒçš„ç‰¹å¾ï¼Œç„¶åè¿›è¡Œç›¸åº”çš„é¢„æµ‹ï¼ˆBBçš„ä½ç½®ï¼‰ã€‚è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯è®¡ç®—é‡å¤§ï¼Œéœ€è¦å¤§é‡çš„å†…å­˜ï¼›ä¼˜ç‚¹æ˜¯å¯ä»¥è·å¾—è¾ƒå¥½çš„æ£€æµ‹ç²¾åº¦ã€‚å®ƒé€šå¸¸ä¼šæˆä¸ºæ•´ä¸ªç®—æ³•çš„æ€§èƒ½ç“¶é¢ˆï¼Œç”±äºè¿™äº›åŸå› ï¼Œå½“å‰å¾ˆå°‘ä½¿ç”¨è¿™ç§ç®—æ³•ã€‚å¦‚ä¸Šå›¾bæ‰€ç¤ºï¼Œè¿™æ˜¯ä¸€ç§æ”¹è¿›çš„æ€è·¯ï¼Œå­¦è€…ä»¬å‘ç°æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å·ç§¯ç½‘ç»œæœ¬èº«çš„ç‰¹æ€§ï¼Œå³å¯¹åŸå§‹å›¾åƒè¿›è¡Œå·ç§¯å’Œæ± åŒ–æ“ä½œï¼Œé€šè¿‡è¿™ç§æ“ä½œæˆ‘ä»¬å¯ä»¥è·å¾—ä¸åŒå°ºå¯¸çš„feature mapï¼Œè¿™æ ·å…¶å®å°±ç±»ä¼¼äºåœ¨å›¾åƒçš„ç‰¹å¾ç©ºé—´ä¸­æ„é€ é‡‘å­—å¡”ã€‚å®éªŒè¡¨æ˜ï¼Œæµ…å±‚çš„ç½‘ç»œæ›´å…³æ³¨äºç»†èŠ‚ä¿¡æ¯ï¼Œé«˜å±‚çš„ç½‘ç»œæ›´å…³æ³¨äºè¯­ä¹‰ä¿¡æ¯ï¼Œè€Œé«˜å±‚çš„è¯­ä¹‰ä¿¡æ¯èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å‡†ç¡®çš„æ£€æµ‹å‡ºç›®æ ‡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æœ€åä¸€ä¸ªå·ç§¯å±‚ä¸Šçš„feature mapæ¥è¿›è¡Œé¢„æµ‹ã€‚è¿™ç§æ–¹æ³•å­˜åœ¨äºå¤§å¤šæ•°æ·±åº¦ç½‘ç»œä¸­ï¼Œæ¯”å¦‚VGGã€ResNetã€Inceptionï¼Œå®ƒä»¬éƒ½æ˜¯åˆ©ç”¨æ·±åº¦ç½‘ç»œçš„æœ€åä¸€å±‚ç‰¹å¾æ¥è¿›è¡Œåˆ†ç±»ã€‚è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯é€Ÿåº¦å¿«ã€éœ€è¦å†…å­˜å°‘ã€‚å®ƒçš„ç¼ºç‚¹æ˜¯æˆ‘ä»¬ä»…ä»…å…³æ³¨æ·±å±‚ç½‘ç»œä¸­æœ€åä¸€å±‚çš„ç‰¹å¾ï¼Œå´å¿½ç•¥äº†å…¶å®ƒå±‚çš„ç‰¹å¾ï¼Œä½†æ˜¯ç»†èŠ‚ä¿¡æ¯å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæå‡æ£€æµ‹çš„ç²¾åº¦ã€‚å› æ­¤æœ‰äº†å›¾cæ‰€ç¤ºçš„æ¶æ„ï¼Œå®ƒçš„è®¾è®¡æ€æƒ³å°±æ˜¯åŒæ—¶åˆ©ç”¨ä½å±‚ç‰¹å¾å’Œé«˜å±‚ç‰¹å¾ï¼Œåˆ†åˆ«åœ¨ä¸åŒçš„å±‚åŒæ—¶è¿›è¡Œé¢„æµ‹ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘çš„ä¸€å¹…å›¾åƒä¸­å¯èƒ½å…·æœ‰å¤šä¸ªä¸åŒå¤§å°çš„ç›®æ ‡ï¼ŒåŒºåˆ†ä¸åŒçš„ç›®æ ‡å¯èƒ½éœ€è¦ä¸åŒçš„ç‰¹å¾ï¼Œå¯¹äºç®€å•çš„ç›®æ ‡æˆ‘ä»¬ä»…ä»…éœ€è¦æµ…å±‚çš„ç‰¹å¾å°±å¯ä»¥æ£€æµ‹åˆ°å®ƒï¼Œå¯¹äºå¤æ‚çš„ç›®æ ‡æˆ‘ä»¬å°±éœ€è¦åˆ©ç”¨å¤æ‚çš„ç‰¹å¾æ¥æ£€æµ‹å®ƒã€‚æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯é¦–å…ˆåœ¨åŸå§‹å›¾åƒä¸Šé¢è¿›è¡Œæ·±åº¦å·ç§¯ï¼Œç„¶ååˆ†åˆ«åœ¨ä¸åŒçš„ç‰¹å¾å±‚ä¸Šé¢è¿›è¡Œé¢„æµ‹ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯åœ¨ä¸åŒçš„å±‚ä¸Šé¢è¾“å‡ºå¯¹åº”çš„ç›®æ ‡ï¼Œä¸éœ€è¦ç»è¿‡æ‰€æœ‰çš„å±‚æ‰è¾“å‡ºå¯¹åº”çš„ç›®æ ‡ï¼ˆå³å¯¹äºæœ‰äº›ç›®æ ‡æ¥è¯´ï¼Œä¸éœ€è¦è¿›è¡Œå¤šä½™çš„å‰å‘æ“ä½œï¼‰ï¼Œè¿™æ ·å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯¹ç½‘ç»œè¿›è¡ŒåŠ é€Ÿæ“ä½œï¼ŒåŒæ—¶å¯ä»¥æé«˜ç®—æ³•çš„æ£€æµ‹æ€§èƒ½ã€‚å®ƒçš„ç¼ºç‚¹æ˜¯è·å¾—çš„ç‰¹å¾ä¸é²æ£’ï¼Œéƒ½æ˜¯ä¸€äº›å¼±ç‰¹å¾ï¼ˆå› ä¸ºå¾ˆå¤šçš„ç‰¹å¾éƒ½æ˜¯ä»è¾ƒæµ…çš„å±‚è·å¾—çš„ï¼‰ã€‚è®²äº†è¿™ä¹ˆå¤šç»ˆäºè½®åˆ°æˆ‘ä»¬çš„FPNå•¦ï¼Œå®ƒçš„æ¶æ„å¦‚å›¾dæ‰€ç¤ºï¼Œæ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼Œé¦–å…ˆæˆ‘ä»¬åœ¨è¾“å…¥çš„å›¾åƒä¸Šè¿›è¡Œæ·±åº¦å·ç§¯ï¼Œç„¶åå¯¹Layer2ä¸Šé¢çš„ç‰¹å¾è¿›è¡Œé™ç»´æ“ä½œï¼ˆå³æ·»åŠ ä¸€å±‚1x1çš„å·ç§¯å±‚ï¼‰ï¼Œå¯¹Layer4ä¸Šé¢çš„ç‰¹å¾å°±è¡Œä¸Šé‡‡æ ·æ“ä½œï¼Œä½¿å¾—å®ƒä»¬å…·æœ‰ç›¸åº”çš„å°ºå¯¸ï¼Œç„¶åå¯¹å¤„ç†åçš„Layer2å’Œå¤„ç†åçš„Layer4æ‰§è¡ŒåŠ æ³•æ“ä½œï¼ˆå¯¹åº”å…ƒç´ ç›¸åŠ ï¼‰ï¼Œå°†è·å¾—çš„ç»“æœè¾“å…¥åˆ°Layer5ä¸­å»ã€‚å…¶èƒŒåçš„æ€è·¯æ˜¯ä¸ºäº†è·å¾—ä¸€ä¸ªå¼ºè¯­ä¹‰ä¿¡æ¯ï¼Œè¿™æ ·å¯ä»¥æé«˜æ£€æµ‹æ€§èƒ½ã€‚è®¤çœŸçš„ä½ å¯èƒ½è§‚å¯Ÿåˆ°äº†ï¼Œè¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨äº†æ›´æ·±çš„å±‚æ¥æ„é€ ç‰¹å¾é‡‘å­—å¡”ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†ä½¿ç”¨æ›´åŠ é²æ£’çš„ä¿¡æ¯ï¼›é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬å°†å¤„ç†è¿‡çš„ä½å±‚ç‰¹å¾å’Œå¤„ç†è¿‡çš„é«˜å±‚ç‰¹å¾è¿›è¡Œç´¯åŠ ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯å› ä¸ºä½å±‚ç‰¹å¾å¯ä»¥æä¾›æ›´åŠ å‡†ç¡®çš„ä½ç½®ä¿¡æ¯ï¼Œè€Œå¤šæ¬¡çš„é™é‡‡æ ·å’Œä¸Šé‡‡æ ·æ“ä½œä½¿å¾—æ·±å±‚ç½‘ç»œçš„å®šä½ä¿¡æ¯å­˜åœ¨è¯¯å·®ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶ç»“åˆå…¶èµ·æ¥ä½¿ç”¨ï¼Œè¿™æ ·æˆ‘ä»¬å°±æ„å»ºäº†ä¸€ä¸ªæ›´æ·±çš„ç‰¹å¾é‡‘å­—å¡”ï¼Œèåˆäº†å¤šå±‚ç‰¹å¾ä¿¡æ¯ï¼Œå¹¶åœ¨ä¸åŒçš„ç‰¹å¾è¿›è¡Œè¾“å‡ºã€‚è¿™å°±æ˜¯ä¸Šå›¾çš„è¯¦ç»†è§£é‡Šã€‚</p><p><strong>2.PANç»“æ„</strong></p><p>è§ä»¥åçš„åˆ†å‰²ç®—æ³•è¯¦è§£ã€‚</p><p><strong>LOSS</strong></p><p><strong>1.IOUç»“æ„</strong></p><p><img src="http://dingdm.online/IOU.png" alt=""></p><p>è®¡ç®—é¢„æµ‹æ¡†å’Œå®é™…æ¡†çš„äº¤é›†ï¼Œå­˜åœ¨æ— äº¤é›†æˆ–äº¤é›†ç›¸åŒçš„æƒ…å†µã€‚</p><p><strong>2.GIOU_Loss</strong></p><p><img src="http://dingdm.online/GIOU.png" alt=""></p><p>ä½¿ç”¨å·®é›†çš„æ–¹å¼è®¡ç®—ï¼Œå­˜åœ¨å·®é›†ç›¸åŒæ—¶é€€åŒ–ä¸ºIOUã€‚</p><p><strong>3.DIOU_Loss</strong></p><p><img src="http://dingdm.online/DIOU.png" alt=""></p><p>DIOU_Lossè€ƒè™‘äº†<strong>é‡å é¢ç§¯</strong>å’Œ<strong>ä¸­å¿ƒç‚¹è·ç¦»</strong>ï¼Œå½“ç›®æ ‡æ¡†åŒ…è£¹é¢„æµ‹æ¡†çš„æ—¶å€™ï¼Œç›´æ¥åº¦é‡2ä¸ªæ¡†çš„è·ç¦»ï¼Œå› æ­¤DIOU_Lossæ”¶æ•›çš„æ›´å¿«ã€‚å­˜åœ¨è·ç¦»ç›¸åŒçš„æƒ…å†µã€‚</p><p><strong>4.CIOU_Loss</strong></p><p><img src="http://dingdm.online/CIOU.png" alt=""></p><p>CIOU_Losså°±å°†ç›®æ ‡æ¡†å›å½’å‡½æ•°åº”è¯¥è€ƒè™‘ä¸‰ä¸ªé‡è¦å‡ ä½•å› ç´ ï¼šé‡å é¢ç§¯ã€ä¸­å¿ƒç‚¹è·ç¦»ï¼Œé•¿å®½æ¯”å…¨éƒ½è€ƒè™‘è¿›å»äº†</p><h5 id="pythonæ¨¡å—">pythonæ¨¡å—</h5><h6 id="argparse">argparse</h6><p>argarseç”¨äºé€šè¿‡å‘½ä»¤è¡Œå‘ç¨‹åºä¸­ä¼ å‚è¿è¡Œ</p><pre class=" language-language-python"><code class="language-language-python">import argparseparser = argparse.ArgumentParser()#typeæ˜¯è¦ä¼ å…¥çš„å‚æ•°çš„æ•°æ®ç±»å‹  helpæ˜¯è¯¥å‚æ•°çš„æç¤ºä¿¡æ¯parser.add_argument('integers', type=str, help='ä¼ å…¥çš„æ•°å­—')args = parser.parse_args()#è·å¾—ä¼ å…¥çš„å‚æ•°print(args)</code></pre><p>yolov5ä¸­ä½¿ç”¨è¯¥æ¨¡å—è·å–ç”¨æˆ·ä¼ å…¥çš„å‚æ•°ä¿¡æ¯ï¼Œå¦‚æœè¯¥ç”¨æˆ·æœªä¼ å…¥è¯¥å‚æ•°ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼</p><pre class=" language-language-python"><code class="language-language-python">    parser = argparse.ArgumentParser()    parser.add_argument('--weights', type=str, default='yolov5s.pt', help='initial weights path')    parser.add_argument('--cfg', type=str, default='', help='model.yaml path')    parser.add_argument('--data', type=str, default='data/coco128.yaml', help='dataset.yaml path')    parser.add_argument('--hyp', type=str, default='data/hyps/hyp.scratch.yaml', help='hyperparameters path')    parser.add_argument('--epochs', type=int, default=300)    parser.add_argument('--batch-size', type=int, default=16, help='total batch size for all GPUs')    parser.add_argument('--imgsz', '--img', '--img-size', type=int, default=640, help='train, val image size (pixels)')    parser.add_argument('--rect', action='store_true', help='rectangular training')    parser.add_argument('--resume', nargs='?', const=True, default=False, help='resume most recent training')    parser.add_argument('--nosave', action='store_true', help='only save final checkpoint')    parser.add_argument('--noval', action='store_true', help='only validate final epoch')    parser.add_argument('--noautoanchor', action='store_true', help='disable autoanchor check')    parser.add_argument('--evolve', type=int, nargs='?', const=300, help='evolve hyperparameters for x generations')    parser.add_argument('--bucket', type=str, default='', help='gsutil bucket')    parser.add_argument('--cache', type=str, nargs='?', const='ram', help='--cache images in "ram" (default) or "disk"')    parser.add_argument('--image-weights', action='store_true', help='use weighted image selection for training')    parser.add_argument('--device', default='', help='cuda device, i.e. 0 or 0,1,2,3 or cpu')    parser.add_argument('--multi-scale', action='store_true', help='vary img-size +/- 50%%')    parser.add_argument('--single-cls', action='store_true', help='train multi-class data as single-class')    parser.add_argument('--adam', action='store_true', help='use torch.optim.Adam() optimizer')    parser.add_argument('--sync-bn', action='store_true', help='use SyncBatchNorm, only available in DDP mode')    parser.add_argument('--workers', type=int, default=8, help='maximum number of dataloader workers')    parser.add_argument('--project', default='runs/train', help='save to project/name')    parser.add_argument('--entity', default=None, help='W&B entity')    parser.add_argument('--name', default='exp', help='save to project/name')    parser.add_argument('--exist-ok', action='store_true', help='existing project/name ok, do not increment')    parser.add_argument('--quad', action='store_true', help='quad dataloader')    parser.add_argument('--linear-lr', action='store_true', help='linear LR')    parser.add_argument('--label-smoothing', type=float, default=0.0, help='Label smoothing epsilon')    parser.add_argument('--upload_dataset', action='store_true', help='Upload dataset as W&B artifact table')    parser.add_argument('--bbox_interval', type=int, default=-1, help='Set bounding-box image logging interval for W&B')    parser.add_argument('--save_period', type=int, default=-1, help='Log model after every "save_period" epoch')    parser.add_argument('--artifact_alias', type=str, default="latest", help='version of dataset artifact to be used')    parser.add_argument('--local_rank', type=int, default=-1, help='DDP parameter, do not modify')    parser.add_argument('--freeze', type=int, default=0, help='Number of layers to freeze. backbone=10, all=24')    parser.add_argument('--patience', type=int, default=100, help='EarlyStopping patience (epochs without improvement)')    opt = parser.parse_known_args()[0] if known else parser.parse_args()</code></pre><p>å‚æ•°è¯´æ˜</p><pre class=" language-language-python"><code class="language-language-python">weightsï¼šæƒé‡æ–‡ä»¶è·¯å¾„cfgï¼šå­˜å‚¨æ¨¡å‹ç»“æ„çš„é…ç½®æ–‡ä»¶dataï¼šå­˜å‚¨è®­ç»ƒã€æµ‹è¯•æ•°æ®çš„æ–‡ä»¶hyp:è¶…å‚æ•°ï¼ŒåŒ…æ‹¬lrã€weight_decayã€momentumå’Œå›¾åƒå¤„ç†çš„å‚æ•°ç­‰epochsï¼šæŒ‡çš„å°±æ˜¯è®­ç»ƒè¿‡ç¨‹ä¸­æ•´ä¸ªæ•°æ®é›†å°†è¢«è¿­ä»£å¤šå°‘æ¬¡batch-sizeï¼šä¸€æ¬¡çœ‹å®Œå¤šå°‘å¼ å›¾ç‰‡æ‰è¿›è¡Œæƒé‡æ›´æ–°ï¼Œæ¢¯åº¦ä¸‹é™çš„mini-batchimg-sizeï¼šè¾“å…¥å›¾ç‰‡å®½é«˜rectï¼šè¿›è¡ŒçŸ©å½¢è®­ç»ƒresumeï¼šæ¢å¤æœ€è¿‘ä¿å­˜çš„æ¨¡å‹å¼€å§‹è®­ç»ƒnosaveï¼šä»…ä¿å­˜æœ€ç»ˆcheckpointnovalï¼šæ˜¯å¦åªéªŒè¯æœ€åçš„epochnoautoanchorï¼šç”¨äºè®¾ç½®åœ¨ç›®æ ‡æ£€æµ‹ä»»åŠ¡ä¸­æ˜¯å¦é‡‡ç”¨é”šç‚¹ / é”šæ¡†evolveï¼šè¿›åŒ–è¶…å‚æ•°ï¼Œå¯»æ‰¾æœ€ä¼˜è¶…å‚æ•°çš„æ–¹å¼ï¼Œæ–¹æ³•æ˜¯åˆ©ç”¨é—ä¼ ç®—æ³•è‡ªåŠ¨æœç´¢è¶…å‚æ•°ã€‚bucketï¼šgsutil bucketcache-imagesï¼šç¼“å­˜å›¾åƒä»¥åŠ å¿«è®­ç»ƒé€Ÿåº¦image-weightsï¼šç”Ÿæ•ˆåå¯¹äºé‚£äº›è®­ç»ƒä¸å¥½çš„å›¾ç‰‡ï¼Œä¼šåœ¨ä¸‹ä¸€è½®ä¸­å¢åŠ ä¸€äº›æƒé‡ã€‚deviceï¼šcuda device, i.e. 0 or 0,1,2,3 or cpuï¼Œè®­ç»ƒè®¾å¤‡multi-scaleï¼šå¤šå°ºåº¦è®­ç»ƒï¼Œimg-size +/- 50%single-clsï¼šå•ç±»åˆ«çš„è®­ç»ƒé›†adamï¼šä½¿ç”¨adamä¼˜åŒ–sync-bnï¼šDDPæ¨¡å¼ä¸‹æ˜¯å¦è¿›è¡Œå¤š GPU è¿›è¡Œåˆ†å¸ƒå¼è®­ç»ƒã€‚workersï¼šçº¿ç¨‹æ•°é‡projectï¼šä¿å­˜è®­ç»ƒç»“æœçš„è·¯å¾„entityï¼šwandb åº“å¯¹åº”çš„ä¸œè¥¿nameï¼šè®­ç»ƒç»“æœçš„æ–‡ä»¶å¤¹åç§°exist-okï¼šå½“ä¸æ¿€æ´»æ—¶ä¸º falseï¼Œåœ¨æ–°å‘½åçš„æ–‡ä»¶å¤¹ä¸‹ä¿å­˜ã€‚å½“æ¿€æ´»æ—¶ä¸º trueï¼Œåœ¨ name æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹ä¿å­˜ï¼Œæºç ä¸­ä¿å­˜åœ¨ exp æ–‡ä»¶å¤¹ä¸‹quadï¼šç”Ÿæ•ˆåå¯ä»¥åœ¨æ¯”å‰é¢ â€œ--img-sizeâ€ éƒ¨åˆ†è®¾ç½®çš„è®­ç»ƒæµ‹è¯•æ•°æ®é›†æ›´å¤§çš„æ•°æ®é›†ä¸Šè®­ç»ƒã€‚linear-lrï¼šç”¨äºå¯¹å­¦ä¹ é€Ÿç‡è¿›è¡Œè°ƒæ•´label-smoothingï¼šå¯¹æ ‡ç­¾è¿›è¡Œå¹³æ»‘å¤„ç†upload_datasetï¼šwandb åº“å¯¹åº”çš„å‚æ•°bbox_intervalï¼šwandb åº“å¯¹åº”çš„å‚æ•°save_periodï¼šè®°å½•è®­ç»ƒæ—¥å¿—ä¿¡æ¯artifact_aliasï¼šæ•°æ®é›†artifactç‰ˆæœ¬local_rankï¼šè®¾å¤‡ç´¢å¼•freezeï¼šæ˜¯å¦å†»ç»“åŠ å¿«è®­ç»ƒé€Ÿåº¦patienceï¼šè®­ç»ƒäº†å¤šå°‘ä¸ªepochï¼Œå¦‚æœæ¨¡å‹æ•ˆæœæœªæå‡ï¼Œå°±è®©æ¨¡å‹æå‰åœæ­¢è®­ç»ƒ</code></pre><h6 id="Wandb">Wandb</h6><p>ä¸»è¦åŠŸèƒ½</p><ul><li>ä¿å­˜è®­ç»ƒè¿è¡Œä¸­ä½¿ç”¨çš„è¶…å‚æ•°</li><li>æœç´¢ã€æ¯”è¾ƒå’Œå¯è§†åŒ–è®­ç»ƒçš„è¿è¡Œ</li><li>åœ¨è¿è¡Œçš„åŒæ—¶åˆ†æç³»ç»Ÿç¡¬ä»¶çš„æƒ…å†µå¦‚ï¼šCPUå’ŒGPUä½¿ç”¨ç‡</li><li>åœ¨å›¢é˜Ÿä¸­åˆ†äº«è®­ç»ƒæ•°æ®</li><li>æ°¸è¿œä¿å­˜å¯ç”¨çš„å®éªŒè®°å½•</li></ul><pre class=" language-language-python"><code class="language-language-python"># æ£€æŸ¥å½“å‰æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨è¿”å›æ–‡ä»¶è·¯å¾„ï¼Œå¦‚æœæ˜¯ç½‘ç»œæ–‡ä»¶åˆ™è¿›è¡Œä¸‹è½½ï¼Œå¦åˆ™æŠ¥é”™è¯¥æ–‡ä»¶ä¸å­˜åœ¨def check_file(file, suffix=''):    # Search/download file (if necessary) and return path    check_suffix(file, suffix)  # optional    file = str(file)  # convert to str()    if Path(file).is_file() or file == '':  # exists        return file    elif file.startswith(('http:/', 'https:/')):  # download        url = str(Path(file)).replace(':/', '://')  # Pathlib turns :// -> :/        file = Path(urllib.parse.unquote(file)).name.split('?')[0]  # '%2F' to '/', split https://url.com/file.txt?auth        print(f'Downloading {url} to {file}...')        torch.hub.download_url_to_file(url, file)        assert Path(file).exists() and Path(file).stat().st_size > 0, f'File download failed: {url}'  # check        return file    else:  # search        files = glob.glob('./**/' + file, recursive=True)  # find file        assert len(files), f'File not found: {file}'  # assert file was found        assert len(files) == 1, f"Multiple files match '{file}', specify exact path: {files}"  # assert unique        return files[0]  # return file</code></pre><pre class=" language-language-python"><code class="language-language-python">def process_wandb_config_ddp_mode(opt):    # è·å–å‚æ•°ä¸­çš„dataè®­ç»ƒæ•°æ®çš„æ–‡ä»¶ä½ç½®å¹¶è¯»å–    with open(check_file(opt.data), errors='ignore') as f:        data_dict = yaml.safe_load(f)  # data dict    train_dir, val_dir = None, None    # åˆ¤æ–­å½“å‰çš„æ•°æ®å­˜æ”¾ä½ç½®æ˜¯å¦ä¸ºwandbçš„äº‘ç«¯æ–‡ä»¶ï¼Œå¦‚æœä¸ºäº‘ç«¯æ–‡ä»¶åˆ™è¿›è¡Œä¸‹è½½å¹¶è¿”å›æ•°æ®æ‰€åœ¨è·¯å¾„    if isinstance(data_dict['train'], str) and data_dict['train'].startswith(WANDB_ARTIFACT_PREFIX):        api = wandb.Api()        train_artifact = api.artifact(remove_prefix(data_dict['train']) + ':' + opt.artifact_alias)        train_dir = train_artifact.download()        train_path = Path(train_dir) / 'data/images/'        data_dict['train'] = str(train_path)    if isinstance(data_dict['val'], str) and data_dict['val'].startswith(WANDB_ARTIFACT_PREFIX):        api = wandb.Api()        val_artifact = api.artifact(remove_prefix(data_dict['val']) + ':' + opt.artifact_alias)        val_dir = val_artifact.download()        val_path = Path(val_dir) / 'data/images/'        data_dict['val'] = str(val_path)    if train_dir or val_dir:        ddp_data_path = str(Path(val_dir) / 'wandb_local_data.yaml')        with open(ddp_data_path, 'w') as f:            yaml.safe_dump(data_dict, f)        opt.data = ddp_data_path</code></pre><pre class=" language-language-python"><code class="language-language-python">def check_wandb_resume(opt):    # æ£€æŸ¥optä¸­çš„å‚æ•°dataè·¯å¾„æ˜¯å¦ä¸ºäº‘ç«¯è·¯å¾„    process_wandb_config_ddp_mode(opt) if RANK not in [-1, 0] else None    # isinstance ç±»å‹åˆ¤æ–­    if isinstance(opt.resume, str):        if opt.resume.startswith(WANDB_ARTIFACT_PREFIX):            if RANK not in [-1, 0]:  # For resuming DDP runs                entity, project, run_id, model_artifact_name = get_run_info(opt.resume)                api = wandb.Api()                artifact = api.artifact(entity + '/' + project + '/' + model_artifact_name + ':latest')                modeldir = artifact.download()                opt.weights = str(Path(modeldir) / "last.pt")            return True    return None</code></pre><h6 id="EMA">EMA</h6><p>æŒ‡æ•°ç§»åŠ¨å¹³å‡ï¼ˆExponential Moving Averageï¼‰ä¹Ÿå«æƒé‡ç§»åŠ¨å¹³å‡ï¼ˆWeighted Moving Averageï¼‰ï¼Œæ˜¯ä¸€ç§ç»™äºˆè¿‘æœŸæ•°æ®æ›´é«˜æƒé‡çš„å¹³å‡æ–¹æ³•ã€‚</p><p>åœ¨æ·±åº¦å­¦ä¹ çš„ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼ŒÎ¸tæ˜¯tæ—¶åˆ»çš„æ¨¡å‹æƒé‡weightsï¼Œvtæ˜¯tæ—¶åˆ»çš„å½±å­æƒé‡ï¼ˆshadow weightsï¼‰ã€‚åœ¨æ¢¯åº¦ä¸‹é™çš„è¿‡ç¨‹ä¸­ï¼Œä¼šä¸€ç›´ç»´æŠ¤ç€è¿™ä¸ªå½±å­æƒé‡ï¼Œä½†æ˜¯è¿™ä¸ªå½±å­æƒé‡å¹¶ä¸ä¼šå‚ä¸è®­ç»ƒã€‚åŸºæœ¬çš„å‡è®¾æ˜¯ï¼Œæ¨¡å‹æƒé‡åœ¨æœ€åçš„næ­¥å†…ï¼Œä¼šåœ¨å®é™…çš„æœ€ä¼˜ç‚¹å¤„æŠ–åŠ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å–æœ€ånæ­¥çš„å¹³å‡ï¼Œèƒ½ä½¿å¾—æ¨¡å‹æ›´åŠ çš„é²æ£’ã€‚</p><h6 id="ç„ç‚¹">ç„ç‚¹</h6><pre class=" language-language-python"><code class="language-language-python">def check_anchors(dataset, model, thr=4.0, imgsz=640):    # Check anchor fit to data, recompute if necessary    prefix = colorstr('autoanchor: ')    print(f'\n{prefix}Analyzing anchors... ', end='')    m = model.module.model[-1] if hasattr(model, 'module') else model.model[-1]  # Detect()    shapes = imgsz * dataset.shapes / dataset.shapes.max(1, keepdims=True)    scale = np.random.uniform(0.9, 1.1, size=(shapes.shape[0], 1))  # augment scale    wh = torch.tensor(np.concatenate([l[:, 3:5] * s for s, l in zip(shapes * scale, dataset.labels)])).float()  # wh    def metric(k):  # compute metric        r = wh[:, None] / k[None]        x = torch.min(r, 1. / r).min(2)[0]  # ratio metric        best = x.max(1)[0]  # best_x        aat = (x > 1. / thr).float().sum(1).mean()  # anchors above threshold        bpr = (best > 1. / thr).float().mean()  # best possible recall        return bpr, aat    # h/h_a, w/w_aéƒ½è¦åœ¨(1/hyp['anchor_t'], hyp['anchor_t'])    anchors = m.anchor_grid.clone().cpu().view(-1, 2)  # current anchors    bpr, aat = metric(anchors)    print(f'anchors/target = {aat:.2f}, Best Possible Recall (BPR) = {bpr:.4f}', end='')    # å¦‚æœæ ‡ç­¾æ¡†æ»¡è¶³ä¸Šé¢æ¡ä»¶çš„æ•°é‡å°äºæ€»æ•°çš„98%ï¼Œåˆ™æ ¹æ®k-meanç®—æ³•èšç±»æ–°çš„é”šç‚¹anchor    if bpr < 0.98:  # threshold to recompute        print('. Attempting to improve anchors, please wait...')        na = m.anchor_grid.numel() // 2  # number of anchors        try:            anchors = kmean_anchors(dataset, n=na, img_size=imgsz, thr=thr, gen=1000, verbose=False)        except Exception as e:            print(f'{prefix}ERROR: {e}')        new_bpr = metric(anchors)[0]        if new_bpr > bpr:  # replace anchors            anchors = torch.tensor(anchors, device=m.anchors.device).type_as(m.anchors)            m.anchor_grid[:] = anchors.clone().view_as(m.anchor_grid)  # for inference            m.anchors[:] = anchors.clone().view_as(m.anchors) / m.stride.to(m.anchors.device).view(-1, 1, 1)  # loss            check_anchor_order(m)            print(f'{prefix}New anchors saved to model. Update model *.yaml to use these anchors in the future.')        else:            print(f'{prefix}Original anchors better than new anchors. Proceeding with original anchors.')    print('')  # newline</code></pre><h6 id="k-meanç®—æ³•"><strong>k-meanç®—æ³•</strong></h6><p>æ‰€ä»¥ K-means çš„ç®—æ³•æ­¥éª¤ä¸ºï¼š</p><ol><li>é€‰æ‹©åˆå§‹åŒ–çš„ k ä¸ªæ ·æœ¬ä½œä¸ºåˆå§‹èšç±»ä¸­å¿ƒ a = a1,a2 â€¦ ak</li><li>é’ˆå¯¹æ•°æ®é›†ä¸­æ¯ä¸ªæ ·æœ¬xiè®¡ç®—å®ƒåˆ° k ä¸ªèšç±»ä¸­å¿ƒçš„è·ç¦»å¹¶å°†å…¶åˆ†åˆ°è·ç¦»æœ€å°çš„èšç±»ä¸­å¿ƒæ‰€å¯¹åº”çš„ç±»ä¸­ï¼›</li><li>é’ˆå¯¹æ¯ä¸ªç±»åˆ« ï¼Œé‡æ–°è®¡ç®—å®ƒçš„èšç±»ä¸­å¿ƒï¼ˆå³å±äºè¯¥ç±»çš„æ‰€æœ‰æ ·æœ¬çš„è´¨å¿ƒï¼‰ï¼›</li><li>é‡å¤ä¸Šé¢ 2 3 ä¸¤æ­¥æ“ä½œï¼Œç›´åˆ°è¾¾åˆ°æŸä¸ªä¸­æ­¢æ¡ä»¶ï¼ˆè¿­ä»£æ¬¡æ•°ã€æœ€å°è¯¯å·®å˜åŒ–ç­‰ï¼‰ã€‚</li></ol><pre class=" language-language-python"><code class="language-language-python">def kmean_anchors(dataset='./data/coco128.yaml', n=9, img_size=640, thr=4.0, gen=1000, verbose=True):    """ Creates kmeans-evolved anchors from training dataset        Arguments:            dataset: path to data.yaml, or a loaded dataset            n: number of anchors            img_size: image size used for training            thr: anchor-label wh ratio threshold hyperparameter hyp['anchor_t'] used for training, default=4.0            gen: generations to evolve anchors using genetic algorithm            verbose: print all results        Return:            k: kmeans evolved anchors        Usage:            from utils.autoanchor import *; _ = kmean_anchors()    """    from scipy.cluster.vq import kmeans    thr = 1. / thr    prefix = colorstr('autoanchor: ')    def metric(k, wh):  # compute metrics        r = wh[:, None] / k[None]        x = torch.min(r, 1. / r).min(2)[0]  # ratio metric        # x = wh_iou(wh, torch.tensor(k))  # iou metric        return x, x.max(1)[0]  # x, best_x    def anchor_fitness(k):  # mutation fitness        _, best = metric(torch.tensor(k, dtype=torch.float32), wh)        return (best * (best > thr).float()).mean()  # fitness    def print_results(k):        k = k[np.argsort(k.prod(1))]  # sort small to large        x, best = metric(k, wh0)        bpr, aat = (best > thr).float().mean(), (x > thr).float().mean() * n  # best possible recall, anch > thr        print(f'{prefix}thr={thr:.2f}: {bpr:.4f} best possible recall, {aat:.2f} anchors past thr')        print(f'{prefix}n={n}, img_size={img_size}, metric_all={x.mean():.3f}/{best.mean():.3f}-mean/best, '              f'past_thr={x[x > thr].mean():.3f}-mean: ', end='')        for i, x in enumerate(k):            print('%i,%i' % (round(x[0]), round(x[1])), end=',  ' if i < len(k) - 1 else '\n')  # use in *.cfg        return k    if isinstance(dataset, str):  # *.yaml file        with open(dataset, errors='ignore') as f:            data_dict = yaml.safe_load(f)  # model dict        from utils.datasets import LoadImagesAndLabels        dataset = LoadImagesAndLabels(data_dict['train'], augment=True, rect=True)    # Get label wh    shapes = img_size * dataset.shapes / dataset.shapes.max(1, keepdims=True)    wh0 = np.concatenate([l[:, 3:5] * s for s, l in zip(shapes, dataset.labels)])  # wh    # Filter    i = (wh0 < 3.0).any(1).sum()    if i:        print(f'{prefix}WARNING: Extremely small objects found. {i} of {len(wh0)} labels are < 3 pixels in size.')    wh = wh0[(wh0 >= 2.0).any(1)]  # filter > 2 pixels    # wh = wh * (np.random.rand(wh.shape[0], 1) * 0.9 + 0.1)  # multiply by random scale 0-1    # Kmeans calculation    print(f'{prefix}Running kmeans for {n} anchors on {len(wh)} points...')    s = wh.std(0)  # sigmas for whitening    k, dist = kmeans(wh / s, n, iter=30)  # points, mean distance    assert len(k) == n, f'{prefix}ERROR: scipy.cluster.vq.kmeans requested {n} points but returned only {len(k)}'    k *= s    wh = torch.tensor(wh, dtype=torch.float32)  # filtered    wh0 = torch.tensor(wh0, dtype=torch.float32)  # unfiltered    k = print_results(k)    # Plot    # k, d = [None] * 20, [None] * 20    # for i in tqdm(range(1, 21)):    #     k[i-1], d[i-1] = kmeans(wh / s, i)  # points, mean distance    # fig, ax = plt.subplots(1, 2, figsize=(14, 7), tight_layout=True)    # ax = ax.ravel()    # ax[0].plot(np.arange(1, 21), np.array(d) ** 2, marker='.')    # fig, ax = plt.subplots(1, 2, figsize=(14, 7))  # plot wh    # ax[0].hist(wh[wh[:, 0]<100, 0],400)    # ax[1].hist(wh[wh[:, 1]<100, 1],400)    # fig.savefig('wh.png', dpi=200)    # Evolve    npr = np.random    f, sh, mp, s = anchor_fitness(k), k.shape, 0.9, 0.1  # fitness, generations, mutation prob, sigma    pbar = tqdm(range(gen), desc=f'{prefix}Evolving anchors with Genetic Algorithm:')  # progress bar    for _ in pbar:        v = np.ones(sh)        while (v == 1).all():  # mutate until a change occurs (prevent duplicates)            v = ((npr.random(sh) < mp) * random.random() * npr.randn(*sh) * s + 1).clip(0.3, 3.0)        kg = (k.copy() * v).clip(min=2.0)        fg = anchor_fitness(kg)        if fg > f:            f, k = fg, kg.copy()            pbar.desc = f'{prefix}Evolving anchors with Genetic Algorithm: fitness = {f:.4f}'            if verbose:                print_results(k)    return print_results(k)</code></pre><h6 id="warmup-é¢„çƒ­å­¦ä¹ ç‡"><strong>warmup é¢„çƒ­å­¦ä¹ ç‡</strong></h6><p>ç”±äºåˆšå¼€å§‹è®­ç»ƒæ—¶,æ¨¡å‹çš„æƒé‡(weights)æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œæ­¤æ—¶è‹¥é€‰æ‹©ä¸€ä¸ªè¾ƒå¤§çš„å­¦ä¹ ç‡,å¯èƒ½å¸¦æ¥æ¨¡å‹çš„ä¸ç¨³å®š(æŒ¯è¡)ï¼Œé€‰æ‹©Warmupé¢„çƒ­å­¦ä¹ ç‡çš„æ–¹å¼ï¼Œå¯ä»¥ä½¿å¾—å¼€å§‹è®­ç»ƒçš„å‡ ä¸ªepochesæˆ–è€…ä¸€äº›stepså†…å­¦ä¹ ç‡è¾ƒå°,åœ¨é¢„çƒ­çš„å°å­¦ä¹ ç‡ä¸‹ï¼Œæ¨¡å‹å¯ä»¥æ…¢æ…¢è¶‹äºç¨³å®š,ç­‰æ¨¡å‹ç›¸å¯¹ç¨³å®šåå†é€‰æ‹©é¢„å…ˆè®¾ç½®çš„å­¦ä¹ ç‡è¿›è¡Œè®­ç»ƒ,ä½¿å¾—æ¨¡å‹æ”¶æ•›é€Ÿåº¦å˜å¾—æ›´å¿«ï¼Œæ¨¡å‹æ•ˆæœæ›´ä½³ã€‚</p><pre class=" language-language-python"><code class="language-language-python">            # çƒ­èº«è®­ç»ƒ(å‰nwæ¬¡è¿­ä»£)            # åœ¨å‰nwæ¬¡è¿­ä»£ä¸­ï¼Œæ ¹æ®ä»¥ä¸‹æ–¹å¼é€‰å–accumulateå’Œå­¦ä¹ ç‡            if ni <= nw:                xi = [0, nw]  # x interp                # compute_loss.gr = np.interp(ni, xi, [0.0, 1.0])  # iou loss ratio (obj_loss = 1.0 or iou)                accumulate = max(1, np.interp(ni, xi, [1, nbs / batch_size]).round())                for j, x in enumerate(optimizer.param_groups):                    # bias lr falls from 0.1 to lr0, all other lrs rise from 0.0 to lr0                    x['lr'] = np.interp(ni, xi, [hyp['warmup_bias_lr'] if j == 2 else 0.0, x['initial_lr'] * lf(epoch)])                    if 'momentum' in x:                        x['momentum'] = np.interp(ni, xi, [hyp['warmup_momentum'], hyp['momentum']])</code></pre><h6 id="ä½™å¼¦é€€ç«"><strong>ä½™å¼¦é€€ç«</strong></h6><p>æ‰§è¡Œå®ŒTiä¸ªepochä¹‹åå°±ä¼šå¼€å§‹çƒ­é‡å¯ï¼ˆwarm restartï¼‰ï¼Œè€Œä¸‹æ ‡iå°±æ˜¯æŒ‡çš„ç¬¬å‡ æ¬¡restartï¼Œå…¶ä¸­é‡å¯å¹¶ä¸æ˜¯é‡å¤´å¼€å§‹ï¼Œè€Œæ˜¯é€šè¿‡å¢åŠ å­¦ä¹ ç‡æ¥æ¨¡æ‹Ÿï¼Œå¹¶ä¸”é‡å¯ä¹‹åä½¿ç”¨æ—§çš„xtä½œä¸ºåˆå§‹è§£ï¼Œè¿™é‡Œçš„xtå°±æ˜¯é€šè¿‡æ¢¯åº¦ä¸‹é™æ±‚è§£losså‡½æ•°çš„è§£ï¼Œä¹Ÿå°±æ˜¯ç¥ç»ç½‘ç»œä¸­çš„æƒé‡ï¼Œå› ä¸ºé‡å¯å°±æ˜¯ä¸ºäº†é€šè¿‡å¢å¤§å­¦ä¹ ç‡æ¥è·³è¿‡å±€éƒ¨æœ€ä¼˜ï¼Œæ‰€ä»¥éœ€è¦å°†xtç½®ä¸ºæ—§å€¼ã€‚</p><p><img src="https://dingdm.online/fire.png" alt=""></p><pre class=" language-language-python"><code class="language-language-python">def one_cycle(y1=0.0, y2=1.0, steps=100):    # lambda function for sinusoidal ramp from y1 to y2 https://arxiv.org/pdf/1812.01187.pdf    return lambda x: ((1 - math.cos(x * math.pi / steps)) / 2) * (y2 - y1) + y1</code></pre><h5 id="trainå‡½æ•°è§£æ">trainå‡½æ•°è§£æ</h5><h6 id="resume">resume</h6><pre class=" language-language-python"><code class="language-language-python">  # å‚æ•°ä¸­è®¾ç½®äº†resumeä¸”resumeä¸æ˜¯wandbäº‘ç«¯æ¨¡å‹ä¸”æœªè®¾ç½®è¶…å‚æ•°è¿›åŒ–  if opt.resume and not check_wandb_resume(opt) and not opt.evolve:        # è·å–è®­ç»ƒäº§ç”Ÿçš„lastæ¨¡å‹å¹¶æ›¿æ¢optå‚æ•°ä¸­çš„å‚æ•°        ckpt = opt.resume if isinstance(opt.resume, str) else get_latest_run()  # specified or most recent pat        assert os.path.isfile(ckpt), 'ERROR: --resume checkpoint does not exist'        with open(Path(ckpt).parent.parent / 'opt.yaml') as f:            opt = argparse.Namespace(**yaml.safe_load(f))  # replace        opt.cfg, opt.weights, opt.resume = '', ckpt, True  # reinstate        LOGGER.info(f'Resuming training from {ckpt}')    else:        # å¦åˆ™optå‚æ•°ç›´æ¥é‡‡é›†ç”¨æˆ·çš„è¾“å…¥ä¿¡æ¯å¾—åˆ°        opt.data, opt.cfg, opt.hyp = check_file(opt.data), check_yaml(opt.cfg), check_yaml(opt.hyp)  # check YAMLs        assert len(opt.cfg) or len(opt.weights), 'either --cfg or --weights must be specified'        if opt.evolve:            opt.project = 'runs/evolve'            opt.exist_ok, opt.resume = opt.resume, False  # pass resume to exist_ok and disable resume        opt.save_dir = str(increment_path(Path(opt.project) / opt.name, exist_ok=opt.exist_ok))</code></pre><h6 id="DDPæ¨¡å¼å•æœºå¤šå¡è®­ç»ƒ">DDPæ¨¡å¼å•æœºå¤šå¡è®­ç»ƒ</h6><pre class=" language-language-python"><code class="language-language-python">    device = select_device(opt.device, batch_size=opt.batch_size)    if LOCAL_RANK != -1:        from datetime import timedelta        assert torch.cuda.device_count() > LOCAL_RANK, 'insufficient CUDA devices for DDP command'        assert opt.batch_size % WORLD_SIZE == 0, '--batch-size must be multiple of CUDA device count'        assert not opt.image_weights, '--image-weights argument is not compatible with DDP training'        assert not opt.evolve, '--evolve argument is not compatible with DDP training'        torch.cuda.set_device(LOCAL_RANK)        device = torch.device('cuda', LOCAL_RANK)        dist.init_process_group(backend="nccl" if dist.is_nccl_available() else "gloo")</code></pre><h6 id="train">train</h6><pre class=" language-language-python"><code class="language-language-python">    # æ²¡æœ‰è®¾ç½®è¶…å‚æ•°ä¼˜åŒ–ï¼Œç›´æ¥è¿›è¡Œè®­ç»ƒ    if not opt.evolve:        train(opt.hyp, opt, device, callbacks)        if WORLD_SIZE > 1 and RANK == 0:            LOGGER.info('Destroying process group... ')            dist.destroy_process_group()    # Evolve hyperparameters (optional)    else:        # Hyperparameter evolution metadata (mutation scale 0-1, lower_limit, upper_limit)        meta = {'lr0': (1, 1e-5, 1e-1),  # initial learning rate (SGD=1E-2, Adam=1E-3)                'lrf': (1, 0.01, 1.0),  # final OneCycleLR learning rate (lr0 * lrf)                'momentum': (0.3, 0.6, 0.98),  # SGD momentum/Adam beta1                'weight_decay': (1, 0.0, 0.001),  # optimizer weight decay                'warmup_epochs': (1, 0.0, 5.0),  # warmup epochs (fractions ok)                'warmup_momentum': (1, 0.0, 0.95),  # warmup initial momentum                'warmup_bias_lr': (1, 0.0, 0.2),  # warmup initial bias lr                'box': (1, 0.02, 0.2),  # box loss gain                'cls': (1, 0.2, 4.0),  # cls loss gain                'cls_pw': (1, 0.5, 2.0),  # cls BCELoss positive_weight                'obj': (1, 0.2, 4.0),  # obj loss gain (scale with pixels)                'obj_pw': (1, 0.5, 2.0),  # obj BCELoss positive_weight                'iou_t': (0, 0.1, 0.7),  # IoU training threshold                'anchor_t': (1, 2.0, 8.0),  # anchor-multiple threshold                'anchors': (2, 2.0, 10.0),  # anchors per output grid (0 to ignore)                'fl_gamma': (0, 0.0, 2.0),  # focal loss gamma (efficientDet default gamma=1.5)                'hsv_h': (1, 0.0, 0.1),  # image HSV-Hue augmentation (fraction)                'hsv_s': (1, 0.0, 0.9),  # image HSV-Saturation augmentation (fraction)                'hsv_v': (1, 0.0, 0.9),  # image HSV-Value augmentation (fraction)                'degrees': (1, 0.0, 45.0),  # image rotation (+/- deg)                'translate': (1, 0.0, 0.9),  # image translation (+/- fraction)                'scale': (1, 0.0, 0.9),  # image scale (+/- gain)                'shear': (1, 0.0, 10.0),  # image shear (+/- deg)                'perspective': (0, 0.0, 0.001),  # image perspective (+/- fraction), range 0-0.001                'flipud': (1, 0.0, 1.0),  # image flip up-down (probability)                'fliplr': (0, 0.0, 1.0),  # image flip left-right (probability)                'mosaic': (1, 0.0, 1.0),  # image mixup (probability)                'mixup': (1, 0.0, 1.0),  # image mixup (probability)                'copy_paste': (1, 0.0, 1.0)}  # segment copy-paste (probability)        with open(opt.hyp) as f:            hyp = yaml.safe_load(f)  # load hyps dict            if 'anchors' not in hyp:  # anchors commented in hyp.yaml                hyp['anchors'] = 3        opt.noval, opt.nosave, save_dir = True, True, Path(opt.save_dir)  # only val/save final epoch        # ei = [isinstance(x, (int, float)) for x in hyp.values()]  # evolvable indices        evolve_yaml, evolve_csv = save_dir / 'hyp_evolve.yaml', save_dir / 'evolve.csv'        if opt.bucket:            os.system(f'gsutil cp gs://{opt.bucket}/evolve.csv {save_dir}')  # download evolve.csv if exists        for _ in range(opt.evolve):  # generations to evolve            if evolve_csv.exists():  # if evolve.csv exists: select best hyps and mutate                # Select parent(s)                parent = 'single'  # parent selection method: 'single' or 'weighted'                x = np.loadtxt(evolve_csv, ndmin=2, delimiter=',', skiprows=1)                n = min(5, len(x))  # number of previous results to consider                x = x[np.argsort(-fitness(x))][:n]  # top n mutations                w = fitness(x) - fitness(x).min() + 1E-6  # weights (sum > 0)                if parent == 'single' or len(x) == 1:                    # x = x[random.randint(0, n - 1)]  # random selection                    x = x[random.choices(range(n), weights=w)[0]]  # weighted selection                elif parent == 'weighted':                    x = (x * w.reshape(n, 1)).sum(0) / w.sum()  # weighted combination                # Mutate                mp, s = 0.8, 0.2  # mutation probability, sigma                npr = np.random                npr.seed(int(time.time()))                g = np.array([meta[k][0] for k in hyp.keys()])  # gains 0-1                ng = len(meta)                v = np.ones(ng)                while all(v == 1):  # mutate until a change occurs (prevent duplicates)                    v = (g * (npr.random(ng) < mp) * npr.randn(ng) * npr.random() * s + 1).clip(0.3, 3.0)                for i, k in enumerate(hyp.keys()):  # plt.hist(v.ravel(), 300)                    hyp[k] = float(x[i + 7] * v[i])  # mutate            # Constrain to limits            for k, v in meta.items():                hyp[k] = max(hyp[k], v[1])  # lower limit                hyp[k] = min(hyp[k], v[2])  # upper limit                hyp[k] = round(hyp[k], 5)  # significant digits            # Train mutation            results = train(hyp.copy(), opt, device, callbacks)            # Write mutation results            print_mutation(results, hyp.copy(), save_dir, opt.bucket)        # Plot results        plot_evolve(evolve_csv)        print(f'Hyperparameter evolution finished\n'              f"Results saved to {colorstr('bold', save_dir)}\n"              f'Use best hyperparameters example: $ python train.py --hyp {evolve_yaml}')</code></pre><pre class=" language-language-python"><code class="language-language-python">def train(hyp,  # path/to/hyp.yaml or hyp dictionary          opt,          device,          callbacks          ):    # è·å–ç”¨æˆ·å‚æ•°    save_dir, epochs, batch_size, weights, single_cls, evolve, data, cfg, resume, noval, nosave, workers, freeze, = \        Path(opt.save_dir), opt.epochs, opt.batch_size, opt.weights, opt.single_cls, opt.evolve, opt.data, opt.cfg, \        opt.resume, opt.noval, opt.nosave, opt.workers, opt.freeze    # ä¿å­˜è®­ç»ƒå®Œæˆçš„æ¨¡å‹åœ°å€å’Œåç§°    w = save_dir / 'weights'  # weights dir    (w.parent if evolve else w).mkdir(parents=True, exist_ok=True)  # make dir    last, best = w / 'last.pt', w / 'best.pt'    # è·å–è¶…å‚æ•°    if isinstance(hyp, str):        with open(hyp) as f:            hyp = yaml.safe_load(f)  # load hyps dict    LOGGER.info(colorstr('hyperparameters: ') + ', '.join(f'{k}={v}' for k, v in hyp.items()))    # æŒä¹…åŒ–è®­ç»ƒæ—¶çš„å‚æ•°è®¾ç½®    with open(save_dir / 'hyp.yaml', 'w') as f:        yaml.safe_dump(hyp, f, sort_keys=False)    with open(save_dir / 'opt.yaml', 'w') as f:        yaml.safe_dump(vars(opt), f, sort_keys=False)    data_dict = None    # æ—¥å¿—    if RANK in [-1, 0]:        loggers = Loggers(save_dir, weights, opt, hyp, LOGGER)  # loggers instance        if loggers.wandb:            data_dict = loggers.wandb.data_dict            if resume:                weights, epochs, hyp = opt.weights, opt.epochs, opt.hyp        # Register actions        for k in methods(loggers):            callbacks.register_action(k, callback=getattr(loggers, k))    # Config    plots = not evolve  # create plots    cuda = device.type != 'cpu'    init_seeds(1 + RANK)    # åˆ¤æ–­æä¾›çš„æ•°æ®é…æ˜¯å¦ä¸ºç©º    with torch_distributed_zero_first(RANK):        data_dict = data_dict or check_dataset(data)  # check if None    # æ›´æ–°æ•°æ®åœ°å€    train_path, val_path = data_dict['train'], data_dict['val']    # ç”¨æˆ·æ˜¯å¦é€‰æ‹©æŸå•ä¸ªç±»åˆ«å¹¶æ›´æ–°ï¼Œä¸æ˜¯åˆ™è·å–é»˜è®¤çš„ncæ•°é‡    nc = 1 if single_cls else int(data_dict['nc'])  # number of classes    names = ['item'] if single_cls and len(data_dict['names']) != 1 else data_dict['names']  # class names    assert len(names) == nc, f'{len(names)} names found for nc={nc} dataset in {data}'  # check    is_coco = data.endswith('coco.yaml') and nc == 80  # COCO dataset    # æ£€æŸ¥ä¼ å…¥çš„æ¨¡å‹æƒé‡ï¼Œæœ¬åœ°æ— åˆ™ç½‘ç»œä¸‹è½½    check_suffix(weights, '.pt')  # check weights    pretrained = weights.endswith('.pt')    # ä¼ å…¥çš„ä¸ºæ¨¡å‹æ•°æ®    if pretrained:        with torch_distributed_zero_first(RANK):            weights = attempt_download(weights)  # download if not found locally        ckpt = torch.load(weights, map_location=device)  # load checkpoint        # æ„é€ æ¨¡å‹ æ¨¡å‹æ•°æ® é€šé“ ç±»åˆ« ç„æ¡†        model = Model(cfg or ckpt['model'].yaml, ch=3, nc=nc, anchors=hyp.get('anchors')).to(device)  # create        exclude = ['anchor'] if (cfg or hyp.get('anchors')) and not resume else []  # exclude keys        csd = ckpt['model'].float().state_dict()  # checkpoint state_dict as FP32        csd = intersect_dicts(csd, model.state_dict(), exclude=exclude)  # intersect        model.load_state_dict(csd, strict=False)  # load        LOGGER.info(f'Transferred {len(csd)}/{len(model.state_dict())} items from {weights}')  # report    else:        model = Model(cfg, ch=3, nc=nc, anchors=hyp.get('anchors')).to(device)  # create    # å†»ç»“å‚æ•°çš„è¿­ä»£æ¬¡æ•°    freeze = [f'model.{x}.' for x in range(freeze)]  # layers to freeze    for k, v in model.named_parameters():        v.requires_grad = True  # train all layers        if any(x in k for x in freeze):            print(f'freezing {k}')            v.requires_grad = False    # æ„é€ ä¼˜åŒ–å™¨    # nbsä¸ºæ¨¡æ‹Ÿçš„batch_size;     # å°±æ¯”å¦‚é»˜è®¤çš„è¯ä¸Šé¢è®¾ç½®çš„opt.batch_sizeä¸º16,è¿™ä¸ªnbså°±ä¸º64ï¼Œ    # ä¹Ÿå°±æ˜¯æ¨¡å‹æ¢¯åº¦ç´¯ç§¯äº†64/16=4(accumulate)æ¬¡ä¹‹å    # å†æ›´æ–°ä¸€æ¬¡æ¨¡å‹ï¼Œå˜ç›¸çš„æ‰©å¤§äº†batch_size    nbs = 64  # nominal batch size    accumulate = max(round(nbs / batch_size), 1)  # accumulate loss before optimizing    hyp['weight_decay'] *= batch_size * accumulate / nbs  # scale weight_decay    LOGGER.info(f"Scaled weight_decay = {hyp['weight_decay']}")    g0, g1, g2 = [], [], []  # optimizer parameter groups    for v in model.modules():        if hasattr(v, 'bias') and isinstance(v.bias, nn.Parameter):  # bias            g2.append(v.bias)        if isinstance(v, nn.BatchNorm2d):  # weight (no decay)            g0.append(v.weight)        elif hasattr(v, 'weight') and isinstance(v.weight, nn.Parameter):  # weight (with decay)            g1.append(v.weight)# é€‰æ‹©ä¸åŒçš„ä¼˜åŒ–å™¨    if opt.adam:        optimizer = Adam(g0, lr=hyp['lr0'], betas=(hyp['momentum'], 0.999))  # adjust beta1 to momentum    else:        optimizer = SGD(g0, lr=hyp['lr0'], momentum=hyp['momentum'], nesterov=True)# æ·»åŠ æƒé‡å’Œåå·®çš„ä¼˜åŒ–æ–¹å¼    optimizer.add_param_group({'params': g1, 'weight_decay': hyp['weight_decay']})  # add g1 with weight_decay    optimizer.add_param_group({'params': g2})  # add g2 (biases)    LOGGER.info(f"{colorstr('optimizer:')} {type(optimizer).__name__} with parameter groups "                f"{len(g0)} weight, {len(g1)} weight (no decay), {len(g2)} bias")    del g0, g1, g2       if opt.linear_lr:        # è°ƒæ•´å­¦ä¹ é€Ÿç‡ ä½¿ç”¨è¶…å‚æ•°å­¦ä¹ è°ƒæ•´        lf = lambda x: (1 - x / (epochs - 1)) * (1.0 - hyp['lrf']) + hyp['lrf']  # linear    else:        # ä½™å¼¦é€€ç«æ–¹å¼è¿›è¡Œè¡°å‡ lambda x: ((1 - math.cos(x * math.pi / steps)) / 2) * (y2 - y1) + y1        lf = one_cycle(1, hyp['lrf'], epochs)    scheduler = lr_scheduler.LambdaLR(optimizer, lr_lambda=lf)  # plot_lr_scheduler(optimizer, scheduler, epochs)    # EMA    ema = ModelEMA(model) if RANK in [-1, 0] else None    # best_fitnessæ˜¯ä»¥[0.0, 0.0, 0.1, 0.9]ä¸ºç³»æ•°å¹¶ä¹˜ä»¥[ç²¾ç¡®åº¦, å¬å›ç‡, mAP@0.5, mAP@0.5:0.95]å†æ±‚å’Œæ‰€å¾—    # æ ¹æ®best_fitnessæ¥ä¿å­˜best.pt    start_epoch, best_fitness = 0, 0.0    if pretrained:        # åŠ è½½ä¼˜åŒ–å™¨        if ckpt['optimizer'] is not None:            optimizer.load_state_dict(ckpt['optimizer'])            best_fitness = ckpt['best_fitness']        # åŠ è½½ema        if ema and ckpt.get('ema'):            ema.ema.load_state_dict(ckpt['ema'].float().state_dict())            ema.updates = ckpt['updates']        # å¦‚æœæ–°è®¾ç½®epochså°äºåŠ è½½çš„epochï¼Œ        # åˆ™è§†æ–°è®¾ç½®çš„epochsä¸ºéœ€è¦å†è®­ç»ƒçš„è½®æ¬¡æ•°è€Œä¸å†æ˜¯æ€»çš„è½®æ¬¡æ•°        start_epoch = ckpt['epoch'] + 1        if resume:            assert start_epoch > 0, f'{weights} training to {epochs} epochs is finished, nothing to resume.'        if epochs < start_epoch:            LOGGER.info(f"{weights} has been trained for {ckpt['epoch']} epochs. Fine-tuning for {epochs} more epochs.")            epochs += ckpt['epoch']  # finetune additional epochs        del ckpt, csd    # Image sizes    gs = max(int(model.stride.max()), 32)  # grid size (max stride)    nl = model.model[-1].nl  # number of detection layers (used for scaling hyp['obj'])    imgsz = check_img_size(opt.imgsz, gs, floor=gs * 2)  # verify imgsz is gs-multiple    # å•æœºå¤šå¡è®­ç»ƒ    if cuda and RANK == -1 and torch.cuda.device_count() > 1:        logging.warning('DP not recommended, instead use torch.distributed.run for best DDP Multi-GPU results.\n'                        'See Multi-GPU Tutorial at https://github.com/ultralytics/yolov5/issues/475 to get started.')        model = torch.nn.DataParallel(model)    # SyncBatchNorm    if opt.sync_bn and cuda and RANK != -1:        model = torch.nn.SyncBatchNorm.convert_sync_batchnorm(model).to(device)        LOGGER.info('Using SyncBatchNorm()')    # æ„å»ºtrain_loader    train_loader, dataset = create_dataloader(train_path, imgsz, batch_size // WORLD_SIZE, gs, single_cls,                                              hyp=hyp, augment=True, cache=opt.cache, rect=opt.rect, rank=RANK,                                              workers=workers, image_weights=opt.image_weights, quad=opt.quad,                                              prefix=colorstr('train: '))    # åˆ¤æ–­ç±»åˆ«ä¸é…ç½®ä¸­çš„æœ€å¤§ç±»åˆ«ncè¿›è¡Œæ¯”ä»·ï¼Œå¤§äºncåˆ™é”™è¯¯    mlc = int(np.concatenate(dataset.labels, 0)[:, 0].max())  # max label class    nb = len(train_loader)  # number of batches    assert mlc < nc, f'Label class {mlc} exceeds nc={nc} in {data}. Possible class labels are 0-{nc - 1}'    # Process 0    if RANK in [-1, 0]:        # åŠ è½½æµ‹è¯•é›†        val_loader = create_dataloader(val_path, imgsz, batch_size // WORLD_SIZE * 2, gs, single_cls,                                       hyp=hyp, cache=None if noval else opt.cache, rect=True, rank=-1,                                       workers=workers, pad=0.5,                                       prefix=colorstr('val: '))[0]        if not resume:            # è·å–æ‰€æœ‰æ ·æœ¬ç±»åˆ«è¿›è¡Œå¯è§†åŒ–            labels = np.concatenate(dataset.labels, 0)            # c = torch.tensor(labels[:, 0])  # classes            # cf = torch.bincount(c.long(), minlength=nc) + 1.  # frequency            # model._initialize_biases(cf.to(device))            if plots:                plot_labels(labels, names, save_dir)            # Anchors            if not opt.noautoanchor:                # è®¡ç®—é»˜è®¤é”šç‚¹anchorä¸æ•°æ®é›†æ ‡ç­¾æ¡†çš„é•¿å®½æ¯”å€¼                # æ ‡ç­¾çš„é•¿hå®½wä¸anchorçš„é•¿h_aå®½w_açš„æ¯”å€¼, å³h/h_a, w/w_aéƒ½è¦åœ¨(1/hyp['anchor_t'], hyp['anchor_t'])æ˜¯å¯ä»¥æ¥å—çš„                # å¦‚æœæ ‡ç­¾æ¡†æ»¡è¶³ä¸Šé¢æ¡ä»¶çš„æ•°é‡å°äºæ€»æ•°çš„98%ï¼Œåˆ™æ ¹æ®k-meanç®—æ³•èšç±»æ–°çš„é”šç‚¹anchor                check_anchors(dataset, model=model, thr=hyp['anchor_t'], imgsz=imgsz)            model.half().float()  # pre-reduce anchor precision        callbacks.run('on_pretrain_routine_end')    if cuda and RANK != -1:        model = DDP(model, device_ids=[LOCAL_RANK], output_device=LOCAL_RANK)    # æ¨¡å‹å‚æ•°    hyp['box'] *= 3. / nl  # scale to layers    hyp['cls'] *= nc / 80. * 3. / nl  # scale to classes and layers    hyp['obj'] *= (imgsz / 640) ** 2 * 3. / nl  # scale to image size and layers    hyp['label_smoothing'] = opt.label_smoothing    model.nc = nc  # attach number of classes to model    model.hyp = hyp  # attach hyperparameters to model    model.class_weights = labels_to_class_weights(dataset.labels, nc).to(device) * nc  # attach class weights    model.names = names    # Start training    t0 = time.time()    nw = max(round(hyp['warmup_epochs'] * nb), 1000)  # number of warmup iterations, max(3 epochs, 1k iterations)    # nw = min(nw, (epochs - start_epoch) / 2 * nb)  # limit warmup to < 1/2 of training    last_opt_step = -1    # åˆå§‹åŒ–ç±»åˆ«å’Œç»“æœ    maps = np.zeros(nc)  # mAP per class    results = (0, 0, 0, 0, 0, 0, 0)  # P, R, mAP@.5, mAP@.5-.95, val_loss(box, obj, cls)      # è®¾ç½®å­¦ä¹ ç‡è¡°å‡æ‰€è¿›è¡Œåˆ°çš„è½®æ¬¡ï¼Œ    # ç›®çš„æ˜¯æ‰“æ–­è®­ç»ƒåï¼Œ--resumeæ¥ç€è®­ç»ƒä¹Ÿèƒ½æ­£å¸¸çš„è¡”æ¥ä¹‹å‰çš„è®­ç»ƒè¿›è¡Œå­¦ä¹ ç‡è¡°å‡    scheduler.last_epoch = start_epoch - 1  # do not move    scaler = amp.GradScaler(enabled=cuda)    stopper = EarlyStopping(patience=opt.patience)    compute_loss = ComputeLoss(model)  # init loss class    LOGGER.info(f'Image sizes {imgsz} train, {imgsz} val\n'                f'Using {train_loader.num_workers} dataloader workers\n'                f"Logging results to {colorstr('bold', save_dir)}\n"                f'Starting training for {epochs} epochs...')    for epoch in range(start_epoch, epochs):  # epoch ------------------------------------------------------------------        model.train()        # å¦‚æœè®¾ç½®è¿›è¡Œå›¾ç‰‡é‡‡æ ·ç­–ç•¥ï¼Œ        # åˆ™æ ¹æ®å‰é¢åˆå§‹åŒ–çš„å›¾ç‰‡é‡‡æ ·æƒé‡model.class_weightsä»¥åŠmapsé…åˆæ¯å¼ å›¾ç‰‡åŒ…å«çš„ç±»åˆ«æ•°        # é€šè¿‡random.choicesç”Ÿæˆå›¾ç‰‡ç´¢å¼•indicesä»è€Œè¿›è¡Œé‡‡æ ·        if opt.image_weights:            cw = model.class_weights.cpu().numpy() * (1 - maps) ** 2 / nc  # class weights            iw = labels_to_image_weights(dataset.labels, nc=nc, class_weights=cw)  # image weights            dataset.indices = random.choices(range(dataset.n), weights=iw, k=dataset.n)  # rand weighted idx        mloss = torch.zeros(3, device=device)  # mean losses        if RANK != -1:            train_loader.sampler.set_epoch(epoch)        pbar = enumerate(train_loader)        LOGGER.info(('\n' + '%10s' * 7) % ('Epoch', 'gpu_mem', 'box', 'obj', 'cls', 'labels', 'img_size'))        if RANK in [-1, 0]:            pbar = tqdm(pbar, total=nb)  # progress bar        optimizer.zero_grad()        for i, (imgs, targets, paths, _) in pbar:  # batch -------------------------------------------------------------            ni = i + nb * epoch  # number integrated batches (since train start)            imgs = imgs.to(device, non_blocking=True).float() / 255.0  # uint8 to float32, 0-255 to 0.0-1.0            # çƒ­èº«è®­ç»ƒ(å‰nwæ¬¡è¿­ä»£)            # åœ¨å‰nwæ¬¡è¿­ä»£ä¸­ï¼Œæ ¹æ®ä»¥ä¸‹æ–¹å¼é€‰å–accumulateå’Œå­¦ä¹ ç‡            if ni <= nw:                xi = [0, nw]  # x interp                # biasçš„å­¦ä¹ ç‡ä»0.1ä¸‹é™åˆ°åŸºå‡†å­¦ä¹ ç‡lr*lf(epoch)ï¼Œ                # å…¶ä»–çš„å‚æ•°å­¦ä¹ ç‡ä»0å¢åŠ åˆ°lr*lf(epoch).                # lfä¸ºä¸Šé¢è®¾ç½®çš„ä½™å¼¦é€€ç«çš„è¡°å‡å‡½æ•°                accumulate = max(1, np.interp(ni, xi, [1, nbs / batch_size]).round())                for j, x in enumerate(optimizer.param_groups):                    x['lr'] = np.interp(ni, xi, [hyp['warmup_bias_lr'] if j == 2 else 0.0, x['initial_lr'] * lf(epoch)])                    if 'momentum' in x:                        x['momentum'] = np.interp(ni, xi, [hyp['warmup_momentum'], hyp['momentum']])            # å¤šå°ºåº¦è®­ç»ƒ å‚è€ƒä¸Šæ–¹çš„FPN            if opt.multi_scale:                sz = random.randrange(imgsz * 0.5, imgsz * 1.5 + gs) // gs * gs  # size                sf = sz / max(imgs.shape[2:])  # scale factor                if sf != 1:                    ns = [math.ceil(x * sf / gs) * gs for x in imgs.shape[2:]]  # new shape (stretched to gs-multiple)                    # æ’å€¼è¿ç®—è¿›è¡Œä¸Šé‡‡æ ·                    imgs = nn.functional.interpolate(imgs, size=ns, mode='bilinear', align_corners=False)            # Forward            with amp.autocast(enabled=cuda):                pred = model(imgs)  # forward                # æ­£å‘ä¼ æ’­ è®¡ç®—æŸå¤±                loss, loss_items = compute_loss(pred, targets.to(device))  # loss scaled by batch_size                if RANK != -1:                    loss *= WORLD_SIZE  # gradient averaged between devices in DDP mode                if opt.quad:                    loss *= 4.            # æ··ç²¾åº¦åå‘ä¼ æ’­            scaler.scale(loss).backward()            # å‚æ•°æ›´æ–°            if ni - last_opt_step >= accumulate:                scaler.step(optimizer)  # optimizer.step                scaler.update()                # æ¢¯åº¦å½’0                optimizer.zero_grad()                if ema:                    ema.update(model)                last_opt_step = ni            # Log            if RANK in [-1, 0]:                mloss = (mloss * i + loss_items) / (i + 1)  # update mean losses                mem = f'{torch.cuda.memory_reserved() / 1E9 if torch.cuda.is_available() else 0:.3g}G'  # (GB)                pbar.set_description(('%10s' * 2 + '%10.4g' * 5) % (                    f'{epoch}/{epochs - 1}', mem, *mloss, targets.shape[0], imgs.shape[-1]))                callbacks.run('on_train_batch_end', ni, model, imgs, targets, paths, plots, opt.sync_bn)            # end batch ------------------------------------------------------------------------------------------------        # Scheduler        lr = [x['lr'] for x in optimizer.param_groups]  # for loggers        # å­¦ä¹ ç‡è¡°å‡        scheduler.step()        if RANK in [-1, 0]:            # ä½¿ç”¨emaè®­ç»ƒæµ‹è¯•æ•°æ®è®¡ç®—map            callbacks.run('on_train_epoch_end', epoch=epoch)            ema.update_attr(model, include=['yaml', 'nc', 'hyp', 'names', 'stride', 'class_weights'])            final_epoch = (epoch + 1 == epochs) or stopper.possible_stop            if not noval or final_epoch:  # Calculate mAP                results, maps, _ = val.run(data_dict,                                           batch_size=batch_size // WORLD_SIZE * 2,                                           imgsz=imgsz,                                           model=ema.ema,                                           single_cls=single_cls,                                           dataloader=val_loader,                                           save_dir=save_dir,                                           save_json=is_coco and final_epoch,                                           verbose=nc < 50 and final_epoch,                                           plots=plots and final_epoch,                                           callbacks=callbacks,                                           compute_loss=compute_loss)            # Update best mAP            fi = fitness(np.array(results).reshape(1, -1))  # weighted combination of [P, R, mAP@.5, mAP@.5-.95]            if fi > best_fitness:                best_fitness = fi            log_vals = list(mloss) + list(results) + lr            callbacks.run('on_fit_epoch_end', log_vals, epoch, best_fitness, fi)            # ä¿å­˜æ¨¡å‹            if (not nosave) or (final_epoch and not evolve):  # if save                ckpt = {'epoch': epoch,                        'best_fitness': best_fitness,                        'model': deepcopy(de_parallel(model)).half(),                        'ema': deepcopy(ema.ema).half(),                        'updates': ema.updates,                        'optimizer': optimizer.state_dict(),                        'wandb_id': loggers.wandb.wandb_run.id if loggers.wandb else None}                # Save last, best and delete                torch.save(ckpt, last)                if best_fitness == fi:                    torch.save(ckpt, best)                del ckpt                callbacks.run('on_model_save', last, epoch, final_epoch, best_fitness, fi)            # Stop Single-GPU            if RANK == -1 and stopper(epoch=epoch, fitness=fi):                break            # Stop DDP TODO: known issues shttps://github.com/ultralytics/yolov5/pull/4576            # stop = stopper(epoch=epoch, fitness=fi)            # if RANK == 0:            #    dist.broadcast_object_list([stop], 0)  # broadcast 'stop' to all ranks        # Stop DPP        # with torch_distributed_zero_first(RANK):        # if stop:        #    break  # must break all DDP ranks        # end epoch ----------------------------------------------------------------------------------------------------    # end training -----------------------------------------------------------------------------------------------------    if RANK in [-1, 0]:        LOGGER.info(f'\n{epoch - start_epoch + 1} epochs completed in {(time.time() - t0) / 3600:.3f} hours.')        if not evolve:            # cocoæ•°æ®é›†            if is_coco:                 for m in [last, best] if best.exists() else [last]:  # speed, mAP tests                    results, _, _ = val.run(data_dict,                                            batch_size=batch_size // WORLD_SIZE * 2,                                            imgsz=imgsz,                                            model=attempt_load(m, device).half(),                                            iou_thres=0.7,  # NMS IoU threshold for best pycocotools results                                            single_cls=single_cls,                                            dataloader=val_loader,                                            save_dir=save_dir,                                            save_json=True,                                            plots=False)            # Strip optimizers            for f in last, best:                if f.exists():                    strip_optimizer(f)  # strip optimizers        callbacks.run('on_train_end', last, best, plots, epoch)        LOGGER.info(f"Results saved to {colorstr('bold', save_dir)}")    torch.cuda.empty_cache()    return results</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ªäººç±»åº“å·¥å…·æ–‡æ¡£(æŒç»­æ›´æ–°)</title>
      <link href="/2021/09/21/ge-ren-lei-ku-gong-ju-wen-dang/"/>
      <url>/2021/09/21/ge-ren-lei-ku-gong-ju-wen-dang/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸ªäººç±»åº“å·¥å…·æ–‡æ¡£-æŒç»­æ›´æ–°">ä¸ªäººç±»åº“å·¥å…·æ–‡æ¡£(æŒç»­æ›´æ–°)</h3><h4 id="æ–‡ä»¶æ“ä½œç±»-FileUtils">æ–‡ä»¶æ“ä½œç±»(FileUtils)</h4><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>FileUtils.ImgUpload()</td><td>æ–‡ä»¶ä¸Šä¼ å·¥å…·ç±»</td><td>file</td><td>MultipartFileæ–‡ä»¶ç±»</td><td>Map</td><td>è¿”å›Mapç±»å‹æ•°æ®ï¼Œæ–‡ä»¶uuidåç§°(uName),å°è£…æ–‡ä»¶è·¯å¾„(url),æ–‡ä»¶åŸåç§°(filename),æ–‡ä»¶åç¼€(suffix),æ–‡ä»¶ç±»å‹(type,1ä¸ºå›¾ç‰‡,2ä¸ºæ–‡æ¡£,3ä¸ºè§†é¢‘,4ä¸ºéŸ³é¢‘)ã€‚</td></tr><tr><td></td><td></td><td>path</td><td>æ–‡ä»¶å­˜å‚¨è·¯å¾„</td><td></td><td></td></tr><tr><td></td><td></td><td>mvc</td><td>æ–‡ä»¶æ˜ å°„è·¯å¾„</td><td></td><td></td></tr><tr><td>FileUtils.getFileType()</td><td>è·å–æ–‡ä»¶ç±»å‹</td><td>suffix</td><td>æ–‡ä»¶åç¼€</td><td>String</td><td>è¿”å›æ–‡ä»¶ç±»å‹</td></tr></tbody></table><h4 id="æ—¥æœŸæ“ä½œç±»-DateUtils">æ—¥æœŸæ“ä½œç±»(DateUtils)</h4><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>DateUtils.format()</td><td>æ—¥æœŸæ ¼å¼åŒ– æ—¥æœŸæ ¼å¼ä¸ºï¼šyyyy-MM-dd</td><td>Date</td><td>æ—¥æœŸ</td><td>String</td><td>è¿”å›yyyy-MM-ddæ ¼å¼æ—¥æœŸ</td></tr><tr><td></td><td></td><td>String</td><td>æ ¼å¼ï¼Œå¦‚ï¼šDateUtils.DATE_TIME_PATTERN</td><td></td><td></td></tr><tr><td>DateUtils.stringToDate()</td><td>æ—¥æœŸè§£æ</td><td>String</td><td>æ—¥æœŸ</td><td>Date</td><td>è¿”å›Date</td></tr><tr><td></td><td></td><td>String</td><td>æ ¼å¼ï¼Œå¦‚ï¼šDateUtils.DATE_TIME_PATTERN</td><td></td><td></td></tr><tr><td>DateUtils.getWeekStartAndEnd()</td><td>æ ¹æ®å‘¨æ•°ï¼Œè·å–å¼€å§‹æ—¥æœŸã€ç»“æŸæ—¥æœŸ</td><td>int</td><td>å‘¨æœŸ  0æœ¬å‘¨ï¼Œ-1ä¸Šå‘¨ï¼Œ-2ä¸Šä¸Šå‘¨ï¼Œ1ä¸‹å‘¨ï¼Œ2ä¸‹ä¸‹å‘¨</td><td>Dateæ•°ç»„</td><td>è¿”å›date[0]å¼€å§‹æ—¥æœŸã€date[1]ç»“æŸæ—¥æœŸ</td></tr><tr><td>DateUtils.addDateSeconds()</td><td>å¯¹æ—¥æœŸçš„ã€ç§’ã€‘è¿›è¡ŒåŠ /å‡</td><td>Date</td><td>æ—¥æœŸ</td><td>Date</td><td>åŠ /å‡å‡ ç§’åçš„æ—¥æœŸ</td></tr><tr><td></td><td></td><td>int</td><td>ç§’æ•°ï¼Œè´Ÿæ•°ä¸ºå‡</td><td></td><td></td></tr><tr><td>DateUtils.addDateMinutes()</td><td>å¯¹æ—¥æœŸçš„ã€åˆ†é’Ÿã€‘è¿›è¡ŒåŠ /å‡</td><td>Date</td><td>æ—¥æœŸ</td><td>Date</td><td>åŠ /å‡å‡ åˆ†é’Ÿåçš„æ—¥æœŸ</td></tr><tr><td></td><td></td><td>int</td><td>åˆ†é’Ÿæ•°ï¼Œè´Ÿæ•°ä¸ºå‡</td><td></td><td></td></tr><tr><td>DateUtils.addDateHours()</td><td>å¯¹æ—¥æœŸçš„ã€å°æ—¶ã€‘è¿›è¡ŒåŠ /å‡</td><td>Date</td><td>æ—¥æœŸ</td><td>Date</td><td>åŠ /å‡å‡ å°æ—¶åçš„æ—¥æœŸ</td></tr><tr><td></td><td></td><td>int</td><td>å°æ—¶æ•°ï¼Œè´Ÿæ•°ä¸ºå‡</td><td></td><td></td></tr><tr><td>DateUtils.addDateDays()</td><td>å¯¹æ—¥æœŸçš„ã€å¤©ã€‘è¿›è¡ŒåŠ /å‡</td><td>Date</td><td>æ—¥æœŸ</td><td>Date</td><td>åŠ /å‡å‡ å¤©åçš„æ—¥æœŸ</td></tr><tr><td></td><td></td><td>int</td><td>å¤©æ•°ï¼Œè´Ÿæ•°ä¸ºå‡</td><td></td><td></td></tr><tr><td>DateUtils.addDateWeeks()</td><td>å¯¹æ—¥æœŸçš„ã€å‘¨ã€‘è¿›è¡ŒåŠ /å‡</td><td>Date</td><td>æ—¥æœŸ</td><td>Date</td><td>åŠ /å‡å‡ å‘¨åçš„æ—¥æœŸ</td></tr><tr><td></td><td></td><td>int</td><td>åŠ /å‡å‡ å‘¨åçš„æ—¥æœŸ</td><td></td><td></td></tr><tr><td>DateUtils.addDateMonths()</td><td>å¯¹æ—¥æœŸçš„ã€æœˆã€‘è¿›è¡ŒåŠ /å‡</td><td>Date</td><td>æ—¥æœŸ</td><td>Date</td><td>å¯¹æ—¥æœŸçš„ã€æœˆã€‘è¿›è¡ŒåŠ /å‡</td></tr><tr><td></td><td></td><td>int</td><td>åŠ /å‡å‡ æœˆåçš„æ—¥æœŸ</td><td></td><td></td></tr><tr><td>DateUtils.addDateYears()</td><td>å¯¹æ—¥æœŸçš„ã€å¹´ã€‘è¿›è¡ŒåŠ /å‡</td><td>Date</td><td>æ—¥æœŸ</td><td>Date</td><td>åŠ /å‡å‡ å¹´åçš„æ—¥æœŸ</td></tr><tr><td></td><td></td><td>int</td><td>å¹´æ•°ï¼Œè´Ÿæ•°ä¸ºå‡</td><td></td><td></td></tr></tbody></table><h4 id="Wordå¯¼å‡ºç±»-WordUtils">Wordå¯¼å‡ºç±»(WordUtils)</h4><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>WordUtils.exportWord()</td><td>è·å–wordæ–‡ä»¶ä¸‹è½½åœ°å€</td><td>Map</td><td>å°è£…çš„éœ€è¦çš„Mapå‚æ•°</td><td>String</td><td>wordæ–‡ä»¶ä¸‹è½½åœ°å€</td></tr><tr><td></td><td></td><td>String</td><td>wordæ¨¡æ¿æ–‡ä»¶æ‰€åœ¨åœ°å€</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>wordæ–‡ä»¶å¯¼å‡ºåœ°å€</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>wordæ¨¡æ¿åç§°</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>æ–‡ä»¶æ˜ å°„è·¯å¾„</td><td></td><td></td></tr></tbody></table><h4 id="Springå®¹å™¨ç±»-SpringContextUtils">Springå®¹å™¨ç±»(SpringContextUtils)</h4><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>SpringContextUtils.getBean()</td><td>è·å–java bean</td><td>Class<t></t></td><td>javaç±»</td><td><t></t></td><td>è¿”å›java bean</td></tr><tr><td>SpringContextUtils.getBean()</td><td>è·å–java bean</td><td>String</td><td>ç±»åç§°</td><td><t></t></td><td>è¿”å›java bean</td></tr><tr><td></td><td></td><td>Class<t></t></td><td>javaç±»</td><td></td><td></td></tr><tr><td>SpringContextUtils.containsBean()</td><td>æ˜¯å¦åŒ…å«java bean</td><td>String</td><td>ç±»åç§°</td><td>boolean</td><td>æ˜¯å¦åŒ…å«</td></tr><tr><td>SpringContextUtils.isSingleton()</td><td>beanæ˜¯å¦ä¸ºå•ä¾‹</td><td>String</td><td>ç±»åç§°</td><td>boolean</td><td>æ˜¯å¦ä¸ºå•ä¾‹</td></tr><tr><td>SpringContextUtils.getType()</td><td>è·å–javaç±»å‹</td><td>String</td><td>ç±»åç§°</td><td>Class&lt;? extends Object&gt;</td><td>javaç±»å‹</td></tr></tbody></table><h4 id="Excelå·¥å…·ç±»-ExcelUtils">Excelå·¥å…·ç±»(ExcelUtils)</h4><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>ExcelUtils.exportExcel()</td><td>Excelå¯¼å‡º</td><td>HttpServletResponse</td><td>response</td><td>void</td><td></td></tr><tr><td></td><td></td><td>String</td><td>æ–‡ä»¶å</td><td></td><td></td></tr><tr><td></td><td></td><td>Collection&lt;?&gt;</td><td>æ•°æ®List</td><td></td><td></td></tr><tr><td></td><td></td><td>Class&lt;?&gt;</td><td>å¯¹è±¡Class</td><td></td><td></td></tr><tr><td>ExcelUtils.getMyCellDate()</td><td>excelæ—¥æœŸè½¬æ¢</td><td>Cell</td><td>è·å–excelçš„æ—¥æœŸåˆ—</td><td>Date</td><td>æ—¥æœŸ</td></tr></tbody></table><h4 id="ä¸ªäººé‚®ä»¶ç±»-MailUtils">ä¸ªäººé‚®ä»¶ç±»(MailUtils)</h4><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>new Thread(new MailUtils(email,sendEmail,password,host,html,title,qq)).start();</td><td>åˆ›å»ºçº¿ç¨‹å‘é€é‚®ä»¶</td><td>String</td><td>æ¥æ”¶äººé‚®ç®±</td><td>void</td><td>æ§åˆ¶å°æ‰“å°ä¿¡æ¯</td></tr><tr><td></td><td></td><td>String</td><td>å‘é€äººé‚®ç®±</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>å‘é€äººé‚®ç®±æˆæƒç </td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td><a href="http://xn--smtp-zh5ft2bu2us9p2xpj2jcm6bd61dj3b.qq.com" target="_blank" rel="noopener">æŒ‡å®šå‘é€é‚®ä»¶çš„ä¸»æœºsmtp.qq.com</a>(QQ)|<a href="http://smtp.163.com" target="_blank" rel="noopener">smtp.163.com</a>(ç½‘æ˜“)</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>é‚®ä»¶htmlå†…å®¹</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>é‚®ä»¶æ ‡é¢˜</td><td></td><td></td></tr><tr><td></td><td></td><td>boolean</td><td>æ˜¯å¦ä¸ºqqé‚®ç®±</td><td></td><td></td></tr></tbody></table><h4 id="MessageUtilså·¥å…·ç±»">MessageUtilså·¥å…·ç±»</h4><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>SnowFlake.nextId()</td><td>è·å–é›ªèŠ±id</td><td>æ— </td><td>æ— </td><td>Long</td><td>é›ªèŠ±id</td></tr></tbody></table><h4 id="Ipå·¥å…·ç±»-IpUtils">Ipå·¥å…·ç±»(IpUtils)</h4><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>IpUtils.getIpAddr()</td><td>è·å–ipåœ°å€</td><td>HttpServletRequest</td><td>requestè¯·æ±‚å¯¹è±¡</td><td>String</td><td>ipåœ°å€</td></tr></tbody></table><h4 id="åŠ å¯†å·¥å…·ç±»-MD5Utils">åŠ å¯†å·¥å…·ç±»(MD5Utils)</h4><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>MD5Utils.MD5()</td><td>md5åŠ å¯†</td><td>String</td><td>åŠ å¯†å†…å®¹</td><td>String</td><td>åŠ å¯†ç»“æœ</td></tr></tbody></table><h4 id="ç±»å‹è½¬æ¢å·¥å…·ç±»-TransformUtils-XmlUtils">ç±»å‹è½¬æ¢å·¥å…·ç±»(TransformUtils,XmlUtils)</h4><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>TransformUtils.mapToXml()</td><td>å°†Mapè½¬æ¢ä¸ºXMLæ ¼å¼çš„å­—ç¬¦ä¸²</td><td>Map&lt;String, String&gt;</td><td>åŸæ•°æ®</td><td>String</td><td>è¿”å›xml</td></tr><tr><td>TransformUtils.xmlToMap()</td><td>XMLæ ¼å¼å­—ç¬¦ä¸²è½¬æ¢ä¸ºMap</td><td>String</td><td>xmlæ•°æ®</td><td>Map&lt;String, String&gt;</td><td>Mapæ•°æ®</td></tr></tbody></table><h4 id="æ”¯ä»˜å·¥å…·ç±»-AliPayUtils-WxPayUtils">æ”¯ä»˜å·¥å…·ç±»(AliPayUtils,WxPayUtils)</h4><p>åˆ›å»ºä»£ç†å¯¹è±¡</p><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>new AliPay()</td><td>åˆ›å»ºaliæ”¯ä»˜å‚æ•°ç±»</td><td>String</td><td>appId</td><td>AliPay</td><td>Alipayå¯¹è±¡</td></tr><tr><td></td><td></td><td>String</td><td>ç½‘å…³</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>å•†æˆ·ç§é’¥</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>ç¼–ç æ ¼å¼</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>æ”¯ä»˜å®å…¬é’¥</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>ç­¾åæ–¹å¼</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>å¼‚æ­¥é€šçŸ¥é¡µé¢</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>åŒæ­¥é€šçŸ¥é¡µé¢</td><td></td><td></td></tr></tbody></table><p>å°è£…å“åº”æ•°æ®</p><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>AliPayUtils.aliParam()</td><td>æ„é€ å“åº”å†…å®¹</td><td>String</td><td>biz_contentï¼Œè¯·æ±‚å‚æ•°çš„é›†åˆï¼Œæœ€å¤§é•¿åº¦ä¸é™ï¼Œé™¤å…¬å…±å‚æ•°å¤–æ‰€æœ‰è¯·æ±‚å‚æ•°éƒ½å¿…é¡»æ”¾åœ¨è¿™ä¸ªå‚æ•°ä¸­ä¼ é€’</td><td>String</td><td>å“åº”å†…å®¹</td></tr><tr><td></td><td></td><td>AliPay</td><td>alipayå¯¹è±¡</td><td></td><td></td></tr></tbody></table><p>åˆ›å»ºå¾®ä¿¡å‚æ•°å¯¹è±¡</p><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>new WxPay()</td><td>åˆ›å»ºå¾®ä¿¡æ”¯ä»˜å‚æ•°ç±»</td><td>String</td><td>å¾®ä¿¡id</td><td>WxPay</td><td>WxPayå¯¹è±¡</td></tr><tr><td></td><td></td><td>String</td><td>å•†æˆ·å·</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>key</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>å¼‚æ­¥é€šçŸ¥é¡µé¢</td><td></td><td></td></tr></tbody></table><p>åˆ›å»ºå¾®ä¿¡ç­¾å</p><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>WxPayUtils.createWxParam()</td><td>åˆ›å»ºå¾®ä¿¡ç­¾å</td><td>HttpServletRequest</td><td>requestè¯·æ±‚å‚æ•°</td><td>String</td><td>å¾®ä¿¡æ”¯ä»˜ç­¾å</td></tr><tr><td></td><td></td><td>WxPay</td><td>å¾®ä¿¡è¯·æ±‚å‚æ•°å¯¹è±¡</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>body</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>è®¢å•ç¼–å·</td><td></td><td></td></tr><tr><td></td><td></td><td>BigDecimal</td><td>è®¢å•æ€»ä»·æ ¼</td><td></td><td></td></tr></tbody></table><p>è¿”å›å¾®ä¿¡æ”¯ä»˜å“åº”æ•°æ®</p><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>WxPayUtils.wxParam()</td><td>åˆ›å»ºå“åº”å†…å®¹</td><td>HttpServletRequest</td><td>requestè¯·æ±‚å‚æ•°</td><td>String</td><td>æ”¯ä»˜å“åº”å†…å®¹</td></tr><tr><td></td><td></td><td>WxPay</td><td>å¾®ä¿¡è¯·æ±‚å‚æ•°å¯¹è±¡</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>å¾®ä¿¡ç­¾å</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>body</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>è®¢å•ç¼–å·</td><td></td><td></td></tr><tr><td></td><td></td><td>BigDecimal</td><td>è®¢å•æ€»ä»·æ ¼</td><td></td><td></td></tr></tbody></table><h4 id="ä¸ƒç‰›äº‘æ–‡ä»¶ä¸Šä¼ å·¥å…·ç±»-QiniuUtils">ä¸ƒç‰›äº‘æ–‡ä»¶ä¸Šä¼ å·¥å…·ç±»(QiniuUtils)</h4><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>QiniuUtils.uploadQiniu()</td><td>ä¸Šä¼ æ–‡ä»¶åˆ°ä¸ƒç‰›äº‘</td><td>MultipartFile</td><td>@RequestParam(â€œfileâ€)ï¼šæ–‡ä»¶</td><td>String</td><td>è¿”å›çš„ä¸ƒç‰›äº‘é“¾æ¥</td></tr><tr><td></td><td></td><td>Map&lt;String,String&gt;</td><td>keyè¯´æ˜ï¼šQiniuAccessKeyï¼šå…¬é’¥ï¼ŒQiniuSecretKeyï¼šç§é’¥ï¼ŒQiniuBucketNameï¼šç©ºé—´åï¼ŒQiniuDomainï¼šåŸŸåï¼ŒQiniuPrefixï¼šæ–‡ä»¶åˆ†ç»„è¾¨è¯†å‰ç¼€</td><td></td><td></td></tr></tbody></table><h4 id="é˜¿é‡Œäº‘çŸ­ä¿¡å‘é€å·¥å…·ç±»-SmsUtils">é˜¿é‡Œäº‘çŸ­ä¿¡å‘é€å·¥å…·ç±»(SmsUtils)</h4><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>SmsUtils.sendSms()</td><td>é˜¿é‡Œäº‘å‘é€çŸ­ä¿¡</td><td>Map&lt;String,String&gt;</td><td>é˜¿é‡Œäº‘çŸ­ä¿¡é…ç½®mapã€‚keyè¯´æ˜ï¼štimeï¼šè¶…æ—¶æ—¶é—´ï¼ŒaccessKeyIdï¼ŒaccessKeySecretï¼šçŸ­ä¿¡ä¸ªäººé…ç½®ä¿¡æ¯ï¼Œsignï¼šçŸ­ä¿¡ç­¾å</td><td>int</td><td>1ä¸ºæˆåŠŸï¼Œ0ä¸ºå¤±è´¥</td></tr><tr><td></td><td></td><td>Map&lt;String,String&gt;</td><td>é˜¿é‡Œäº‘çŸ­ä¿¡ä¸ªäººä¿¡æ¯mapã€‚keyè¯´æ˜ï¼šmobileï¼šæ¥æ”¶æ‰‹æœºå·ï¼Œtemplateï¼šçŸ­ä¿¡æ¨¡æ¿ï¼Œjsonï¼šå˜é‡æ›¿æ¢JSONä¸²,å¦‚æ¨¡æ¿å†…å®¹ä¸º"äº²çˆ±çš„ç”¨æˆ·,æ‚¨çš„éªŒè¯ç ä¸º${code}â€œæ—¶,æ­¤å¤„çš„jsonå€¼ä¸ºâ€{â€œcodeâ€:"" + code + â€œâ€}"ï¼ŒoutIdï¼šæä¾›ç»™ä¸šåŠ¡æ–¹æ‰©å±•å­—æ®µ,æœ€ç»ˆåœ¨çŸ­ä¿¡å›æ‰§æ¶ˆæ¯ä¸­å°†æ­¤å€¼å¸¦å›ç»™è°ƒç”¨è€…</td><td></td><td></td></tr></tbody></table><h4 id="é›†åˆç¬¬ä¸‰æ–¹qqç™»å½•å·¥å…·ç±»-QQLoginUtils">é›†åˆç¬¬ä¸‰æ–¹qqç™»å½•å·¥å…·ç±»(QQLoginUtils)</h4><p>åˆ›å»ºä»£ç†å¯¹è±¡</p><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>new QQHttpClient(String APPID,String APPKEY);</td><td>åˆ›å»ºQQé…ç½®å¯¹è±¡</td><td>APPID</td><td>qqäº’è”å¹³å°åº”ç”¨id</td><td>client</td><td>QQHttpClientå¯¹è±¡</td></tr><tr><td></td><td></td><td>APPKEY</td><td>qqäº’è”å¹³å°åº”ç”¨key</td><td></td><td></td></tr></tbody></table><p>ç™»å½•æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>QQLoginUtils.getBackUrl(String domain, QQHttpClient qqHttpClient);</td><td>è·å–ç™»å½•è¿”å›é“¾æ¥</td><td>String</td><td>åº”ç”¨é…ç½®åŸŸå</td><td>Map&lt;String,String&gt;</td><td>keyè¯´æ˜ï¼šurlï¼šè¿”å›çš„é“¾æ¥ï¼›stateï¼šç”¨äºç¬¬ä¸‰æ–¹åº”ç”¨é˜²æ­¢CSRFæ”»å‡»çš„uuid</td></tr><tr><td></td><td></td><td>QQHttpClient</td><td>QQHttpClienté…ç½®å¯¹è±¡</td><td></td><td></td></tr><tr><td>QQLoginUtils.qqCallBack(Map&lt;String,String&gt; map,String backUrlState,String domain,QQHttpClient client);</td><td>qqå›è°ƒå‡½æ•°</td><td>Map&lt;String,String&gt;</td><td>requestè·å–çš„qqä¿¡æ¯æºå¸¦å‚æ•°çš„mapé›†åˆã€‚keyè¯´æ˜ï¼šcodeï¼š<em>Authorization Code</em>ï¼›stateï¼šuuidï¼›æ³¨æ„ï¼šæ•°æ®è·å–æ¥è‡ªqqè¿”å›çš„ä¿¡æ¯</td><td>Map&lt;String,String&gt;</td><td>keyè¯´æ˜ï¼šopenidï¼šç”¨æˆ·å”¯ä¸€æ ‡è¯†ï¼›nicknameï¼šqqç”¨æˆ·åï¼›figureurl_qq_2ï¼š100*100åƒç´ å¤´åƒé“¾æ¥</td></tr><tr><td></td><td></td><td>String</td><td>è·å–ç™»å½•é“¾æ¥æ–¹æ³•ä¸­åˆ›å»ºçš„uuid</td><td></td><td></td></tr><tr><td></td><td></td><td>String</td><td>åº”ç”¨é…ç½®çš„åŸŸå</td><td></td><td></td></tr><tr><td></td><td></td><td>QQHttpClient</td><td>QQHttpClienté…ç½®å¯¹è±¡</td><td></td><td></td></tr></tbody></table><h4 id="rediså·¥å…·ç±»-RedisUtils">rediså·¥å…·ç±»(RedisUtils)</h4><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•æ³¨é‡Š</th><th>ä¼ å…¥å‚æ•°</th><th>å‚æ•°æ³¨é‡Š</th><th>è¿”å›ç»“æœ</th><th>ç»“æœæ³¨é‡Š</th></tr></thead><tbody><tr><td>expire(key,time)</td><td>æŒ‡å®šç¼“å­˜å¤±æ•ˆæ—¶é—´</td><td>String,long</td><td>é”®ï¼Œæ—¶é—´</td><td>boolean</td><td>trueï¼šæˆåŠŸï¼Œfalseï¼šå¤±è´¥</td></tr><tr><td>getExpire(key)</td><td>è·å–keyçš„è¿‡æœŸæ—¶é—´</td><td>String</td><td>é”®</td><td>long</td><td>è¿”å›è¿‡æœŸæ—¶é—´ï¼Œè‹¥ä¸º0åˆ™æ°¸ä¹…æœ‰æ•ˆ</td></tr><tr><td>hasKey(key)</td><td>åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨</td><td>String</td><td>é”®</td><td>boolean</td><td>trueï¼šå­˜åœ¨ï¼Œfalseï¼šä¸å­˜åœ¨</td></tr><tr><td>del(key)</td><td>åˆ é™¤ç¼“å­˜</td><td>String/String []</td><td>å•é”®ï¼Œé”®æ•°ç»„</td><td>void</td><td>æ— è¿”å›ç»“æœ</td></tr><tr><td>get(key)</td><td>è·å–ç¼“å­˜å€¼</td><td>String</td><td>é”®</td><td>Object</td><td>ç¼“å­˜å€¼</td></tr><tr><td>set(key,value)</td><td>å­˜æ”¾ç¼“å­˜</td><td>String,Object</td><td>é”®ï¼Œå€¼</td><td>boolean</td><td>trueï¼šæˆåŠŸï¼Œfalseï¼šå¤±è´¥</td></tr><tr><td>set(key,value,time)</td><td>å­˜æ”¾ç¼“å­˜å¹¶è®¾ç½®å¤±æ•ˆæ—¶é—´</td><td>String,Object,long</td><td>é”®ï¼Œå€¼ï¼Œå¤±æ•ˆæ—¶é—´(å½“timeå°äºç­‰äº0æ—¶ï¼Œé”®æ°¸ä¹…æœ‰æ•ˆ)</td><td>boolean</td><td>trueï¼šæˆåŠŸï¼Œfalseï¼šå¤±è´¥</td></tr><tr><td>hmset(key,map)</td><td>å­˜æ”¾Mapç±»å‹é”®å€¼å¯¹</td><td>String,Map&lt;String,Object&gt;</td><td>é”®ï¼ŒMapæ•°æ®å€¼</td><td>boolean</td><td>trueï¼šæˆåŠŸï¼Œfalseï¼šå¤±è´¥</td></tr><tr><td>hmset(key,map,time)</td><td>å­˜æ”¾Mapç±»å‹é”®å€¼å¯¹å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´</td><td>String,Map&lt;String,Object&gt;,long</td><td>é”®ï¼ŒMapæ•°æ®å€¼ï¼Œè¿‡æœŸæ—¶é—´(å½“timeå°äºç­‰äº0æ—¶ï¼Œé”®æ°¸ä¹…æœ‰æ•ˆ)</td><td>boolean</td><td>trueï¼šæˆåŠŸï¼Œfalseï¼šå¤±è´¥</td></tr><tr><td>hmget(key)</td><td>è·å–keyå¯¹åº”çš„Mapé”®å€¼</td><td>String</td><td>é”®</td><td>Map&lt;Object,Object&gt;</td><td>Mapé”®å€¼å¯¹</td></tr><tr><td>hget(key,item)</td><td>è·å–keyå¯¹åº”çš„mapé”®çš„å€¼</td><td>String,String</td><td>é”®ï¼Œmapé”®</td><td>Object</td><td>mapå€¼</td></tr><tr><td>hset(key,item,value)</td><td>å‘hashè¡¨ä¸­å­˜æ”¾æ•°æ®ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º</td><td>String,String,Object</td><td>é”®ï¼Œé¡¹ï¼Œå€¼</td><td>boolean</td><td>trueï¼šæˆåŠŸï¼Œfalseï¼šå¤±è´¥</td></tr><tr><td>hset(key,item,value,time)</td><td>å‘hashè¡¨ä¸­å­˜æ”¾æ•°æ®ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º</td><td>String,String,Object,long</td><td>é”®ï¼Œé¡¹ï¼Œå€¼ï¼Œæ—¶é—´(å¦‚æœå·²å­˜åœ¨çš„hashè¡¨æœ‰æ—¶é—´,è¿™é‡Œå°†ä¼šæ›¿æ¢åŸæœ‰çš„æ—¶é—´)</td><td>boolean</td><td>trueï¼šæˆåŠŸï¼Œfalseï¼šå¤±è´¥</td></tr><tr><td>hdel(key,item)</td><td>åˆ é™¤hashè¡¨ä¸­çš„å€¼</td><td>String,String/String []</td><td>é”®ï¼Œå•é¡¹æˆ–é¡¹æ•°ç»„</td><td>void</td><td>æ— è¿”å›ç»“æœ</td></tr><tr><td>hHasKey(key,item)</td><td>åˆ¤æ–­hashè¡¨ä¸­æ˜¯å¦æœ‰é¡¹çš„å€¼</td><td>String,String</td><td>é”®ï¼Œé¡¹</td><td>boolean</td><td>trueï¼šå­˜åœ¨ï¼Œfalseï¼šä¸å­˜åœ¨</td></tr><tr><td>sSet(key,values)</td><td>å°†æ•°æ®æ”¾å…¥setç¼“å­˜</td><td>String,Object/Object []</td><td>é”®ï¼Œå€¼</td><td>long</td><td>è¿”å›æˆåŠŸçš„ä¸ªæ•°</td></tr><tr><td>sSetAndTime(key,time,values)</td><td>å°†æ•°æ®æ”¾å…¥setç¼“å­˜å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´</td><td>String,time,Object/Object []</td><td>é”®ï¼Œæ—¶é—´ï¼Œå€¼</td><td>long</td><td>è¿”å›æˆåŠŸä¸ªæ•°</td></tr><tr><td>sHasKey(key,value)</td><td>åˆ¤æ–­setä¸­çš„valueæ˜¯å¦å­˜åœ¨</td><td>String,Object</td><td>é”®ï¼Œå€¼</td><td>boolean</td><td>trueï¼šå­˜åœ¨ï¼Œfalseï¼šä¸å­˜åœ¨</td></tr><tr><td>sGet(key)</td><td>æ ¹æ®keyè·å–Setä¸­çš„æ‰€æœ‰å€¼</td><td>String</td><td>é”®</td><td>Set<object></object></td><td>setå€¼</td></tr><tr><td>sGetSetSize(key)</td><td>è·å–setç¼“å­˜é•¿åº¦</td><td>String</td><td>é”®</td><td>long</td><td>ç¼“å­˜é•¿åº¦</td></tr><tr><td>setRemove(key,values)</td><td>ç§»é™¤setç¼“å­˜ä¸­å€¼ä¸ºvaluesçš„</td><td>String,Object/Object p[]</td><td>é”®ï¼Œå€¼/å€¼æ•°ç»„</td><td>long</td><td>è¿”å›ç§»é™¤çš„ä¸ªæ•°</td></tr><tr><td>lSet(key,value)</td><td>å‘listä¸­å­˜æ”¾ç¼“å­˜</td><td>String,Object</td><td>é”®ï¼Œå€¼</td><td>boolean</td><td>trueï¼šæˆåŠŸï¼Œfalseï¼šå¤±è´¥</td></tr><tr><td>lSet(key, value,time)</td><td>å‘listä¸­å­˜æ”¾ç¼“å­˜å¹¶è®¾ç½®ç¼“å­˜æ—¶é—´</td><td>String,Object,long</td><td>é”®ï¼Œå€¼ï¼Œæ—¶é—´(timeå°äºç­‰äº0ä¸ºæ°¸ä¹…æœ‰æ•ˆ)</td><td>boolean</td><td>trueï¼šæˆåŠŸï¼Œfalseï¼šå¤±è´¥</td></tr><tr><td>lSet(key,value)</td><td>å‘listä¸­å­˜æ”¾ç¼“å­˜ï¼Œå€¼ä¸ºlist</td><td>String,List<object></object></td><td>é”®ï¼Œå€¼</td><td>boolean</td><td>trueï¼šæˆåŠŸï¼Œfalseï¼šå¤±è´¥</td></tr><tr><td>lSet(key, value,time)</td><td>å‘listä¸­å­˜æ”¾ç¼“å­˜ï¼Œå€¼ä¸ºlistå¹¶è®¾ç½®ç¼“å­˜æ—¶é—´</td><td>String,List<object>,long</object></td><td>é”®ï¼Œå€¼ï¼Œæ—¶é—´(timeå°äºç­‰äº0ä¸ºæ°¸ä¹…æœ‰æ•ˆ)</td><td>boolean</td><td>rueï¼šæˆåŠŸï¼Œfalseï¼šå¤±è´¥</td></tr><tr><td>lGet(key, start,end)</td><td>è·å–listç¼“å­˜çš„å†…å®¹</td><td>String,long,long</td><td>é”®ï¼Œå¼€å§‹ï¼Œç»“æŸ(0 åˆ° -1ä»£è¡¨æ‰€æœ‰å€¼)</td><td>List<object></object></td><td>è·å–çš„ç¼“å­˜å€¼</td></tr><tr><td>lGetListSize(key)</td><td>è·å–listç¼“å­˜çš„é•¿åº¦</td><td>String</td><td>é”®</td><td>long</td><td>ç¼“å­˜é•¿åº¦</td></tr><tr><td>lGetIndex(key,index)</td><td>é€šè¿‡ç´¢å¼•è·å–listä¸­çš„ç¼“å­˜å€¼</td><td>String,long</td><td>é”®ï¼Œç´¢å¼•(ç´¢å¼• index&gt;=0æ—¶ï¼Œ 0 è¡¨å¤´ï¼Œ1 ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨ï¼›index&lt;0æ—¶ï¼Œ-1ï¼Œè¡¨å°¾ï¼Œ-2å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨)</td><td>Object</td><td>ç¼“å­˜å€¼</td></tr><tr><td>lUpdateIndex(key, index,value)</td><td>ä¿®æ”¹listä¸­ç´¢å¼•å¯¹åº”çš„å€¼</td><td>String,long,Object</td><td>é”®ï¼Œç´¢å¼•ï¼Œå€¼</td><td>boolean</td><td>trueï¼šæˆåŠŸï¼Œfalseï¼šå¤±è´¥</td></tr><tr><td>lRemove(key, count,value)</td><td>ç§»é™¤listç¼“å­˜ä¸­å€¼ä¸ºvalueçš„nä¸ªç¼“å­˜</td><td>String,long,Object</td><td>é”®ï¼Œä¸ªæ•°ï¼Œå€¼</td><td>long</td><td>ç§»é™¤çš„ä¸ªæ•°</td></tr><tr><td>removeAll(keyPrefix)</td><td>åˆ é™¤æŒ‡å®šå‰ç¼€çš„ä¸€ç³»åˆ—key</td><td>String</td><td>é”®å‰ç¼€</td><td>void</td><td>æ— è¿”å›ç»“æœ</td></tr></tbody></table><h3 id="ç±»åº“æ–‡ä»¶">ç±»åº“æ–‡ä»¶</h3><p><a href="https://dingdm.online/dingdm-1.2.jar" target="_blank" rel="noopener">https://dingdm.online/dingdm-1.2.jar</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jar </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åƒå…¨æ™¯æ‹¼æ¥</title>
      <link href="/2021/09/12/tu-xiang-pin-jie-ru-men/"/>
      <url>/2021/09/12/tu-xiang-pin-jie-ru-men/</url>
      
        <content type="html"><![CDATA[<h4 id="å›¾åƒå…¨æ™¯æ‹¼æ¥">å›¾åƒå…¨æ™¯æ‹¼æ¥</h4><h5 id="å‰æçŸ¥è¯†">å‰æçŸ¥è¯†</h5><h6 id="æ³°å‹’å…¬å¼">æ³°å‹’å…¬å¼</h6><p>ä½¿ç”¨å¤šæ¬¡å¤šé¡¹å¼æ¥è¿‘ä¼¼è¡¨è¾¾åŸå‡½æ•°f(x)ã€‚</p><p>å¯¹äºä¸€ä¸ªå‡½æ•°ï¼Œåœ¨æŸä¸€ç‚¹å¤„å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå‡½æ•°çš„å€¼ä¸å®ƒç›¸åŒï¼Œä½†æ˜¯åœ¨è¯¥ç‚¹çš„é¢†åŸŸå†…å¯èƒ½æ‰¾åˆ°çš„å›¾åƒä¸å°½ç›¸åŒï¼Œè€Œå¯¼æ•°ååº”çš„æ˜¯å˜åŒ–ç‡ï¼Œå› æ­¤å¯ä»¥å¯¹å½“å‰è¿‘ä¼¼è¡¨ç¤ºçš„å‡½æ•°æ±‚å¯¼ï¼Œå¯¹äºè¿‘ä¼¼å‡½æ•°è¿›è¡Œå¤šé˜¶æ±‚å¯¼åï¼Œè¿‘ä¼¼äºåŸå‡½æ•°ã€‚</p><p>å¯¹äºå‡½æ•°ä¸­æŸä¸€ç‚¹å…¶ä¸€é˜¶å¯¼æ•°ä¸º0ï¼ŒäºŒé˜¶å¯¼æ•°ä¸ä¸º0ï¼Œé‚£ä¹ˆè¯¥ç‚¹å¿…å®šä¸ºæå€¼ç‚¹ã€‚å†è¿›ä¸€æ­¥åˆ†æï¼Œå¦‚æœäºŒé˜¶å¯¼æ•°å¤§äº0ï¼Œé‚£ä¹ˆè¯¥ç‚¹ä¸ºæå°å€¼ç‚¹ï¼Œå¦‚æœäºŒé˜¶å¯¼æ•°å°äº0ï¼Œé‚£ä¹ˆè¯¥ç‚¹ä¸ºæå¤§å€¼ç‚¹ã€‚</p><p>æœ‰ä¸€é˜¶æ³°å‹’å…¬å¼åˆ°äºŒé˜¶æ³°å‹’ï¼Œå³äºŒé˜¶å¯¼æ•°çš„x,yæ±‚å¯¼æ„æˆé»‘å¡çŸ©é˜µã€‚</p><h6 id="hessian">hessian</h6><p>é»‘å¡æ˜¯ä¸€ä¸ªå¤šå…ƒå‡½æ•°çš„äºŒé˜¶åå¯¼æ•°æ„æˆçš„æ–¹é˜µï¼Œæè¿°äº†å‡½æ•°çš„å±€éƒ¨æ›²ç‡ã€‚ <strong>æ„å»ºHessiançŸ©é˜µçš„ç›®çš„æ˜¯ä¸ºäº†ç”Ÿæˆå›¾åƒç¨³å®šçš„è¾¹ç¼˜ç‚¹(çªå˜ç‚¹)</strong></p><p>å¯¹äºäºŒé˜¶æ³°å‹’å…¬å¼çš„äºŒé˜¶æ±‚å¯¼ï¼Œå¯ä»¥è¿‘ä¼¼ä¸ºä¸€ä¸ªäºŒæ¬¡å‹å‡½æ•°ã€‚ä¸­é—´çš„çŸ©é˜µä¸ºé»‘å¡çŸ©é˜µã€‚æ ¹æ®äºŒæ¬¡å‹çŸ©é˜µçš„ç­‰é«˜çº¿å›¾å¯ä»¥çœ‹å‡ºï¼Œç‰¹å¾å€¼è¾ƒå¤§çš„åœ°æ–¹å˜åŒ–é€Ÿåº¦å¿«ï¼Œè€Œç‰¹å¾å€¼è¾ƒå°çš„åœ°æ–¹å˜åŒ–é€Ÿåº¦æ…¢ã€‚</p><p>å¯ä»¥ä½¿ç”¨é»‘å¡çŸ©é˜µæ¥è¿›è¡Œå›¾åƒç°åº¦å›¾çš„ç‰¹å¾ç‚¹æ£€æµ‹ã€‚ç‰¹å¾å€¼è¾ƒå¤§çš„åœ°æ–¹åƒç´ å›¾åƒå˜åŒ–æ˜æ˜¾ï¼Œè€Œç‰¹å¾å€¼å°çš„åœ°æ–¹åƒç´ å›¾åƒå˜åŒ–æ…¢ã€‚surfå³åˆ©ç”¨äº†é»‘å¡æ¥æ£€æµ‹çªå˜ç‚¹å’Œçªå˜çº¿ã€‚</p><h6 id="ç›’å¼æ»¤æ³¢å™¨">ç›’å¼æ»¤æ³¢å™¨</h6><p><img src="https://dingdm.online/heshi.png" alt=""></p><p>1ã€ç»™å®šä¸€å¼ å›¾åƒï¼Œå®½é«˜ä¸ºï¼ˆM,Nï¼‰ï¼Œç¡®å®šå¾…æ±‚çŸ©å½¢æ¨¡æ¿çš„å®½é«˜(m,n)ï¼Œå¦‚å›¾ç´«è‰²çŸ©å½¢ã€‚å›¾ä¸­æ¯ä¸ªé»‘è‰²æ–¹å—ä»£è¡¨ä¸€ä¸ªåƒç´ ï¼Œçº¢è‰²æ–¹å—æ˜¯å‡æƒ³åƒç´ ã€‚</p><p>2ã€å¼€è¾Ÿä¸€æ®µå¤§å°ä¸ºMçš„æ•°ç»„ï¼Œè®°ä¸ºbuff, ç”¨æ¥å­˜å‚¨è®¡ç®—è¿‡ç¨‹çš„ä¸­é—´å˜é‡ï¼Œç”¨çº¢è‰²æ–¹å—è¡¨ç¤º</p><p>3ã€å°†çŸ©å½¢æ¨¡æ¿ï¼ˆç´«è‰²ï¼‰ä»å·¦ä¸Šè§’ï¼ˆ0ï¼Œ0ï¼‰å¼€å§‹ï¼Œé€åƒç´ å‘å³æ»‘åŠ¨ï¼Œåˆ°è¾¾è¡Œæœ«æ—¶ï¼ŒçŸ©å½¢ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œçš„å¼€å¤´ï¼ˆ0ï¼Œ1ï¼‰ï¼Œå¦‚æ­¤åå¤ï¼Œæ¯ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°ä½ç½®æ—¶ï¼Œè®¡ç®—çŸ©å½¢å†…çš„åƒç´ å’Œï¼Œä¿å­˜åœ¨æ•°ç»„Aä¸­ã€‚ä»¥(0,0)ä½ç½®ä¸ºä¾‹è¿›è¡Œè¯´æ˜ï¼šé¦–å…ˆå°†ç»¿è‰²çŸ©å½¢å†…çš„æ¯ä¸€åˆ—åƒç´ æ±‚å’Œï¼Œç»“æœæ”¾åœ¨buffå†…ï¼ˆçº¢è‰²æ–¹å—ï¼‰ï¼Œå†å¯¹è“è‰²çŸ©å½¢å†…çš„åƒç´ æ±‚å’Œï¼Œç»“æœå³ä¸ºç´«è‰²ç‰¹å¾çŸ©å½¢å†…çš„åƒç´ å’Œï¼ŒæŠŠå®ƒå­˜æ”¾åˆ°æ•°ç»„Aä¸­ï¼Œå¦‚æ­¤ä¾¿å®Œæˆäº†ç¬¬ä¸€æ¬¡æ±‚å’Œè¿ç®—ã€‚</p><p>4ã€æ¯æ¬¡ç´«è‰²çŸ©å½¢å‘å³ç§»åŠ¨æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯æ±‚å¯¹åº”çš„è“è‰²çŸ©å½¢çš„åƒç´ å’Œï¼Œæ­¤æ—¶åªè¦æŠŠä¸Šä¸€æ¬¡çš„æ±‚å’Œç»“æœå‡å»è“è‰²çŸ©å½¢å†…çš„ç¬¬ä¸€ä¸ªçº¢è‰²å—ï¼Œå†åŠ ä¸Šå®ƒå³é¢çš„ä¸€ä¸ªçº¢è‰²å—ï¼Œå°±æ˜¯å½“å‰ä½ç½®çš„å’Œäº†ï¼Œç”¨å…¬å¼è¡¨ç¤º sum[i] = sum[i-1] - buff[x-1] + buff[x+m-1]</p><p>5ã€å½“ç´«è‰²çŸ©å½¢ç§»åŠ¨åˆ°è¡Œæœ«æ—¶ï¼Œéœ€è¦å¯¹buffè¿›è¡Œæ›´æ–°ã€‚å› ä¸ºæ•´ä¸ªç»¿è‰²çŸ©å½¢ä¸‹ç§»äº†ä¸€ä¸ªåƒç´ ï¼Œæ‰€ä»¥å¯¹äºæ¯ä¸ªbuff[i], éœ€è¦åŠ ä¸Šä¸€ä¸ªæ–°è¿›æ¥çš„åƒç´ ï¼Œå†å‡å»ä¸€ä¸ªå‡ºå»çš„åƒç´ ï¼Œç„¶åä¾¿å¼€å§‹æ–°çš„ä¸€è¡Œçš„è®¡ç®—äº†ã€‚</p><h5 id="SURFç®—æ³•æ­¥éª¤">SURFç®—æ³•æ­¥éª¤</h5><h6 id="å¯¹å›¾åƒè¿›è¡Œé«˜æ–¯æ»¤æ³¢ï¼Œæ„é€ é»‘å¡çŸ©é˜µ">å¯¹å›¾åƒè¿›è¡Œé«˜æ–¯æ»¤æ³¢ï¼Œæ„é€ é»‘å¡çŸ©é˜µ</h6><p>é€šè¿‡å‰æçŸ¥è¯†é€šè¿‡é»‘å¡çŸ©é˜µæ‰¾åˆ°åƒç´ æå€¼ã€‚</p><h6 id="ç‰¹å¾ç‚¹è¿‡æ»¤">ç‰¹å¾ç‚¹è¿‡æ»¤</h6><p>é€šè¿‡é»‘å¡çŸ©é˜µå¾—åˆ°çš„åƒç´ ç‚¹ä¸åŒå±‚çš„8ä¸ªåƒç´ ç‚¹å’Œä¸åŒå±‚çš„18ä¸ªåƒç´ ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œæ‰¾å‡ºç¨³å®šçš„ç‰¹å¾ç‚¹ã€‚</p><h6 id="è®¡ç®—ç‰¹å¾ç‚¹ä¸»æ–¹å‘">è®¡ç®—ç‰¹å¾ç‚¹ä¸»æ–¹å‘</h6><p><strong>ç»Ÿè®¡ç‰¹å¾ç‚¹åœ†å½¢é‚»åŸŸå†…çš„Harrå°æ³¢ç‰¹å¾ï¼Œå³åœ¨ç‰¹å¾ç‚¹çš„åœ†å½¢é‚»åŸŸå†…ï¼Œç»Ÿè®¡60åº¦æ‰‡å½¢å†…æ‰€æœ‰ç‚¹çš„æ°´å¹³ã€å‚ç›´Harrå°æ³¢ç‰¹å¾æ€»å’Œï¼Œç„¶åæ‰‡å½¢ä»¥0.2å¼§åº¦å¤§å°çš„é—´éš”è¿›è¡Œæ—‹è½¬å¹¶å†æ¬¡ç»Ÿè®¡è¯¥åŒºåŸŸå†…Harrå°æ³¢ç‰¹å¾å€¼ä¹‹åï¼Œæœ€åå°†å€¼æœ€å¤§çš„é‚£ä¸ªæ‰‡å½¢çš„æ–¹å‘ä½œä¸ºè¯¥ç‰¹å¾ç‚¹çš„ä¸»æ–¹å‘ã€‚</strong></p><h6 id="æè¿°ç‰¹å¾ç‚¹">æè¿°ç‰¹å¾ç‚¹</h6><p><strong>æå–ç‰¹å¾ç‚¹å‘¨å›´4Ã—4Ã—4ä¸ªçŸ©å½¢åŒºåŸŸå—ï¼Œæ‰€å–å¾—çŸ©å½¢åŒºåŸŸæ–¹å‘æ˜¯æ²¿ç€ç‰¹å¾ç‚¹çš„ä¸»æ–¹å‘ï¼Œ</strong></p><p><strong>æ¯ä¸ªå­åŒºåŸŸç»Ÿè®¡25ä¸ªåƒç´ ç‚¹æ°´å¹³æ–¹å‘å’Œå‚ç›´æ–¹å‘çš„Haarå°æ³¢ç‰¹å¾ã€‚</strong></p><p><strong>è¯¥Harrå°æ³¢ç‰¹å¾ä¸ºæ°´å¹³æ–¹å‘å€¼ä¹‹å’Œã€å‚ç›´æ–¹å‘å€¼ä¹‹å’Œã€æ°´å¹³æ–¹å‘å€¼ç»å¯¹å€¼ä¹‹å’Œä»¥åŠå‚ç›´æ–¹å‘ç»å¯¹ä¹‹å’Œ4ä¸ªæ–¹å‘ã€‚æŠŠè¿™4ä¸ªå€¼ä½œä¸ºæ¯ä¸ªå­å—åŒºåŸŸçš„ç‰¹å¾å‘é‡ï¼Œæ‰€ä»¥ä¸€å…±æœ‰4Ã—4Ã—4=64ç»´å‘é‡ä½œä¸ºSURFç‰¹å¾çš„æè¿°å­ã€‚</strong></p><pre class=" language-language-python"><code class="language-language-python">    starttime = time.clock()    left = cv2.imread('/Users/dinggongcheng/Downloads/1/left.jpeg')    # left=cv2.resize(left,dsize=(512,512))    left_gray = cv2.cvtColor(left, cv2.COLOR_BGR2GRAY)    right = cv2.imread('/Users/dinggongcheng/Downloads/1/right.jpeg')    # right=cv2.resize(right,dsize=(512,512))    right_gray = cv2.cvtColor(right, cv2.COLOR_BGR2GRAY)    # æå–å·¦å³å›¾åƒçš„surfç‰¹å¾ç‚¹    detector = cv2.xfeatures2d_SURF.create(hessianThreshold=400)    left_kps, left_dess = detector.detectAndCompute(left_gray, None)    right_kps, right_dess = detector.detectAndCompute(right_gray, None)</code></pre><h5 id="KNNç‰¹å¾åŒ¹é…ç®—æ³•">KNNç‰¹å¾åŒ¹é…ç®—æ³•</h5><p>KNNç®—æ³•çš„ä¸‰è¦ç´ ï¼škå€¼çš„é€‰å–ï¼Œè·ç¦»åº¦é‡çš„æ–¹å¼å’Œåˆ†ç±»å†³ç­–è§„åˆ™ã€‚</p><p>kå€¼çš„é€‰æ‹©ï¼Œæ²¡æœ‰ä¸€ä¸ªå›ºå®šçš„ç»éªŒï¼Œä¸€èˆ¬æ ¹æ®æ ·æœ¬çš„åˆ†å¸ƒï¼Œé€‰æ‹©ä¸€ä¸ªè¾ƒå°çš„å€¼ï¼Œå¯ä»¥é€šè¿‡äº¤å‰éªŒè¯é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„kå€¼ã€‚</p><p>ä½¿ç”¨æ¬§å¼è·ç¦»è®¡ç®—é¢†åŸŸå†…ä¸å½“å‰ç‚¹çš„è·ç¦»ï¼Œå¹¶é€’å¢æ’åº</p><p><img src="https://dingdm.online/oushi.png" alt=""></p><h6 id="knnçš„ä¼˜åŒ–ç®—æ³•kdæ ‘å’Œkdçƒ">knnçš„ä¼˜åŒ–ç®—æ³•kdæ ‘å’Œkdçƒ</h6><p>kdæ ‘</p><p>æ¯”å¦‚æˆ‘ä»¬æœ‰äºŒç»´æ ·æœ¬6ä¸ªï¼Œ{(2,3)ï¼Œ(5,4)ï¼Œ(9,6)ï¼Œ(4,7)ï¼Œ(8,1)ï¼Œ(7,2)}ï¼Œæ„å»ºkdæ ‘çš„å…·ä½“æ­¥éª¤ä¸ºï¼š</p><p>1ï¼‰æ‰¾åˆ°åˆ’åˆ†çš„ç‰¹å¾ã€‚6ä¸ªæ•°æ®ç‚¹åœ¨xï¼Œyç»´åº¦ä¸Šçš„æ•°æ®æ–¹å·®åˆ†åˆ«ä¸º6.97ï¼Œ5.37ï¼Œæ‰€ä»¥åœ¨xè½´ä¸Šæ–¹å·®æ›´å¤§ï¼Œç”¨ç¬¬1ç»´ç‰¹å¾å»ºæ ‘ã€‚</p><p>2ï¼‰ç¡®å®šåˆ’åˆ†ç‚¹ï¼ˆ7,2ï¼‰ã€‚æ ¹æ®xç»´ä¸Šçš„å€¼å°†æ•°æ®æ’åºï¼Œ6ä¸ªæ•°æ®çš„ä¸­å€¼(æ‰€è°“ä¸­å€¼ï¼Œå³ä¸­é—´å¤§å°çš„å€¼)ä¸º7ï¼Œæ‰€ä»¥åˆ’åˆ†ç‚¹çš„æ•°æ®æ˜¯ï¼ˆ7,2ï¼‰ã€‚è¿™æ ·ï¼Œè¯¥èŠ‚ç‚¹çš„åˆ†å‰²è¶…å¹³é¢å°±æ˜¯é€šè¿‡ï¼ˆ7,2ï¼‰å¹¶å‚ç›´äºï¼šåˆ’åˆ†ç‚¹ç»´åº¦çš„ç›´çº¿x=7ï¼›</p><p>3ï¼‰ç¡®å®šå·¦å­ç©ºé—´å’Œå³å­ç©ºé—´ã€‚ åˆ†å‰²è¶…å¹³é¢x=7å°†æ•´ä¸ªç©ºé—´åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šx&lt;=7çš„éƒ¨åˆ†ä¸ºå·¦å­ç©ºé—´ï¼ŒåŒ…å«3ä¸ªèŠ‚ç‚¹={(2,3),(5,4),(4,7)}ï¼›å¦ä¸€éƒ¨åˆ†ä¸ºå³å­ç©ºé—´ï¼ŒåŒ…å«2ä¸ªèŠ‚ç‚¹={(9,6)ï¼Œ(8,1)}ã€‚</p><p>4ï¼‰ç”¨åŒæ ·çš„åŠæ³•åˆ’åˆ†å·¦å­æ ‘çš„èŠ‚ç‚¹{(2,3),(5,4),(4,7)}å’Œå³å­æ ‘çš„èŠ‚ç‚¹{(9,6)ï¼Œ(8,1)}ã€‚æœ€ç»ˆå¾—åˆ°KDæ ‘ã€‚</p><p>å½“æˆ‘ä»¬ç”ŸæˆKDæ ‘ä»¥åï¼Œå°±å¯ä»¥å»é¢„æµ‹æµ‹è¯•é›†é‡Œé¢çš„æ ·æœ¬ç›®æ ‡ç‚¹äº†ã€‚å¯¹äºä¸€ä¸ªç›®æ ‡ç‚¹ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨KDæ ‘é‡Œé¢æ‰¾åˆ°åŒ…å«ç›®æ ‡ç‚¹çš„å¶å­èŠ‚ç‚¹ã€‚ä»¥ç›®æ ‡ç‚¹ä¸ºåœ†å¿ƒï¼Œä»¥ç›®æ ‡ç‚¹åˆ°å¶å­èŠ‚ç‚¹æ ·æœ¬å®ä¾‹çš„è·ç¦»ä¸ºåŠå¾„ï¼Œå¾—åˆ°ä¸€ä¸ªè¶…çƒä½“ï¼Œæœ€è¿‘é‚»çš„ç‚¹ä¸€å®šåœ¨è¿™ä¸ªè¶…çƒä½“å†…éƒ¨ã€‚ç„¶åè¿”å›å¶å­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œæ£€æŸ¥å¦ä¸€ä¸ªå­èŠ‚ç‚¹åŒ…å«çš„è¶…çŸ©å½¢ä½“æ˜¯å¦å’Œè¶…çƒä½“ç›¸äº¤ï¼Œå¦‚æœç›¸äº¤å°±åˆ°è¿™ä¸ªå­èŠ‚ç‚¹å¯»æ‰¾æ˜¯å¦æœ‰æ›´åŠ è¿‘çš„è¿‘é‚»,æœ‰çš„è¯å°±æ›´æ–°æœ€è¿‘é‚»ã€‚å¦‚æœä¸ç›¸äº¤é‚£å°±ç®€å•äº†ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å›çˆ¶èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œåœ¨å¦ä¸€ä¸ªå­æ ‘ç»§ç»­æœç´¢æœ€è¿‘é‚»ã€‚å½“å›æº¯åˆ°æ ¹èŠ‚ç‚¹æ—¶ï¼Œç®—æ³•ç»“æŸï¼Œæ­¤æ—¶ä¿å­˜çš„æœ€è¿‘é‚»èŠ‚ç‚¹å°±æ˜¯æœ€ç»ˆçš„æœ€è¿‘é‚»ã€‚</p><p>ä»ä¸Šé¢çš„æè¿°å¯ä»¥çœ‹å‡ºï¼ŒKDæ ‘åˆ’åˆ†åå¯ä»¥å¤§å¤§å‡å°‘æ— æ•ˆçš„æœ€è¿‘é‚»æœç´¢ï¼Œå¾ˆå¤šæ ·æœ¬ç‚¹ç”±äºæ‰€åœ¨çš„è¶…çŸ©å½¢ä½“å’Œè¶…çƒä½“ä¸ç›¸äº¤ï¼Œæ ¹æœ¬ä¸éœ€è¦è®¡ç®—è·ç¦»ã€‚å¤§å¤§èŠ‚çœäº†è®¡ç®—æ—¶é—´ã€‚</p><p>æˆ‘ä»¬ç”¨å»ºç«‹çš„KDæ ‘ï¼Œæ¥çœ‹å¯¹ç‚¹(2,4.5)æ‰¾æœ€è¿‘é‚»çš„è¿‡ç¨‹ã€‚</p><p>å…ˆè¿›è¡ŒäºŒå‰æŸ¥æ‰¾ï¼Œå…ˆä»ï¼ˆ7,2ï¼‰æŸ¥æ‰¾åˆ°ï¼ˆ5,4ï¼‰èŠ‚ç‚¹ï¼Œåœ¨è¿›è¡ŒæŸ¥æ‰¾æ—¶æ˜¯ç”±y = 4ä¸ºåˆ†å‰²è¶…å¹³é¢çš„ï¼Œç”±äºæŸ¥æ‰¾ç‚¹ä¸ºyå€¼ä¸º4.5ï¼Œå› æ­¤è¿›å…¥å³å­ç©ºé—´æŸ¥æ‰¾åˆ°ï¼ˆ4,7ï¼‰ï¼Œå½¢æˆæœç´¢è·¯å¾„&lt;(7,2)ï¼Œ(5,4)ï¼Œ(4,7)&gt;ï¼Œä½† ï¼ˆ4,7ï¼‰ä¸ç›®æ ‡æŸ¥æ‰¾ç‚¹çš„è·ç¦»ä¸º3.202ï¼Œè€Œï¼ˆ5,4ï¼‰ä¸æŸ¥æ‰¾ç‚¹ä¹‹é—´çš„è·ç¦»ä¸º3.041ï¼Œæ‰€ä»¥ï¼ˆ5,4ï¼‰ä¸ºæŸ¥è¯¢ç‚¹çš„æœ€è¿‘ç‚¹ï¼› ä»¥ï¼ˆ2ï¼Œ4.5ï¼‰ä¸ºåœ†å¿ƒï¼Œä»¥3.041ä¸ºåŠå¾„ä½œåœ†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å¯è§è¯¥åœ†å’Œy = 4è¶…å¹³é¢äº¤å‰²ï¼Œæ‰€ä»¥éœ€è¦è¿›å…¥ï¼ˆ5,4ï¼‰å·¦å­ç©ºé—´è¿›è¡ŒæŸ¥æ‰¾ï¼Œä¹Ÿå°±æ˜¯å°†ï¼ˆ2,3ï¼‰èŠ‚ç‚¹åŠ å…¥æœç´¢è·¯å¾„ä¸­å¾—&lt;(7,2)ï¼Œ(2,3)&gt;ï¼›äºæ˜¯æ¥ç€æœç´¢è‡³ï¼ˆ2,3ï¼‰å¶å­èŠ‚ç‚¹ï¼Œï¼ˆ2,3ï¼‰è·ç¦»ï¼ˆ2,4.5ï¼‰æ¯”ï¼ˆ5,4ï¼‰è¦è¿‘ï¼Œæ‰€ä»¥æœ€è¿‘é‚»ç‚¹æ›´æ–°ä¸ºï¼ˆ2ï¼Œ3ï¼‰ï¼Œæœ€è¿‘è·ç¦»æ›´æ–°ä¸º1.5ï¼›å›æº¯æŸ¥æ‰¾è‡³ï¼ˆ5,4ï¼‰ï¼Œç›´åˆ°æœ€åå›æº¯åˆ°æ ¹ç»“ç‚¹ï¼ˆ7,2ï¼‰çš„æ—¶å€™ï¼Œä»¥ï¼ˆ2,4.5ï¼‰ä¸ºåœ†å¿ƒ1.5ä¸ºåŠå¾„ä½œåœ†ï¼Œå¹¶ä¸å’Œx = 7åˆ†å‰²è¶…å¹³é¢äº¤å‰²ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è‡³æ­¤ï¼Œæœç´¢è·¯å¾„å›æº¯å®Œï¼Œè¿”å›æœ€è¿‘é‚»ç‚¹ï¼ˆ2,3ï¼‰ï¼Œæœ€è¿‘è·ç¦»1.5ã€‚</p><pre class=" language-language-python"><code class="language-language-python">    # åˆ©ç”¨knnå¯¹å·¦å³å›¾åƒçš„ç‰¹å¾ç‚¹è¿›è¡ŒåŒ¹é…    matcher = cv2.FlannBasedMatcher_create()    knn_matchers = matcher.knnMatch(left_dess, right_dess, 2)</code></pre><h5 id="RANSACç®—æ³•">RANSACç®—æ³•</h5><p>ransacç®—æ³•å»é™¤ç‰¹å¾ç‚¹åŒ¹é…çš„å™ªå£°å°è±¡ã€‚</p><p>RANSACç®—æ³•çš„å…·ä½“æè¿°æ˜¯ï¼šç»™å®šNä¸ªæ•°æ®ç‚¹ç»„æˆçš„é›†åˆPï¼Œå‡è®¾é›†åˆä¸­å¤§å¤šæ•°çš„ç‚¹éƒ½æ˜¯å¯ä»¥é€šè¿‡ä¸€ä¸ªæ¨¡å‹æ¥äº§ç”Ÿçš„ï¼Œä¸”æœ€å°‘é€šè¿‡nä¸ªç‚¹ï¼ˆn&lt;Nï¼‰å¯ä»¥æ‹Ÿåˆå‡ºæ¨¡å‹çš„å‚æ•°ï¼Œåˆ™å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„è¿­ä»£æ–¹å¼æ‹Ÿåˆè¯¥å‚æ•°ã€‚<br>å¯¹ä¸‹é¢çš„æ“ä½œæ‰§è¡Œkkæ¬¡ï¼š<br>ï¼ˆ1ï¼‰ä»Pä¸­éšæœºé€‰æ‹©nä¸ªæ•°æ®ç‚¹ï¼›<br>ï¼ˆ2ï¼‰ç”¨è¿™nä¸ªæ•°æ®ç‚¹æ‹Ÿåˆå‡ºä¸€ä¸ªæ¨¡å‹Mï¼›<br>ï¼ˆ3ï¼‰å¯¹Pä¸­å‰©ä½™çš„æ•°æ®ç‚¹ï¼Œè®¡ç®—æ¯ä¸ªç‚¹ä¸æ¨¡å‹Mçš„è·ç¦»ï¼Œè·ç¦»è¶…è¿‡é˜ˆå€¼çš„åˆ™è®¤å®šä¸ºå±€å¤–ç‚¹ï¼Œä¸è¶…è¿‡é˜ˆå€¼çš„è®¤å®šä¸ºå±€å†…ç‚¹ï¼Œå¹¶è®°å½•è¯¥æ¨¡å‹Mæ‰€å¯¹åº”çš„å±€å†…ç‚¹çš„å€¼mï¼›<br>è¿­ä»£kæ¬¡ä»¥åï¼Œé€‰æ‹©mæœ€å¤§çš„æ¨¡å‹Mä½œä¸ºæ‹Ÿåˆçš„ç»“æœã€‚<br>å› ä¸ºåœ¨å®é™…åº”ç”¨ä¸­Nçš„å€¼é€šå¸¸ä¼šå¾ˆå¤§ï¼Œé‚£ä¹ˆä»å…¶ä¸­ä»»é€‰nä¸ªæ•°æ®ç‚¹çš„ç»„åˆå°±ä¼šå¾ˆå¤§ï¼Œå¦‚æœå¯¹æ‰€æœ‰ç»„åˆéƒ½è¿›è¡Œä¸Šé¢çš„æ“ä½œè¿ç®—é‡å°±ä¼šå¾ˆå¤§ï¼Œå› æ­¤å¯¹äºkçš„é€‰æ‹©å°±å¾ˆé‡è¦ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåªè¦ä¿è¯æ¨¡å‹ä¼°è®¡éœ€è¦çš„nä¸ªç‚¹éƒ½æ˜¯ç‚¹çš„æ¦‚ç‡è¶³å¤Ÿé«˜å³å¯ã€‚å› æ­¤è®¾wä¸ºNä¸ªæ•°æ®ä¸­å±€å†…ç‚¹çš„æ¯”ä¾‹ï¼Œzä¸ºè¿›è¡Œkæ¬¡é€‰å–åï¼Œè‡³å°‘æœ‰ä¸€æ¬¡é€‰å–çš„nä¸ªç‚¹éƒ½æ˜¯å±€å†…ç‚¹çš„æ¦‚ç‡ã€‚åˆ™æœ‰</p><p><img src="https://dingdm.online/gailvone.png" alt=""></p><p>å…¶ä¸­1âˆ’w^nè¡¨ç¤ºä¸€æ¬¡é€‰å–ä¸éƒ½æ˜¯å±€å†…ç‚¹çš„æ¦‚ç‡ï¼Œ(1âˆ’w^n)^kè¡¨ç¤ºkæ¬¡é€‰å–ä¸­æ²¡æœ‰ä¸€æ¬¡éƒ½æ˜¯å±€å†…ç‚¹çš„æ¦‚ç‡ã€‚<br>åˆ™æœ‰</p><p><img src="https://dingdm.online/gailvone.png" alt=""></p><p>è¿™é‡Œ zzä¸€èˆ¬è¦æ±‚æ»¡è¶³å¤§äº95%å³å¯ã€‚</p><p>é€šè¿‡å››å¯¹åŒ¹é…ç‚¹è¿˜åŸHçŸ©é˜µã€‚</p><p><img src="https://dingdm.online/hm.png" alt=""></p><pre class=" language-language-python"><code class="language-language-python">    # æŒ‘å‡ºå¥½çš„åŒ¹é…ç‚¹    for m, n in knn_matchers:        if m.distance < 0.5 * n.distance:            good_keypoints.append(m)    left_points = np.zeros(shape=(len(good_keypoints), 2), dtype=np.float32)    right_points = np.zeros(shape=(len(good_keypoints), 2), dtype=np.float32)    outimg = cv2.drawMatches(left, left_kps, right, right_kps, good_keypoints,None)    #cv2.imshow('knn',outimg)    #cv2.waitKey(0)    for i in range(len(good_keypoints)):        left_points[i][0] = left_kps[good_keypoints[i].queryIdx].pt[0]        left_points[i][1] = left_kps[good_keypoints[i].queryIdx].pt[1]        right_points[i][0] = right_kps[good_keypoints[i].trainIdx].pt[0]        right_points[i][1] = right_kps[good_keypoints[i].trainIdx].pt[1]    # æ±‚å–å•åº”çŸ©é˜µ    H, _ = cv2.findHomography(right_points, left_points)</code></pre><h5 id="æ‹¼æ¥å›¾åƒçš„é€è§†å˜æ¢ï¼Œæ±‚å‡ºå››ä¸ªé€è§†ç‚¹å³å¯ã€‚">æ‹¼æ¥å›¾åƒçš„é€è§†å˜æ¢ï¼Œæ±‚å‡ºå››ä¸ªé€è§†ç‚¹å³å¯ã€‚</h5><pre class=" language-language-python"><code class="language-language-python"># æ±‚å‡ºå³å›¾åƒçš„é€è§†å˜åŒ–é¡¶ç‚¹warp_point = warp_corner(H, right)# æ±‚å‡ºå³å›¾åƒçš„é€è§†å˜åŒ–å›¾åƒimagewarp = cv2.warpPerspective(right, H, (left.shape[1] + right.shape[1], left.shape[0]))</code></pre><h5 id="opencv-stitcher-apiä½¿ç”¨">opencv stitcher apiä½¿ç”¨</h5><pre class=" language-language-python"><code class="language-language-python">import cv2import timestart = time.clock()st = time.time()img1 = cv2.imread('/Users/dinggongcheng/Downloads/1/4.jpeg')img2 = cv2.imread('/Users/dinggongcheng/Downloads/1/3.jpeg')stitcher = cv2.createStitcher(True)(_result, pano) = stitcher.stitch((img1, img2))end = time.clock()et = time.time()print(et - st)print(end - start)cv2.imshow('pic',pano)cv2.waitKey(0)</code></pre><h5 id="ORBç®—æ³•æ­¥éª¤">ORBç®—æ³•æ­¥éª¤</h5><h6 id="FASTå…·ä½“è®¡ç®—è¿‡ç¨‹">FASTå…·ä½“è®¡ç®—è¿‡ç¨‹</h6><ol><li>ä»å›¾ç‰‡ä¸­é€‰å–ä¸€ä¸ªåƒç´ ç‚¹Pï¼Œåˆ¤æ–­å®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªç‰¹å¾ç‚¹ã€‚æˆ‘ä»¬é¦–å…ˆæŠŠå®ƒçš„å¯†åº¦ï¼ˆå³ç°åº¦å€¼ï¼‰è®¾ä¸ºIpã€‚</li><li>è®¾å®šä¸€ä¸ªåˆé€‚çš„é˜™å€¼t ï¼šå½“2ä¸ªç‚¹çš„ç°åº¦å€¼ä¹‹å·®çš„ç»å¯¹å€¼å¤§äºtæ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™2ä¸ªç‚¹ä¸ç›¸åŒã€‚</li><li>è€ƒè™‘è¯¥åƒç´ ç‚¹å‘¨å›´çš„16ä¸ªåƒç´ ã€‚</li><li>ç°åœ¨å¦‚æœè¿™16ä¸ªç‚¹ä¸­æœ‰è¿ç»­çš„nä¸ªç‚¹éƒ½å’Œé€‰å®šçš„åƒç´ ç‚¹ä¸åŒï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªè§’ç‚¹ã€‚ è¿™é‡Œnè®¾å®šä¸º12ã€‚</li><li>æˆ‘ä»¬ç°åœ¨æå‡ºä¸€ä¸ªé«˜æ•ˆçš„æµ‹è¯•ï¼Œæ¥å¿«é€Ÿæ’é™¤ä¸€å¤§éƒ¨åˆ†éç‰¹å¾ç‚¹çš„ç‚¹ã€‚è¯¥æµ‹è¯•ä»…ä»…æ£€æŸ¥åœ¨ä½ç½®1ã€9ã€5å’Œ13å››ä¸ªä½ç½®çš„åƒç´ ï¼ˆé¦–å…ˆæ£€æŸ¥1å’Œ9ï¼Œçœ‹å®ƒä»¬æ˜¯å¦å’Œç‚¹ç›¸åŒã€‚å¦‚æœæ˜¯ï¼Œå†æ£€æŸ¥5å’Œ13ï¼‰ã€‚å¦‚æœæ˜¯ä¸€ä¸ªè§’ç‚¹ï¼Œé‚£ä¹ˆä¸Šè¿°å››ä¸ªåƒç´ ç‚¹ä¸­è‡³å°‘æœ‰3ä¸ªåº”è¯¥å’Œç‚¹ç›¸åŒã€‚å¦‚æœéƒ½ä¸æ»¡è¶³ï¼Œé‚£ä¹ˆä¸å¯èƒ½æ˜¯ä¸€ä¸ªè§’ç‚¹ã€‚</li></ol><p>fastç®—æ³•çš„æ•°å­¦è§£æ</p><p><a href="https://blog.csdn.net/qq_37764129/article/details/80970032" target="_blank" rel="noopener">https://blog.csdn.net/qq_37764129/article/details/80970032</a></p><h6 id="ç‰¹å¾ç‚¹æè¿°">ç‰¹å¾ç‚¹æè¿°</h6><p>1.ä»¥å…³é”®ç‚¹Pä¸ºåœ†å¿ƒï¼Œä»¥dä¸ºåŠå¾„åšåœ†Oã€‚</p><p>2.åœ¨åœ†Oå†…æŸä¸€æ¨¡å¼é€‰å–Nä¸ªç‚¹å¯¹ã€‚è¿™é‡Œä¸ºæ–¹ä¾¿è¯´æ˜ï¼ŒN=4ï¼Œå®é™…åº”ç”¨ä¸­Nå¯ä»¥å–512.</p><p>å‡è®¾å½“å‰é€‰å–çš„4ä¸ªç‚¹å¯¹å¦‚ä¸Šå›¾æ‰€ç¤ºåˆ†åˆ«æ ‡è®°ä¸ºï¼šp1(A,B) p2(A,B) p3(A,B) p4(A,B)</p><p>3.å®šä¹‰æ“ä½œT</p><p>Aç‚¹çš„ç°åº¦å€¼å¤§äºBç‚¹ï¼ŒTä¸º1ï¼Œåä¹‹ä¸º0ï¼›</p><p>4.åˆ†åˆ«å¯¹å·²é€‰å–çš„ç‚¹å¯¹è¿›è¡ŒTæ“ä½œï¼Œå°†å¾—åˆ°çš„ç»“æœè¿›è¡Œç»„åˆã€‚æœ€ç»ˆå¾—åˆ°å¯¹åº”çš„äºŒè¿›åˆ¶ç¼–ç æ¥è¡¨ç¤ºç‰¹å¾ç‚¹ã€‚</p><p>BRISKç®—æ³•æ•°å­¦è§£æ</p><p><a href="https://blog.csdn.net/weixin_40196271/article/details/84143545" target="_blank" rel="noopener">https://blog.csdn.net/weixin_40196271/article/details/84143545</a></p><p>ORBçš„ç›¸ä¼¼åº¦ä¸º90%</p><pre class=" language-language-python"><code class="language-language-python">    # æå–å·¦å³å›¾åƒçš„ORBç‰¹å¾ç‚¹    detector = cv2.ORB.create()    left_kps, left_dess = detector.detectAndCompute(left_gray, None)    right_kps, right_dess = detector.detectAndCompute(right_gray, None)</code></pre><pre class=" language-language-python"><code class="language-language-python">    # åˆ©ç”¨knnå¯¹å·¦å³å›¾åƒçš„ç‰¹å¾ç‚¹è¿›è¡ŒåŒ¹é…    bf = cv2.BFMatcher(cv2.NORM_HAMMING, crossCheck=False)    knn_matchers = bf.knnMatch(left_dess, right_dess, k=2)</code></pre><pre class=" language-language-python"><code class="language-language-python">    # æŒ‘å‡ºå¥½çš„åŒ¹é…ç‚¹    for m in range(len(knn_matchers) - 1):        if knn_matchers[m][0].distance < 0.9 * knn_matchers[m][1].distance:            good_keypoints.append(knn_matchers[m])</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒå¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›¾åƒæ‹¼æ¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºäº‘æœåŠ¡å™¨çš„è¿œç¨‹è¿æ¥æ­å»º</title>
      <link href="/2021/08/26/ji-yu-yun-fu-wu-qi-de-yuan-cheng-lian-jie-da-jian/"/>
      <url>/2021/08/26/ji-yu-yun-fu-wu-qi-de-yuan-cheng-lian-jie-da-jian/</url>
      
        <content type="html"><![CDATA[<h3 id="åŸºäºäº‘æœåŠ¡å™¨çš„è¿œç¨‹è¿æ¥æ­å»º">åŸºäºäº‘æœåŠ¡å™¨çš„è¿œç¨‹è¿æ¥æ­å»º</h3><p>æœ¬æ¥æ‰“ç®—ç›´æ¥è·¯ç”±å™¨çš„ï¼Œä½†æ˜¯æ¢…æ—çš„frpcè¦è™šæ‹Ÿå†…å­˜ï¼Œè€Œæˆ‘æ‰‹ä¸Šåˆæ²¡æœ‰å¥½çš„uç›˜ï¼Œæ‰€ä»¥å…ˆç”¨æœ€ç›´æ¥çš„å§ã€‚</p><h4 id="åŸŸåè§£æ">åŸŸåè§£æ</h4><p><img src="http://dingdm.online/yuming.png" alt=""></p><h4 id="æœåŠ¡å™¨ç«¯frpcè®¾ç½®">æœåŠ¡å™¨ç«¯frpcè®¾ç½®</h4><p>ä¸‹è½½è‡ªå·±å¯¹åº”æœåŠ¡å™¨ç³»ç»Ÿçš„æ–‡ä»¶ï¼Œä½¿ç”¨filezillaè¿›è¡Œä¸Šä¼ ã€‚æˆ‘è¿™é‡Œçš„æœåŠ¡å™¨çš„ç³»ç»Ÿä¸ºubuntuã€‚</p><p><a href="https://github.com/fatedier/frp/releases/download/v0.37.1/frp_0.37.1_linux_amd64.tar.gz" target="_blank" rel="noopener">frp_0.37.1_linux_amd64.tar.gz</a></p><p>è§£å‹åä¿®æ”¹é…ç½®æ–‡ä»¶frpc.iniä¸­çš„commonéƒ¨åˆ†ï¼Œè®¾ç½®ç«¯å£ä¸º7000ã€‚</p><pre class=" language-language-ini"><code class="language-language-ini">[common]bind_port = 7000</code></pre><p><strong>æ³¨æ„ï¼šéœ€è¦åœ¨æœåŠ¡å™¨çš„å®‰å…¨ç»„ä¸­æ”¾è¡Œ7000å’Œ3389è¿œç¨‹è¿æ¥ç«¯å£ï¼Œä½¿ç”¨å…¶ä»–ç«¯å£åˆ™æ”¾è¡Œå…¶ä»–ç«¯å£ã€‚</strong></p><pre class=" language-language-shell"><code class="language-language-shell">nohup ./frps -c frps.ini &</code></pre><p>åå°å¯åŠ¨æœåŠ¡å™¨ç«¯frpcæœåŠ¡ï¼Œexité€€å‡ºsshå³å¯ã€‚</p><h4 id="å®¢æˆ·ç«¯frpcè®¾ç½®">å®¢æˆ·ç«¯frpcè®¾ç½®</h4><p><a href="https://github.com/fatedier/frp/releases/download/v0.37.1/frp_0.37.1_windows_386.zip" target="_blank" rel="noopener">frp_0.37.1_windows_386.zip</a></p><p>ä¸ªäººçš„å®¢æˆ·ç«¯ä¸ºwindows</p><p>è§£å‹åä¿®æ”¹é…ç½®æ–‡ä»¶frpc.iniçš„commonéƒ¨åˆ†ï¼Œå¹¶æ·»åŠ è¿œç¨‹è¿æ¥é…ç½®ä¿¡æ¯</p><pre class=" language-language-ini"><code class="language-language-ini">[common]server_addr = è‡ªå·±çš„ipåœ°å€server_port = 7000 #è‡ªå·±ä½¿ç”¨çš„ç«¯å£å·</code></pre><p>æ·»åŠ çš„é…ç½®</p><pre class=" language-language-ini"><code class="language-language-ini">[dinggc] ä¸€ä¸ªæè¿°ç¬¦å· è‡ªå®šä¹‰type = tcplocal_ip = 127.0.0.1local_port = 3389 #è¿œç¨‹æ§åˆ¶çš„ç«¯å£remote_port = 3389 #è‡ªå®šä¹‰ç«¯å£ï¼Œç”¨äºåæœŸè¿œç¨‹æ§åˆ¶ä½¿ç”¨</code></pre><h5 id="ä½¿ç”¨winswå°†å®¢æˆ·ç«¯frpcæ³¨å†Œä¸ºæœåŠ¡è‡ªå¯åŠ¨">ä½¿ç”¨winswå°†å®¢æˆ·ç«¯frpcæ³¨å†Œä¸ºæœåŠ¡è‡ªå¯åŠ¨</h5><p><a href="https://github.com/winsw/winsw/releases/download/v3.0.0-alpha.10/WinSW-x64.exe" target="_blank" rel="noopener">WinSW-x64.exe</a></p><p>åˆ›å»ºä¸exeåŒååŒç›®å½•çš„é…ç½®æ–‡ä»¶xml</p><p><img src="http://dingdm.online/winsw.png" alt=""></p><pre class=" language-language-xml"><code class="language-language-xml"><service><!-- è¯¥æœåŠ¡çš„å”¯ä¸€æ ‡è¯† -->    <id>frp</id>    <!-- è¯¥æœåŠ¡çš„åç§° -->    <name>frp_0.37.1_windows_386.zip</name>    <!-- è¯¥æœåŠ¡çš„æè¿° -->    <description>frpcå®¢æˆ·ç«¯æœåŠ¡</description>    <!-- è¦è¿è¡Œçš„ç¨‹åºè·¯å¾„ -->    <executable>D:\frpc\frpc.exe</executable>    <!-- æºå¸¦çš„å‚æ•° -->    <arguments>-c frpc.ini</arguments>    <!-- ç¬¬ä¸€æ¬¡å¯åŠ¨å¤±è´¥ 60ç§’é‡å¯ -->    <onfailure action="restart" delay="60 sec"/>    <!-- ç¬¬äºŒæ¬¡å¯åŠ¨å¤±è´¥ 120ç§’åé‡å¯ -->    <onfailure action="restart" delay="120 sec"/>    <!-- æ—¥å¿—æ¨¡å¼ -->    <logmode>append</logmode>    <!-- æŒ‡å®šæ—¥å¿—æ–‡ä»¶ç›®å½•(ç›¸å¯¹äºexecutableé…ç½®çš„è·¯å¾„) -->    <logpath>logs</logpath></service></code></pre><p>æ³¨å†ŒæœåŠ¡å³å¯</p><pre class=" language-language-shell"><code class="language-language-shell">winsw.exe install</code></pre><p>é€šè¿‡æ§åˆ¶å°å³å¯ctrl+få³å¯æœç´¢frpcæœåŠ¡ã€‚</p><h4 id="è¿œç¨‹è®¿é—®">è¿œç¨‹è®¿é—®</h4><p>ä½¿ç”¨åŸŸå+ç«¯å£çš„å½¢å¼å³å¯è¿œç¨‹è®¿é—®è‡ªå·±çš„ç”µè„‘ã€‚æˆ‘è¿™åƒåœ¾1Mçš„æœåŠ¡å™¨å¡æ­»æˆ‘äº†ã€‚ç­‰å¼€å­¦ä¹°uç›˜ç”¨è·¯ç”±å™¨å†…ç½‘ç©¿é€å§ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> frpc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£æ”¾åŒæ‰‹ï¼Œä»æˆ‘åšèµ·</title>
      <link href="/2021/06/20/jie-fang-shuang-shou-cong-wo-zuo-qi/"/>
      <url>/2021/06/20/jie-fang-shuang-shou-cong-wo-zuo-qi/</url>
      
        <content type="html"><![CDATA[<h3 id="è§£æ”¾åŒæ‰‹ï¼Œä»æˆ‘åšèµ·">è§£æ”¾åŒæ‰‹ï¼Œä»æˆ‘åšèµ·</h3><h4 id="æœ‰çˆ±è‡ªå–">æœ‰çˆ±è‡ªå–</h4><h4 id="æ˜æ—¥æ–¹èˆŸ">æ˜æ—¥æ–¹èˆŸ</h4><p><a href="https://github.com/SprBoot/arknight" target="_blank" rel="noopener">https://github.com/SprBoot/arknight</a></p><pre class=" language-language-python"><code class="language-language-python">import utilimport timeimport randomtotal = int(input("è¯·è¾“å…¥å½“å‰æ€»ä½“åŠ›:"))need = int(input("è¯·è¾“å…¥æ¯æ¬¡åˆ·å›¾æ‰€éœ€ä½“åŠ›:"))number = int(total / need)# é¦–æ¬¡æ¨¡æ‹Ÿç‚¹å‡»å¼€å§‹è¿è¡Œutil.singleClick('./current.jpg', "./single.jpg", "Qt5QWindowIcon", "æ˜æ—¥æ–¹èˆŸ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')time.sleep(1)util.singleClick('./startMission.jpg', "./start.jpg","Qt5QWindowIcon", "æ˜æ—¥æ–¹èˆŸ - MuMuæ¨¡æ‹Ÿå™¨",'startMission.jpg')second = util.getStep("Qt5QWindowIcon", "æ˜æ—¥æ–¹èˆŸ - MuMuæ¨¡æ‹Ÿå™¨", "./single.jpg","./start.jpg")initial = 2while initial <= number:    time.sleep(second + random.uniform(1.2,2.8))    util.turn("Qt5QWindowIcon", "æ˜æ—¥æ–¹èˆŸ - MuMuæ¨¡æ‹Ÿå™¨","./single.jpg","./start.jpg")    initial = initial + 1print('æœ¬æ¬¡åˆ·å›¾ç»“æŸï¼Œä¸€å…±åˆ·å›¾{}æ¬¡'.format(number))</code></pre><pre class=" language-language-python"><code class="language-language-python">#å¯¹åå°çª—å£æˆªå›¾import win32gui, win32ui, win32conimport cv2import numpyimport pyautoguiimport timeimport randomdef img(cls,name):    # è·å–åå°çª—å£çš„å¥æŸ„ï¼Œæ³¨æ„åå°çª—å£ä¸èƒ½æœ€å°åŒ–    hWnd = win32gui.FindWindow(cls,name)    # è·å–å¥æŸ„çª—å£çš„å¤§å°ä¿¡æ¯    left, top, right, bot = win32gui.GetWindowRect(hWnd)    width = right - left    height = bot - top    # è¿”å›å¥æŸ„çª—å£çš„è®¾å¤‡ç¯å¢ƒï¼Œè¦†ç›–æ•´ä¸ªçª—å£ï¼ŒåŒ…æ‹¬éå®¢æˆ·åŒºï¼Œæ ‡é¢˜æ ï¼Œèœå•ï¼Œè¾¹æ¡†    hWndDC = win32gui.GetWindowDC(hWnd)    # åˆ›å»ºè®¾å¤‡æè¿°è¡¨    mfcDC = win32ui.CreateDCFromHandle(hWndDC)    # åˆ›å»ºå†…å­˜è®¾å¤‡æè¿°è¡¨    saveDC = mfcDC.CreateCompatibleDC()    # åˆ›å»ºä½å›¾å¯¹è±¡å‡†å¤‡ä¿å­˜å›¾ç‰‡    saveBitMap = win32ui.CreateBitmap()    # ä¸ºbitmapå¼€è¾Ÿå­˜å‚¨ç©ºé—´    saveBitMap.CreateCompatibleBitmap(mfcDC, width, height)    # å°†æˆªå›¾ä¿å­˜åˆ°saveBitMapä¸­    saveDC.SelectObject(saveBitMap)    # ä¿å­˜bitmapåˆ°å†…å­˜è®¾å¤‡æè¿°è¡¨    saveDC.BitBlt((0, 0), (width, height), mfcDC, (0, 0), win32con.SRCCOPY)    ##æ–¹æ³•ä¸‰ï¼ˆç¬¬ä¸€éƒ¨åˆ†ï¼‰ï¼šopencv+numpyä¿å­˜    ###è·å–ä½å›¾ä¿¡æ¯    signedIntsArray = saveBitMap.GetBitmapBits(True)    ##æ–¹æ³•ä¸‰ï¼ˆç¬¬äºŒéƒ¨åˆ†ï¼‰ï¼šopencv+numpyä¿å­˜    ###PrintWindowæˆåŠŸï¼Œä¿å­˜åˆ°æ–‡ä»¶ï¼Œæ˜¾ç¤ºåˆ°å±å¹•    im_opencv = numpy.frombuffer(signedIntsArray, dtype='uint8')    im_opencv.shape = (height, width, 4)    im_opencv = cv2.cvtColor(im_opencv, cv2.COLOR_BGRA2RGB)    cv2.imwrite("im_opencv.jpg",im_opencv,[int(cv2.IMWRITE_JPEG_QUALITY), 100]) #ä¿å­˜    # cv2.namedWindow('im_opencv') #å‘½åçª—å£    # cv2.imshow("im_opencv",im_opencv) #æ˜¾ç¤º    template = cv2.imread('./finish.jpg')    res = cv2.matchTemplate(im_opencv, template, cv2.TM_CCOEFF_NORMED)    min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(res)    #H1 = cv2.calcHist([im_opencv], [1], None, [256], [0, 256])    #H1 = cv2.normalize(H1, H1, 0, 1, cv2.NORM_MINMAX, -1)  #    #H2 = cv2.calcHist([template], [1], None, [256], [0, 256])    #H2 = cv2.normalize(H2, H2, 0, 1, cv2.NORM_MINMAX, -1)    # åˆ©ç”¨compareHistï¼ˆï¼‰è¿›è¡Œæ¯”è¾ƒç›¸ä¼¼åº¦    #similarity = cv2.compareHist(H1, H2, 0)    cv2.waitKey(0)    cv2.destroyAllWindows()    # å†…å­˜é‡Šæ”¾    win32gui.DeleteObject(saveBitMap.GetHandle())    saveDC.DeleteDC()    mfcDC.DeleteDC()    win32gui.ReleaseDC(hWnd, hWndDC)    return max_valdef singleClick(path,single,cls,name,picName):    # è·å–åå°çª—å£çš„å¥æŸ„ï¼Œæ³¨æ„åå°çª—å£ä¸èƒ½æœ€å°åŒ–    hWnd = win32gui.FindWindow(cls,name)    # è·å–å¥æŸ„çª—å£çš„å¤§å°ä¿¡æ¯    left, top, right, bot = win32gui.GetWindowRect(hWnd)    width = right - left    height = bot - top    # è¿”å›å¥æŸ„çª—å£çš„è®¾å¤‡ç¯å¢ƒï¼Œè¦†ç›–æ•´ä¸ªçª—å£ï¼ŒåŒ…æ‹¬éå®¢æˆ·åŒºï¼Œæ ‡é¢˜æ ï¼Œèœå•ï¼Œè¾¹æ¡†    hWndDC = win32gui.GetWindowDC(hWnd)    # åˆ›å»ºè®¾å¤‡æè¿°è¡¨    mfcDC = win32ui.CreateDCFromHandle(hWndDC)    # åˆ›å»ºå†…å­˜è®¾å¤‡æè¿°è¡¨    saveDC = mfcDC.CreateCompatibleDC()    # åˆ›å»ºä½å›¾å¯¹è±¡å‡†å¤‡ä¿å­˜å›¾ç‰‡    saveBitMap = win32ui.CreateBitmap()    # ä¸ºbitmapå¼€è¾Ÿå­˜å‚¨ç©ºé—´    saveBitMap.CreateCompatibleBitmap(mfcDC, width, height)    # å°†æˆªå›¾ä¿å­˜åˆ°saveBitMapä¸­    saveDC.SelectObject(saveBitMap)    # ä¿å­˜bitmapåˆ°å†…å­˜è®¾å¤‡æè¿°è¡¨    saveDC.BitBlt((0, 0), (width, height), mfcDC, (0, 0), win32con.SRCCOPY)    ##æ–¹æ³•ä¸‰ï¼ˆç¬¬ä¸€éƒ¨åˆ†ï¼‰ï¼šopencv+numpyä¿å­˜    ###è·å–ä½å›¾ä¿¡æ¯    signedIntsArray = saveBitMap.GetBitmapBits(True)    ##æ–¹æ³•ä¸‰ï¼ˆç¬¬äºŒéƒ¨åˆ†ï¼‰ï¼šopencv+numpyä¿å­˜    ###PrintWindowæˆåŠŸï¼Œä¿å­˜åˆ°æ–‡ä»¶ï¼Œæ˜¾ç¤ºåˆ°å±å¹•    im_opencv = numpy.frombuffer(signedIntsArray, dtype='uint8')    im_opencv.shape = (height, width, 4)    cv2.cvtColor(im_opencv, cv2.COLOR_BGRA2RGB)    cv2.imwrite(picName,im_opencv,[int(cv2.IMWRITE_JPEG_QUALITY), 100]) #ä¿å­˜    current = cv2.imread(path)    template = cv2.imread(single)    template = cv2.cvtColor(template, cv2.COLOR_BGRA2RGB)    h, w, l = template.shape    # å½“å‰æ•æ‰æˆªå›¾ä¸æ¨¡æ¿åŒ¹é…ï¼Œæ‰¾åˆ°å†æ¬¡å‡ºå‡»æŒ‰é’®ï¼Œæ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»æ“ä½œ    res = cv2.matchTemplate(current, template, cv2.TM_CCOEFF_NORMED)    min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(res)    top_left = max_loc    bottom_right = (top_left[0] + w, top_left[1] + h)    # è·å–åå°çª—å£çš„å¥æŸ„ï¼Œæ³¨æ„åå°çª—å£ä¸èƒ½æœ€å°åŒ–    hWnd = win32gui.FindWindow(cls, name)    # è·å–å¥æŸ„çª—å£çš„å¤§å°ä¿¡æ¯    left, top, right, bot = win32gui.GetWindowRect(hWnd)    pyautogui.click(random.uniform(left + top_left[0],left + bottom_right[0]),random.uniform(top + top_left[1],top + bottom_right[1]))def getStep(cls,name,single,start):    # è·å–åå°çª—å£çš„å¥æŸ„ï¼Œæ³¨æ„åå°çª—å£ä¸èƒ½æœ€å°åŒ–    hWnd = win32gui.FindWindow(cls,name)    # è·å–å¥æŸ„çª—å£çš„å¤§å°ä¿¡æ¯    left, top, right, bot = win32gui.GetWindowRect(hWnd)    flag = True    total = time.time()    startTime = time.time()    while(flag):        similarity = img(cls,name)        if(similarity > 0.95):            total = time.time() - startTime            time.sleep(4 + random.uniform(0.2,1.8))            pyautogui.click(left + random.uniform(120,250), bot - random.uniform(120,250))            flag = False            time.sleep(4 + random.uniform(0.2,1.8))            singleClick('./current.jpg',single,cls,name,'current.jpg')            time.sleep(2 + random.uniform(0.2,1.8))            singleClick('./startMission.jpg',start,cls,name,'startMission.jpg')            print('é—´éš”æ—¶é—´è®¡ç®—å®Œæˆ',total)    return totaldef turn(cls,name,single,start):    # è·å–åå°çª—å£çš„å¥æŸ„ï¼Œæ³¨æ„åå°çª—å£ä¸èƒ½æœ€å°åŒ–    hWnd = win32gui.FindWindow(cls,name)    # è·å–å¥æŸ„çª—å£çš„å¤§å°ä¿¡æ¯    left, top, right, bot = win32gui.GetWindowRect(hWnd)    flag = True    while(flag):        similarity = img(cls, name)        if (similarity > 0.95):            time.sleep(4 + random.uniform(0.2,1.8))            pyautogui.click(left + random.uniform(120,250), bot - random.uniform(120,250))            time.sleep(4 + random.uniform(0.2,1.8))            singleClick('./current.jpg', single, cls, name, 'current.jpg')            time.sleep(2 + random.uniform(0.2,1.8))            singleClick('./startMission.jpg', start, cls, name, 'startMission.jpg')            break</code></pre><h4 id="ç¢§è“èˆªçº¿">ç¢§è“èˆªçº¿</h4><p><a href="https://github.com/SprBoot/blhx" target="_blank" rel="noopener">https://github.com/SprBoot/blhx</a></p><pre class=" language-language-python"><code class="language-language-python">import win32import timewhile 1 == 1:    flag = True    win32.singleClick('./current.jpg', "./seven.jpg", "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')    time.sleep(1)    win32.singleClick('./current.jpg', "./start.jpg", "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')    time.sleep(1)    win32.singleClick('./current.jpg', "./start.jpg", "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')    time.sleep(5)    boss = True    initial = 1    while(boss):        tempFlag = True        while(tempFlag):            onestargold = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./1stargold.jpg")            onestarqing = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./1starqing.jpg")            onestarzhong = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./1starzhong.jpg")            twostarqing = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./2starqing.jpg")            twostarzhong = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./2starzhong.jpg")            path = "./1stargold.jpg"            tu = 'é‡‘å­èˆ¹'            if(onestargold > 0.4):                path = "./1stargold.jpg"            elif(onestarqing > 0.4):                path = "./1starqing.jpg"                tu = '1æ˜Ÿè½»'            elif(onestarzhong > 0.4):                path = "./1starzhong.jpg"                tu = '1æ˜Ÿé‡'            elif(twostarqing > 0.4):                path = "./2starqing.jpg"                tu = '2æ˜Ÿè½»'            elif (twostarzhong > 0.4):                path = "./2starzhong.jpg"                tu = '2æ˜Ÿé‡'            wei = True            while wei:                tuo = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./info.jpg")                if tuo > 0.8:                    time.sleep(1)                    win32.singleClick('./current.jpg', "./sure.jpg", "Qt5QWindowIcon",                                      "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')                else:                    wei = False            win32.singleClick('./current.jpg', path, "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')            print('é€‰æ‹©äº†{}'.format(tu))            temp = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./chu.jpg")            if (temp > 0.8):                print('åˆ°è¾¾å›¾å‡†å¤‡å‡ºå‡»')                flag = True                win32.singleClick('./current.jpg', "./chu.jpg", "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')                while (flag):                    max = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./win.jpg")                    if (max > 0.85):                        print('å‡ºå‡»æˆåŠŸ')                        initial = initial + 1                        time.sleep(1)                        win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                        time.sleep(3)                        win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                        confirmFlag = True                        while(confirmFlag):                            srFlag = True                            while (srFlag):                                sr = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./sr.jpg")                                if (sr > 0.8):                                    time.sleep(1)                                    win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                                else:                                    srFlag = False                            time.sleep(2)                            con = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./confirm.jpg")                            if(con > 0.9):                                win32.singleClick('./current.jpg', "./confirm.jpg", "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨",                                                  'current.jpg')                                time.sleep(5)                                iboss = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./boss.jpg")                                if (initial == 6):                                    boss = False                                    tempFlag = False                                if (iboss > 0.95):                                    tempFlag = False                                    boss = False                                confirmFlag = False                                flag = False            danger = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./guibi.jpg")            if (danger > 0.95):                win32.singleClick('./current.jpg', './guibi.jpg', "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')                print('è§„é¿æˆåŠŸ')                time.sleep(3)                chu = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./chu.jpg")                if (chu > 0.95):                    print('è§„é¿å¤±è´¥ï¼Œè¿‡å›¾')                    win32.singleClick('./current.jpg', "./chu.jpg", "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')                    dangerFlag = True                    while (dangerFlag):                        max = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./win.jpg")                        if (max > 0.85):                            time.sleep(1)                            win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                            time.sleep(3)                            win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                            confirmFlag = True                            while (confirmFlag):                                srFlag = True                                while (srFlag):                                    sr = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./sr.jpg")                                    if (sr > 0.8):                                        time.sleep(1)                                        win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                                    else:                                        srFlag = False                                time.sleep(2)                                con = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./confirm.jpg")                                if (con > 0.9):                                    win32.singleClick('./current.jpg', "./confirm.jpg", "Qt5QWindowIcon",                                                      "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨",                                                      'current.jpg')                                    time.sleep(5)                                    iboss = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./boss.jpg")                                    if (iboss > 0.95):                                        tempFlag = False                                        boss = False                                    if (initial == 6):                                        boss = False                                        tempFlag = False                                    confirmFlag = False                                    dangerFlag = False    time.sleep(5)    wen = True    while(wen):        number = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./wenhao.jpg")        if(number < 0.6):            print('ç‰©èµ„é‡‡é›†å®Œæˆ')            wei = True            while (wei):                tuo = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./info.jpg")                if (tuo > 0.8):                    time.sleep(1)                    win32.singleClick('./current.jpg', "./sure.jpg", "Qt5QWindowIcon",                                      "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')                else:                    wei = False            win32.singleClick('./current.jpg', "./boss.jpg", "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')            print('bosså›¾')            temp = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./chuji.jpg")            if (temp > 0.8):                print('åˆ°è¾¾boss')                tflag = True                win32.singleClick('./current.jpg', "./chu.jpg", "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨",                                  'current.jpg')                while (tflag):                    max = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./win.jpg")                    if (max > 0.85):                        print('bosså‡ºå‡»æˆåŠŸ')                        time.sleep(1)                        win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                        time.sleep(3)                        win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                        confirmFlag = True                        while (confirmFlag):                            srFlag = True                            while (srFlag):                                sr = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./sr.jpg")                                if (sr > 0.8):                                    time.sleep(1)                                    win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                                else:                                    srFlag = False                            time.sleep(2)                            con = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./confirm.jpg")                            if (con > 0.9):                                win32.singleClick('./current.jpg', "./confirm.jpg", "Qt5QWindowIcon",                                                  "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨",                                                  'current.jpg')                                time.sleep(5)                                confirmFlag = False                                tflag = False                                wenFlag = False                                wen = False        else:            wenFlag = True            while(wenFlag):                danger = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./guibi.jpg")                if (danger > 0.95):                    win32.singleClick('./current.jpg', './guibi.jpg', "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')                    print('è§„é¿æˆåŠŸ')                    time.sleep(3)                    chu = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./chu.jpg")                    if (chu > 0.95):                        print('è§„é¿å¤±è´¥ï¼Œè¿‡å›¾')                        win32.singleClick('./current.jpg', "./chu.jpg", "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨",                                          'current.jpg')                        dangerFlag = True                        while (dangerFlag):                            max = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./win.jpg")                            if (max > 0.85):                                time.sleep(1)                                win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                                time.sleep(3)                                win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                                confirmFlag = True                                while (confirmFlag):                                    srFlag = True                                    while (srFlag):                                        sr = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./sr.jpg")                                        if (sr > 0.8):                                            time.sleep(1)                                            win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                                        else:                                            srFlag = False                                    time.sleep(2)                                    con = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./confirm.jpg")                                    if (con > 0.9):                                        win32.singleClick('./current.jpg', "./confirm.jpg", "Qt5QWindowIcon",                                                          "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨",                                                          'current.jpg')                                        time.sleep(5)                                        iboss = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./boss.jpg")                                        if (iboss > 0.95):                                            tempFlag = False                                            boss = False                                        confirmFlag = False                                        dangerFlag = False                win32.singleClick('./current.jpg', './wenhao.jpg', "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')                error = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./error.jpg")                if (error > 0.6):                    wei = True                    while (wei):                        tuo = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./info.jpg")                        if (tuo > 0.8):                            time.sleep(1)                            win32.singleClick('./current.jpg', "./sure.jpg", "Qt5QWindowIcon",                                              "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')                        else:                            wei = False                    win32.singleClick('./current.jpg', "./boss.jpg", "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')                    print('bosså›¾')                    temp = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./chu.jpg")                    if (temp > 0.8):                        print('åˆ°è¾¾boss')                        tflag = True                        win32.singleClick('./current.jpg', "./chu.jpg", "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨",                                          'current.jpg')                        while (tflag):                            max = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./win.jpg")                            if (max > 0.85):                                print('bosså‡ºå‡»æˆåŠŸ')                                time.sleep(1)                                win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                                time.sleep(3)                                win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                                confirmFlag = True                                while (confirmFlag):                                    srFlag = True                                    while (srFlag):                                        sr = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./sr.jpg")                                        if (sr > 0.8):                                            time.sleep(1)                                            win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                                        else:                                            srFlag = False                                    time.sleep(2)                                    con = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./confirm.jpg")                                    if (con > 0.9):                                        win32.singleClick('./current.jpg', "./confirm.jpg", "Qt5QWindowIcon",                                                          "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨",                                                          'current.jpg')                                        time.sleep(5)                                        confirmFlag = False                                        tflag = False                                        wenFlag = False                                        wen = False                time.sleep(2)                win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                test = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./wenhao.jpg")                if (test < 0.5):                    win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                    time.sleep(1)                    wei = True                    while (wei):                        tuo = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./info.jpg")                        if (tuo > 0.8):                            time.sleep(1)                            win32.singleClick('./current.jpg', "./sure.jpg", "Qt5QWindowIcon",                                              "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')                        else:                            wei = False                    win32.singleClick('./current.jpg', "./boss.jpg", "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", 'current.jpg')                    print('bosså›¾')                    temp = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./chu.jpg")                    if (temp > 0.8):                        print('åˆ°è¾¾boss')                        tflag = True                        win32.singleClick('./current.jpg', "./chu.jpg", "Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨",                                          'current.jpg')                        while (tflag):                            max = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./win.jpg")                            if (max > 0.8):                                print('bosså‡ºå‡»æˆåŠŸ')                                time.sleep(1)                                win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                                time.sleep(3)                                win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                                confirmFlag = True                                while (confirmFlag):                                    srFlag = True                                    while (srFlag):                                        sr = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./sr.jpg")                                        if (sr > 0.8):                                            time.sleep(1)                                            win32.click("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨")                                        else:                                            srFlag = False                                    time.sleep(2)                                    con = win32.img("Qt5QWindowIcon", "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨", "./confirm.jpg")                                    if (con > 0.9):                                        win32.singleClick('./current.jpg', "./confirm.jpg", "Qt5QWindowIcon",                                                          "ç¢§è“èˆªçº¿ - MuMuæ¨¡æ‹Ÿå™¨",                                                          'current.jpg')                                        time.sleep(5)                                        confirmFlag = False                                        tflag = False                                        wenFlag = False                                        wen = False    time.sleep(5)</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è„šæœ¬ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ç¬”è®°å››</title>
      <link href="/2021/06/14/shen-du-xue-xi-bi-ji-si/"/>
      <url>/2021/06/14/shen-du-xue-xi-bi-ji-si/</url>
      
        <content type="html"><![CDATA[<h3 id="æ·±åº¦å­¦ä¹ ç¬”è®°å››">æ·±åº¦å­¦ä¹ ç¬”è®°å››</h3><h4 id="Deep-Learning">Deep Learning</h4><h5 id="æ·±åº¦å­¦ä¹ çš„network">æ·±åº¦å­¦ä¹ çš„network</h5><p><img src="http://dingdm.online/dee.jpg" alt=""></p><p>ç¥ç»å…ƒçš„æƒé‡å’Œåå·®å¯ä»¥è§†ä¸ºçŸ©é˜µè¿ç®—ã€‚å³å¾—åˆ°æ¿€æ´»å‡½æ•°(activation function)ã€‚å°†æ¿€æ´»å‡½æ•°è¿›è¡Œsigmoidå¾—åˆ°æœ€ç»ˆç»“æœã€‚å°†ä¸Šæ–¹çš„ç½‘ç»œç”¨è¯¥ç§å½¢å¼è¿›è¡Œè®¡ç®—å³ä¸º</p><p><img src="http://dingdm.online/dee2.jpg" alt=""></p><p>é€šè¿‡çŸ©é˜µè¿è¡Œäº¤ç”±GPUåŠ å¿«è¿ç®—è¿‡ç¨‹ã€‚</p><h5 id="ç¥ç»å…ƒç½‘ç»œçš„é€‰å–">ç¥ç»å…ƒç½‘ç»œçš„é€‰å–</h5><p><img src="http://dingdm.online/cry.jpg" alt=""></p><p>é€šè¿‡ç¥ç»å…ƒç½‘ç»œè®¡ç®—å¾—åˆ°çš„è¾“å…¥çŸ©é˜µå’Œæ ¹æ®å›¾åƒå¾—åˆ°çš„targetçŸ©é˜µè¿›è¡Œäº¤å‰ç†µè®¡ç®—ç»“æœï¼Œè°ƒæ•´å‚æ•°ä½¿å¾—æœ€åè®¡ç®—å¾—åˆ°çš„äº¤å‰ç†µæœ€å°ä»¥ç¡®å®šæœ€ä¼˜çš„ç¥ç»å…ƒç½‘ç»œå‡½æ•°ã€‚</p><p>é€šè¿‡ä¸åŒç»„çš„æ•°æ®è¿›è¡Œè®­ç»ƒå¾—åˆ°æ‰€æœ‰çš„äº¤å‰ç†µè¿›è¡Œç´¯åŠ ï¼Œä½¿ç”¨gradient descentè·å–wä¸bã€‚</p><h5 id="gradient-descent">gradient descent</h5><p><img src="http://dingdm.online/grad.jpg" alt=""></p><h4 id="Backpropagation">Backpropagation</h4><p>å¸®åŠ©è®¡ç®—gradient descentä¸­çš„å‚æ•°çš„åå¾®åˆ†ã€‚</p><h5 id="chain-rule">chain rule</h5><p>å³å¤åˆå‡½æ•°çš„å¾®åˆ†è¿‡ç¨‹ã€‚</p><p><img src="http://dingdm.online/we.jpg" alt=""></p><p>Cä¸ºæœ€åçš„äº¤å‰ç†µã€‚</p><p>zå¯¹äºwæ±‚åå¾®åˆ†ï¼Œzå¯¹äºå“ªä¸€ä¸ªwæ±‚å¾®åˆ†ï¼Œå¾—åˆ°çš„å³ä¸ºwå¯¹åº”çš„è¾“å…¥æ•°æ®ã€‚</p><p>Cå¯¹äºzæ±‚åå¾®åˆ†ã€‚</p><p><img src="http://dingdm.online/Cw.jpg" alt=""></p><p><img src="http://dingdm.online/ch.jpg" alt=""></p><h5 id="Backward-pass">Backward pass</h5><p>ä»¥æœªçŸ¥çš„ä¸¤é¡¹ä½œä¸ºè¾“å…¥ï¼Œå¾—å‡ºçš„æœ€ç»ˆç»“æœä¸ºè¾“å‡ºã€‚</p><p><img src="http://dingdm.online/fa2.jpg" alt=""></p><p>å…·ä½“çš„æ”¾å¤§å€ç‡å³ä¸ºå¯¹åº”zçš„sigmoidçš„æ±‚å¯¼ã€‚åæ±‚é€šè¿‡å·²çŸ¥çš„Cå³å¯å¿«é€Ÿè®¡ç®—ã€‚</p><h4 id="Recipe-OF-Deep-Learning">Recipe OF Deep Learning</h4><p>å¯¹äºå¾—åˆ°ç¥ç»å…ƒç½‘ç»œåº”å…ˆåº”ç”¨äºè®­ç»ƒæ•°æ®åˆ¤æ–­æ˜¯å¦åˆé€‚ï¼Œé˜²æ­¢ç›´æ¥è¿ç”¨äºæµ‹è¯•æ•°æ®å‡ºç°çš„éè¿‡æ‹Ÿåˆç°è±¡ã€‚</p><h5 id="New-activation-function">New activation function</h5><p>vanishing gradient problem</p><p>é è¿‘è¾“å…¥çš„ç¥ç»å…ƒgradientå‚æ•°çš„æ›´æ–°é€Ÿåº¦è¾ƒæ…¢æˆ–é è¿‘è¾“å…¥çš„ç¥ç»å…ƒgradientå‚æ•°æ›´æ–°è¾ƒå¤§ã€‚</p><p>ä½¿ç”¨sigmoidæ—¶ï¼Œè¾ƒå¤§çš„è¾“å…¥ç»è¿‡sigmoidåä¼šè¿›è¡Œè¡°å‡ï¼Œè¶Šæ·±çš„å±‚æ•°å¯¹æœ€åçš„Cçš„ç»“æœçš„å½±å“å°±è¶Šå°ã€‚</p><h6 id="ReLU">ReLU</h6><p>æ›´æ”¹æ¿€æ´»å‡½æ•°ï¼Œå½“è¾“å…¥å°äº0æ—¶ï¼Œè¾“å‡ºä¸º0ï¼Œå½“è¾“å…¥å¤§äº0æ—¶ï¼Œè¾“å‡ºç­‰äºè¾“å…¥ã€‚</p><p>å½“ç¥ç»å…ƒçš„è¾“å‡ºä¸º0æ—¶ï¼Œä¸ä¼šå½±å“æ•´ä¸ªç¥ç»å…ƒç½‘ç»œï¼Œå¯ä»¥ç›´æ¥å»æ‰ã€‚è€Œè¾“å…¥ç­‰äºè¾“å‡ºä¸ä¼šäº§ç”Ÿé€’å‡é—®é¢˜ã€‚</p><p><img src="http://dingdm.online/rejy.jpg" alt=""></p><h6 id="maxout">maxout</h6><p>æ¯å±‚ç¥ç»å…ƒçš„è¾“å‡ºä¸ºåˆ†ç»„ä¸­çš„æœ€å¤§å€¼ã€‚</p><p>maxoutä¹Ÿå¯ä»¥ä½¿ç”¨ReLUï¼Œå³æŸä¸ªå‚æ•°å§‹ç»ˆä¸º0ï¼Œå…¶ä»–å‚æ•°ä¸ºçº¿æ€§å‡½æ•°ï¼Œå³é€‰å–æœ€å¤§æ—¶æ»¡è¶³ReLUã€‚</p><p><img src="http://dingdm.online/bax.jpg" alt=""></p><h6 id="Maxout-training">Maxout training</h6><p>é€‰å–çš„æœ€å¤§å€¼ä¸ºæœ€ç»ˆçš„è¾“å‡ºå€¼ï¼Œæœ€ç»ˆç®€åŒ–ç¥ç»å…ƒç½‘ç»œã€‚</p><h5 id="Adaptive-Learning-Rate">Adaptive Learning Rate</h5><p>ä½¿ç”¨adagrad</p><p><img src="http://dingdm.online/adagrad.png" alt=""></p><h6 id="RMSProp">RMSProp</h6><p>é˜²æ­¢åœ¨æŸä¸ªå˜é‡å˜åŒ–çš„è¿‡ç¨‹ä¸­å‡ºç°çš„å˜åŒ–è¾ƒå°å’Œå˜åŒ–è¾ƒå¤§åŒæ—¶å­˜åœ¨çš„æƒ…å†µã€‚</p><p><img src="http://dingdm.online/TRB.jpg" alt=""></p><h6 id="Momentum">Momentum</h6><p>åˆ©ç”¨æƒ¯æ€§ç»§ç»­å‘å‰ç§»åŠ¨ã€‚</p><p>ä½¿ç”¨Vè®°å½•ç§»åŠ¨è·ç¦»ã€‚</p><p><img src="http://dingdm.online/MVE.jpg" alt=""></p><h6 id="Adam">Adam</h6><p>RMSProp + Momentum</p><p><img src="http://dingdm.online/adam.png" alt=""></p><h5 id="Early-Stopping">Early Stopping</h5><p>åœ¨errorä¸Šå‡å‰åœä½ï¼Œå³ä¸€ä¸ªifåˆ¤æ–­å³å¯ã€‚</p><h5 id="Regularization">Regularization</h5><p><img src="http://dingdm.online/reg.jpg" alt=""></p><h5 id="DropOut">DropOut</h5><p><img src="http://dingdm.online/st1.jpg" alt=""></p><p>åœ¨æ–°çš„ç¥ç»å…ƒç½‘ç»œä¸Šè¿›è¡Œè®­ç»ƒã€‚è¡¨ç°çš„ç»“æœå¯èƒ½å˜å·®ã€‚</p><p><img src="http://dingdm.online/sy2.jpg" alt=""></p><p>è®­ç»ƒæ—¶ä½¿ç”¨æ‰€æœ‰çš„ç¥ç»å…ƒï¼Œè€Œåœ¨æµ‹è¯•æ—¶éœ€è¦å»æ‰ä¸åˆç†çš„ç¥ç»å…ƒã€‚</p><p>è®­ç»ƒæ•°æ®æ—¶ä½¿ç”¨dropoutï¼Œè€Œæµ‹è¯•æ—¶ä¸éœ€è¦dropoutï¼Œå› æ­¤å¯¹äºæ‰€æœ‰çš„è¾“å…¥æ²¡æœ‰dropoutï¼Œéœ€è¦ä½¿ç”¨(1-p)%ã€‚</p><p>åœ¨è®­ç»ƒæ—¶å¯¹äºæ¯ç»„ä¸åŒçš„æ•°æ®ä¼šå¾—åˆ°è¾ƒå¤šçš„ç¥ç»å…ƒç½‘ç»œï¼Œè€Œåœ¨æµ‹è¯•æ—¶å¯¹äºæµ‹è¯•æ•°æ®åº”ç”¨äºæ‰€æœ‰çš„ç¥ç»å…ƒç½‘ç»œä¸ç°å®ï¼Œå› æ­¤é‡‡ç”¨äº†(1-p)%çš„æ–¹å¼è¿›è¡Œè®¡ç®—ï¼Œè€Œå¾—åˆ°çš„ç»“æœä¸å‰ç§æ–¹å¼å¾—åˆ°çš„ç»“æœæ˜¯ç›¸ä¼¼çš„ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¥ç»å…ƒç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ä¸€</title>
      <link href="/2021/06/14/lun-wen-yue-du-yi/"/>
      <url>/2021/06/14/lun-wen-yue-du-yi/</url>
      
        <content type="html"><![CDATA[<h3 id="Learning-a-Deep-ConvNet-for-Multi-label-Classification-with-Partial-Labelsè®ºæ–‡é˜…è¯»">Learning a Deep ConvNet for Multi-label Classification with Partial Labelsè®ºæ–‡é˜…è¯»</h3><h4 id="çŸ¥è¯†å‚¨å¤‡">çŸ¥è¯†å‚¨å¤‡</h4><h5 id="Partial-Multi-Label-Learning">Partial Multi-Label Learning</h5><p>åœ¨å¤šåˆ†ç±»æ ‡è®°ä¸­ï¼Œå­˜åœ¨ä¸€ç§æƒ…å†µå³åœ¨å¯¹å›¾ç‰‡ä¸­çš„ç‰©ä½“è¿›è¡Œæ ‡è®°æ—¶ä¼šå‡ºç°éš¾ä»¥æ ‡è®°çš„æƒ…å†µï¼Œå›¾ç‰‡ä¸­è¾ƒæ˜æ˜¾çš„äº‹ç‰©å¯ä»¥å¾ˆå®¹æ˜“çš„æ ‡è®°ï¼Œè€Œå¯¹äºè¾ƒä¸ºæ¨¡ç³Šçš„äº‹ç‰©åœ¨æ ‡è®°è€…çŸ¥è¯†ä¸è¶³çš„æƒ…å†µä¸‹å¯èƒ½æ— æ³•è¿›è¡Œæ ‡è®°ï¼Œæˆ–è€…å½“å‰å›¾ç‰‡ä¸­çš„äº‹ç‰©è¿‡äºæŠ½è±¡è€Œæ— æ³•ç¡®å®šæ‰€å±ã€‚è¢«ç§°ä¸ºåæ ‡è®°å­¦ä¹ ã€‚</p><p>åœ¨ä¸ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€‰æ‹©ä¸æ ‡æ³¨ã€æˆ–è€…éšæœºæ ‡æ³¨ã€‚ä½†æ˜¯ä¸æ ‡æ³¨æ„å‘³ç€æˆ‘ä»¬ä¸¢å¤±äº†æ‰€æœ‰ä¿¡æ¯ï¼Œéšæœºæ ‡æ³¨æ„å‘³ç€å¯èƒ½å¸¦æ¥å™ªå£°ï¼Œå¯¹å­¦ä¹ çš„å½±å“æ›´å¤§ã€‚æ‰€ä»¥PMLé€‰æ‹©çš„æ˜¯è®©æ ‡æ³¨è€…æä¾›æ‰€æœ‰å¯èƒ½çš„æ ‡ç­¾ï¼Œå½“ç„¶åŠ äº†ä¸€ä¸ªè¾ƒå¼ºçš„å‡è®¾ï¼šæ‰€æœ‰çš„æ ‡ç­¾éƒ½åº”è¯¥è¢«åŒ…å«åœ¨å€™é€‰æ ‡ç­¾é›†ä¸­ã€‚</p><h5 id="Curriculum-Learning">Curriculum Learning</h5><p><strong>ä¸»å¼ è®©æ¨¡å‹å…ˆä»å®¹æ˜“çš„æ ·æœ¬å¼€å§‹å­¦ä¹ ï¼Œå¹¶é€æ¸è¿›é˜¶åˆ°å¤æ‚çš„æ ·æœ¬å’ŒçŸ¥è¯†ã€‚</strong></p><p>åœ¨ä»¥åçš„å­¦ä¹ ä¸­è¿›ä¸€æ­¥æ·±å…¥å­¦ä¹ ï¼Œç›®å‰ä»…é™äºäº†è§£å³å¯ã€‚</p><h5 id="crowdsourcing">crowdsourcing</h5><p>äº’è”ç½‘å¸¦æ¥çš„æ–°çš„ç”Ÿäº§ç»„ç»‡å½¢å¼ã€‚è¿çº¿(Wired)æ‚å¿—2006å¹´å‘æ˜çš„ä¸€ä¸ªä¸“ä¸šæœ¯è¯­ï¼Œç”¨æ¥æè¿°ä¸€ç§æ–°çš„å•†ä¸šæ¨¡å¼ï¼Œå³ä¼ä¸šåˆ©ç”¨äº’è”ç½‘æ¥å°†å·¥ä½œåˆ†é…å‡ºå»ã€å‘ç°åˆ›æ„æˆ–è§£å†³æŠ€æœ¯é—®é¢˜ã€‚é€šè¿‡äº’è”ç½‘æ§åˆ¶ï¼Œè¿™äº›ç»„ç»‡å¯ä»¥åˆ©ç”¨å¿—æ„¿å‘˜å·¥å¤§å†›çš„åˆ›æ„å’Œèƒ½åŠ›â€”â€”è¿™äº›å¿—æ„¿å‘˜å·¥å…·å¤‡å®Œæˆä»»åŠ¡çš„æŠ€èƒ½ï¼Œæ„¿æ„åˆ©ç”¨ä¸šä½™æ—¶é—´å·¥ä½œï¼Œæ»¡è¶³äºå¯¹å…¶æœåŠ¡æ”¶å–å°é¢æŠ¥é…¬ï¼Œæˆ–è€…æš‚æ—¶å¹¶æ— æŠ¥é…¬ï¼Œä»…ä»…æ»¡è¶³äºæœªæ¥è·å¾—æ›´å¤šæŠ¥é…¬çš„å‰æ™¯ã€‚å°¤å…¶å¯¹äºè½¯ä»¶ä¸šå’ŒæœåŠ¡ä¸šï¼Œè¿™æä¾›äº†ä¸€ç§ç»„ç»‡åŠ³åŠ¨åŠ›çš„å…¨æ–°æ–¹å¼</p><h5 id="å½’ä¸€åŒ–">å½’ä¸€åŒ–</h5><p>å½’ä¸€åŒ–æ–¹æ³•æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ç§æ˜¯æŠŠæ•°å˜ä¸ºï¼ˆ0ï¼Œ1ï¼‰ä¹‹é—´çš„<a href="https://baike.baidu.com/item/%E5%B0%8F%E6%95%B0/2172615" target="_blank" rel="noopener">å°æ•°</a>ï¼Œä¸€ç§æ˜¯æŠŠæœ‰é‡çº²è¡¨è¾¾å¼å˜ä¸ºæ— é‡çº²è¡¨è¾¾å¼ã€‚ä¸»è¦æ˜¯ä¸ºäº†<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/944504" target="_blank" rel="noopener">æ•°æ®å¤„ç†</a>æ–¹ä¾¿æå‡ºæ¥çš„ï¼ŒæŠŠæ•°æ®<a href="https://baike.baidu.com/item/%E6%98%A0%E5%B0%84/20402621" target="_blank" rel="noopener">æ˜ å°„</a>åˆ°0ï½1èŒƒå›´ä¹‹å†…å¤„ç†ï¼Œæ›´åŠ <a href="https://baike.baidu.com/item/%E4%BE%BF%E6%8D%B7/2966338" target="_blank" rel="noopener">ä¾¿æ·</a>å¿«é€Ÿ</p><h5 id="GNN">GNN</h5><p>å›¾ç¥ç»ç½‘ç»œæ˜¯ä¸€ç§ç›´æ¥ä½œç”¨äºå›¾ç»“æ„ä¸Šçš„ç¥ç»ç½‘ç»œã€‚GNNçš„ä¸€ä¸ªå…¸å‹åº”ç”¨æ˜¯èŠ‚ç‚¹åˆ†ç±»,æœ¬è´¨ä¸Šï¼Œå›¾ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¸ä¸€ä¸ªæ ‡ç­¾ç›¸å…³è”ï¼Œæˆ‘ä»¬å¸Œæœ›é¢„æµ‹æœªæ ‡è®°èŠ‚ç‚¹çš„æ ‡ç­¾ã€‚</p><p>åœ¨èŠ‚ç‚¹åˆ†ç±»é—®é¢˜ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹véƒ½å¯ä»¥ç”¨å…¶ç‰¹å¾x_vè¡¨ç¤ºå¹¶ä¸”ä¸å·²æ ‡è®°çš„æ ‡ç­¾t_vç›¸å…³è”ã€‚ç»™å®šéƒ¨åˆ†æ ‡è®°çš„å›¾Gï¼Œç›®æ ‡æ˜¯åˆ©ç”¨è¿™äº›æ ‡è®°çš„èŠ‚ç‚¹æ¥é¢„æµ‹æœªæ ‡è®°çš„èŠ‚ç‚¹æ ‡ç­¾ã€‚å®ƒé€šè¿‡å­¦ä¹ å¾—åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„dç»´å‘é‡ï¼ˆçŠ¶æ€ï¼‰è¡¨ç¤ºä¸ºh_vï¼ŒåŒæ—¶åŒ…å«å…¶ç›¸é‚»èŠ‚ç‚¹çš„ä¿¡æ¯ã€‚</p><p><img src="http://dingdm.online/GNN.png" alt=""></p><h4 id="è®ºæ–‡çš„ç ”ç©¶æ­¥éª¤æˆ–è¿‡ç¨‹æƒ…å†µ">è®ºæ–‡çš„ç ”ç©¶æ­¥éª¤æˆ–è¿‡ç¨‹æƒ…å†µ</h4><p>ç›®å‰imageNetçš„å•æ ‡ç­¾æ³¨é‡Šå¿½ç•¥äº†å›¾åƒå›ºæœ‰çš„å¤šæ ‡ç­¾æ€§è´¨ï¼Œæ‰€ä»¥å¯¼è‡´ç›®å‰çš„è¾ƒä¸ºå…ˆè¿›çš„åˆ†ç±»å™¨åœ¨imageNetä¸Šçš„è¡¨ç°ä¸ä½³ã€‚è€ŒMS COCOå’ŒOpen Imagesæä¾›å¤æ‚çš„å›¾ç‰‡å¯ä»¥æ»¡è¶³ä½œè€…çš„éœ€æ±‚ï¼Œå› æ­¤ä½œè€…é€‰æ‹©äº†è¿™ä¸¤ä¸ªæ•°æ®é›†ã€‚</p><p>åœ¨æ”¶é›†å¤šæ ‡ç­¾æ³¨é‡Šä¸Šçš„éš¾åº¦æ˜¯è¦å¤§äºå•æ ‡ç­¾æ³¨é‡Šçš„ï¼Œå› æ­¤ä½œè€…é€‰æ‹©ä½¿ç”¨åæ ‡è®°å­¦ä¹ ï¼Œé€šè¿‡ä¼—åŒ…å¹³å°æ”¶é›†åæ ‡è®°æ ‡ç­¾æ˜¯æ¯”è¾ƒå®¹æ˜“å’Œæ‰©å±•çš„ã€‚ä½œè€…é€‰æ‹©äº†ä¸¤ç§ç­–ç•¥æ¥æå‡å›¾ç‰‡åˆ†ç±»çš„è¡¨ç°ï¼Œè®¾è®¡æ›´å¥½çš„æ¨¡å‹æ¶æ„å’Œé€šè¿‡å¤§é‡çš„æ ‡ç­¾æ•°æ®è¿›è¡Œå­¦ä¹ ã€‚åœ¨æ”¶é›†å¤šæ ‡ç­¾æ³¨é‡Šæ—¶ç”±äºéš¾åº¦å¤§ï¼Œå› æ­¤ä½œè€…ä½¿ç”¨äº†ç½‘ç»œç›‘ç£çš„æ–¹å¼è‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾ï¼Œè€Œè¿™ç§æ–¹å¼ç”Ÿæˆçš„æ ‡ç­¾ç”±äºå™ªéŸ³å’Œä¸è¯¦ç»†çš„å½±å“ï¼Œä¼šå¯¼è‡´æ¯”è¾ƒå·®çš„åˆ†ç±»è¡¨ç°ã€‚å› æ­¤éœ€è¦å¯¹å™ªéŸ³è¿›è¡Œå­¦ä¹ ã€‚</p><p>åœ¨å½“å‰å·²å­˜çš„æ–¹æ³•å¯¹äºå¤§è§„æ¨¡çš„æ•°æ®é›†ä¸Šä¸å¯æ‰©å±•ä¸”æ— æ³•å¾®è°ƒå·æœºç¥ç»ç½‘ç»œçš„æƒ…å†µä¸‹ï¼Œè®ºæ–‡æå‡ºäº†ä¸€ç§æ–°çš„losså‡½æ•°å’Œæ–¹æ³•æ¥ä¿®è¡¥ç¼ºå¤±çš„æ ‡ç­¾ã€‚ç¬¬ä¸€æ­¥ä½œè€…å‘ç°é€šè¿‡ç»™å®šä¸€ä¸ªå›ºå®šçš„æ ‡ç­¾é¢„ç®—ï¼Œå®éªŒè¡¨æ˜ï¼Œéƒ¨åˆ†æ³¨é‡Šæ‰€æœ‰å›¾åƒæ¯”å®Œå…¨æ³¨é‡Šä¸€ä¸ªå°å­é›†è¦å¥½ã€‚ç¬¬äºŒæ­¥è®ºæ–‡ä¸­å¼•å…¥äº†ä¸€ä¸ªæŸå¤±å‡½æ•°ï¼Œå®ƒé€šè¿‡åˆ©ç”¨æ ‡ç­¾æ¯”ä¾‹ä¿¡æ¯æ¥æ¦‚æ‹¬æ ‡å‡†äºŒå…ƒäº¤å‰ç†µæŸå¤±ã€‚è¿™ä¸ªæŸå¤±å‡½æ•°å¯ä»¥è‡ªåŠ¨é€‚åº”æ¯å¼ å›¾ç‰‡ä¸­å·²çŸ¥æ ‡ç­¾çš„æ¯”ä¾‹ï¼Œå¹¶ä¸”åœ¨å­¦ä¹ æ‰€æœ‰çš„æ ‡ç­¾æ—¶å¯ä»¥ä½¿ç”¨åŒæ ·çš„è®­ç»ƒè®¾ç½®ã€‚ç¬¬ä¸‰æ­¥åˆ™æ˜¯é¢„æµ‹ä¸¢å¤±çš„æ ‡ç­¾ï¼Œç”±äºå·æœºç¥ç»ç½‘ç»œå¯¹å™ªéŸ³éå¸¸æ•æ„Ÿï¼Œæ‰€ä»¥æ¨¡å‹çš„é¢„æµ‹å‡†ç¡®æ€§è¾ƒå¥½ï¼Œä½œè€…ä½¿ç”¨äº†ä¸€ç§åŸºäºGNNSçš„æ–¹æ³•æ¥æ˜ç¡®æ¨¡å‹åœ¨ä¸åŒç±»åˆ«ä¸­çš„ç›¸å…³æ€§ã€‚</p><p>ä½œè€…è¯´æ˜äº†å‡ ç§æ–¹æ³•æ¥è¿›è¡Œä¸¢å¤±æ ‡ç­¾çš„å­¦ä¹ ï¼Œé¦–å…ˆæ˜¯åœ¨ç½‘ç»œç›‘ç£å­¦ä¹ ä¸­å¹¿æ³›è¿ç”¨çš„æ¯”è¾ƒç®€å•çš„æ–¹æ³•ï¼Œå°†ä¸¢å¤±çš„æ ‡ç­¾ä½œä¸ºè´Ÿé¢æ ‡ç­¾ï¼Œè¿™ç§æ–¹æ³•çš„æ ‡å‡†å‡è®¾æ˜¯æŸ¥è¯¢çš„ç±»åˆ«å­˜åœ¨å›¾åƒä¸­è€Œå…¶ä»–ç±»åˆ«ä¸å­˜åœ¨ï¼Œç”±äºåœ¨åˆå§‹åŒ–æ—¶è®¸å¤šæ­£é¢æ ‡ç­¾è¢«æ ‡è®°ä¸ºè´Ÿé¢æ ‡ç­¾å¯¼è‡´è¿™ç§æ–¹æ³•çš„è¡¨ç°è¾ƒå·®ã€‚ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨äºŒå…ƒå…³è”ï¼ŒæŠŠæ¯ä¸€ä¸ªæ ‡ç­¾ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„äºŒå…ƒåˆ†ç±»å™¨ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•å½“åˆ†ç±»çš„æ•°é‡å¢åŠ æ—¶æ˜¯ä¸æ˜“æ‰©å±•çš„ï¼Œè€Œä¸”å®ƒå¿½è§†äº†æ ‡ç­¾å’Œå®ä¾‹ä¹‹é—´çš„ç›¸å…³æ€§ã€‚ç¬¬ä¸‰ç§åˆ™æ˜¯åˆ©ç”¨è®­ç»ƒæ•°æ®ä¸­æ ‡ç­¾çš„ç›¸å…³æ€§å°†å·²æä¾›æ ‡ç­¾ä¿¡æ¯è½¬ç§»åˆ°ç¼ºå¤±çš„æ ‡ç­¾ä¸­ï¼Œä½¿ç”¨çŸ©é˜µè¡¥å…¨ç®—æ³•æ¥å¡«å……ç¼ºå¤±çš„æ ‡ç­¾ï¼Œè¿™ç§æ–¹æ³•åˆ©ç”¨äº†æ ‡ç­¾å’Œå®ä¾‹ä¹‹é—´çš„ç›¸å…³æ€§å¯¹æ ‡ç­¾çŸ©é˜µè¿›è¡Œä½ç§©æ­£åˆ™åŒ–æ¥å®Œæˆå®ä¾‹æ ‡ç­¾çŸ©é˜µã€‚å¼•å…¥äº†ä½ç§©ç»éªŒé£é™©æœ€å°åŒ–ï¼Œä½¿ç”¨äº†æ··åˆå›¾æ¥å¯¹æ ‡ç­¾ä¾èµ–ç½‘ç»œè¿›è¡Œç¼–ç ï¼Œå­¦ä¹ åˆ†ç±»ä¹‹é—´çš„ç›¸å…³æ€§æ¥é¢„æµ‹ä¸¢å¤±çš„æ ‡ç­¾ã€‚</p><p>è¿™å‡ ç§æ–¹æ³•éƒ½æ˜¯ä¸é€‚ç”¨äºæ·±åº¦å·æœºç½‘ç»œçš„ï¼Œå®ƒä»¬éœ€è¦å†…æ‘ä¸­çš„è®­ç»ƒé›†æ¥è§£å†³ä¼˜åŒ–é—®é¢˜ï¼Œæ‰€ä»¥ä¸å¯èƒ½ä½¿ç”¨ä¸€ç§å°æ‰¹é‡ç­–ç•¥æ¥å¾®è°ƒæ¨¡å‹ï¼Œè€Œå¾®è°ƒå¯¹äºè½¬ç§»å…ˆå‰çš„é¢„æµ‹è®­ç»ƒæ¶æ„åˆæ˜¯è‡³å…³é‡è¦çš„ä¸”ä¸€äº›æ–¹æ³•æ˜¯ä¸å¯æ‰©å±•çš„ï¼Œå› ä¸ºä»–ä»¬éœ€è¦è§£å†³å¤§è§„æ¨¡æ•°æ®é›†éš¾ä»¥å¤„ç†çš„å‡¸äºŒæ¬¡ä¼˜åŒ–é—®é¢˜ã€‚å› æ­¤ä½œè€…æå‡ºäº†è‡ªå·±çš„æ¨¡å‹æ¥è§£å†³è¯¥é—®é¢˜ã€‚</p><h4 id="ç®—æ³•å†…å®¹">ç®—æ³•å†…å®¹</h4><h5 id="ç¬¦å·è¯´æ˜">ç¬¦å·è¯´æ˜</h5><p>Cï¼šåˆ†ç±»çš„æ•°é‡Nï¼šè®­ç»ƒæ ·æœ¬çš„æ•°é‡</p><p><img src="http://dingdm.online/D.png" alt=""></p><p>I (i)ä¸ºç¬¬iå¼ å›¾ç‰‡ï¼Œy (i) = [y (i) 1 , . . . , y (i) C ] ä¸ºç¬¬iå¼ å›¾ç‰‡çš„Cä¸ªåˆ†ç±»</p><p>y (i) c = 1 (resp. âˆ’1 and 0) 1ä¸ºç¡®å®šï¼Œ-1ä¸ºä¸¢å¤±ï¼Œ0ä¸ºæœªçŸ¥</p><p>[y (1); . . . ; y (N) ] ä¸ºè®­ç»ƒé›†çš„æ ‡ç­¾çŸ©é˜µ</p><p>fwä¸ºæƒé‡ï¼Œx (i) = [x (i) 1 , . . . , x (i) C ] = fw(I (i) )ä¸ºæœªsigmoidä¹‹å‰çš„ç¬¬iå¼ å›¾ç‰‡çš„è¾“å‡º</p><h5 id="Binary-cross-entropy-for-partial-labels">Binary cross-entropy for partial labels</h5><p>ä¸ºäº†ä¸ç±»åˆ«æ•°é‡æ— å…³ï¼ŒBCE æŸå¤±ç”±ç±»åˆ«æ•°é‡å½’ä¸€åŒ–ï¼Œå¯¼è‡´äº†åå‘ä¼ æ’­çš„æ¢¯åº¦è¾ƒå°ï¼Œé€šè¿‡å¯¹å·²çŸ¥æ ‡ç­¾æ¯”ä¾‹çš„æ ‡å‡†åŒ–ï¼Œä½œè€…æå‡ºäº†ä¸€ç§éƒ¨åˆ†BCEæŸå¤±ã€‚</p><p><img src="http://dingdm.online/parBCE.png" alt=""></p><p>py âˆˆ [0, 1]æ˜¯yä¸­å·²çŸ¥æ ‡ç­¾çš„æ¯”ä¾‹ï¼Œå®ä¾‹ç‹¬ç«‹äºå·²çŸ¥æ ‡ç­¾æ•°é‡ï¼Œå½“å›¾åƒæ ‡ç­¾çš„æ¯”ä¾‹ä¸å›ºå®šæ—¶æ¯”è¾ƒæœ‰ç”¨ã€‚</p><p>æ­£è§„åŒ–å‡½æ•°gè®¾è®¡</p><p>é€šè¿‡æ ‡ç­¾æ¯”ä¾‹æ ‡å‡†åŒ–éƒ¨åˆ†BCEçš„Losså‡½æ•°ï¼Œå½“å…¨éƒ¨æ ‡ç­¾æ˜¾ç¤ºæ—¶ï¼Œä¸ºäº†ä½¿éƒ¨åˆ†BCEå’ŒBCEçš„å˜ç°ç›¸åŒï¼Œä½œè€…æå‡ºäº†gå‡½æ•°</p><p><img src="http://dingdm.online/G.png" alt=""></p><p>é€šè¿‡ç»™å®š Î³ å€¼å’Œç»™å®šæ¯”ä¾‹çš„æƒé‡ï¼Œå¯ä»¥æ‰¾åˆ°å¯¹åº”çš„Î± å’ŒÎ²æ»¡è¶³çº¦æŸã€‚Î³ æ§åˆ¶å…³äºæ ‡ç­¾æ¯”ä¾‹çš„å½’ä¸€åŒ–è¡Œä¸ºï¼Œå¯¹åº”çš„æ¯ä¸ªå‚æ•°è¯´æ˜åœ¨åæ–‡ã€‚</p><h4 id="åç»­çš„é˜…è¯»å’Œç¼–ç åœ¨ç³»ç»Ÿæ€§å­¦ä¹ ç©GNNåè¿›è¡Œã€‚">åç»­çš„é˜…è¯»å’Œç¼–ç åœ¨ç³»ç»Ÿæ€§å­¦ä¹ ç©GNNåè¿›è¡Œã€‚</h4><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> è®ºæ–‡é˜…è¯» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åæ ‡è®°å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨¡æ‹Ÿå™¨åå°æŒ‚æœºåˆ·å›¾å°æç¤º</title>
      <link href="/2021/06/03/mo-ni-qi-hou-tai-gua-ji-shua-tu-xiao-ti-shi/"/>
      <url>/2021/06/03/mo-ni-qi-hou-tai-gua-ji-shua-tu-xiao-ti-shi/</url>
      
        <content type="html"><![CDATA[<h3 id="æ¨¡æ‹Ÿå™¨åå°æŒ‚æœºåˆ·å›¾å°æç¤º">æ¨¡æ‹Ÿå™¨åå°æŒ‚æœºåˆ·å›¾å°æç¤º</h3><h4 id="ä½¿ç”¨Spy-è·å–åå°çª—å£ç±»å’Œæ ‡é¢˜åç§°ï¼Œæ ¹æ®å¥æŸ„ä¿¡æ¯å¯¹çª—å£è¿›è¡Œæˆªå›¾ã€‚">ä½¿ç”¨Spy++è·å–åå°çª—å£ç±»å’Œæ ‡é¢˜åç§°ï¼Œæ ¹æ®å¥æŸ„ä¿¡æ¯å¯¹çª—å£è¿›è¡Œæˆªå›¾ã€‚</h4><pre class=" language-language-python"><code class="language-language-python">    # è·å–åå°çª—å£çš„å¥æŸ„ï¼Œæ³¨æ„åå°çª—å£ä¸èƒ½æœ€å°åŒ–    hWnd = win32gui.FindWindow(cls,name)    # è·å–å¥æŸ„çª—å£çš„å¤§å°ä¿¡æ¯    left, top, right, bot = win32gui.GetWindowRect(hWnd)    width = right - left    height = bot - top    hWndDC = win32gui.GetWindowDC(hWnd)    # åˆ›å»ºè®¾å¤‡æè¿°è¡¨    mfcDC = win32ui.CreateDCFromHandle(hWndDC)    # åˆ›å»ºå†…å­˜è®¾å¤‡æè¿°è¡¨    saveDC = mfcDC.CreateCompatibleDC()    # åˆ›å»ºä½å›¾å¯¹è±¡å‡†å¤‡ä¿å­˜å›¾ç‰‡    saveBitMap = win32ui.CreateBitmap()    # ä¸ºbitmapå¼€è¾Ÿå­˜å‚¨ç©ºé—´    saveBitMap.CreateCompatibleBitmap(mfcDC, width, height)    # å°†æˆªå›¾ä¿å­˜åˆ°saveBitMapä¸­    saveDC.SelectObject(saveBitMap)    # ä¿å­˜bitmapåˆ°å†…å­˜è®¾å¤‡æè¿°è¡¨    saveDC.BitBlt((0, 0), (width, height), mfcDC, (0, 0), win32con.SRCCOPY)    signedIntsArray = saveBitMap.GetBitmapBits(True)    im_opencv = numpy.frombuffer(signedIntsArray, dtype='uint8')    im_opencv.shape = (height, width, 4)    cv2.cvtColor(im_opencv, cv2.COLOR_BGRA2RGB)</code></pre><h4 id="æ¨¡æ¿å›¾åƒä¸å½“å‰è·å–çš„æˆªå›¾è¿›è¡Œç›¸ä¼¼åº¦åŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸè¿›è¡Œåˆ·å›¾å®Œæˆæç¤º">æ¨¡æ¿å›¾åƒä¸å½“å‰è·å–çš„æˆªå›¾è¿›è¡Œç›¸ä¼¼åº¦åŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸè¿›è¡Œåˆ·å›¾å®Œæˆæç¤º</h4><pre class=" language-language-python"><code class="language-language-python">    template = cv2.imread(path)    H1 = cv2.calcHist([im_opencv], [1], None, [256], [0, 256])    H1 = cv2.normalize(H1, H1, 0, 1, cv2.NORM_MINMAX, -1)    H2 = cv2.calcHist([template], [1], None, [256], [0, 256])    H2 = cv2.normalize(H2, H2, 0, 1, cv2.NORM_MINMAX, -1)    # åˆ©ç”¨compareHistï¼ˆï¼‰è¿›è¡Œæ¯”è¾ƒç›¸ä¼¼åº¦    similarity = cv2.compareHist(H1, H2, 0)</code></pre><h4 id="é¦–æ¬¡è¿›è¡Œå¾ªç¯ä¸æ–­æˆªå›¾è·å–åˆ·å›¾çš„æ—¶é•¿ï¼Œæ ¹æ®æ—¶é•¿è¿›è¡Œä¼˜åŒ–æˆªå›¾åŒ¹é…æ—¶é—´æ®µ">é¦–æ¬¡è¿›è¡Œå¾ªç¯ä¸æ–­æˆªå›¾è·å–åˆ·å›¾çš„æ—¶é•¿ï¼Œæ ¹æ®æ—¶é•¿è¿›è¡Œä¼˜åŒ–æˆªå›¾åŒ¹é…æ—¶é—´æ®µ</h4><pre class=" language-language-python"><code class="language-language-python">def getStep(cls,name,path):    step = 0    flag = True    while(flag):        similarity = img(cls,name,path)        if(similarity > 0.9):            flag = False            print(1)        else:            step = step + 1    return step</code></pre><h4 id="æ ¹æ®é¦–æ¬¡æ—¶é—´æ®µè¿è¡Œå½“å‰ä»£ç è¿›è¡Œæç¤º">æ ¹æ®é¦–æ¬¡æ—¶é—´æ®µè¿è¡Œå½“å‰ä»£ç è¿›è¡Œæç¤º</h4><pre class=" language-language-python"><code class="language-language-python">def turn(cls,name,path):    similarity = img(cls, name, path)    if(similarity > 0.9):        print(1)</code></pre><h4 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </h4><pre class=" language-language-python"><code class="language-language-python">#å¯¹åå°çª—å£æˆªå›¾import win32gui, win32ui, win32conimport cv2import numpydef img(cls,name,path):    # è·å–åå°çª—å£çš„å¥æŸ„ï¼Œæ³¨æ„åå°çª—å£ä¸èƒ½æœ€å°åŒ–    hWnd = win32gui.FindWindow(cls,name)    # è·å–å¥æŸ„çª—å£çš„å¤§å°ä¿¡æ¯    left, top, right, bot = win32gui.GetWindowRect(hWnd)    width = right - left    height = bot - top    hWndDC = win32gui.GetWindowDC(hWnd)    # åˆ›å»ºè®¾å¤‡æè¿°è¡¨    mfcDC = win32ui.CreateDCFromHandle(hWndDC)    # åˆ›å»ºå†…å­˜è®¾å¤‡æè¿°è¡¨    saveDC = mfcDC.CreateCompatibleDC()    # åˆ›å»ºä½å›¾å¯¹è±¡å‡†å¤‡ä¿å­˜å›¾ç‰‡    saveBitMap = win32ui.CreateBitmap()    # ä¸ºbitmapå¼€è¾Ÿå­˜å‚¨ç©ºé—´    saveBitMap.CreateCompatibleBitmap(mfcDC, width, height)    # å°†æˆªå›¾ä¿å­˜åˆ°saveBitMapä¸­    saveDC.SelectObject(saveBitMap)    # ä¿å­˜bitmapåˆ°å†…å­˜è®¾å¤‡æè¿°è¡¨    saveDC.BitBlt((0, 0), (width, height), mfcDC, (0, 0), win32con.SRCCOPY)    signedIntsArray = saveBitMap.GetBitmapBits(True)    im_opencv = numpy.frombuffer(signedIntsArray, dtype='uint8')    im_opencv.shape = (height, width, 4)    cv2.cvtColor(im_opencv, cv2.COLOR_BGRA2RGB)    # cv2.imwrite("im_opencv.jpg",im_opencv,[int(cv2.IMWRITE_JPEG_QUALITY), 100]) #ä¿å­˜    # cv2.namedWindow('im_opencv') #å‘½åçª—å£    # cv2.imshow("im_opencv",im_opencv) #æ˜¾ç¤º    template = cv2.imread(path)    H1 = cv2.calcHist([im_opencv], [1], None, [256], [0, 256])    H1 = cv2.normalize(H1, H1, 0, 1, cv2.NORM_MINMAX, -1)  #    H2 = cv2.calcHist([template], [1], None, [256], [0, 256])    H2 = cv2.normalize(H2, H2, 0, 1, cv2.NORM_MINMAX, -1)    # åˆ©ç”¨compareHistï¼ˆï¼‰è¿›è¡Œæ¯”è¾ƒç›¸ä¼¼åº¦    similarity = cv2.compareHist(H1, H2, 0)    cv2.waitKey(0)    cv2.destroyAllWindows()    # å†…å­˜é‡Šæ”¾    win32gui.DeleteObject(saveBitMap.GetHandle())    saveDC.DeleteDC()    mfcDC.DeleteDC()    win32gui.ReleaseDC(hWnd, hWndDC)    return similaritydef getStep(cls,name,path):    step = 0    flag = True    while(flag):        similarity = img(cls,name,path)        if(similarity > 0.9):            flag = False            print(1)        else:            step = step + 1    return stepdef turn(cls,name,path):    similarity = img(cls, name, path)    if(similarity > 0.9):        print(1)</code></pre><h4 id="åç»­è¡¥å……å®Œå–„">åç»­è¡¥å……å®Œå–„</h4><p>æ ¹æ®ä¸åŒçš„å…³å¡è®¾ç½®ä¸åŒçš„æ—¶é—´æ®µã€‚æ ¹æ®ä¸åŒæ¸¸æˆå’Œç©æ³•é€‰æ‹©å¯¹åº”çš„æ¨¡æ¿ã€‚è¡¥ä¸Šè¯­éŸ³æç¤ºã€‚</p><p>ç®€å•åŠ ä¸€ä¸ªåˆ·å›¾å®Œæˆæ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»æ“ä½œï¼Œå¦‚æœä¸å°æˆ‘ï¼Œæˆ‘å°±ç›´æ¥å†™è„šæœ¬ï¼Œå¦‚æœå°æˆ‘ï¼Œé‚£æˆ‘å°±ä¸å†™äº†ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> è„šæœ¬ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é’æ˜¥çºªå¿µå†Œ</title>
      <link href="/2021/05/28/qing-chun-ji-nian-ce/"/>
      <url>/2021/05/28/qing-chun-ji-nian-ce/</url>
      
        <content type="html"><![CDATA[<h3 id="é’æ˜¥çºªå¿µå†Œ">é’æ˜¥çºªå¿µå†Œ</h3><video id="video" controls="" preload="none">    <source id="mp4" src="http://dingdm.online/%E9%9D%92%E6%98%A5%E7%BA%AA%E5%BF%B5%E5%86%8C.mp4" type="video/mp4"></video><p>è§†é¢‘æ¥æºè‡ªhttps://www.bilibili.com/video/BV19K4y1G759?t=6189ï¼Œé˜²æ­¢å’Œè°ï¼Œè‡ªå·±ç¼“å­˜ç•™ä½œçºªå¿µä»¥åé‡æ¸©ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> å½±è§† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è€å‹è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ç¬”è®°ä¸‰</title>
      <link href="/2021/05/21/shen-du-xue-xi-bi-ji-san/"/>
      <url>/2021/05/21/shen-du-xue-xi-bi-ji-san/</url>
      
        <content type="html"><![CDATA[<h3 id="æ·±åº¦å­¦ä¹ ç¬”è®°ä¸‰">æ·±åº¦å­¦ä¹ ç¬”è®°ä¸‰</h3><h4 id="é€»è¾‘å›å½’çš„è®¡ç®—è¿‡ç¨‹-Discriminative">é€»è¾‘å›å½’çš„è®¡ç®—è¿‡ç¨‹ Discriminative</h4><h5 id="Step1-é€‰å–Loss-function">Step1 é€‰å–Loss function</h5><p><img src="http://dingdm.online/step1loss.png" alt=""></p><h5 id="Step2-é€‰å–å˜é‡è®¡ç®—æœ€å°å€¼">Step2 é€‰å–å˜é‡è®¡ç®—æœ€å°å€¼</h5><p><img src="http://dingdm.online/step2min.png" alt=""></p><p>ä¸ºäº†æ–¹ä¾¿gradientè®¡ç®—æœ€å°å€¼ï¼Œå°†wï¼Œbçš„æœ€å¤§å€¼å…¬å¼è½¬æ¢ä¸ºæœ€å°å€¼è¿›è¡Œè®¡ç®—ã€‚å¯¹functionè¿›è¡ŒlnåŒ–ã€‚</p><p><img src="http://dingdm.online/step2ln.png" alt=""></p><p>ä»¥yhatè¿›è¡ŒåŒºåˆ†åˆ†ç±»å¹¶å¯¹lnçš„functionè¿›è¡Œäº¤å‰ç†µã€‚</p><h5 id="Step3-gradient">Step3 gradient</h5><p>å¯¹wè¿›è¡Œå¾®åˆ†ï¼Œå…¶ä¸­wç”±ä¸Šç¯‡ç¬”è®°åˆ†æçº¿æ€§å›å½’è€Œæ¥ã€‚</p><p><img src="http://dingdm.online/step3w.png" alt=""></p><p>å¾®åˆ†åå¯¹wè¿›è¡Œgradientçš„å…¬å¼ä¸º</p><p><img src="http://dingdm.online/step3gradient.png" alt=""></p><h5 id="åŒºåˆ†">åŒºåˆ†</h5><p>åœ¨ä½¿ç”¨é€»è¾‘å›å½’æ—¶ï¼Œyhatä¸é¢„æµ‹çš„å€¼çš„æœ€å¤§å·®è·æ¥è®¡ç®—è¾ƒä¸ºåˆç†ã€‚</p><p><img src="http://dingdm.online/step3class.png" alt=""></p><p>è€Œsquareå¯¹äºyhatå’Œé¢„æµ‹çš„å·®è·åœ¨è¯¯å·®è¾ƒå¤§æ—¶ä»ä¸º0ï¼Œå¯¼è‡´å¾—åˆ°çš„loss functionè¾ƒä¸ºå¹³ç¼“ï¼Œåœ¨è¿›è¡Œgradientæ—¶ä¸‹é™è¾ƒæ…¢ã€‚</p><p>åˆ¤åˆ«æ¨¡å‹å¯¹äºæ•°æ®çš„é‡çš„æ•æ„Ÿåº¦è¾ƒé«˜ï¼Œè€Œç”Ÿæˆæ¨¡å‹å¯¹äºæ•°æ®é‡çš„æ•æ„Ÿåº¦ä¸é«˜ã€‚</p><h4 id="Multi-class-Classification-3-classes">Multi-class Classification(3 classes)</h4><p><img src="http://dingdm.online/moreclass.png" alt=""></p><p>è®¡ç®—äº¤å‰ç†µ</p><p><img src="http://dingdm.online/jiaocha.png" alt=""></p><h4 id="é€»è¾‘å›å½’çš„é™åˆ¶">é€»è¾‘å›å½’çš„é™åˆ¶</h4><p>å¯¹äºé¢„æµ‹çš„æ•°æ®åœ¨å›å½’é¢„æµ‹ä¸­å¤„äºå¯¹è§’çº¿æ—¶ï¼Œé€»è¾‘å›å½’å°±æ— æ³•è¿›è¡Œé¢„æµ‹ï¼Œå–ä¸åˆ°åˆé€‚çš„å€¼æ¥è¿›è¡ŒåŒºåˆ†ã€‚</p><p>å¯¹äºè¿™ç§æ–¹æ³•å¯ä»¥é€šè¿‡åˆé€‚çš„å‡½æ•°æˆ–è€…æ–¹æ³•è¿›è¡Œæ•°å­¦è®¡ç®—ï¼Œå°†å¯¹è§’çº¿çš„å¤„çš„è¾“å…¥å€¼è¿›è¡Œåˆ†ç±»åˆ°ç›¸ä¼¼åŒºåŸŸã€‚ä½†æ˜¯å‡½æ•°çš„è·å–è¾ƒéš¾ï¼Œæœºå™¨å­¦ä¹ æ— æ³•äº§ç”Ÿæˆ–äº§ç”Ÿçš„ä»£ä»·è¿‡é«˜ã€‚</p><p>å¯ä»¥é€šè¿‡å¯¹è¾“å…¥ç‰¹å¾ä¸²è”çš„æ–¹æ³•å¾—åˆ°æ–°çš„è¾“å…¥ç‰¹å¾ï¼Œæ–°çš„è¾“å…¥ç‰¹å¾å¯ä»¥åœ¨ç›¸ä¼¼åŒºåŸŸçš„æƒ…å†µä¸‹åœ¨è¿›è¡Œé€»è¾‘å›å½’ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é€»è¾‘å›å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ç¬¬äºŒæ¬¡ç¼–ç </title>
      <link href="/2021/05/20/shen-du-xue-xi-di-er-ci-bian-ma/"/>
      <url>/2021/05/20/shen-du-xue-xi-di-er-ci-bian-ma/</url>
      
        <content type="html"><![CDATA[<h3 id="æ·±åº¦å­¦ä¹ ç¬¬äºŒæ¬¡ç¼–ç ">æ·±åº¦å­¦ä¹ ç¬¬äºŒæ¬¡ç¼–ç </h3><h4 id="ä½¿ç”¨çˆ¬è™«çˆ¬å–æ˜æ—¥æ–¹èˆŸå¹²å‘˜å±æ€§ï¼Œè¿›è¡Œé€»è¾‘å›å½’é¢„æµ‹">ä½¿ç”¨çˆ¬è™«çˆ¬å–æ˜æ—¥æ–¹èˆŸå¹²å‘˜å±æ€§ï¼Œè¿›è¡Œé€»è¾‘å›å½’é¢„æµ‹</h4><pre class=" language-language-python"><code class="language-language-python"># author:dinggc# date:2021/5/20 ä¸‹åˆ12:03import data as gd# wä¹‹å‰çš„æ‰€æœ‰å¹²å‘˜çš„æ•°æ® åˆ†ç±»ä¸ºé‡è£…å’Œå…¶ä»–èŒä¸š ä¸è€ƒè™‘æ˜Ÿçº§çš„å½±å“ä¸‹# è¾“å…¥ç‰¹å¾ä¸º6ä¸ªï¼Œåˆ†åˆ«ä¸ºåˆå§‹ç‰¹å¾å’Œè´¹ç”¨ã€‚ç”Ÿå‘½ æ”»å‡» é˜²å¾¡ æ³•æŠ—# çˆ¬å–æ•°æ®# print(gd.getData('https://wiki.biligame.com/arknights/%E5%B9%B2%E5%91%98%E6%95%B0%E6%8D%AE%E8%A1%A8'))# Î¼å’ŒÎµåœ¨è®­ç»ƒæ•°æ®ä¸Šè®¡ç®—é«˜æ–¯åˆ†å¸ƒçš„æœ€å¤§å¯èƒ½æ€§import pymysql# å»ºç«‹æ•°æ®åº“è¿æ¥conn = pymysql.Connect(host='127.0.0.1',                       port=3306,                       user='root',                       passwd='dgc123.com',                       db='python',                       charset='utf8')# è·å–æ¸¸æ ‡å¯¹è±¡cursor = conn.cursor(pymysql.cursors.DictCursor)# æ’å…¥æ•°æ®è¯­å¥query = """SELECT arknights.life,        arknights.attack,arknights.defense,arknights.resistance,arknights.profession FROM arknights WHERE id < 978"""cursor.execute(query)list = cursor.fetchall()# è®¡ç®—é‡è£…å’Œå…¶ä»–æ•°ç›®# print(gd.calcCount(list,'é‡è£…'))# print(gd.calcCount(list,'å…¶ä»–'))# 17# 133zCount = gd.calcCount(list,1)oCount = gd.calcCount(list,0)# è®¡ç®—p(é‡è£…) 0.12781954887218044# print(gd.calcSP(list,zCount))pZ = gd.calcSP(list,zCount)# è®¡ç®—p(å…¶ä»–) 0.8721804511278195#print(gd.calcSP(list,oCount))pO = gd.calcSP(list,oCount)print(gd.calÎ¼(list,zCount))Î¼StarZ = gd.calÎ¼(list,int(zCount))# è®¡ç®—é‡è£…# é‡è£…Î¼çš„æœ€å¤§å¯èƒ½æ€§ [6933.294117647059, 1889.5882352941176, 908.7058823529412, 29.41176470588235]çš„è½¬ç½®# print(gd.calÎµ(list,Î¼StarZ,zCount,1))# ÎµStarZ =gd.calÎµ(list,Î¼StarZ,zCount,1)print(gd.calÎµ(list,Î¼StarZ,zCount))ÎµStarZ = gd.calÎµ(list,Î¼StarZ,zCount)# é‡è£…Îµçš„æœ€å¤§å¯èƒ½æ€§# [[1.21203507e+06 3.75984385e+07 7.80255296e+07 2.86753473e+08]#  [3.30847431e+05 1.02180807e+07 2.12961342e+07 7.80255296e+07]#  [1.59228689e+05 4.95178622e+06 1.02180807e+07 3.75984385e+07]#  [5.45824344e+03 1.59228689e+05 3.30847431e+05 1.21203507e+06]]# è®¡ç®—ä¸€èˆ¬print(gd.calÎ¼(list,int(oCount)))Î¼StarO = gd.calÎ¼(list,int(oCount))# å…¶ä»–Î¼çš„æœ€å¤§å¯èƒ½æ€§ [1016.0862068965517, 276.92241379310343, 133.17241379310346, 4.310344827586207]çš„è½¬ç½®# print(gd.calÎµ(list,Î¼StarO,oCount))# å…¶ä»–Îµçš„æœ€å¤§å¯èƒ½æ€§# [[-1.47530265e+02  1.76302963e+04  1.35486771e+04  1.17346441e+05]#  [ 3.62113940e+01  5.64593090e+02  8.26326463e+03  1.35486771e+04]#  [ 3.55354873e+01  5.82516993e+03  5.64593090e+02  1.76302963e+04]#  [ 4.57816536e+01  3.55354873e+01  3.62113940e+01 -1.47530265e+02]]# ÎµStarO = gd.calÎµ(list,Î¼StarO,oCount,1)ÎµStarO = gd.calÎµ(list,Î¼StarO,oCount)print(gd.calÎµ(list,Î¼StarO,oCount))# è®¡ç®—é«˜æ–¯åˆ†å¸ƒå¹¶è®¡ç®—å‡†ç¡®ç‡# æµ‹è¯•æ•°æ®ä¸­çš„æ•°æ®ä¸º7,é¢„æµ‹åº”è¯¥æœ‰çš„æ•°æ®ä¸º19,æ­£ç¡®ç‡ä¸º36.84210526315789%queryTest = """SELECT arknights.initial,arknights.perfect,arknights.life,        arknights.attack,arknights.defense,arknights.resistance,arknights.profession FROM arknights WHERE id > 977"""cursor.execute(queryTest)test = cursor.fetchall()# print(gd.calcResult(Î¼StarZ,ÎµStarZ,Î¼StarO,ÎµStarO,pZ,pO,test))matrix = gd.matrix_add(gd.calcSame(ÎµStarZ,pZ),gd.calcSame(ÎµStarO,pO))print(gd.calcResult(Î¼StarZ,matrix,Î¼StarO,matrix,pZ,pO,test))cursor.close()conn.commit()conn.close()</code></pre><p>ä½¿ç”¨åˆ°çš„å·¥å…·å‡½æ•°</p><pre class=" language-language-python"><code class="language-language-python"># author:dinggc# date:2021/5/20 ä¸‹åˆ12:23import requests    #requestsæ˜¯HTTPåº“import refrom bs4 import BeautifulSoup as bs   #bs:é€šè¿‡è§£ææ–‡æ¡£ä¸ºç”¨æˆ·æä¾›éœ€è¦æŠ“å–çš„æ•°æ®import osimport mathimport ioimport sysimport pymysqlimport numpy as npsys.stdout = io.TextIOWrapper(sys.stdout.buffer,encoding='utf8') #æ”¹å˜æ ‡å‡†è¾“å‡ºçš„é»˜è®¤ç¼–ç #æˆ‘ä»¬å¼€å§‹åˆ©ç”¨requests.getï¼ˆï¼‰æ¥è·å–ç½‘é¡µå¹¶åˆ©ç”¨bs4è§£æç½‘é¡µï¼šdef getData(src):    # å»ºç«‹æ•°æ®åº“è¿æ¥    conn = pymysql.Connect(host='127.0.0.1',                           port=3306,                           user='root',                           passwd='dgc123.com',                           db='python',                           charset='utf8')    # è·å–æ¸¸æ ‡å¯¹è±¡    cursor = conn.cursor()    # æ’å…¥æ•°æ®è¯­å¥    query = """insert into arknights (initial,perfect,life,attack,defense,resistance,username,profession) values (%s,%s,%s,%s,%s,%s,%s,%s)"""    html = requests.get(src).content    # requests.get(src)è¿”å›çš„æ˜¯çŠ¶æ€ç <Response [200]>ï¼ŒåŠ ä¸Š.contentä»¥å­—èŠ‚å½¢å¼ï¼ˆäºŒè¿›åˆ¶è¿”å›æ•°æ®ã€‚   å’Œå‰ç«¯ä¸€æ ·ï¼Œåˆ†ä¸ºget postç­‰    soup = bs(html,'lxml')   # lxmlè§£æå™¨è§£æå­—èŠ‚å½¢å¼çš„æ•°æ®ï¼Œå¾—åˆ°å®Œæ•´çš„ç±»ä¼¼é¡µé¢çš„htmlä»£ç ç»“æ„çš„æ•°æ®    introductions = soup.find_all("tr", class_="divsort")    for introduction in introductions:      name = introduction.find_all("td")[1].find_all("a")[0].text.replace(' ','')      data = requests.get('https://wiki.biligame.com/arknights/' + name).content      dataSoup = bs(data,'lxml')      profession = dataSoup.find_all("table", class_="wikitable")[1].find_all("tr")[0].find_all("td")[0].text.replace(' ','')      life = dataSoup.find_all("table", class_="wikitable")[3].find_all("tr")[1].find_all("td")[1].text.replace(' ','')      attack = dataSoup.find_all("table", class_="wikitable")[3].find_all("tr")[2].find_all("td")[1].text.replace(' ','')      defense = dataSoup.find_all("table", class_="wikitable")[3].find_all("tr")[3].find_all("td")[1].text.replace(' ','')      resistance = dataSoup.find_all("table", class_="wikitable")[3].find_all("tr")[4].find_all("td")[1].text.replace(' ','')      values = (int(float(life)),int(float(attack)),int(float(defense)),                int(float(resistance)),str(name),str(profession))      cursor.execute(query,values)    cursor.close()    conn.commit()    conn.close()    return "success"def calÎ¼(list,count):    Î¼ = []    sumLife = sumAttack = sumDefense = sumResistance = 0    for item in list:        sumLife = sumLife + item['life']        sumAttack = sumAttack + item['attack']        sumDefense = sumDefense + item['defense']        sumResistance = sumResistance + item['resistance']    Î¼.append(sumLife / count)    Î¼.append(sumAttack / count)    Î¼.append(sumDefense / count)    Î¼.append(sumResistance / count)    return Î¼def calÎµ(list,Î¼Star,count):    matrix = [[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]    for item in list:      front = []      front.append(item['life'] - Î¼Star[0])      front.append(item['attack'] - Î¼Star[1])      front.append(item['defense'] - Î¼Star[2])      front.append(item['resistance'] - Î¼Star[3])      matrix = matrix_add(matrix,OneMult(front,front[::-1]))    return np.multiply(matrix,np.array([[1/count,1/count,1/count,1/count],[1/count,1/count,1/count,1/count],[1/count,1/count,1/count,1/count],[1/count,1/count,1/count,1/count]]))def calcCount(list,flag):    sum = 0    for item in list:        if('é‡è£…' == item['profession']):            sum = sum + 1    if (flag == 1):        return sum    else:        return len(list) - sumdef calcSP(list,count):    return count / len(list)def calcResult(Î¼StarZ,ÎµStarZ,Î¼StarO,ÎµStarO,pZ,pO,test):    sum = right = 0    for item in test:      resultZ = calcGauss(Î¼StarZ,ÎµStarZ,item)      resultO = calcGauss(Î¼StarO,ÎµStarO,item)      result = (resultZ * pZ) / (resultZ * pZ + resultO + pO)      if(item['profession'] == 'é‡è£…'):        sum = sum + 1      if(result > 0.5):        right = right + 1    return 'æµ‹è¯•æ•°æ®ä¸­çš„æ•°æ®ä¸º{0},é¢„æµ‹åº”è¯¥æœ‰çš„æ•°æ®ä¸º{1},æ­£ç¡®ç‡ä¸º{2}{3}'.format(sum,right,sum / right * 100,'%')def calcGauss(Î¼Star,ÎµStar,item):    front = []    front.append(item['life'] - Î¼Star[0])    front.append(item['attack'] - Î¼Star[1])    front.append(item['defense'] - Î¼Star[2])    front.append(item['resistance'] - Î¼Star[3])    ÎµStarTemp = np.linalg.inv(ÎµStar)    temp = np.dot(front,np.dot(ÎµStarTemp,front))    result = math.e ** (temp * (-0.5))    other = (1 / (pow(math.pi * 2, 2))) * (1 / pow(np.linalg.det(ÎµStar), 0.5))    return result * otherdef matrix_add(matrix1,matrix2):    total_element = [matrix1[i][j] + matrix2[i][j] for i in range(len(matrix1)) for j in range(len(matrix1))]    new_matrix = [total_element[x:x+len(matrix1)] for x in range(0,len(total_element),len(matrix1))]    return new_matrixdef OneMult(list1,list2):    result = []    for i in list1:        temp = []        for j in list2:            temp.append(i * j)        result.append(temp)    return resultdef calcSame(list,p):    return np.multiply(list,np.array([[p,p,p,p],[p,p,p,p],[p,p,p,p],[p,p,p,p]]))</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é€»è¾‘å›å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ç¬”è®°äºŒ</title>
      <link href="/2021/05/19/shen-du-xue-xi-bi-ji-er/"/>
      <url>/2021/05/19/shen-du-xue-xi-bi-ji-er/</url>
      
        <content type="html"><![CDATA[<h3 id="æ·±åº¦å­¦ä¹ ç¬”è®°äºŒ">æ·±åº¦å­¦ä¹ ç¬”è®°äºŒ</h3><h4 id="New-Optimization-for-Deep-Learning">New Optimization for Deep Learning</h4><p>On-lineï¼šone pair of (xt,yt) at a time step (å•è¾“å…¥)<br>Off-lineï¼špour all into the model(å…¨è¾“å…¥)</p><p>SGDï¼šé€‰å–åˆå§‹ä½ç½®ï¼Œè®¡ç®—gradientï¼Œæ ¹æ®ç»“æœå‘æ›´ä½çš„lossæ–¹å‘èµ°ï¼Œè¿­ä»£è®¡ç®—æœ€ä½çš„losså€¼</p><p>SGDMï¼šè®¡ç®—ç§»åŠ¨çš„è·ç¦»åŠ vï¼Œv0 = 0ã€‚è¾ƒä¸ºç¨³å®šã€‚</p><p><img src="http://dingdm.online/step.png" alt=""></p><p>ä½¿ç”¨vçš„ä½œç”¨é˜²æ­¢Î¸è®¡ç®—çš„ç»“æœä¸º0ï¼Œä¸å†ç§»åŠ¨å’Œæœ‰æ›´ä½çš„ç‚¹é˜²æ­¢ä¸å†å‘å‰ç§»åŠ¨ã€‚</p><p>Adagradï¼š</p><p><img src="http://dingdm.online/adagrad.png" alt=""></p><p>åˆ†æ¯ä¸ºä¹‹å‰è®¡ç®—çš„æ‰€æœ‰gradientçš„å¹³æ–¹å’Œï¼Œå³èµ°çš„æ¯”è¾ƒæ€¥çš„æ—¶å€™gradientæ¯”è¾ƒå¤§ï¼Œèµ°çš„æ—¶å€™ä½¿ç”¨è¾ƒå°çš„learning rateï¼Œè€Œèµ°çš„æ¯”è¾ƒå°çš„æ—¶å€™ä½¿ç”¨è¾ƒå¤§çš„learning rateã€‚</p><p>RMSPropï¼š</p><p><img src="http://dingdm.online/rmsprop.png" alt=""></p><p>åœ¨adagradä¸­å¦‚æœgradientè¾ƒå¤§ï¼Œé‚£ä¹ˆè®¡ç®—çš„åˆ†æ¯è¾ƒå°ï¼Œä¸‹é™å¾ˆæ…¢ï¼Œè€Œrmspropä¿è¯ä¸ä¼šå› è¿‡å¤§çš„gradientè€Œä¸‹é™è¿‡æ…¢ã€‚è€Œä¸ºäº†é˜²æ­¢ä¸å†ç§»åŠ¨å’Œå‘å‰ç§»åŠ¨çš„é—®é¢˜ï¼Œå¯ä»¥ç»“åˆSGDMä½¿ç”¨ï¼Œå³Adamã€‚</p><p>Adamï¼šè®­ç»ƒè¾ƒå¿«ã€‚</p><p><img src="http://dingdm.online/adam.png" alt=""></p><p>SWATSï¼šbegin with Adamï¼Œend with SGDM</p><p>Towards improving Adamï¼šAMSGrad åªè€ƒè™‘äº†learning rateè¾ƒå¤§çš„æƒ…å†µ</p><p>å½“gradientæœªçªå˜æˆ–gradientä¸€ç›´è¾ƒå°æ—¶ï¼Œç§»åŠ¨çš„è·ç¦»å¾ˆæ…¢ï¼Œç§»åŠ¨æ–¹å‘ä¸å®šï¼Œç›´åˆ°gradientçªå˜ï¼Œæ‰ä¼šç¡®å®šæ–¹å‘ã€‚vt =  max(vt-1,vt)ï¼Œé€‰å–æœ€å¤§çš„gradientå³å¯(è®°ä½è¿‡å»è¾ƒå¤§çš„gradient)ã€‚ä¹Ÿä¼šèµ°å›å¤´è·¯ã€‚</p><p>Towards improving Adamï¼šAdaBound</p><p><img src="http://dingdm.online/adabound.png" alt=""></p><p>Towards improving SGDMï¼šLR range testï¼ŒCyclical LRï¼ŒSGDRï¼ŒOne-cycle LR</p><p>Adam with warm-upï¼šRAdam</p><p>å³åœ¨æ–¹å‘ä¸ç¡®å®šå³vtä¸ç¡®å®šæ—¶ï¼Œç§»åŠ¨çš„è·ç¦»çŸ­ï¼Œå½“vtç¡®å®šå¹³ç¼“æ—¶ï¼Œç§»åŠ¨çš„è·ç¦»å¤§ã€‚ä½¿ç”¨rtæ¥åˆ¤æ–­æ–¹å‘æƒ…å†µã€‚rtä¸gradientæ— å…³ã€‚å…ˆSGDMåœ¨Radamã€‚</p><p><img src="http://dingdm.online/radam1.png" alt=""></p><p><img src="http://dingdm.online/radam2.png" alt=""></p><p>Lookaheadï¼šuniversal wrapper for all optimizers æ¯kæ­¥å›é€€æ£€æŸ¥</p><p><img src="http://dingdm.online/look.png" alt=""></p><p>Look into the futureï¼šNAG</p><p><img src="http://dingdm.online/nag.png" alt=""></p><p>Nadamï¼šé¢„æµ‹</p><p><img src="http://dingdm.online/nadam.png" alt=""></p><p>Adamw and SGDWï¼š</p><p><img src="http://dingdm.online/w.png" alt=""></p><h4 id="Classificationï¼šProbabilistic-Generative-Model">Classificationï¼šProbabilistic Generative Model</h4><p>æ¡ˆä¾‹ï¼šå¯¹äºæ˜æ—¥æ–¹èˆŸå¹²å‘˜å±æ€§é¢„æµ‹åˆ†ç±»</p><p>Training data for Classificationï¼šå¤•ä¹‹å‰çš„å¹²å‘˜</p><h5 id="Ideal-Alternatives">Ideal Alternatives</h5><p>functionï¼šå¯¹äºè®­ç»ƒå¾—åˆ°çš„gå‡½æ•°è¿›è¡Œé¢„æµ‹ï¼Œg(x) &gt; 0 è¾“å‡ºclass1ï¼Œåä¹‹è¾“å‡ºclass2<br>Loss functionï¼š</p><p><img src="http://dingdm.online/loss.png" alt=""></p><p>Find the best function</p><h5 id="Generative-model">Generative model</h5><p>æ¦‚ç‡é—®é¢˜ï¼Œå³è¾“å…¥çš„å€¼ä¸ºä»é¢„æµ‹ç»“æœä¸­æå–çš„æ¦‚ç‡ã€‚å¯¹äºäºŒå…ƒåˆ†ç±»ï¼Œå³è®­ç»ƒæ¯ä¸ªå•å…ƒçš„æ¦‚ç‡å’Œä»å•å…ƒä¸­æå–è¾“å…¥å€¼xçš„æ¦‚ç‡ã€‚</p><p>æ–¹èˆŸå¹²å‘˜çš„å„é¡¹å±æ€§ä½œä¸ºfeatureã€‚</p><p>ä»è®­ç»ƒæ•°æ®ä¸­è®­ç»ƒå¾—åˆ°é«˜æ–¯åˆ†å¸ƒçš„Î¼å’ŒÎµã€‚æ ¹æ®è¾“å…¥çš„ç‰¹å¾xé€šè¿‡é«˜æ–¯è®¡ç®—å¾—å‡ºæœºç‡ã€‚</p><h5 id="Maximum-Likelihood">Maximum Likelihood</h5><p>æ ¹æ®ç»™å®šçš„Î¼å’ŒÎµåœ¨è®­ç»ƒæ•°æ®ä¸Šè®¡ç®—é«˜æ–¯åˆ†å¸ƒçš„æœ€å¤§å¯èƒ½æ€§ã€‚</p><p><img src="http://dingdm.online/likelihood.png" alt=""></p><p>æ‰¾å‡ºæœ€åˆé€‚çš„Î¼å’ŒÎµã€‚</p><p><img src="http://dingdm.online/maxium.png" alt=""></p><p><img src="http://dingdm.online/gailv.png" alt=""></p><p>æ ¹æ®æ¦‚ç‡å…¬å¼ä»¥åŠæ±‚çš„çš„é«˜æ–¯åˆ†å¸ƒè¿›è¡Œè®¡ç®—ã€‚</p><h5 id="ä¼˜åŒ–">ä¼˜åŒ–</h5><p>ä¸åŒçš„é«˜æ–¯åˆ†å¸ƒé€‰ç”¨åŒæ ·çš„Îµï¼Œå› ä¸ºå½“ç‰¹å¾è¾ƒå¤šæ—¶ï¼Œè®¡ç®—çš„ç»“æœè¾ƒå¤§ï¼Œå®¹æ˜“äº§ç”Ÿè¿‡æ‹Ÿåˆã€‚</p><p>Loss function</p><p><img src="http://dingdm.online/newLoss.png" alt=""></p><h5 id="é€‰ç”¨åŒæ ·çš„Îµå‘ˆç°çº¿æ€§åˆ†ç•Œçš„æ•°å­¦åŸç†">é€‰ç”¨åŒæ ·çš„Îµå‘ˆç°çº¿æ€§åˆ†ç•Œçš„æ•°å­¦åŸç†</h5><p><img src="http://dingdm.online/math1.png" alt=""></p><p><img src="http://dingdm.online/math2.png" alt=""></p><p><img src="http://dingdm.online/math3.png" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é€»è¾‘å›å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ç¬¬ä¸€æ¬¡å­¦ä¹ ç¼–ç </title>
      <link href="/2021/04/29/shen-du-xue-xi-di-yi-ci-xue-xi-bian-ma/"/>
      <url>/2021/04/29/shen-du-xue-xi-di-yi-ci-xue-xi-bian-ma/</url>
      
        <content type="html"><![CDATA[<h3 id="æ·±åº¦å­¦ä¹ ç¬¬ä¸€æ¬¡å­¦ä¹ ç¼–ç ">æ·±åº¦å­¦ä¹ ç¬¬ä¸€æ¬¡å­¦ä¹ ç¼–ç </h3><p>ç”±äºå—åˆ°ç¡¬ä»¶è®¾å¤‡çš„ç¼˜æ•…ï¼Œæ•…å¾—å‡ºçš„ç»“æœå¹¶ä¸å‡†ç¡®ï¼Œå¼€å­¦ä¹‹åå†æµ‹ï¼Œæœ¬æ¬¡è®°å½•ä»…ä»…å¯¹ä¹‹å‰å­¦ä¹ å†…å®¹çš„æ€»ç»“å’Œç¼–ç ã€‚</p><h4 id="é€šè¿‡éŸ©æœlol15åˆ†é’Ÿç»æµå·®é¢„æµ‹æœ¬åœºæ—¶é•¿">é€šè¿‡éŸ©æœlol15åˆ†é’Ÿç»æµå·®é¢„æµ‹æœ¬åœºæ—¶é•¿</h4><p>æœ¬æ¥åº”è¯¥ä½¿ç”¨æ­£è§„æ¯”èµ›æ•°æ®ï¼Œä½†æ˜¯æˆ‘æ²¡æ‰¾åˆ°æ¥å£ã€‚äºæ˜¯ä½¿ç”¨rankçš„æ¥å£æ¥ç¼–ç ä¸€ä¸‹æ•´ä¸ªçº¿æ€§å›å½’çš„è®¡ç®—è¿‡ç¨‹ã€‚æœ€è¿‘å¾ˆå¿™ï¼Œå› æ­¤åªæ˜¯è®¡ç®—äº†rankçš„15åˆ†é’Ÿç»æµå·®çš„ä¸€æ¬¡å’ŒäºŒæ¬¡å‹ï¼Œå¯¹äºæ›´é«˜æ¬¡æˆ–è€…å…¶ä»–ç‰¹å¾(è‹±é›„ï¼Œç†Ÿç»ƒåº¦ï¼Œå°é¾™ç­‰)ä»¥åæœ‰æ—¶é—´å†è¡¥ã€‚</p><h5 id="æ•´ç†çš„ååœºæ•°æ®">æ•´ç†çš„ååœºæ•°æ®</h5><pre class=" language-language-python"><code class="language-language-python"># ä½¿ç”¨æ•°æ®(15åˆ†é’Ÿç»æµå·®)# 1.8755 1123    2.1955 1682    3.8538 1151   4.2793 1518   5.13468 928   6.7521 913   7.11818 1118   8.12918 928   9.1842 1671   10.2795 1535</code></pre><h5 id="æ ¹æ®æ•°æ®ä¼°è®¡æƒé‡å’Œåå·®å¾—åˆ°functionå‡½æ•°">æ ¹æ®æ•°æ®ä¼°è®¡æƒé‡å’Œåå·®å¾—åˆ°functionå‡½æ•°</h5><pre class=" language-language-python"><code class="language-language-python"># å¯èƒ½å¾—åˆ°çš„å‡½æ•° å°†æ—¶é•¿æ”¾å¤§10å€ä¾¿äºè®¡ç®—# min W -1.4270724029380903 max W -0.6708197905381004# min B 17224.94131455399 max B 19338.66736621196</code></pre><h5 id="è®¡ç®—ä¸€æ¬¡å‹Loss">è®¡ç®—ä¸€æ¬¡å‹Loss</h5><pre class=" language-language-python"><code class="language-language-python">ca.calLoss([16710,16820,15180,15350,9130,11510,11230,11180,9280,9280],-1.42,18338,[1842,1955,2793,2795,7521,8538,8755,11818,12918,13468],[],[],0.01,1800,342903024,0)</code></pre><pre class=" language-language-python"><code class="language-language-python">def calLoss(list,w,b,list2,listW,listB,step,stepB,oldLoss,number):    loss = 0    for (m,n) in zip(list,list2):      loss = ma.pow((m - (b + w * n)),2) + loss    print("----------------------------------------------Lossçš„å€¼{}".format(loss))    print("Wçš„å€¼{}".format(w))    print("Bçš„å€¼{}".format(b))    resultW = 0    resultB = 0    stW = 0    stB = 0    for (i,z) in zip(list,list2):      resultW = 2 * (i - (b + w * z)) * (-1) * (z) + resultW      resultB = 2 * (i - (b + w * z)) * (-1) + resultB    listW.append(resultW)    listB.append(resultB)    for j in listW:      stW = stW + pow(j,2)    for k in listB:      stB = stB + pow(k,2)    print("åå¾®åˆ†Wçš„å€¼{}".format(resultW))    print("åå¾®åˆ†Bçš„å€¼{}".format(resultB))    print("wçš„å­¦ä¹ ç‡{}".format(((step/ma.sqrt(len(listW))) / ma.sqrt(stW / len(listW)))))    print("bçš„å­¦ä¹ ç‡{}".format(((stepB/ma.sqrt(len(listB))) / ma.sqrt(stB / len(listB)))))    number = number + 1    print("----------------------------------------------é€’å½’æ¬¡æ•°{}".format(number))    if loss < oldLoss:      calLoss(list, (w - ((step / ma.sqrt(len(listW))) / ma.sqrt(stW / len(listW))) * resultW),        (b - ((stepB / ma.sqrt(len(listB))) / ma.sqrt(stB / len(listB))) * resultB), list2, listW, listB, step,stepB,loss,number)</code></pre><p><strong>ç¡¬ä»¶é™åˆ¶ä¸‹çš„ç»“æœ</strong></p><pre class=" language-language-python"><code class="language-language-python"># w -0.6160429356395202 b 17027.335670323457 é€’å½’æ¬¡æ•°27295</code></pre><h5 id="è®¡ç®—äºŒæ¬¡å‹Loss">è®¡ç®—äºŒæ¬¡å‹Loss</h5><pre class=" language-language-python"><code class="language-language-python">ca.calSecondLoss([16710,16820,15180,15350,9130,11510,11230,11180,9280,9280],-2.2399005635135905,0.001108632563302861,20274,[1842,1955,2793,2795,7521,8538,8755,11818,12918,13468],[],[],[],0.1,0.001,1800,937810727010,0)</code></pre><pre class=" language-language-python"><code class="language-language-python">def calSecondLoss(list,w1,w2,b,list2,listW1,listW2,listB,step,step2,stepB,oldLoss,number):    loss = 0    for (m,n) in zip(list,list2):      loss = ma.pow((m - (b + w1 * n + w2 * ma.pow(n,2))),2) + loss    print("----------------------------------------------Lossçš„å€¼{}".format(loss))    print("W1çš„å€¼{}".format(w1))    print("W2çš„å€¼{}".format(w2))    print("Bçš„å€¼{}".format(b))    resultW1 = 0    resultW2 = 0    resultB = 0    stW1 = 0    stW2 = 0    stB = 0    for (i,z) in zip(list,list2):      resultW1 = 2 * (i - (b + w1 * z + w2 * ma.pow(z,2))) * (-1) * z + resultW1      resultW2 = 2 * (i - (b + w1 * z + w2 * ma.pow(z, 2))) * (-1) * (ma.pow(z, 2)) + resultW2      resultB = 2 * (i - (b + w1 * z + w2 * ma.pow(z, 2))) * (-1) + resultB    listW1.append(resultW1)    listW2.append(resultW2)    listB.append(resultB)    for j in listW1:      stW1 = stW1 + pow(j,2)    for p in listW2:      stW2 = stW2 + pow(p,2)    for k in listB:      stB = stB + pow(k,2)    print("åå¾®åˆ†W1çš„å€¼{}".format(resultW1))    print("åå¾®åˆ†W2çš„å€¼{}".format(resultW2))    print("åå¾®åˆ†Bçš„å€¼{}".format(resultB))    print("w1çš„å­¦ä¹ ç‡{}".format(((step/ma.sqrt(len(listW1))) / ma.sqrt(stW1 / len(listW1)))))    print("w2çš„å­¦ä¹ ç‡{}".format(((step2/ma.sqrt(len(listW2))) / ma.sqrt(stW2 / len(listW2)))))    print("bçš„å­¦ä¹ ç‡{}".format(((stepB/ma.sqrt(len(listB))) / ma.sqrt(stB / len(listB)))))    print(w1 - ((step / ma.sqrt(len(listW1))) / ma.sqrt(stW1 / len(listW1))))    print(w2 - ((step2 / ma.sqrt(len(listW2))) / ma.sqrt(stW2 / len(listW2))))    number = number + 1    print("----------------------------------------------é€’å½’æ¬¡æ•°{}".format(number))    if loss < oldLoss:      calSecondLoss(list, (w1 - ((step / ma.sqrt(len(listW1))) / ma.sqrt(stW1 / len(listW1))) * resultW1),(w2 - ((step2 / ma.sqrt(len(listW2))) / ma.sqrt(stW2 / len(listW2))) * resultW2),        (b - ((stepB / ma.sqrt(len(listB))) / ma.sqrt(stB / len(listB))) * resultB), list2, listW1,listW2, listB,step,step2,stepB,loss,number)</code></pre><p><strong>ç¡¬ä»¶é™åˆ¶ä¸‹çš„ç»“æœ</strong></p><pre class=" language-language-python"><code class="language-language-python"> w1 -1.5788327598874479 w2 0.00006534227083065703 b 19239.004622493012 é€’å½’ 20404</code></pre><h5 id="Regularization">Regularization</h5><pre class=" language-language-python"><code class="language-language-python">ca.calSecondLossWithExtraParam([16710,16820,15180,15350,9130,11510,11230,11180,9280,9280],-2.2399005635135905,0.001108632563302861,1,20274,[1842,1955,2793,2795,7521,8538,8755,11818,12918,13468],[],[],[],0.1,0.001,1800,937810727010,0)</code></pre><pre class=" language-language-python"><code class="language-language-python">def calSecondLossWithExtraParam(list,w1,w2,b,Î»,list2,listW1,listW2,listB,step,step2,stepB,oldLoss,number):    loss = 0    for (m,n) in zip(list,list2):      loss = ma.pow((m - (b + w1 * n + w2 * ma.pow(n,2))),2) + Î» * (pow(w1,2) + pow(w2,2)) + loss    print("----------------------------------------------Lossçš„å€¼{}".format(loss))    print("W1çš„å€¼{}".format(w1))    print("W2çš„å€¼{}".format(w2))    print("Bçš„å€¼{}".format(b))    resultW1 = 0    resultW2 = 0    resultB = 0    stW1 = 0    stW2 = 0    stB = 0    for (i,z) in zip(list,list2):      resultW1 = 2 * (i - (b + w1 * z + w2 * ma.pow(z,2))) * (-1) * z + 2 * Î» * w1 + resultW1      resultW2 = 2 * (i - (b + w1 * z + w2 * ma.pow(z, 2))) * (-1) * (ma.pow(z, 2)) + 2 * Î» * w2 + resultW2      resultB = 2 * (i - (b + w1 * z + w2 * ma.pow(z, 2))) * (-1) + resultB    listW1.append(resultW1)    listW2.append(resultW2)    listB.append(resultB)    for j in listW1:      stW1 = stW1 + pow(j,2)    for p in listW2:      stW2 = stW2 + pow(p,2)    for k in listB:      stB = stB + pow(k,2)    print("åå¾®åˆ†W1çš„å€¼{}".format(resultW1))    print("åå¾®åˆ†W2çš„å€¼{}".format(resultW2))    print("åå¾®åˆ†Bçš„å€¼{}".format(resultB))    print("w1çš„å­¦ä¹ ç‡{}".format(((step/ma.sqrt(len(listW1))) / ma.sqrt(stW1 / len(listW1)))))    print("w2çš„å­¦ä¹ ç‡{}".format(((step2/ma.sqrt(len(listW2))) / ma.sqrt(stW2 / len(listW2)))))    print("bçš„å­¦ä¹ ç‡{}".format(((stepB/ma.sqrt(len(listB))) / ma.sqrt(stB / len(listB)))))    number = number + 1    print("----------------------------------------------é€’å½’æ¬¡æ•°{}".format(number))    if loss < oldLoss:      calSecondLossWithExtraParam(list, (w1 - ((step / ma.sqrt(len(listW1))) / ma.sqrt(stW1 / len(listW1))) * resultW1),(w2 - ((step2 / ma.sqrt(len(listW2))) / ma.sqrt(stW2 / len(listW2))) * resultW2),        (b - ((stepB / ma.sqrt(len(listB))) / ma.sqrt(stB / len(listB))) * resultB),1, list2, listW1,listW2, listB,step,step2,stepB,loss,number)</code></pre><p><strong>ç¡¬ä»¶é™åˆ¶ä¸‹çš„ç»“æœ</strong></p><pre class=" language-language-python"><code class="language-language-python">w1 -1.4104840997551048 w2 0.000006414564199538763 B 18875.117024219377</code></pre><h5 id="æµ‹è¯•æ•°æ®">æµ‹è¯•æ•°æ®</h5><pre class=" language-language-python"><code class="language-language-python"># ç¬¬äºŒç»„æµ‹è¯•æ•°æ®# 1.5256 1135    2.846 1184     3.6595 1180   4.6920 922    5.3711 2107   6.2434 1340  7.6908 963     8.3249 1343   9.4805 1688   10.2670 1568</code></pre><pre class=" language-language-python"><code class="language-language-python">first erro:281.1950413121548second erro:261.33671410611953regular erroe:239.89150059024587</code></pre><h5 id="é¢å¤–è®¡ç®—æ–¹æ³•">é¢å¤–è®¡ç®—æ–¹æ³•</h5><pre class=" language-language-python"><code class="language-language-python">def calcFirstTest(list,list2,w,b):    sum = 0    for (i,j) in zip(list,list2):        sum = sum + abs((w * i + b) / 10 - j)    print("first erroecode:{}".format(sum / len(list)))def calcSecondTest(list,list2,w1,w2,b):    sum = 0    for (i,j) in zip(list,list2):        sum = sum + abs((w2 * ma.pow(i,2) + w1 * i + b) / 10 - j)    print("second erroecode:{}".format(sum / len(list)))def calSecond(list1,list2,list3):    number1 = ma.pow(list3[0],2) / ma.pow(list2[0],2)    list2[1] = list2[1] * number1    first = list2[0] * number1    tAT = list2[1] - list3[1]    tATF = first - list3[0]    tATB = number1 - 1    number2 = ma.pow(list3[0],2) / ma.pow(list1[0],2)    list1[1] = list1[1] * number2    second = list1[0] * number2    oAT = list1[1] - list3[1]    oATF = second - list3[0]    oATB = number2 - 1    number3 = oATF / tATF    last = tAT * number3 - oAT    c = last / ((tATB * number3) - oATB)    b = (oAT - (oATB * c)) / oATF    a = (list3[1] - c - list3[0] * b) / pow(list3[0],2)    print("{0}x2 + {1}x + {2}".format(a,b,c))</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ€§å›å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenCVå­¦ä¹ ç¬”è®°å››</title>
      <link href="/2021/04/21/opencv-xue-xi-bi-ji-si/"/>
      <url>/2021/04/21/opencv-xue-xi-bi-ji-si/</url>
      
        <content type="html"><![CDATA[<h3 id="OpenCVå­¦ä¹ ç¬”è®°å››">OpenCVå­¦ä¹ ç¬”è®°å››</h3><h4 id="Fastå’ŒORBç®—æ³•">Fastå’ŒORBç®—æ³•</h4><h5 id="Fastç®—æ³•">Fastç®—æ³•</h5><p><strong>åŸç†ï¼š</strong></p><p>Fastæ˜¯ä¸€ç§ç”¨äºè§’ç‚¹æ£€æµ‹çš„ç®—æ³•ï¼Œè¯¥ç®—æ³•çš„åŸç†æ˜¯å–å›¾åƒä¸­æ£€æµ‹ç‚¹ï¼Œä»¥è¯¥ç‚¹ä¸ºåœ†å¿ƒçš„å‘¨å›´é‚»åŸŸå†…åƒç´ ç‚¹åˆ¤æ–­æ£€æµ‹ç‚¹æ˜¯å¦ä¸ºè§’ç‚¹ï¼Œé€šä¿—çš„è®²å°±æ˜¯è‹¥ä¸€ä¸ªåƒç´ å‘¨å›´æœ‰ä¸€å®šæ•°é‡çš„åƒç´ ä¸è¯¥ç‚¹åƒç´ å€¼ä¸åŒï¼Œåˆ™è®¤ä¸ºå…¶ä¸ºè§’ç‚¹ã€‚</p><p><strong>åŸºæœ¬æµç¨‹ï¼š</strong></p><p>1.åœ¨å›¾åƒä¸­é€‰å–ä¸€ä¸ªåƒç´ ç‚¹pï¼Œæ¥åˆ¤æ–­å®ƒæ˜¯ä¸æ˜¯å…³é”®ç‚¹ã€‚Ipç­‰äºåƒç´ ç‚¹pçš„ç°åº¦å€¼ã€‚<br>2.ä»¥rä¸ºåŠå¾„ç”»åœ†ï¼Œè¦†ç›–pç‚¹å‘¨å›´çš„Mä¸ªåƒç´ ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œè®¾ç½®r=3ï¼Œåˆ™M=16ã€‚<br>3.è®¾ç½®ä¸€ä¸ªé˜ˆå€¼tï¼Œå¦‚æœåœ¨è¿™16ä¸ªåƒç´ ç‚¹ä¸­å­˜åœ¨nä¸ªè¿ç»­åƒç´ ç‚¹çš„ç°åº¦å€¼éƒ½é«˜äºIp+tï¼Œæˆ–è€…ä½äºIp-tï¼Œé‚£ä¹ˆåƒç´ ç‚¹på°±è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªè§’ç‚¹ã€‚<br>4.ç”±äºåœ¨æ£€æµ‹ç‰¹å¾ç‚¹æ—¶æ˜¯éœ€è¦å¯¹å›¾åƒä¸­æ‰€æœ‰çš„åƒç´ ç‚¹è¿›è¡Œæ£€æµ‹ï¼Œç„¶åå›¾åƒä¸­çš„ç»å¤§å¤šæ•°ç‚¹éƒ½ä¸æ˜¯ç‰¹å¾ç‚¹ï¼Œå¦‚æœå¯¹æ¯ä¸ªåƒç´ ç‚¹éƒ½è¿›è¡Œä¸Šè¿°çš„æ£€æµ‹è¿‡ç¨‹ï¼Œé‚£æ˜¾ç„¶ä¼šæµªè´¹è®¸å¤šæ—¶é—´ï¼Œå› æ­¤é‡‡ç”¨ä¸€ç§è¿›è¡Œéç‰¹å¾ç‚¹åˆ¤åˆ«çš„æ–¹æ³•ï¼šé¦–å…ˆå¯¹å€™é€‰ç‚¹çš„å‘¨å›´æ¯ä¸ª90åº¦çš„ç‚¹ï¼š1ï¼Œ9ï¼Œ5ï¼Œ13è¿›è¡Œæµ‹è¯•ã€‚å¦‚æœpæ˜¯è§’ç‚¹ï¼Œé‚£ä¹ˆè¿™å››ä¸ªç‚¹ä¸­è‡³å°‘æœ‰3ä¸ªè¦ç¬¦åˆé˜ˆå€¼è¦æ±‚ï¼Œå¦åˆ™ç›´æ¥å‰”é™¤ã€‚å¯¹ä¿ç•™ä¸‹æ¥çš„ç‚¹åœ¨ç»§ç»­è¿›è¡Œæµ‹è¯•ã€‚</p><p>è™½ç„¶è¿™ä¸ªæ£€æµ‹å™¨çš„æ•ˆç‡å¾ˆé«˜ï¼Œä½†å®ƒæœ‰ä»¥ä¸‹å‡ æ¡ç¼ºç‚¹ï¼š</p><p>è·å¾—çš„å€™é€‰ç‚¹æ¯”è¾ƒå¤šã€‚<br>ç‰¹å¾ç‚¹çš„é€‰å–ä¸æ˜¯æœ€ä¼˜çš„ï¼Œå› ä¸ºå®ƒçš„æ•ˆæœå–å†³äºè¦è§£å†³çš„é—®é¢˜å’Œè§’ç‚¹çš„åˆ†å¸ƒæƒ…å†µã€‚<br>è¿›è¡Œéç‰¹å¾ç‚¹åˆ¤åˆ«æ—¶å¤§é‡çš„ç‚¹è¢«ä¸¢å¼ƒã€‚<br>æ£€æµ‹åˆ°çš„å¾ˆå¤šç‰¹å¾ç‚¹éƒ½æ˜¯ç›¸é‚»çš„ã€‚</p><p>å‰ä¸‰ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡æœºå™¨å­¦ä¹ çš„æ–¹æ³•è§£å†³ï¼Œæœ€åä¸€ä¸ªé—®é¢˜å¯ä»¥ä½¿ç”¨éæœ€å¤§å€¼æŠ‘åˆ¶çš„æ–¹æ³•è§£å†³ã€‚</p><p><strong>æœºå™¨å­¦ä¹ çš„è§’ç‚¹æ£€æµ‹å™¨</strong></p><p>1.é€‰æ‹©ä¸€ç»„è®­ç»ƒå›¾ç‰‡<br>2.ä½¿ç”¨Fastç®—æ³•æ‰¾å‡ºæ¯å¹…å›¾åƒçš„ç‰¹å¾ç‚¹ï¼Œå°†å…¶å‘¨å›´çš„16ä¸ªåƒç´ å­˜å‚¨æ„æˆä¸€ä¸ªå‘é‡pã€‚<br>3.æ¯ä¸€ä¸ªç‰¹å¾ç‚¹çš„16ä¸ªåƒç´ ç‚¹éƒ½å±äºä¸‹åˆ—ä¸‰ç±»ä¸­çš„ä¸€ç§<br><img src="http://dingdm.online/sab.PNG" alt=""><br>4.æ ¹æ®è¿™äº›åƒç´ ç‚¹çš„åˆ†ç±»ï¼Œç‰¹å¾å‘é‡pä¹Ÿè¢«åˆ†ä¸º3ä¸ªå­é›†ï¼šPdï¼ŒPsï¼ŒPb<br>5.å®šä¹‰ä¸€ä¸ªæ–°çš„å¸ƒå°”å˜é‡Kpï¼Œå¦‚æœpæ˜¯è§’ç‚¹å°±è®¾ç½®ä¸ºTrueï¼Œå¦‚æœä¸æ˜¯å°±è®¾ç½®ä¸ºfalseã€‚<br>6.åˆ©ç”¨ç‰¹å¾å€¼å‘é‡pï¼Œç›®æ ‡å€¼æ˜¯$K_p$ï¼Œè®­ç»ƒID3æ ‘ã€‚<br>7.å°†æ„å»ºå¥½çš„å†³ç­–æ ‘è¿ç”¨äºå…¶ä»–å›¾åƒçš„å¿«é€Ÿæ£€æµ‹ã€‚</p><p><strong>éæå¤§å€¼æŠ‘åˆ¶</strong></p><p>åœ¨ç­›é€‰å‡ºæ¥çš„å€™é€‰è§’ç‚¹ä¸­æœ‰å¾ˆå¤šæ˜¯ç´§æŒ¨åœ¨ä¸€èµ·çš„ï¼Œéœ€è¦é€šè¿‡éæå¤§å€¼æŠ‘åˆ¶æ¥æ¶ˆé™¤è¿™ç§å½±å“ã€‚</p><p>ä¸ºæ‰€æœ‰çš„å€™é€‰è§’ç‚¹éƒ½ç¡®å®šä¸€ä¸ªæ‰“åˆ†å‡½æ•°Vï¼ŒVçš„å€¼å¯è¿™æ ·è®¡ç®—ï¼šå…ˆåˆ†åˆ«è®¡ç®—Ipäºåœ†ä¸Š16ä¸ªç‚¹çš„åƒç´ å€¼å·®å€¼ï¼Œå–ç»å¯¹å€¼ï¼Œå†å°†è¿™16ä¸ªç»å¯¹å€¼ç›¸åŠ ï¼Œå°±å¾—åˆ°äº†Vçš„å€¼ã€‚æœ€åæ¯”è¾ƒæ¯—é‚»å€™é€‰è§’ç‚¹çš„Vå€¼ï¼ŒæŠŠVå€¼è¾ƒå°çš„å€™é€‰ç‚¹passæ‰ã€‚</p><p>Fastç®—æ³•çš„æ€æƒ³ä¸æˆ‘ä»¬å¯¹è§’ç‚¹çš„ç›´è§‚è®¤è¯†éå¸¸æ¥è¿‘ï¼ŒåŒ–ç¹ä¸ºç®€ã€‚Fastç®—æ³•æ¯”å…¶ä»–è§’ç‚¹çš„æ£€æµ‹ç®—æ³•å¿«ï¼Œä½†æ˜¯åœ¨å™ªå£°è¾ƒé«˜æ—¶ä¸å¤Ÿç¨³å®šï¼Œè¿™éœ€è¦è®¾ç½®åˆé€‚çš„é˜ˆå€¼ã€‚</p><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python"># å®ä¾‹åŒ–fastfast = cv.FastFeatureDetector_create(threshlod,nonmaxSuppression)# åˆ©ç”¨fast.detectæ£€æµ‹å…³é”®ç‚¹ï¼Œæ²¡æœ‰å¯¹åº”çš„å…³é”®ç‚¹æè¿°kp = fast.detect(grayImg,None)# å°†å…³é”®ç‚¹æ£€æµ‹ç»“æœç»˜åˆ¶åœ¨å›¾åƒä¸Šï¼Œä¸åœ¨siftä¸­æ˜¯ä¸€æ ·çš„cv.drawKeypoints(image,keypoints,outputimages,color,flags)</code></pre><p>thresholdï¼šé˜ˆå€¼tï¼Œæœ‰é»˜è®¤å€¼10<br>nonmaxSuppressionï¼šæ˜¯å¦è¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶ï¼Œé»˜è®¤å€¼true<br>grayImgï¼šè¿›è¡Œå…³é”®ç‚¹æ£€æµ‹çš„å›¾åƒï¼Œæ³¨æ„æ˜¯ç°åº¦å›¾åƒ</p><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvimport numpy as npimport  matplotlib.pyplot as plt# è¯»å–å›¾åƒï¼Œå¹¶è½¬æ¢ä¸ºç°åº¦å›¾åƒimg = cv.imread('/Users/dinggongcheng/Downloads/lou.jpeg')# fastè§’ç‚¹æ£€æµ‹# åˆ›å»ºä¸€ä¸ªFastå¯¹è±¡ï¼Œä¼ å…¥é˜ˆå€¼ï¼Œæ³¨æ„ï¼šå¯ä»¥å¤„ç†å½©è‰²ç©ºé—´å›¾åƒfast = cv.FastFeatureDetector_create(threshold=30)# æ£€æµ‹å›¾åƒä¸Šçš„å…³é”®ç‚¹kp = fast.detect(img,None)# åœ¨å›¾åƒä¸Šç»˜åˆ¶å…³é”®ç‚¹img2 = cv.drawKeypoints(img,kp,None,color=(0,0,255))# è¾“å‡ºé»˜è®¤å‚æ•°print("threshold:{}".format(fast.getThreshold()))print("nonmaxSuppression:{}".format(fast.getNonmaxSuppression()))print("neighborhood:{}".format(fast.getType()))print("Total Keypoints with nonmaxSuppression:{}".format(len(kp)))# å…³é—­éæå¤§å€¼æŠ‘åˆ¶fast.setNonmaxSuppression(0)kp = fast.detect(img,None)print("Total Keypoints with nonmaxSuppression:{}".format(len(kp)))# ç»˜åˆ¶ä¸ºè¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶çš„ç»“æœimg3 = cv.drawKeypoints(img,kp,None,color=(0,0,255))# ç»˜åˆ¶å›¾åƒfig,axes = plt.subplots(nrows=1,ncols=2,figsize=(10,8),dpi=100)axes[0].imshow(img2[:,:,::-1])axes[0].set_title("setMax")axes[1].imshow(img3[:,:,::-1])axes[1].set_title("removeNonMax")plt.show()</code></pre><pre class=" language-language-bash"><code class="language-language-bash">threshold:30nonmaxSuppression:Trueneighborhood:2Total Keypoints with nonmaxSuppression:4194Total Keypoints with nonmaxSuppression:8710</code></pre><p><img src="http://dingdm.online/fast.png" alt=""></p><h5 id="ORBç®—æ³•">ORBç®—æ³•</h5><p><strong>åŸç†ï¼š</strong></p><p>SIFTå’ŒSURFç®—æ³•æ˜¯å—ä¸“åˆ©ä¿æŠ¤çš„ï¼Œåœ¨ä½¿ç”¨å®ƒä»¬æ—¶æ˜¯è¦ä»˜è´¹çš„ï¼Œä½†æ˜¯ORBä¸éœ€è¦ï¼Œå®ƒå¯ä»¥ç”¨æ¥å¯¹å›¾åƒä¸­çš„å…³é”®ç‚¹å¿«é€Ÿåˆ›å»ºç‰¹å¾å‘é‡ï¼Œå¹¶ç”¨è¿™äº›ç‰¹å¾å‘é‡æ¥è¯†åˆ«å›¾åƒä¸­çš„å¯¹è±¡ã€‚</p><p><strong>ORBç®—æ³•æµç¨‹</strong></p><p>ORBç®—æ³•ç»“åˆäº†Fastå’ŒBriefç®—æ³•ï¼Œæå‡ºäº†æ„é€ é‡‘å­—å¡”ï¼Œä¸ºFastç‰¹å¾ç‚¹æ·»åŠ äº†æ–¹å‘ï¼Œä»è€Œä½¿å¾—å…³é”®ç‚¹å…·æœ‰äº†å°ºåº¦ä¸å˜æ€§å’Œæ—‹è½¬ä¸å˜æ€§ã€‚å…·ä½“æµç¨‹ä¸ºï¼š</p><p>æ„é€ å°ºåº¦é‡‘å­—å¡”ï¼Œé‡‘å­—å¡”å…±æœ‰nå±‚ï¼Œä¸SIFTä¸åŒçš„æ˜¯ï¼Œæ¯ä¸€å±‚ä»…æœ‰ä¸€å¹…å›¾åƒã€‚ç¬¬så±‚çš„å°ºåº¦ä¸ºÏƒs = Ïƒs0ã€‚Ïƒ0æ˜¯åˆå§‹å°ºåº¦ï¼Œé»˜è®¤ä¸º1.2ï¼ŒåŸå›¾åœ¨ç¬¬0å±‚ã€‚</p><p>ç¬¬så±‚å›¾åƒçš„å¤§å°ï¼š</p><p><img src="http://dingdm.online/s1.PNG" alt=""></p><p>åœ¨ä¸åŒçš„å°ºåº¦ä¸Šåˆ©ç”¨Fastç®—æ³•æ£€æµ‹ç‰¹å¾ç‚¹ï¼Œé‡‡ç”¨Harrisè§’ç‚¹å“åº”å‡½æ•°ï¼Œæ ¹æ®è§’ç‚¹çš„å“åº”å€¼æ’åºï¼Œé€‰å–å‰Nä¸ªç‰¹å¾ç‚¹ï¼Œä½œä¸ºæœ¬å°ºåº¦çš„ç‰¹å¾ç‚¹ã€‚<br>è®¡ç®—ç‰¹å¾ç‚¹çš„ä¸»æ–¹å‘ï¼Œè®¡ç®—ä»¥ç‰¹å¾ç‚¹ä¸ºåœ†å¿ƒï¼ŒåŠå¾„ä¸ºrçš„åœ†å½¢é‚»åŸŸå†…çš„ç°åº¦è´¨å¿ƒä½ç½®ï¼Œå°†ä»ç‰¹å¾ç‚¹ä½ç½®åˆ°è´¨å¿ƒä½ç½®çš„æ–¹å‘åšç‰¹å¾ç‚¹çš„ä¸»æ–¹å‘ã€‚</p><p>è®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼š</p><p><img src="http://dingdm.online/s2.PNG" alt=""></p><p>è´¨å¿ƒä½ç½®ï¼š</p><p><img src="http://dingdm.online/s3.PNG" alt=""></p><p>ä¸»æ–¹å‘ï¼š</p><p><img src="http://dingdm.online/s4.PNG" alt=""></p><p>ä¸ºäº†è§£å†³æ—‹è½¬ä¸å˜æ€§ï¼Œå°†ç‰¹å¾ç‚¹çš„é‚»åŸŸæ—‹è½¬åˆ°ä¸»æ–¹å‘ä¸Šåˆ©ç”¨Briefç®—æ³•æ„å»ºç‰¹å¾æè¿°ç¬¦ï¼Œè‡³æ­¤å°±å¾—åˆ°äº†ORBçš„ç‰¹å¾æè¿°å‘é‡ã€‚</p><p><strong>BRIEFç®—æ³•</strong></p><p>BRIEFç®—æ³•æ˜¯ä¸€ç§ç‰¹å¾æè¿°å­æå–ç®—æ³•ï¼Œå¹¶éç‰¹å¾ç‚¹çš„æå–ç®—æ³•ï¼Œä¸€ç§ç”ŸæˆäºŒå€¼åŒ–æè¿°å­çš„ç®—æ³•ï¼Œä¸æå–ä»£ä»·ä½ï¼ŒåŒ¹é…åªéœ€è¦ä½¿ç”¨ç®€å•çš„æ±‰æ˜è·ç¦»åˆ©ç”¨æ¯”ç‰¹ä¹‹é—´çš„å¼‚æˆ–æ“ä½œå°±å¯ä»¥å®Œæˆã€‚å› æ­¤ï¼Œæ—¶é—´ä»£ä»·ä½ï¼Œç©ºé—´ä»£ä»·ä½ï¼Œæ•ˆæœè¿˜æŒºå¥½æ˜¯æœ€å¤§çš„ä¼˜ç‚¹ã€‚</p><p>ç®—æ³•çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1.å›¾åƒæ»¤æ³¢ï¼šåŸå§‹å›¾åƒä¸­å­˜åœ¨å™ªå£°æ—¶ï¼Œä¼šå¯¹ç»“æœäº§ç”Ÿå½±å“ï¼Œæ‰€ä»¥éœ€è¦å¯¹å›¾åƒè¿›è¡Œæ»¤æ³¢ï¼Œå»é™¤éƒ¨åˆ†å™ªå£°ã€‚<br>2.é€‰å–ç‚¹å¯¹ï¼šä»¥ç‰¹å¾ç‚¹ä¸ºä¸­å¿ƒï¼ŒåŒºS*Sçš„é¢†åŸŸçª—å£ï¼Œåœ¨çª—å£å†…éšæœºé€‰å–Nç»„ç‚¹å¯¹ï¼Œä¸€èˆ¬N=128ï¼Œ256ï¼Œ512ï¼Œé»˜è®¤æ˜¯256ï¼Œå…³äºå¦‚ä½•é€‰å–éšæœºç‚¹å¯¹ï¼Œæä¾›äº†äº”ç§å½¢å¼ï¼Œç»“æœå¦‚ä¸‹<br>xï¼Œyæ–¹å‘å¹³å‡åˆ†å¸ƒé‡‡æ ·<br>xï¼Œyå‡æœä»Gauss(0,S^2/25)å„å‘åŒæ€§é‡‡æ ·<br>xæœä»Gauss(0,S^2/25)ï¼Œyæœä»Gauss(0,S^2/100)<br>xï¼Œyä»ç½‘æ ¼ä¸­éšæœºè·å–<br>xä¸€ç›´åœ¨(0,0)ï¼Œyä»ç½‘æ ¼ä¸­éšæœºé€‰å–<br>3.æ„å»ºæè¿°ç¬¦ï¼šå‡è®¾xï¼Œyæ˜¯æŸä¸ªç‚¹å¯¹çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œpxå’Œpyæ˜¯ä¸¤ç‚¹å¯¹åº”çš„åƒç´ å€¼ï¼Œåˆ™<br><img src="http://dingdm.online/byt.PNG" alt=""><br>å¯¹æ¯ä¸€ä¸ªç‚¹å¯¹éƒ½è¿›è¡Œä¸Šè¿°çš„äºŒè¿›åˆ¶èµ‹å€¼ï¼Œå½¢æˆBRIEFçš„å…³é”®ç‚¹çš„æè¿°ç‰¹å¾å‘é‡ï¼Œè¯¥å‘é‡ä¸€èˆ¬ä¸º128-512ä½çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­ä»…åŒ…å«1å’Œ0ã€‚</p><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python"># 1.å®ä¾‹åŒ–orborb = cv.xfeatures2d.orb_create(nfeatures)# 2.åˆ©ç”¨orb.detectAndCompute()æ£€æµ‹å…³é”®ç‚¹å¹¶è®¡ç®—kp,des = orb.detectAndCompute(gray,None)# 3.å°†å…³é”®ç‚¹æ£€æµ‹ç»“æœç»˜åˆ¶åœ¨å›¾åƒä¸Šcv.drawKeypoints(image,keypoints,outputimages,color,flags)</code></pre><p>grayï¼šè¿›è¡Œå…³é”®ç‚¹æ£€æµ‹çš„å›¾åƒï¼Œæ³¨æ„æ˜¯ç°åº¦å›¾åƒ</p><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvimport numpy as npimport matplotlib.pyplot as plt# è¯»å–å›¾åƒimg = cv.imread('/Users/dinggongcheng/Downloads/lou.jpeg')# ORBè§’ç‚¹æ£€æµ‹# å®ä¾‹åŒ–ORBå¯¹è±¡orb = cv.ORB_create(nfeatures=5000)# æ£€æµ‹å…³é”®ç‚¹ï¼Œå¹¶è®¡ç®—ç‰¹å¾æè¿°ç¬¦kp,des = orb.detectAndCompute(img,None)print(des.shape)# å°†å…³é”®ç‚¹ç»˜åˆ¶åœ¨å›¾åƒä¸Šimg2 = cv.drawKeypoints(img,kp,None,flags=0)# ç»˜åˆ¶å›¾åƒplt.figure(figsize=(10,8),dpi=100)plt.imshow(img2[:,:,::-1])plt.xticks([]),plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/orb.png" alt=""></p><h4 id="è§†é¢‘è¯»å†™">è§†é¢‘è¯»å†™</h4><h5 id="ä»æ–‡ä»¶ä¸­è¯»å–è§†é¢‘å¹¶æ’­æ”¾">ä»æ–‡ä»¶ä¸­è¯»å–è§†é¢‘å¹¶æ’­æ”¾</h5><p>åœ¨OpenCVä¸­æˆ‘ä»¬è¦è·å–ä¸€ä¸ªè§†é¢‘ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªVideoCaptureå¯¹è±¡ï¼ŒæŒ‡å®šä½ è¦è¯»å–çš„è§†é¢‘æ–‡ä»¶ï¼š</p><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python"># 1.åˆ›å»ºè¯»å–è§†é¢‘çš„å¯¹è±¡cap = cv.VideoCapture(filepath)# 2.è·å–è§†é¢‘çš„æŸäº›å±æ€§retval = cap.get(propId)# 3.ä¿®æ”¹è§†é¢‘çš„å±æ€§ä¿¡æ¯cap.set(propId,value)# 4.åˆ¤æ–­å›¾åƒæ˜¯å¦è¯»å–æˆåŠŸisornot = cap.isOpened()# 5.è·å–è§†é¢‘çš„ä¸€å¸§å›¾åƒret,frame = cap.read()# 6.è°ƒç”¨cv.imshow()æ˜¾ç¤ºå›¾åƒï¼Œåœ¨æ˜¾ç¤ºå›¾åƒæ—¶ä½¿ç”¨cv.waitkey()è®¾ç½®é€‚å½“çš„æŒç»­æ—¶é—´ï¼Œå¦‚æœå¤ªä½è§†é¢‘ä¼šæ’­æ”¾çš„éå¸¸å¿«ï¼Œå¦‚æœå¤ªé«˜å°±ä¼šæ’­æ”¾çš„éå¸¸æ…¢ï¼Œé€šå¸¸æƒ…å†µä¸‹è®¾ç½®25ms# 7.é‡Šæ”¾è§†é¢‘cap.realease()</code></pre><p>filepathï¼šè§†é¢‘æ–‡ä»¶è·¯å¾„<br>propIdï¼šä»0åˆ°18çš„æ•°å­—ï¼Œæ¯ä¸ªæ•°å­—è¡¨ç¤ºè§†é¢‘çš„å±æ€§</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cv# 1.è·å–è§†é¢‘å¯¹è±¡cap = cv.VideoCapture('/Users/dinggongcheng/Downloads/1.mp4')# 2.åˆ¤æ–­æ˜¯å¦è¯»å–æˆåŠŸwhile(cap.isOpened()):    # 3.è·å–æ¯ä¸€å¸§å›¾åƒ    ret,frame = cap.read()    # 4.è·å–æˆåŠŸæ˜¾ç¤ºå›¾åƒ    if ret == True:        cv.imshow('frame',frame)    # 5.æ¯ä¸€å¸§é—´éš”ä¸º25ms    if cv.waitKey(25) & 0xFF == ord('q'):        break# 6.é‡Šæ”¾è§†é¢‘å¯¹è±¡cap.release()cv.destroyAllWindows()</code></pre><h5 id="ä¿å­˜è§†é¢‘">ä¿å­˜è§†é¢‘</h5><p>åœ¨OpenCVä¸­æˆ‘ä»¬ä¿å­˜è§†é¢‘ä½¿ç”¨çš„æ˜¯VideoWriterå¯¹è±¡ï¼Œåœ¨å…¶ä¸­æŒ‡å®šè¾“å‡ºæ–‡ä»¶çš„åç§°ã€‚</p><pre class=" language-language-python"><code class="language-language-python">out = cv2.VideoWriter(filename,fourcc,fps,framesize)</code></pre><p>filenameï¼šè§†é¢‘ä¿å­˜çš„ä½ç½®<br>fourccï¼šæŒ‡å®šè§†é¢‘ç¼–è§£ç çš„4å­—èŠ‚ä»£ç <br>fpsï¼šå¸§ç‡<br>framesizeï¼šå¸§å¤§å°</p><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvimport numpy as np# 1.è¯»å–è§†é¢‘cap = cv.VideoCapture('/Users/dinggongcheng/Downloads/1.mp4')# 2.è·å–å›¾åƒçš„å±æ€§ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºæ•´æ•°frame_width = int(cap.get(3))frame_height = int(cap.get(4))# 3.åˆ›å»ºä¿å­˜è§†é¢‘çš„å¯¹è±¡ï¼Œè®¾ç½®ç¼–ç æ ¼å¼ï¼Œå¸§ç‡ï¼Œå›¾åƒçš„å®½é«˜ç­‰out = cv.VideoWriter('/Users/dinggongcheng/Downloads/output.mp4',cv.VideoWriter_fourcc('M','J','P','G'),10,(frame_width,frame_height))while(True):  # 4.è·å–è§†é¢‘ä¸­çš„æ¯ä¸€å¸§å›¾åƒ  ret,frame = cap.read()  if ret == True:    # 5.å°†æ¯ä¸€å¸§å›¾åƒå†™å…¥åˆ°è¾“å‡ºæ–‡ä»¶ä¸­    out.write(frame)  else:    break# 6.é‡Šæ”¾èµ„æºcap.release()out.release()cv.destoryAllWindows()</code></pre><h4 id="è§†é¢‘è¿½è¸ª">è§†é¢‘è¿½è¸ª</h4><h5 id="meanshift">meanshift</h5><p><strong>åŸç†</strong></p><p>meanshiftç®—æ³•çš„åŸç†å¾ˆç®€å•ã€‚å‡è®¾ä½ æœ‰ä¸€å †ç‚¹é›†ï¼Œè¿˜æœ‰ä¸€ä¸ªå°çš„çª—å£ï¼Œè¿™ä¸ªçª—å£å¯èƒ½æ˜¯åœ†å½¢çš„ï¼Œç°åœ¨ä½ å¯èƒ½è¦ç§»åŠ¨è¿™ä¸ªçª—å£åˆ°ç‚¹é›†å¯†åº¦æœ€å¤§çš„åŒºåŸŸå½“ä¸­ã€‚</p><p><img src="http://dingdm.online/c1.PNG" alt=""></p><p>æœ€å¼€å§‹çš„çª—å£æ˜¯è“è‰²åœ†ç¯çš„åŒºåŸŸï¼Œå‘½åä¸ºC1ã€‚è“è‰²åœ†ç¯çš„åœ†å¿ƒç”¨ä¸€ä¸ªè“è‰²çš„çŸ©å½¢æ ‡æ³¨ï¼Œå‘½åä¸ºC1_oã€‚è€Œçª—å£ä¸­æ‰€æœ‰ç‚¹çš„ç‚¹é›†æ„æˆçš„è´¨å¿ƒåœ¨è“è‰²åœ†å½¢ç‚¹C1_rå¤„ï¼Œæ˜¾ç„¶åœ†ç¯çš„å½¢å¿ƒå’Œè´¨å¿ƒå¹¶ä¸é‡åˆã€‚æ‰€ä»¥ï¼Œç§»åŠ¨è“è‰²çš„çª—å£ï¼Œä½¿å¾—å½¢å¿ƒä¸ä¹‹å‰å¾—åˆ°çš„è´¨å¿ƒé‡åˆã€‚åœ¨æ–°ç§»åŠ¨åçš„åœ†ç¯åŒºåŸŸå½“ä¸­å†æ¬¡å¯»æ‰¾åœ†ç¯æ‰€åŒ…å›´ç‚¹é›†çš„è´¨å¿ƒï¼Œç„¶åå†æ¬¡ç§»åŠ¨ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå½¢å¿ƒå’Œè´¨å¿ƒæ˜¯ä¸é‡åˆçš„ã€‚ä¸æ–­æ‰§è¡Œä¸Šé¢çš„ç§»åŠ¨è¿‡ç¨‹ï¼Œç›´åˆ°å½¢å¿ƒå’Œè´¨å¿ƒå¤§è‡´é‡åˆç»“æŸã€‚è¿™æ ·ï¼Œæœ€ååœ†å½¢çš„çª—å£ä¼šè½åˆ°åƒç´ åˆ†å¸ƒæœ€å¤§çš„åœ°æ–¹ï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„ç»¿è‰²åœ†åœˆï¼Œå‘½åä¸ºC2.</p><p>meanshiftç®—æ³•é™¤äº†åº”ç”¨åœ¨è§†é¢‘è¿½è¸ªå½“ä¸­ï¼Œåœ¨èšç±»ï¼Œå¹³æ»‘ç­‰ç­‰å„ç§æ¶‰åŠåˆ°æ•°æ®ä»¥åŠéç›‘ç£å­¦ä¹ çš„åœºåˆå½“ä¸­å‡æœ‰é‡è¦åº”ç”¨ï¼Œæ˜¯ä¸€ä¸ªåº”ç”¨å¹¿æ³›çš„ç®—æ³•ã€‚</p><p>å›¾åƒæ˜¯ä¸€ä¸ªçŸ©é˜µä¿¡æ¯ï¼Œå¦‚æœåœ¨ä¸€ä¸ªè§†é¢‘å½“ä¸­ä½¿ç”¨meanshiftç®—æ³•æ¥è¿½è¸ªä¸€ä¸ªè¿åŠ¨çš„ç‰©ä½“å‘¢ï¼Ÿ<br>1.é¦–å…ˆåœ¨å›¾åƒä¸Šé€‰å®šä¸€ä¸ªç›®æ ‡åŒºåŸŸ<br>2.è®¡ç®—é€‰å®šåŒºåŸŸçš„ç›´æ–¹å›¾åˆ†å¸ƒï¼Œä¸€èˆ¬æ˜¯HSVè‰²å½©ç©ºé—´çš„ç›´æ–¹å›¾ã€‚<br>3.å¯¹ä¸‹ä¸€å¸§å›¾åƒbåŒæ ·è®¡ç®—ç›´æ–¹å›¾åˆ†å¸ƒã€‚<br>4.è®¡ç®—å›¾åƒbå½“ä¸­ä¸é€‰å®šåŒºåŸŸç›´æ–¹å›¾åˆ†å¸ƒæœ€ä¸ºç›¸ä¼¼çš„åŒºåŸŸï¼Œä½¿ç”¨meanshiftç®—æ³•å°†é€‰å®šåŒºåŸŸæ²¿ç€æœ€ä¸ºç›¸ä¼¼çš„éƒ¨åˆ†è¿›è¡Œç§»åŠ¨ï¼Œç›´åˆ°æ‰¾åˆ°æœ€ç›¸ä¼¼çš„åŒºåŸŸï¼Œä¾¿å®Œæˆäº†åœ¨å›¾åƒbä¸­çš„ç›®æ ‡è¿½è¸ªã€‚<br>5.é‡å¤3åˆ°4çš„è¿‡ç¨‹ï¼Œå°±å®Œæˆæ•´ä¸ªè§†é¢‘ç›®æ ‡è¿½è¸ªã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨ç›´æ–¹å›¾åå‘æŠ•å½±å¾—åˆ°çš„å›¾åƒå’Œç¬¬ä¸€å¸§ç›®æ ‡å¯¹è±¡çš„èµ·å§‹ä½ç½®ï¼Œå½“ç›®æ ‡å¯¹è±¡çš„ç§»åŠ¨ä¼šåæ˜ åˆ°ç›´æ–¹å›¾åå‘æŠ•å½±å›¾ä¸­ï¼Œmeanshiftç®—æ³•å°±æŠŠæˆ‘ä»¬çš„çª—å£ç§»åŠ¨åˆ°åå‘æŠ•å½±å›¾åƒä¸­ç°åº¦å¯†åº¦æœ€å¤§çš„åŒºåŸŸäº†ã€‚</p><p>ç›´æ–¹å›¾åå‘æŠ•å½±çš„æµç¨‹æ˜¯ï¼š</p><p>1.ä»è¾“å…¥å›¾åƒçš„å·¦ä¸Šè§’(0,0)å¼€å§‹ï¼Œåˆ‡å‰²ä¸€å—(0,0)åˆ°(10,10)çš„ä¸´æ—¶å›¾åƒ<br>2.ç”Ÿæˆä¸´æ—¶å›¾åƒçš„ç›´æ–¹å›¾<br>3.ç”¨ä¸´æ—¶å›¾åƒçš„ç›´æ–¹å›¾å’Œæ¨¡æ¿å›¾åƒçš„ç›´æ–¹å›¾å¯¹æ¯”ï¼Œå¯¹æ¯”ç»“æœè®°ä¸ºc<br>4.ç›´æ–¹å›¾å¯¹æ¯”ç»“æœcï¼Œå°±æ˜¯ç»“æœå›¾åƒ(0,0)å¤„çš„åƒç´ å€¼<br>5.åˆ‡å‰²è¾“å…¥å›¾åƒä»(0,1)è‡³(10,11)çš„ä¸´æ—¶å›¾åƒï¼Œå¯¹æ¯”ç›´æ–¹å›¾ï¼Œå¹¶è®°å½•åˆ°ç»“æœå›¾åƒ<br>6.é‡å¤1-5æ­¥çŸ¥é“è¾“å…¥å›¾åƒçš„å³ä¸‹è§’ï¼Œå°±å½¢æˆäº†ç›´æ–¹å›¾çš„åå‘æŠ•å½±ã€‚</p><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python">cv.meanShift(probImage,window,criteria)</code></pre><p>probImageï¼šROIåŒºåŸŸï¼Œå³ç›®æ ‡çš„ç›´æ–¹å›¾çš„åå‘æŠ•å½±<br>windowï¼šåˆå§‹æœç´¢çª—å£ï¼Œå°±æ˜¯å®šä¹‰ROIçš„rect<br>criteriaï¼šç¡®å®šçª—å£æœç´¢åœæ­¢çš„å‡†åˆ™ï¼Œä¸»è¦æœ‰è¿­ä»£æ¬¡æ•°è¾¾åˆ°è®¾ç½®çš„æœ€å¤§å€¼ï¼Œçª—å£ä¸­å¿ƒçš„æ¼‚ç§»å€¼å¤§äºæŸä¸ªè®¾å®šçš„é™åˆ¶ç­‰ã€‚</p><p>å®ç°meanShiftçš„ä¸»è¦æµç¨‹</p><p>1.è¯»å–è§†é¢‘æ–‡ä»¶<br>2.æ„Ÿå…´è¶£åŒºåŸŸè®¾ç½®ï¼šè·å–ç¬¬ä¸€å¸§å›¾åƒï¼Œå¹¶è®¾ç½®ç›®æ ‡åŒºåŸŸï¼Œå³æ„Ÿå…´è¶£åŒºåŸŸ<br>3.è®¡ç®—ç›´æ–¹å›¾ï¼šè®¡ç®—æ„Ÿå…´è¶£åŒºåŸŸçš„HSVç›´æ–¹å›¾ï¼Œå¹¶è¿›è¡Œå½’ä¸€åŒ–<br>4.ç›®æ ‡è¿½è¸ªï¼šè®¾ç½®çª—å£æœç´¢åœæ­¢æ¡ä»¶ï¼Œç›´æ–¹å›¾åå‘æŠ•å½±ï¼Œè¿›è¡Œç›®æ ‡è¿½è¸ªï¼Œå¹¶åœ¨ç›®æ ‡ä½ç½®ç»˜åˆ¶çŸ©é˜µæ¡†ã€‚</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cv# 1.è·å–è§†é¢‘å¯¹è±¡cap = cv.VideoCapture('/Users/dinggongcheng/Downloads/1.mp4')# 2.è·å–ç¬¬ä¸€å¸§å›¾åƒï¼Œå¹¶æŒ‡å®šç›®æ ‡ä½ç½®ret,frame = cap.read()# 2.1 ç›®æ ‡ä½ç½®r,h,c,w = 197,141,0,208track_window = (c,r,w,h)# 2.2 æŒ‡å®šç›®æ ‡çš„æ„Ÿå…´è¶£åŒºåŸŸroi = frame[r:r+h,c:c+w]# 3.è®¡ç®—ç›´æ–¹å›¾# 3.1 è½¬æ¢è‰²å½©ç©ºé—´hsv_roi = cv.cvtColor(roi,cv.COLOR_BGR2HSV)# 3.2 å»é™¤ä½äº®åº¦çš„å€¼# 3.3 è®¡ç®—ç›´æ–¹å›¾roi_hist = cv.calcHist([hsv_roi],[0],None,[180],[0,180])# 3.4 å½’ä¸€åŒ–cv.normalize(roi_hist,roi_hist,0,255,cv.NORM_MINMAX)# 4.ç›®æ ‡è¿½è¸ª# 4.1 è®¾ç½®æŸ¥çª—å£æœç´¢ç»ˆæ­¢æ¡ä»¶ï¼šæœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œçª—å£ä¸­å¿ƒæ¼‚ç§»æœ€å°å€¼term_crit = (cv.TERM_CRITERIA_EPS | cv.TERM_CRITERIA_COUNT,10,1)while(True):    # 4.2 è·å–æ¯ä¸€å¸§å›¾åƒ    ret,frame = cap.read()    if ret == True:        # 4.3 è®¡ç®—ç›´æ–¹å›¾çš„åå‘æŠ•å½±        hsv = cv.cvtColor(frame,cv.COLOR_BGR2HSV)        dst = cv.calcBackProject([hsv],[0],roi_hist,[0,180],1)        # 4.4 è¿›è¡Œmeanshiftè¿½è¸ª        ret,track_window = cv.meanShift(dst,track_window,term_crit)        # 4.5 å°†è¿½è¸ªçš„ä½ç½®ç»˜åˆ¶åœ¨è§†é¢‘ä¸Šï¼Œå¹¶è¿›è¡Œæ˜¾ç¤º        x,y,w,h = track_window        img2 = cv.rectangle(frame,(x,y),(x+w,y+h),255,2)        cv.imshow('frame',img2)        if cv.waitKey(60) & 0xFF == ord('q'):            break    else:        break# 5.é‡Šæ”¾èµ„æºcap.release()cv.destroyAllWindows()</code></pre><p><img src="http://dingdm.online/mean.png" alt=""></p><h5 id="Camshift">Camshift</h5><p>camshiftç®—æ³•æ˜¯å¯¹meanshiftç®—æ³•çš„æ”¹è¿›ç®—æ³•ï¼Œå¯éšç€è·Ÿè¸ªç›®æ ‡çš„å¤§å°å˜åŒ–å®æ—¶è°ƒæ•´æœç´¢çª—å£çš„å¤§å°ï¼Œå…·æœ‰è¾ƒå¥½çš„è·Ÿè¸ªæ•ˆæœã€‚Camshiftç®—æ³•é¦–å…ˆåº”ç”¨meanshiftï¼Œä¸€æ—¦meanshiftæ”¶æ•›ï¼Œä»–å°±ä¼šæ›´æ–°çª—å£çš„å¤§å°ï¼Œè¿˜è®¡ç®—æœ€ä½³æ‹Ÿåˆæ¤­åœ†çš„æ–¹å‘ï¼Œä»è€Œæ ¹æ®ç›®æ ‡çš„ä½ç½®å’Œå¤§å°æ›´æ–°æœç´¢çª—å£ã€‚</p><pre class=" language-language-python"><code class="language-language-python"># 4.4 è¿›è¡Œcamshiftè¿½è¸ª        ret,track_window = cv.CamShift(dst,track_window,term_crit)        # 4.5 å°†è¿½è¸ªçš„ä½ç½®ç»˜åˆ¶åœ¨è§†é¢‘ä¸Šï¼Œå¹¶è¿›è¡Œæ˜¾ç¤º        pts = cv.boxPoints(ret)        pts = np.int0(pts)        img2 = cv.polylines(frame,[pts],True,255,2)</code></pre><h4 id="äººè„¸æ£€æµ‹">äººè„¸æ£€æµ‹</h4><p><strong>åŸºç¡€ï¼š</strong></p><p>æˆ‘ä»¬ä½¿ç”¨æœºå™¨å­¦ä¹ çš„æ–¹æ³•å®Œæˆäººè„¸æ£€æµ‹ï¼Œé¦–å…ˆéœ€è¦å¤§é‡çš„æ­£æ ·æœ¬å›¾åƒå’Œè´Ÿæ ·æœ¬å›¾åƒæ¥è®­ç»ƒåˆ†ç±»å™¨ã€‚æˆ‘ä»¬éœ€è¦ä»å…¶ä¸­æå–ç‰¹å¾ã€‚ä¸‹å›¾ä¸­çš„Haarç‰¹å¾ä¼šè¢«ä½¿ç”¨ï¼Œå°±åƒæˆ‘ä»¬çš„å·ç§¯æ ¸ï¼Œæ¯ä¸€ä¸ªç‰¹å¾æ˜¯ä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼ç­‰äºé»‘è‰²çŸ©å½¢ä¸­çš„åƒç´ å€¼ä¹‹åå‡å»ç™½è‰²çŸ©å½¢ä¸­çš„åƒç´ å€¼ä¹‹å’Œã€‚</p><p><img src="http://dingdm.online/re.PNG" alt=""></p><p>Haarç‰¹å¾å€¼åæ˜ äº†å›¾åƒçš„ç°åº¦å˜åŒ–æƒ…å†µã€‚ä¾‹å¦‚ï¼šè„¸éƒ¨çš„ä¸€äº›ç‰¹å¾èƒ½ç”±çŸ©é˜µç‰¹å¾ç®€å•çš„æè¿°ï¼Œçœ¼ç›è¦æ¯”è„¸é¢Šé¢œè‰²æ›´æ·±ï¼Œé¼»æ¢ä¸¤ä¾§æ¯”é¼»æ¢é¢œè‰²è¦æ·±ï¼Œå˜´å·´æ¯”å‘¨å›´é¢œè‰²è¦æ·±ç­‰ã€‚</p><p>Haarç‰¹å¾å¯ç”¨äºå›¾åƒä»»æ„ä½ç½®ï¼Œå¤§å°ä¹Ÿå¯ä»¥ä»»æ„æ”¹å˜ï¼Œæ‰€ä»¥çŸ©å½¢ç‰¹å¾å€¼æ˜¯çŸ©å½¢æ¨¡æ¿ç±»åˆ«ã€çŸ©å½¢ä½ç½®å’ŒçŸ©å½¢å¤§å°è¿™ä¸‰ä¸ªå› ç´ çš„å‡½æ•°ã€‚æ•…ç±»åˆ«ã€å¤§å°å’Œä½ç½®çš„å˜åŒ–ï¼Œä½¿å¾—å¾ˆå°çš„æ£€æµ‹çª—å£å«æœ‰éå¸¸å¤šçš„çŸ©å½¢ç‰¹å¾ã€‚</p><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python"># 1.è¯»å–å›¾ç‰‡ï¼Œå¹¶è½¬æ¢ä¸ºç°åº¦å›¾# 2.å®ä¾‹åŒ–äººè„¸å’Œçœ¼ç›æ£€æµ‹çš„åˆ†ç±»å¯¹è±¡# å®ä¾‹åŒ–çº§è”åˆ†ç±»å™¨classifier = cv.CascadeClassifier("haarcascade_frontalface_default.xml")# åŠ è½½åˆ†ç±»å™¨classifier.load('haarcascade_frontalface_default.xml')# 3.è¿›è¡Œäººè„¸å’Œçœ¼ç›çš„æ£€æµ‹rect = classifier.detectMultiScale(gray,scaleFactor,minNeighbors,minSize,maxSize)</code></pre><p>grayï¼šè¦è¿›è¡Œæ£€æµ‹çš„äººè„¸å›¾åƒ<br>scaleFactorï¼šå‰åä¸¤æ¬¡æ‰«æä¸­ï¼Œæœç´¢çª—å£çš„æ¯”ä¾‹ç³»æ•°<br>minneighborsï¼šç›®æ ‡è‡³å°‘è¢«æ£€æµ‹åˆ°minNeighborsæ¬¡æ‰ä¼šè¢«è®¤ä¸ºæ˜¯ç›®æ ‡<br>minSizeå’ŒmaxSizeï¼šç›®æ ‡çš„æœ€å°å°ºå¯¸å’Œæœ€å¤§å°ºå¯¸</p><pre class=" language-language-python"><code class="language-language-python">import matplotlib.pyplot as pltimport cv2 as cv# 1.ä»¥ç°åº¦å›¾çš„å½¢å¼è¯»å–å›¾ç‰‡img = cv.imread('/Users/dinggongcheng/Downloads/pepole.jpeg')gray = cv.cvtColor(img,cv.COLOR_BGR2GRAY)# 2.å®ä¾‹åŒ–OpenCVäººè„¸å’Œçœ¼ç›è¯†åˆ«çš„åˆ†ç±»å™¨face_cas  = cv.CascadeClassifier("/Users/dinggongcheng/Downloads/haarcascade_frontalface_default.xml")face_cas.load('/Users/dinggongcheng/Downloads/haarcascade_frontalface_default.xml')eyes_cas = cv.CascadeClassifier("/Users/dinggongcheng/Downloads/haarcascade_eye.xml")eyes_cas.load('/Users/dinggongcheng/Downloads/haarcascade_eye.xml')# 3.è°ƒç”¨è¯†åˆ«äººè„¸faceRects = face_cas.detectMultiScale(gray,scaleFactor=1.5,minNeighbors=3,minSize=(50,50))for faceRect in faceRects:    x,y,w,h = faceRect    # æ¡†å‡ºäººè„¸    cv.rectangle(img,(x,y),(x+h,y+w),(0,255,0),3)    # 4.åœ¨è¯†åˆ«å‡ºçš„äººè„¸ä¸­è¿›è¡Œçœ¼ç›çš„æ£€æµ‹    roi_color = img[y:y+h,x:x+w]    roi_gray = gray[y:y+h,x:x+w]    eyes = eyes_cas.detectMultiScale(roi_gray,scaleFactor=1.3)    for (ex,ey,ew,eh) in eyes:        cv.rectangle(roi_color,(ex,ey),(ex+ew,ey+eh),(0,0,255),1)# 5.æ£€æµ‹ç»“æœçš„ç»˜åˆ¶plt.figure(figsize=(8,6),dpi=100)plt.imshow(img[:,:,::-1]),plt.title('result')plt.xticks([]),plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/pepole.png" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒå¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°ä¸‰</title>
      <link href="/2021/04/20/python-xue-xi-bi-ji-san/"/>
      <url>/2021/04/20/python-xue-xi-bi-ji-san/</url>
      
        <content type="html"><![CDATA[<h3 id="pythonå­¦ä¹ ç¬”è®°ä¸‰">pythonå­¦ä¹ ç¬”è®°ä¸‰</h3><h4 id="ç±»ä¸å¯¹è±¡">ç±»ä¸å¯¹è±¡</h4><p>è¯­æ³•ï¼š</p><pre class=" language-language-python"><code class="language-language-python">class Student:  native_plcae = 'æ±Ÿè‹'  def __int__(self,name,age)  self.name = name    self.age = age  del info(self):    print(self.name)  @classmethod  def cm(cls)  print('ç±»æ–¹æ³•')  @staticmethod  def sm():    print('é™æ€æ–¹æ³•')</code></pre><pre class=" language-language-python"><code class="language-language-python">stu = Student('aim',20)Student.info(stu) #å¯¹è±¡ç›´æ¥è°ƒç”¨æ–¹æ³•ï¼Œå‚æ•°ä¸ºç±»çš„å¯¹è±¡å®ä¾‹</code></pre><p>åœ¨pythonä¸­éé™æ€ç±»ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç±»è°ƒç”¨å±æ€§å’Œæ–¹æ³•ã€‚</p><pre class=" language-language-python"><code class="language-language-python">stu.gender = '' #è¿è¡Œæ—¶åŠ¨æ€ç»‘å®šå±æ€§</code></pre><p>åŠ¨æ€ç»‘å®šæ–¹æ³•</p><pre class=" language-language-python"><code class="language-language-python">def show():  print('')stu.show = showstu.show()</code></pre><h4 id="ä¸‰å¤§ç‰¹å¾">ä¸‰å¤§ç‰¹å¾</h4><p>å°è£…ã€ç»§æ‰¿ä¸å¤šæ€ã€‚</p><p>å°è£…</p><pre class=" language-language-python"><code class="language-language-python">self.__age = age #é€šè¿‡__æ¥æ ‡è¯†å±æ€§åªå…è®¸ç±»å†…ä½¿ç”¨stu._Student_age #å¯ä»¥é€šè¿‡_ç±»å_å±æ€§è°ƒç”¨</code></pre><p>ç»§æ‰¿</p><pre class=" language-language-python"><code class="language-language-python">class Student(Person) #çˆ¶ç±»å½“ä½œå‚æ•°ä¼ é€’super().__init__(name,age) #é€šè¿‡super()è°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨class C(A,B) #pythonå…è®¸å¤šçˆ¶ç±»</code></pre><pre class=" language-language-python"><code class="language-language-python">def __str__(self): #é€šè¿‡é‡å†™__str__ä¿®æ”¹ç±»çš„é»˜è®¤è¾“å‡ºå†…å®¹(å†…å­˜åœ°å€)</code></pre><p>å¤šæ€</p><pre class=" language-language-python"><code class="language-language-python">def fun(obj): # é€šè¿‡ä¼ å…¥çš„å‚æ•°è®¾ç½®ç±»å‹è¿›è¡Œå¤šæ€  obj.eat()fun(Cat())fun(Dog())</code></pre><p>åªå…³å¿ƒå¯¹è±¡çš„è¡Œä¸º</p><h4 id="ç‰¹æ®Šå±æ€§å’Œæ–¹æ³•">ç‰¹æ®Šå±æ€§å’Œæ–¹æ³•</h4><table><thead><tr><th></th><th>åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td>ç‰¹æ®Šå±æ€§</td><td>_<em>dict</em>_</td><td>è·å¾—ç±»å¯¹è±¡æˆ–å®ä¾‹å¯¹è±¡æ‰€ç»‘å®šçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•çš„å­—å…¸</td></tr><tr><td>ç‰¹æ®Šæ–¹æ³•</td><td>_<em>len</em>_()</td><td>é€šè¿‡é‡å†™_<em>len</em>_()æ–¹æ³•ï¼Œè®©å†…ç½®å‡½æ•°len()çš„å‚æ•°å¯ä»¥æ˜¯è‡ªå®šä¹‰ç±»å‹</td></tr><tr><td></td><td>_<em>add</em>_()</td><td>é€šè¿‡é‡å†™_<em>add</em>_()æ–¹æ³•ï¼Œå¯ä½¿ç”¨è‡ªå®šä¹‰å¯¹è±¡å…·æœ‰+åŠŸèƒ½</td></tr><tr><td></td><td>_<em>new</em>_()</td><td>ç”¨äºåˆ›å»ºå¯¹è±¡</td></tr><tr><td></td><td>_<em>init</em>_()</td><td>å¯¹åˆ›å»ºçš„å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–</td></tr></tbody></table><pre class=" language-language-python"><code class="language-language-python">class Person(object):  def __new__(cls, *args, **kwargs):    print('__new__è¢«è°ƒç”¨æ‰§è¡Œäº†ï¼Œclsçš„idå€¼ä¸º{0}'.format(id(cls))) # 9360    obj = super().__new__(cls)    print('åˆ›å»ºçš„å¯¹è±¡çš„idä¸º:{0}'.format(id(obj))) # 7104    return obj    def __init__(self,name,age):    print('__init__è¢«è°ƒç”¨äº†ï¼Œselfçš„idå€¼ä¸º:{0}'.format(id(self))) # 7104    self.name = name    self.age = age    print('objectè¿™ä¸ªç±»å¯¹è±¡çš„idä¸º:{0}'.format(id(object))) # 3232print('Personè¿™ä¸ªç±»å¯¹è±¡çš„idä¸º:{0}').format(id(Person)) # 9360# åˆ›å»ºPersonç±»çš„å®ä¾‹å¯¹è±¡p1 = Person('aim',20)print('p1è¿™ä¸ªPersonç±»çš„å®ä¾‹å¯¹è±¡çš„id:{0}'.format(id(p1)) # 7104</code></pre><h4 id="ç±»çš„æµ…æ‹·è´ä¸æ·±æ‹·è´">ç±»çš„æµ…æ‹·è´ä¸æ·±æ‹·è´</h4><p>æµ…æ‹·è´ï¼šå¼•ç”¨åŒä¸€ä¸ªå­å¯¹è±¡åœ°å€</p><pre class=" language-language-python"><code class="language-language-python">import copyobj2 = copy.copy(obj1)obj1.cpuobj2.cpu # obj2.cpuçš„å†…å­˜åœ°å€ç­‰äºobj1.cpuçš„å†…å­˜åœ°å€</code></pre><p>æ·±æ‹·è´ï¼šå¼•ç”¨çš„å­å¯¹è±¡åœ°å€ä¹Ÿæ˜¯æ–°çš„</p><pre class=" language-language-python"><code class="language-language-python">import copyobj2 = copy.deepcopy(obj1)obj1.cpuobj2.cpu # obj2.cpuçš„å†…å­˜åœ°å€å’Œobj1.cpuçš„å†…å­˜åœ°å€ä¸åŒ</code></pre><h4 id="æ¨¡å—">æ¨¡å—</h4><p>pyå•æ–‡ä»¶ä¸­æ—¢å¯ä»¥åŒ…æ‹¬å‡½æ•°ï¼Œè¿˜å¯ä»¥æœ‰ç±»å’Œè¯­å¥ã€‚</p><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvfrom math import pow</code></pre><pre class=" language-language-python"><code class="language-language-python">if __name__ == '__main__': # å½“ä½œæ¨¡å—å¼•å…¥æ—¶é€šè¿‡åˆ¤æ–­ä¸è¿è¡Œifä½“ä¸­çš„è¯­å¥  print()</code></pre><p>å†…ç½®æ¨¡å—</p><table><thead><tr><th>æ¨¡å—å</th><th>æè¿°</th></tr></thead><tbody><tr><td>sys</td><td>ä¸pythonè§£é‡Šå™¨åŠå…¶ç¯å¢ƒæ“ä½œç›¸å…³çš„æ ‡å‡†åº“</td></tr><tr><td>time</td><td>æä¾›ä¸æ—¶é—´ç›¸å…³çš„å„ç§å‡½æ•°çš„æ ‡å‡†åº“</td></tr><tr><td>os</td><td>æä¾›äº†è®¿é—®æ“ä½œç³»ç»ŸæœåŠ¡åŠŸèƒ½çš„æ ‡å‡†åº“</td></tr><tr><td>calendar</td><td>æä¾›ä¸æ—¥æœŸç›¸å…³çš„å„ç§å‡½æ•°çš„æ ‡å‡†åº“</td></tr><tr><td>urllib</td><td>ç”¨äºè¯»å–æ¥è‡ªç½‘ä¸Šçš„æ•°æ®æ ‡å‡†åº“</td></tr><tr><td>json</td><td>ç”¨äºä½¿ç”¨JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–å¯¹è±¡</td></tr><tr><td>re</td><td>ç”¨äºåœ¨å­—ç¬¦ä¸²ä¸­æ‰§è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å’Œæ›¿æ¢</td></tr><tr><td>math</td><td>æä¾›æ ‡å‡†ç®—æœ¯è¿ç®—å‡½æ•°çš„æ ‡å‡†åº“</td></tr><tr><td>decimal</td><td>ç”¨äºè¿›è¡Œç²¾ç¡®æ§åˆ¶è¿ç®—ç²¾åº¦ã€æœ‰æ•ˆæ•°ä½å’Œå››èˆäº”å…¥æ“ä½œçš„åè¿›åˆ¶è¿ç®—</td></tr><tr><td>logging</td><td>æä¾›äº†çµæ´»çš„è®°å½•æ—¶é”™è­¦å‘Šå’Œè°ƒè¯•ä¿¡æ¯ç­‰æ—¥å¿—ä¿¡æ¯çš„åŠŸèƒ½</td></tr></tbody></table><h4 id="æ–‡ä»¶è¯»å†™">æ–‡ä»¶è¯»å†™</h4><table><thead><tr><th>æ‰“å¼€æ¨¡å¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>r</td><td>ä»¥åªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œæ–‡ä»¶çš„æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´</td></tr><tr><td>w</td><td>ä»¥åªå†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œå¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™è¦†ç›–åŸæœ‰å†…å®¹ï¼Œæ–‡ä»¶æŒ‡é’ˆåœ¨æ–‡ä»¶çš„å¼€å¤´</td></tr><tr><td>a</td><td>ä»¥è¿½åŠ æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œæ–‡ä»¶æŒ‡é’ˆåœ¨æ–‡ä»¶å¼€å¤´ï¼Œå¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™åœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ å†…å®¹ï¼Œæ–‡ä»¶æŒ‡é’ˆåœ¨åŸæ–‡ä»¶æœ«å°¾</td></tr><tr><td>b</td><td>ä»¥äºŒè¿›åˆ¶æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œéœ€è¦ä¸å…¶ä»–æ¨¡å¼ä¸€èµ·ä½¿ç”¨ï¼Œrbï¼Œæˆ–è€…wb</td></tr><tr><td>+</td><td>ä»¥è¯»å†™æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œéœ€è¦ä¸å…¶ä»–æ¨¡å¼ä¸€èµ·ä½¿ç”¨ï¼Œa+</td></tr></tbody></table><p>APIï¼š</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>read([size])</td><td>ä»æ–‡ä»¶è¯»å–sizeä¸ªå­—èŠ‚æˆ–å­—ç¬¦çš„å†…å®¹è¿”å›ã€‚è‹¥çœç•¥[size]ï¼Œåˆ™è¯»å–åˆ°æ–‡ä»¶æœ«å°¾ï¼Œå³ä¸€æ¬¡è¯»å–æ–‡ä»¶æ‰€æœ‰å†…å®¹ã€‚</td></tr><tr><td>readline()</td><td>ä»æ–‡æœ¬æ–‡ä»¶ä¸­è¯»å–ä¸€è¡Œå†…å®¹</td></tr><tr><td>readlines()</td><td>æŠŠæ–‡æœ¬æ–‡ä»¶ä¸­æ¯ä¸€è¡Œéƒ½ä½œä¸ºç‹¬ç«‹çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¹¶å°†è¿™äº›å¯¹è±¡æ”¾å…¥åˆ—è¡¨è¿”å›</td></tr><tr><td>write(str)</td><td>å°†å­—ç¬¦ä¸²strå†…å®¹å†™å…¥æ–‡ä»¶</td></tr><tr><td>writelines(s_list)</td><td>å°†å­—ç¬¦ä¸²åˆ—è¡¨s_listå†™å…¥æ–‡æœ¬æ–‡ä»¶ï¼Œä¸æ·»åŠ æ¢è¡Œç¬¦</td></tr><tr><td>seek(offset,[whence])</td><td>æŠŠæ–‡ä»¶æŒ‡é’ˆç§»åŠ¨åˆ°æ–°çš„ä½ç½®ï¼Œoffsetè¡¨ç¤ºç›¸å¯¹äºwhenceçš„ä½ç½®ï¼šoffsetä¸ºæ­£å¾€ç»“æŸæ–¹å‘ç§»åŠ¨ï¼Œä¸ºè´Ÿå¾€å¼€å§‹æ–¹å‘ç§»åŠ¨ã€‚whenceä¸åŒçš„å€¼ä»£è¡¨ä¸åŒå«ä¹‰ï¼š0ä»£è¡¨ä»æ–‡ä»¶å¤´å¼€å§‹è®¡ç®—ï¼Œ1è¡¨ç¤ºä»å½“å‰ä½ç½®å¼€å§‹è®¡ç®—ï¼Œ2è¡¨ç¤ºä»æ–‡ä»¶å°¾å¼€å§‹è®¡ç®—</td></tr><tr><td>tell()</td><td>è¿”å›æ–‡ä»¶æŒ‡é’ˆçš„å½“å‰ä½ç½®</td></tr><tr><td>flush()</td><td>æŠŠç¼“å†²åŒºçš„å†…å®¹å†™å…¥æ–‡ä»¶ï¼Œä½†ä¸å…³é—­æ–‡ä»¶</td></tr><tr><td>close()</td><td>æŠŠç¼“å†²åŒºçš„å†…å®¹å†™å…¥æ–‡ä»¶ï¼ŒåŒæ—¶å…³é—­æ–‡ä»¶ï¼Œé‡Šæ”¾æ–‡ä»¶å¯¹è±¡ç›¸å…³èµ„æº</td></tr></tbody></table><p>withè¯­å¥å¯ä»¥è‡ªåŠ¨ç®¡ç†ä¸Šä¸‹æ–‡èµ„æºï¼Œä¸è®ºä»€ä¹ˆåŸå› è·³å‡ºwithå—ï¼Œéƒ½èƒ½ç¡®ä¿æ–‡ä»¶æ­£ç¡®çš„å…³é—­ï¼Œä»¥æ­¤è¾¾åˆ°é‡Šæ”¾èµ„æºçš„ç›®çš„ã€‚<br>å®ç°äº†ç‰¹æ®Šæ–¹æ³•_<em>enter</em>_(),_<em>exit</em>_()çš„ç±»éµå®ˆäº†ä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®ï¼Œè¯¥ç±»å¯¹è±¡çš„å®ä¾‹å¯¹è±¡ï¼Œç§°ä¸ºä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€‚(ä½œç”¨ç±»ä¼¼äºä»£ç†å’Œfinally)</p><pre class=" language-language-python"><code class="language-language-python">with open('a.txt',r) as file:  print(file.read())</code></pre><p>os.pathæ¨¡å—æ“ä½œç›®å½•å‡½æ•°</p><table><thead><tr><th>å‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>abspath(path)</td><td>ç”¨äºè·å–æ–‡ä»¶æˆ–ç›®å½•çš„ç»å¯¹è·¯å¾„</td></tr><tr><td>exists(path)</td><td>ç”¨äºåˆ¤æ–­æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨è¿”å›trueï¼Œå¦åˆ™è¿”å›false</td></tr><tr><td>join(path,name)</td><td>å°†ç›®å½•ä¸ç›®å½•æˆ–è€…æ–‡ä»¶åæ‹¼æ¥èµ·æ¥</td></tr><tr><td>splitext()</td><td>åˆ†ç¦»æ–‡ä»¶åå’Œæ‰©å±•å</td></tr><tr><td>basename(path)</td><td>ä»ä¸€ä¸ªç›®å½•ä¸­æå–æ–‡ä»¶å</td></tr><tr><td>dirname(path)</td><td>ä»ä¸€ä¸ªè·¯å¾„ä¸­æå–æ–‡ä»¶è·¯å¾„ï¼Œä¸åŒ…æ‹¬æ–‡ä»¶å</td></tr><tr><td>isdir(path)</td><td>ç”¨äºåˆ¤æ–­æ˜¯å¦ä¸ºè·¯å¾„</td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenCVå­¦ä¹ ç¬”è®°ä¸‰</title>
      <link href="/2021/04/20/opencv-xue-xi-bi-ji-san/"/>
      <url>/2021/04/20/opencv-xue-xi-bi-ji-san/</url>
      
        <content type="html"><![CDATA[<h3 id="OpenCVå­¦ä¹ ç¬”è®°ä¸‰">OpenCVå­¦ä¹ ç¬”è®°ä¸‰</h3><h4 id="è§’ç‚¹ç‰¹å¾">è§’ç‚¹ç‰¹å¾</h4><p>è§’ç‚¹æ˜¯å›¾åƒå¾ˆé‡è¦çš„ç‰¹å¾ï¼Œå¯¹å›¾åƒå›¾å½¢çš„ç†è§£å’Œåˆ†ææœ‰ç€å¾ˆé‡è¦çš„ä½œç”¨ã€‚è§’ç‚¹åœ¨ä¸‰ç»´åœºæ™¯é‡å»ºè¿åŠ¨ä¼°è®¡ï¼Œç›®æ ‡è·Ÿè¸ªã€ç›®æ ‡è¯†åˆ«ã€å›¾åƒé…å‡†ä¸åŒ¹é…ç­‰è®¡ç®—æœºè§†è§‰é¢†åŸŸèµ·ç€éå¸¸é‡è¦çš„ä½œç”¨ã€‚åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œè§’ç‚¹å¯¹åº”äºç‰©ä½“çš„æ‹è§’ï¼Œé“è·¯çš„åå­—è·¯å£æˆ–ä¸å­—è·¯å£ç­‰ã€‚</p><h5 id="Harriså’ŒShi-Tomasç®—æ³•">Harriså’ŒShi-Tomasç®—æ³•</h5><p>Harrisè§’ç‚¹æ£€æµ‹</p><p>åŸç†ï¼šé€šè¿‡å›¾åƒå±€éƒ¨çš„å°çª—å£è§‚å¯Ÿå›¾åƒï¼Œè§’ç‚¹çš„ç‰¹å¾æ˜¯çª—å£æ²¿ä»»æ„æ–¹å‘ç§»åŠ¨éƒ½ä¼šå¯¼è‡´å›¾åƒç°åº¦çš„æ˜æ˜¾å˜åŒ–ã€‚</p><p>å°†å±€éƒ¨çª—å£å„ä¸ªæ–¹å‘ç§»åŠ¨(u,v)å¹¶è®¡ç®—æ‰€æœ‰ç°åº¦å·®å¼‚çš„æ€»å’Œï¼Œè¡¨è¾¾å¼å¦‚ä¸‹ã€‚</p><p><img src="http://dingdm.online/harr.PNG" alt=""></p><p>å…¶ä¸­I(x,y)æ˜¯å±€éƒ¨çª—å£çš„å›¾åƒç°åº¦ï¼ŒI(x+u,y+v)æ˜¯å¹³ç§»åçš„å›¾åƒç°åº¦ï¼Œw(x,y)æ˜¯çª—å£å‡½æ•°ï¼Œå¯ä»¥æ˜¯çŸ©å½¢çª—å£ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹æ¯ä¸€ä¸ªåƒç´ èµ‹äºˆä¸åŒæƒé‡çš„é«˜æ–¯çª—å£ã€‚</p><p>è§’ç‚¹æ£€æµ‹ä¸­ä½¿E(u,v)çš„å€¼æœ€å¤§ï¼Œåˆ©ç”¨ä¸€é˜¶æ³°å‹’å±•å¼€å¼æœ‰ï¼š</p><p><img src="http://dingdm.online/tail.PNG" alt=""></p><p>å…¶ä¸­Ixå’ŒIyæ˜¯æ²¿xå’Œyæ–¹å‘çš„å¯¼æ•°ï¼Œå¯ç”¨Sobelç®—å­è®¡ç®—ã€‚</p><p>æ¨å¯¼å¦‚ä¸‹ï¼š</p><p><img src="http://dingdm.online/tuid.PNG" alt=""></p><p>MçŸ©é˜µå†³å®šäº†E(u,v)çš„å–å€¼ï¼Œåˆ©ç”¨Mæ¥æ±‚è§’ç‚¹ï¼ŒMæ˜¯Ixå’ŒIyçš„äºŒæ¬¡é¡¹å‡½æ•°ï¼Œå¯ä»¥è¡¨ç¤ºæˆæ¤­åœ†çš„å½¢çŠ¶ï¼Œæ¤­åœ†çš„é•¿çŸ­åŠè½´ç”±Mçš„ç‰¹å¾å€¼å†³å®šï¼Œæ–¹å‘ç”±ç‰¹å¾çŸ¢é‡å†³å®šã€‚</p><p><img src="http://dingdm.online/ty.PNG" alt=""></p><p>æ¤­åœ†å‡½æ•°ç‰¹å¾å€¼ä¸å›¾åƒä¸­çš„è§’ç‚¹ã€ç›´çº¿å’Œå¹³é¢ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><img src="http://dingdm.online/guax.PNG" alt=""></p><p>å…±å¯åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š</p><p>å›¾åƒä¸­çš„ç›´çº¿ã€‚ä¸€ä¸ªç‰¹å¾å€¼å¤§ï¼Œå¦ä¸€ä¸ªç‰¹å¾å€¼å°ï¼ŒÎ»1&gt;&gt;Î»2æˆ–Î»2&gt;&gt;Î»1.æ¤­åœ†å‡½æ•°å€¼åœ¨æŸä¸€æ–¹å‘ä¸Šå¤§ï¼Œåœ¨å…¶ä»–æ–¹å‘ä¸Šå°ã€‚<br>å›¾åƒä¸­çš„å¹³é¢ã€‚ä¸¤ä¸ªç‰¹å¾å€¼éƒ½å°ï¼Œä¸”è¿‘ä¼¼ç›¸ç­‰ï¼›æ¤­åœ†å‡½æ•°æ•°å€¼åœ¨å„ä¸ªæ–¹å‘ä¸Šéƒ½å°ã€‚<br>å›¾åƒä¸­çš„è§’ç‚¹ã€‚ä¸¤ä¸ªç‰¹å¾å€¼éƒ½å¤§ï¼Œä¸”è¿‘ä¼¼ç›¸ç­‰ï¼Œæ¤­åœ†å‡½æ•°åœ¨æ‰€æœ‰æ–¹å‘éƒ½å¢å¤§ã€‚</p><p>Harrisç»™å‡ºçš„è§’ç‚¹è®¡ç®—æ–¹æ³•å¹¶ä¸éœ€è¦è®¡ç®—å…·ä½“çš„ç‰¹å¾å€¼ï¼Œè€Œæ˜¯è®¡ç®—ä¸€ä¸ªè§’ç‚¹å“åº”å€¼Ræ¥åˆ¤æ–­è§’ç‚¹ï¼ŒRçš„è®¡ç®—å…¬å¼ä¸ºï¼š</p><p><img src="http://dingdm.online/R.PNG" alt=""></p><p>å¼ä¸­detMä¸ºçŸ©é˜µMçš„è¡Œåˆ—å¼ï¼Œå³Î»1Î»2ï¼›traceMä¸ºçŸ©é˜µçš„è¿¹ï¼Œå³Î»1+Î»2ã€‚é˜¿å°”æ³•ä¸ºå¸¸æ•°ï¼Œå–å€¼èŒƒå›´ä¸º0.04-0.06ã€‚</p><p>Rå°äº0ä¸ºè¾¹ç¼˜ï¼ŒRå¤§äº0ä½†æ˜¯å¾ˆå°ä¸ºå¹³é¢ï¼Œå½“Rå¤§äº0ä¸”è¾ƒå¤§æ—¶ä¸ºè§’ç‚¹ã€‚</p><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python">dst = cv.cornerHarris(src,blockSize,ksize,k)</code></pre><p>imgï¼šæ•°æ®ç±»å‹ä¸ºfloat32çš„è¾“å…¥å›¾åƒ<br>blockSizeï¼šè§’ç‚¹æ£€æµ‹ä¸­è¦è€ƒè™‘çš„é¢†åŸŸå¤§å°<br>ksizeï¼šsobelæ±‚å¯¼ä½¿ç”¨çš„æ ¸å¤§å°<br>kï¼šè§’ç‚¹æ£€æµ‹æ–¹ç¨‹ä¸­çš„è‡ªç”±å‚æ•°ï¼Œå–å€¼å‚æ•°ä¸º[0.04-0.06]</p><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvimport numpy as npimport  matplotlib.pyplot as plt# è¯»å–å›¾åƒï¼Œå¹¶è½¬æ¢ä¸ºç°åº¦å›¾åƒimg = cv.imread('/Users/dinggongcheng/Downloads/lou.jpeg')gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)# è§’ç‚¹æ£€æµ‹# è¾“å…¥å›¾åƒå¿…é¡»æ˜¯float32gray = np.float32(gray)# æœ€åä¸€ä¸ªå‚æ•°åœ¨0.04åˆ°0.05ä¹‹é—´dst = cv.cornerHarris(gray, 2, 3, 0.04)# è®¾ç½®é˜ˆå€¼ï¼Œå°†è§’ç‚¹ç»˜åˆ¶å‡ºæ¥ï¼Œé˜ˆå€¼æ ¹æ®å›¾åƒè¿›è¡Œé€‰æ‹©img[dst > 0.001 * dst.max()] = [0, 0, 255]# å›¾åƒæ˜¾ç¤ºplt.figure(figsize=(10, 8), dpi=100)plt.imshow(img[:, :, ::-1]), plt.title('harris')plt.xticks([]), plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/lou.png" alt=""></p><h5 id="Shi-Tomasiè§’ç‚¹æ£€æµ‹">Shi-Tomasiè§’ç‚¹æ£€æµ‹</h5><p>åŸç†ï¼š</p><p>Shi-Tomasiç®—æ³•æ˜¯å¯¹è§’ç‚¹æ£€æµ‹ç®—æ³•çš„æ”¹è¿›ï¼Œä¸€èˆ¬ä¼šæ¯”Harrisç®—æ³•å¾—åˆ°æ›´å¥½çš„è§’ç‚¹ã€‚Harrisç®—æ³•çš„è§’ç‚¹å“åº”å‡½æ•°æ˜¯å°†çŸ©é˜µMçš„è¡Œåˆ—å¼å€¼ä¸Mçš„è¿¹ç›¸å‡ï¼Œåˆ©ç”¨å·®å€¼åˆ¤æ–­æ˜¯å¦ä¸ºè§’ç‚¹ã€‚åæ¥Shiå’ŒTomasiæå‡ºæ”¹è¿›çš„æ–¹æ³•æ˜¯ï¼Œè‹¥çŸ©é˜µMçš„ä¸¤ä¸ªç‰¹å¾å€¼ä¸­è¾ƒå°çš„ä¸€ä¸ªå¤§äºé˜ˆå€¼ï¼Œåˆ™è®¤ä¸ºä»–æ˜¯è§’ç‚¹ï¼Œå³R = min(Î»1,Î»2)</p><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python">corners = cv2.goodFeaturesToTrack(image,maxcorners,qualityLevel,minDistance)</code></pre><p>imageï¼šè¾“å…¥ç°åº¦å›¾åƒ<br>maxCornersï¼šè·å–è§’ç‚¹æ•°çš„æ•°ç›®<br>qualityLevelï¼šè¯¥å‚æ•°æŒ‡å‡ºæœ€ä½å¯æ¥å—çš„è§’ç‚¹è´¨é‡æ°´å¹³ï¼Œåœ¨0-1ä¹‹é—´<br>minDistanceï¼šè§’ç‚¹ä¹‹é—´æœ€å°çš„æ¬§å¼è·ç¦»ï¼Œé¿å…å¾—åˆ°ç›¸é‚»ç‰¹å¾ç‚¹<br>cornersï¼šæœç´¢åˆ°çš„è§’ç‚¹ï¼Œåœ¨è¿™é‡Œæ‰€æœ‰ä½äºè´¨é‡æ°´å¹³çš„è§’ç‚¹è¢«æ’é™¤æ‰ï¼Œç„¶åæŠŠåˆæ ¼çš„è§’ç‚¹æŒ‰è´¨é‡æ’åºï¼Œç„¶åå°†è´¨é‡è¾ƒå¥½çš„è§’ç‚¹é™„è¿‘çš„è§’ç‚¹åˆ æ‰ï¼Œæœ€åæ‰¾åˆ°maxCornersä¸ªè§’ç‚¹è¿”å›</p><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvimport numpy as npimport  matplotlib.pyplot as plt# è¯»å–å›¾åƒï¼Œå¹¶è½¬æ¢ä¸ºç°åº¦å›¾åƒimg = cv.imread('/Users/dinggongcheng/Downloads/lou.jpeg')gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)# è§’ç‚¹æ£€æµ‹corners = cv.goodFeaturesToTrack(gray, 1000, 0.01, 10)# ç»˜åˆ¶è§’ç‚¹for i in corners:    x, y = i.ravel()    cv.circle(img, (x, y), 2, (0, 0, 255), -1)# å›¾åƒæ˜¾ç¤ºplt.figure(figsize=(10, 8), dpi=100)plt.imshow(img[:, :, ::-1]), plt.title('shi-tomasi')plt.xticks([]), plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/tomasi.png" alt=""></p><h5 id="SIFT-SURFç®—æ³•">SIFT/SURFç®—æ³•</h5><p>Harriså’ŒShi-Tomasiè§’ç‚¹æ£€æµ‹ç®—æ³•ï¼Œè¿™ä¸¤ç§ç®—æ³•å…·æœ‰æ—‹è½¬ä¸å˜æ€§ï¼Œä½†ä¸å…·æœ‰å°ºåº¦ä¸å˜æ€§ï¼Œå³å½“è§’ç‚¹è¢«æ”¾å¤§æ—¶ï¼ŒåŸå…ˆçš„è§’ç‚¹æ— æ³•æ£€æµ‹ã€‚å°ºåº¦ä¸å˜ç‰¹å¾è½¬æ¢å³SIFTã€‚å®ƒç”¨æ¥ä¾¦æµ‹ä¸æè¿°å½±åƒä¸­çš„å±€éƒ¨æ€§ç‰¹å¾ï¼Œå®ƒåœ¨ç©ºé—´å°ºåº¦ä¸­å¯»æ‰¾æå€¼ç‚¹ï¼Œå¹¶æå–å‡ºå…¶ä½ç½®ã€å°ºåº¦ã€æ—‹è½¬ä¸å˜é‡ï¼Œæ­¤ç®—æ³•æœ‰David Loweåœ¨1999å¹´æ‰€å‘è¡¨ï¼Œ2004å¹´å®Œå–„æ€»ç»“ã€‚åº”ç”¨èŒƒå›´åŒ…å«ç‰©ä½“è¾¨è¯†ã€æœºå™¨äººåœ°å›¾æ„ŸçŸ¥ä¸å¯¼èˆªã€å½±åƒç¼åˆã€3Dæ¨¡å‹å»ºç«‹ã€æ‰‹åŠ¿è¾¨è¯†ã€å½±åƒè¿½è¸ªå’ŒåŠ¨ä½œå¯¹æ¯”ç­‰é¢†åŸŸã€‚</p><p>SIFTç®—æ³•çš„å®è´¨æ˜¯åœ¨ä¸åŒçš„å°ºåº¦ç©ºé—´ä¸ŠæŸ¥æ‰¾å…³é”®ç‚¹ï¼Œå¹¶è®¡ç®—å‡ºå…³é”®ç‚¹çš„æ–¹å‘ã€‚SIFTæ‰€æŸ¥æ‰¾çš„å…³é”®ç‚¹æ˜¯ä¸€äº›ååˆ†çªå‡ºï¼Œä¸ä¼šå› å…‰ç…§ï¼Œæ”¾å°„å˜æ¢å’Œå™ªéŸ³ç­‰å› ç´ è€Œå˜åŒ–çš„ç‚¹ï¼Œå¦‚è§’ç‚¹ã€è¾¹ç¼˜ç‚¹ã€æš—åŒºçš„äº®ç‚¹åŠäº®åŒºçš„æš—ç‚¹ç­‰ã€‚</p><p>åŸºæœ¬æµç¨‹ï¼š</p><p>Loweå°†SIFTç®—æ³•åˆ†è§£ä¸ºå¦‚ä¸‹å››æ­¥ï¼š</p><p>1.å°ºåº¦ç©ºé—´æå€¼æ£€æµ‹ï¼šæœç´¢æ‰€æœ‰å°ºåº¦ä¸Šçš„å›¾åƒä½ç½®ã€‚é€šè¿‡é«˜æ–¯å·®åˆ†å‡½æ•°æ¥è¯†åˆ«æ½œåœ¨çš„å¯¹äºå°ºåº¦å’Œæ—‹è½¬ä¸å˜çš„å…³é”®ç‚¹ã€‚<br>2.å…³é”®ç‚¹å®šä½ï¼šåœ¨æ¯ä¸ªå€™é€‰çš„ä½ç½®ä¸Šï¼Œé€šè¿‡ä¸€ä¸ªæ‹Ÿåˆç²¾ç»†çš„æ¨¡å‹æ¥ç¡®å®šä½ç½®å’Œå°ºåº¦ã€‚å…³é”®ç‚¹çš„é€‰æ‹©ä¾æ®äºå®ƒä»¬çš„ç¨³å®šç¨‹åº¦ã€‚<br>3.å…³é”®ç‚¹æ–¹å‘ç¡®å®šï¼šåŸºäºå›¾åƒå±€éƒ¨çš„æ¢¯åº¦æ–¹å‘ï¼Œåˆ†é…ç»™æ¯ä¸ªå…³é”®ç‚¹ä½ç½®ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹å‘ã€‚æ‰€æœ‰åé¢çš„å¯¹å›¾åƒæ•°æ®çš„æ“ä½œéƒ½ç›¸å¯¹äºå…³é”®ç‚¹çš„æ–¹å‘ã€å°ºåº¦å’Œä½ç½®è¿›è¡Œå˜æ¢ï¼Œä»è€Œä¿è¯äº†å¯¹äºè¿™äº›å˜æ¢çš„ä¸å˜æ€§ã€‚<br>4.å…³é”®ç‚¹æè¿°ï¼šåœ¨æ¯ä¸ªå…³é”®ç‚¹å‘¨å›´çš„é¢†åŸŸå†…ï¼Œåœ¨é€‰å®šçš„å°ºåº¦ä¸Šæµ‹é‡å›¾åƒå±€éƒ¨çš„æ¢¯åº¦ã€‚è¿™äº›æ¢¯åº¦ä½œä¸ºå…³é”®ç‚¹çš„æè¿°ç¬¦ï¼Œå®ƒå…è®¸æ¯”è¾ƒå¤§çš„å±€éƒ¨å½¢çŠ¶çš„å˜æ¢æˆ–å…‰ç…§å˜åŒ–ã€‚</p><h6 id="å°ºåº¦ç©ºé—´æå€¼æ£€æµ‹">å°ºåº¦ç©ºé—´æå€¼æ£€æµ‹</h6><p>åœ¨ä¸åŒçš„å°ºåº¦ç©ºé—´æ˜¯ä¸èƒ½ä½¿ç”¨ç›¸åŒçš„çª—å£æ£€æµ‹æå€¼ç‚¹ï¼Œå¯¹å°çš„å…³é”®ç‚¹ä½¿ç”¨å°çš„çª—å£ï¼Œå¯¹å¤§çš„å…³é”®ç‚¹ä½¿ç”¨å¤§çš„çª—å£ï¼Œä¸ºäº†è¾¾åˆ°ä¸Šè¿°ç›®çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨å°ºåº¦ç©ºé—´æ»¤æ³¢å™¨ã€‚</p><p>ä¸€ä¸ªå›¾åƒçš„å°ºåº¦ç©ºé—´$L(x,y,\sigma)$ï¼Œå®šä¹‰ä¸ºåŸå§‹å›¾åƒ$l(x,y)$ä¸ä¸€ä¸ªå¯å˜å°ºåº¦çš„äºŒç»´é«˜æ–¯å‡½æ•°ï¼Œå³</p><p><img src="http://dingdm.online/sift.PNG" alt=""></p><p>Ïƒæ˜¯å°ºåº¦ç©ºé—´å› å­ï¼Œå®ƒå†³å®šäº†å›¾åƒçš„æ¨¡ç³Šçš„ç¨‹åº¦ã€‚åœ¨å¤§å°ºåº¦ä¸‹è¡¨ç°çš„æ˜¯å›¾åƒçš„æ¦‚è²Œä¿¡æ¯ï¼Œåœ¨å°å°ºåº¦ä¸‹è¡¨ç°çš„æ˜¯å›¾åƒçš„ç»†èŠ‚ä¿¡æ¯ã€‚</p><p>åœ¨è®¡ç®—é«˜æ–¯å‡½æ•°çš„ç¦»æ•£è¿‘ä¼¼å€¼æ—¶ï¼Œåœ¨å¤§æ¦‚3Ïƒè·ç¦»ä¹‹å¤–çš„åƒç´ éƒ½å¯ä»¥çœ‹ä½œä¸èµ·ä½œç”¨ï¼Œè¿™äº›åƒç´ çš„è®¡ç®—ä¹Ÿå°±å¯ä»¥å¿½ç•¥ã€‚æ‰€ä»¥ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œåªè®¡ç®—(6Ïƒ+1)*(6Ïƒ+1)çš„é«˜æ–¯å·ç§¯æ ¸å°±å¯ä»¥ä¿è¯ç›¸å…³åƒç´ å½±åƒã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ„å»ºå›¾åƒçš„é«˜æ–¯é‡‘å­—å¡”ï¼Œå®ƒé‡‡ç”¨é«˜æ–¯å‡½æ•°å¯¹å›¾åƒè¿›è¡Œæ¨¡ç³Šä»¥åŠé™é‡‡æ ·å¤„ç†å¾—åˆ°çš„ï¼Œé«˜æ–¯é‡‘å­—å¡”æ„å»ºè¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆå°†å›¾åƒæ‰©å¤§ä¸€å€ï¼Œåœ¨æ‰©å¤§çš„å›¾åƒçš„åŸºç¡€ä¸Šæ„å»ºé«˜æ–¯é‡‘å­—å¡”ï¼Œç„¶åå¯¹è¯¥å°ºå¯¸ä¸‹å›¾åƒè¿›è¡Œé«˜æ–¯æ¨¡ç³Šï¼Œå‡ å¹…æ¨¡ç³Šä¹‹åçš„å›¾åƒé›†åˆæ„æˆäº†ä¸€ä¸ªOctaveï¼Œç„¶åå¯¹è¯¥Octaveä¸‹é€‰æ‹©ä¸€å¹…å›¾åƒè¿›è¡Œä¸‹é‡‡æ ·ï¼Œé•¿å’Œå®½åˆ†åˆ«ç¼©çŸ­ä¸€å€ï¼Œå›¾åƒé¢ç§¯å˜ä¸ºåŸæ¥å››åˆ†ä¹‹ä¸€ã€‚è¿™å¹…å›¾åƒå°±æ˜¯ä¸‹ä¸€ä¸ªOctaveçš„åˆå§‹å›¾åƒï¼Œåœ¨åˆå§‹å›¾åƒçš„åŸºç¡€ä¸Šå®Œæˆå±äºè¿™ä¸ªOctaveçš„é«˜æ–¯æ¨¡ç³Šå¤„ç†ï¼Œä»¥æ­¤ç±»æ¨å®Œæˆæ•´ä¸ªç®—æ³•æ‰€éœ€è¦çš„æ‰€æœ‰å…«åº¦æ„å»ºï¼Œè¿™æ ·è¿™ä¸ªé«˜æ–¯é‡‘å­—å¡”å°±æ„å»ºå‡ºæ¥äº†ã€‚</p><p>åˆ©ç”¨LoGï¼Œå³å›¾åƒçš„äºŒé˜¶å¯¼æ•°ï¼Œå¯ä»¥åœ¨ä¸åŒçš„å°ºåº¦ä¸‹æ£€æµ‹å›¾åƒçš„å…³é”®ç‚¹ä¿¡æ¯ï¼Œä»è€Œç¡®å®šå›¾åƒçš„ç‰¹å¾ç‚¹ã€‚ä½†LoGçš„è®¡ç®—é‡å¤§ï¼Œæ•ˆç‡ä½ã€‚æ‰€ä»¥æˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªç›¸é‚»é«˜æ–¯å°ºåº¦ç©ºé—´çš„å›¾åƒçš„ç›¸å‡ï¼Œå¾—åˆ°DoGæ¥è¿‘ä¼¼LoGã€‚</p><p>ä¸ºäº†è®¡ç®—DoGæˆ‘ä»¬æ„å»ºé«˜æ–¯å·®åˆ†é‡‘å­—å¡”ï¼Œè¯¥é‡‘å­—å¡”æ˜¯åœ¨ä¸Šè¿°çš„é«˜æ–¯é‡‘å­—å¡”çš„åŸºç¡€ä¸Šæ„å»ºçš„ï¼Œå»ºç«‹è¿‡ç¨‹æ˜¯ï¼šåœ¨é«˜æ–¯é‡‘å­—å¡”ä¸­æ¯ä¸ªOctaveä¸­ç›¸é‚»ä¸¤å±‚ç›¸å‡å°±æ„æˆäº†é«˜æ–¯å·®åˆ†é‡‘å­—å¡”ã€‚</p><p>é«˜æ–¯å·®åˆ†é‡‘å­—å¡”çš„ç¬¬ä¸€ç»„ç¬¬ä¸€å±‚æ˜¯ç”±é«˜æ–¯é‡‘å­—å¡”çš„ç¬¬ä¸€ç»„çš„ç¬¬äºŒå±‚å‡å»ç¬¬ä¸€ç»„çš„ç¬¬ä¸€å±‚å¾—åˆ°çš„ã€‚ä»¥æ­¤ç±»æ¨ï¼Œé€æ¸é€å±‚ç”Ÿæˆæ¯ä¸€ä¸ªå·®åˆ†å›¾åƒï¼Œæ‰€æœ‰å·®åˆ†å›¾åƒæ„æˆå·®åˆ†é‡‘å­—å¡”ã€‚æ¦‚æ‹¬ä¸ºDoGé‡‘å­—å¡”çš„ç¬¬oç»„ç¬¬iå±‚å›¾åƒæ˜¯ç”±é«˜æ–¯é‡‘å­—å¡”çš„ç¬¬oç»„ç¬¬i+1å±‚å‡å»ç¬¬oç»„ç¬¬iå±‚å¾—åˆ°çš„ã€‚åç»­siftç‰¹å¾ç‚¹çš„æå–éƒ½æ˜¯åœ¨DoGé‡‘å­—å¡”ä¸Šè¿›è¡Œçš„ã€‚</p><p>åœ¨DoGæå®šåï¼Œå°±å¯ä»¥åœ¨ä¸åŒçš„å°ºåº¦ç©ºé—´ä¸­æœç´¢æœ€å¤§å€¼äº†ã€‚å¯¹äºå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ ç‚¹è€Œè¨€ï¼Œå®ƒéœ€è¦ä¸è‡ªå·±å‘¨å›´çš„8é‚»åŸŸï¼Œä»¥åŠå°ºåº¦ç©ºé—´ä¸­ä¸Šä¸‹ä¸¤å±‚ä¸­çš„ç›¸é‚»çš„18ä¸ªç‚¹ç›¸æ¯”ã€‚å¦‚æœæ˜¯å±€éƒ¨æœ€å¤§å€¼ï¼Œå®ƒå°±å¯èƒ½æ˜¯ä¸€ä¸ªå…³é”®ç‚¹ã€‚åŸºæœ¬ä¸Šæ¥è¯´å…³é”®ç‚¹æ˜¯å›¾åƒåœ¨ç›¸åº”å°ºåº¦ç©ºé—´ä¸­çš„æœ€å¥½ä»£è¡¨ã€‚</p><p>æœç´¢è¿‡ç¨‹ä»æ¯ç»„çš„ç¬¬äºŒå±‚å¼€å§‹ï¼Œä»¥ç¬¬äºŒå±‚ä¸ºå½“å‰å±‚ï¼Œå¯¹ç¬¬äºŒå±‚çš„DoGå›¾åƒä¸­çš„æ¯ä¸ªç‚¹å–ä¸€ä¸ª3*3çš„ç«‹æ–¹ä½“ï¼Œç«‹æ–¹ä½“ä¸Šä¸‹å±‚ä¸ºç¬¬ä¸€å±‚ä¸ç¬¬ä¸‰å±‚ã€‚è¿™æ ·ï¼Œæœç´¢å¾—åˆ°çš„æå€¼ç‚¹æ—¢æœ‰ä½ç½®åæ ‡ï¼Œåˆæœ‰ç©ºé—´å°ºåº¦åæ ‡ã€‚å½“ç¬¬äºŒå±‚æœç´¢å®Œæˆåï¼Œå†ä»¥ç¬¬ä¸‰å±‚ä½œä¸ºå½“å‰å±‚ï¼Œå…¶è¿‡ç¨‹ä¸ç¬¬äºŒå±‚çš„æœç´¢ç±»ä¼¼ã€‚å½“S=3æ—¶ï¼Œæ¯ç»„é‡Œé¢è¦æœç´¢ä¸‰å±‚ï¼Œæ‰€ä»¥DoGä¸­å°±æœ‰S+2å±‚ï¼Œåœ¨åˆå§‹æ„å»ºçš„é‡‘å­—å¡”ä¸­æ¯ç»„æœ‰S+3å±‚ã€‚</p><h6 id="å…³é”®ç‚¹å®šä½">å…³é”®ç‚¹å®šä½</h6><p>ç”±äºDoGå¯¹å™ªå£°å’Œè¾¹ç¼˜æ¯”è¾ƒæ•æ„Ÿï¼Œå› æ­¤åœ¨ä¸Šé¢é«˜æ–¯å·®åˆ†é‡‘å­—å¡”ä¸­æ£€æµ‹åˆ°çš„å±€éƒ¨æå€¼ç‚¹éœ€ç»è¿‡è¿›ä¸€æ­¥çš„æ£€éªŒæ‰èƒ½ç²¾ç¡®å®šä½ä¸ºç‰¹å¾ç‚¹ã€‚</p><p>ä½¿ç”¨å°ºåº¦ç©ºé—´çš„æ³°å‹’çº§æ•°å±•å¼€æ¥è·å¾—æå€¼çš„å‡†ç¡®ä½ç½®ï¼Œå¦‚æœæå€¼ç‚¹çš„ç°åº¦å€¼å°äºé˜ˆå€¼å°±ä¼šè¢«å¿½ç•¥æ‰ï¼Œåœ¨OpenCVä¸­è¿™ç§é˜ˆå€¼è¢«ç§°ä¸ºcontrastThresholdã€‚</p><p>DoGç®—æ³•å¯¹è¾¹ç•Œéå¸¸æ•æ„Ÿï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¦æŠŠè¾¹ç•Œå»æ‰ã€‚Harrisç®—æ³•é™¤äº†å¯ä»¥ç”¨äºè§’ç‚¹æ£€æµ‹ä¹‹å¤–è¿˜å¯ä»¥ç”¨äºæ£€æµ‹è¾¹ç•Œï¼Œä»Harrisè§’ç‚¹æ£€æµ‹çš„ç®—æ³•ä¸­ï¼Œå½“ä¸€ä¸ªç‰¹å¾å€¼è¿œè¿œå¤§äºå¦å¤–ä¸€ä¸ªç‰¹å¾å€¼æ—¶æ£€æµ‹åˆ°çš„æ˜¯è¾¹ç•Œã€‚é‚£åœ¨DoGç®—æ³•ä¸­æ¬ ä½³çš„å…³é”®ç‚¹åœ¨å¹³è¡Œè¾¹ç¼˜çš„æ–¹å‘æœ‰è¾ƒå¤§çš„ä¸»æ›²ç‡ï¼Œè€Œåœ¨å‚ç›´äºè¾¹ç¼˜çš„æ–¹å‘æœ‰è¾ƒå°çš„æ›²ç‡ï¼Œä¸¤è€…çš„æ¯”å€¼å¦‚æœé«˜äºæŸä¸ªé˜ˆå€¼ï¼Œå°±è®¤ä¸ºè¯¥å…³é”®ç‚¹æ˜¯è¾¹ç•Œï¼Œå°†è¢«å¿½ç•¥ï¼Œä¸€èˆ¬å°†è¯¥é˜ˆå€¼è®¾ç½®ä¸º10.</p><p>å°†ä½å¯¹æ¯”åº¦å’Œè¾¹ç•Œçš„å…³é”®ç‚¹å»é™¤ï¼Œå¾—åˆ°çš„å°±æ˜¯æˆ‘ä»¬æ„Ÿå…´è¶£çš„å…³é”®ç‚¹ã€‚</p><h6 id="å…³é”®ç‚¹æ–¹å‘ç¡®å®š">å…³é”®ç‚¹æ–¹å‘ç¡®å®š</h6><p>ç»è¿‡ä¸Šè¿°ä¸¤ä¸ªæ­¥éª¤ï¼Œå›¾åƒçš„å…³é”®ç‚¹å°±å®Œå…¨çŸ¥é“äº†ï¼Œè¿™äº›å…³é”®ç‚¹å…·æœ‰å°ºåº¦ä¸å˜æ€§ã€‚ä¸ºäº†å®ç°æ—‹è½¬ä¸å˜æ€§ï¼Œè¿˜éœ€è¦ä¸ºæ¯ä¸ªå…³é”®ç‚¹åˆ†é…ä¸€ä¸ªæ–¹å‘è§’åº¦ï¼Œä¹Ÿå°±æ˜¯æ ¹æ®æ£€æµ‹åˆ°çš„å…³é”®ç‚¹æ‰€åœ¨é«˜æ–¯å°ºåº¦å›¾åƒçš„é‚»åŸŸç»“æ„ä¸­æ±‚çš„ä¸€ä¸ªæ–¹å‘åŸºå‡†ã€‚</p><p>å¯¹äºä»»ä¸€å…³é”®ç‚¹ï¼Œæˆ‘ä»¬é‡‡é›†å…¶æ‰€åœ¨é«˜æ–¯é‡‘å­—å¡”å›¾åƒä»¥rä¸ºåŠå¾„çš„åŒºåŸŸå†…æ‰€æœ‰åƒç´ çš„æ¢¯åº¦ç‰¹å¾ï¼ŒåŠå¾„rä¸ºï¼šr = 3 * 1.5Ïƒã€‚å…¶ä¸­Ïƒæ˜¯å…³é”®ç‚¹æ‰€åœ¨å±‚çš„å›¾åƒçš„å°ºåº¦ï¼Œå¯ä»¥å¾—åˆ°å¯¹åº”çš„å°ºåº¦å›¾åƒã€‚</p><p>æ¢¯åº¦çš„å¢å€¼å’Œæ–¹å‘çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p><p><img src="http://dingdm.online/tid.PNG" alt=""></p><p>å®Œæˆå…³é”®ç‚¹æ¢¯åº¦è®¡ç®—åï¼Œä½¿ç”¨ç›´æ–¹å›¾ç»Ÿè®¡å…³é”®ç‚¹é‚»åŸŸå†…åƒç´ çš„æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ã€‚å…·ä½“åšæ³•ä¸ºå°†360åº¦åˆ†ä¸º36æŸ±ï¼Œæ¯10åº¦ä¸ºä¸€æŸ±ï¼Œç„¶ååœ¨ä»¥rä¸ºåŠå¾„çš„åŒºåŸŸå†…ï¼Œå°†æ¢¯åº¦æ–¹å‘åœ¨æŸä¸€ä¸ªæŸ±å†…çš„åƒç´ æ‰¾å‡ºæ¥ï¼Œç„¶åå°†ä»–ä»¬çš„å¹…å€¼ç›¸åŠ åœ¨ä¸€èµ·ä½œä¸ºæŸ±çš„é«˜åº¦ï¼Œå› ä¸ºåœ¨rä¸ºåŠå¾„çš„åŒºåŸŸå†…åƒç´ çš„æ¢¯åº¦å¹…å€¼å¯¹ä¸­å¿ƒåƒç´ çš„è´¡çŒ®æ˜¯ä¸åŒçš„ï¼Œå› æ­¤è¿˜éœ€è¦å¯¹å¹…å€¼è¿›è¡ŒåŠ æƒå¤„ç†ï¼Œé‡‡ç”¨é«˜æ–¯åŠ æƒï¼Œæ–¹å·®ä¸º1.5Ïƒã€‚</p><p><img src="http://dingdm.online/zhi.PNG" alt=""></p><p>æ¯ä¸ªç‰¹å¾ç‚¹å¿…é¡»åˆ†é…ä¸€ä¸ªä¸»æ–¹å‘ï¼Œè¿˜éœ€è¦ä¸€ä¸ªæˆ–å¤šä¸ªè¾…æ–¹å‘ï¼Œå¢åŠ è¾…æ–¹å‘çš„ç›®çš„æ˜¯ä¸ºäº†å¢å¼ºå›¾åƒåŒ¹é…çš„é²æ£’æ€§ã€‚è¾…æ–¹å‘çš„å®šä¹‰æ˜¯ï¼Œå½“ä¸€ä¸ªæŸ±ä½“çš„é«˜åº¦å¤§äºä¸»æ–¹å‘æŸ±ä½“é«˜åº¦çš„ç™¾åˆ†ä¹‹å…«åæ—¶ï¼Œåˆ™è¯¥æŸ±ä½“æ‰€ä»£è¡¨çš„æ–¹å‘å°±æ˜¯ç»™ç‰¹å¾ç‚¹çš„è¾…æ–¹å‘ã€‚</p><p>ç›´æ–¹å›¾çš„å³°å€¼ï¼Œå³æœ€é«˜çš„æŸ±ä»£è¡¨çš„æ–¹å‘æ˜¯ç‰¹å¾ç‚¹é‚»åŸŸèŒƒå›´å†…å›¾åƒæ¢¯åº¦çš„ä¸»æ–¹å‘ï¼Œä½†è¯¥æŸ±ä½“ä»£è¡¨çš„è§’åº¦æ˜¯ä¸€ä¸ªèŒƒå›´ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦å¯¹ç¦»æ•£çš„ç›´æ–¹å›¾è¿›è¡Œæ’å€¼æ‹Ÿåˆï¼Œä»¥å¾—åˆ°æ›´ç²¾ç¡®çš„æ–¹å‘è§’åº¦å€¼ã€‚åˆ©ç”¨æŠ›ç‰©çº¿å¯¹ç¦»æ•£çš„ç›´æ–¹å›¾è¿›è¡Œæ‹Ÿåˆã€‚</p><p><img src="http://dingdm.online/cha.PNG" alt=""></p><p>è·å–å›¾åƒå…³é”®ç‚¹ä¸»æ–¹å‘åï¼Œæ¯ä¸ªå…³é”®ç‚¹æœ‰ä¸‰ä¸ªä¿¡æ¯(x,y,Ïƒ,Î¸):ä½ç½®ã€å°ºåº¦ã€æ–¹å‘ã€‚ç”±æ­¤æˆ‘ä»¬å¯ä»¥ç¡®å®šä¸€ä¸ªSIFTç‰¹å¾åŒºåŸŸã€‚é€šå¸¸ä½¿ç”¨ä¸€ä¸ªå¸¦ç®­å¤´çš„åœ†æˆ–ç›´æ¥ä½¿ç”¨ç®­å¤´è¡¨ç¤ºSIFTåŒºåŸŸçš„ä¸‰ä¸ªå€¼ï¼Œä¸­å¿ƒè¡¨ç¤ºç‰¹å¾ç‚¹ä½ç½®ï¼ŒåŠå¾„è¡¨ç¤ºå…³é”®ç‚¹å°ºåº¦ï¼Œç®­å¤´è¡¨ç¤ºæ–¹å‘ã€‚</p><h6 id="å…³é”®ç‚¹æè¿°">å…³é”®ç‚¹æè¿°</h6><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ¯ä¸ªå…³é”®ç‚¹å°±è¢«åˆ†é…äº†ä½ç½®ï¼Œå°ºåº¦å’Œæ–¹å‘ä¿¡æ¯ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¸ºæ¯ä¸ªå…³é”®ç‚¹å»ºç«‹ä¸€ä¸ªæè¿°ç¬¦ï¼Œè¯¥æè¿°ç¬¦æ—¢å…·æœ‰å¯åŒºåˆ†æ€§ï¼Œåˆå…·æœ‰å¯¹æŸäº›å˜é‡çš„ä¸å˜æ€§ï¼Œå¦‚å…‰ç…§ï¼Œè§†è§’ç­‰ã€‚è€Œä¸”æè¿°ç¬¦ä¸ä»…ä»…åŒ…å«å…³é”®ç‚¹ï¼Œä¹ŸåŒ…æ‹¬å…³é”®ç‚¹å‘¨å›´å¯¹å…¶æœ‰è´¡çŒ®çš„åƒç´ ç‚¹ï¼Œä¸»è¦æ€è·¯å°±æ˜¯é€šè¿‡å°†å…³é”®ç‚¹å‘¨å›´å›¾åƒåŒºåŸŸåˆ†å—ï¼Œè®¡ç®—å—å†…çš„æ¢¯åº¦ç›´æ–¹å›¾ï¼Œç”Ÿæˆå…·æœ‰ç‰¹å¾å‘é‡ï¼Œå¯¹å›¾åƒè¿›è¡ŒæŠ½è±¡ã€‚</p><p>æè¿°ç¬¦ä¸ç‰¹å¾ç‚¹æ‰€åœ¨çš„å°ºåº¦æœ‰å…³ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å…³é”®ç‚¹æ‰€åœ¨çš„é«˜æ–¯å°ºåº¦å›¾åƒä¸Šç”Ÿæˆå¯¹åº”çš„æè¿°ç¬¦ã€‚ä»¥ç‰¹å¾ç‚¹ä¸ºä¸­å¿ƒï¼Œå°†å…¶é‚»åŸŸåˆ’åˆ†ä¸ºd*dä¸ªå­åŒºåŸŸ(ä¸€èˆ¬d=4)ï¼Œæ¯ä¸ªå­åŒºåŸŸéƒ½æ˜¯ä¸€ä¸ªæ­£æ–¹å½¢ï¼Œè¾¹é•¿ä¸º3Ïƒï¼Œè€ƒè™‘åˆ°å®é™…è®¡ç®—æ—¶ï¼Œéœ€è¦è¿›è¡Œä¸‰æ¬¡çº¿æ€§æ’å€¼ï¼Œæ‰€ä»¥ç‰¹å¾ç‚¹é‚»åŸŸçš„ä¸º3Ïƒ(d+1)*3Ïƒ(d+1)çš„èŒƒå›´ã€‚ä¸ºäº†ä¿è¯ç‰¹å¾ç‚¹çš„æ—‹è½¬ä¸å˜æ€§ï¼Œä»¥ç‰¹å¾ç‚¹ä¸ºä¸­å¿ƒï¼Œå°†åæ ‡è½´æ—‹è½¬ä¸ºå…³é”®ç‚¹çš„ä¸»æ–¹å‘ã€‚</p><p>è®¡ç®—å­åŒºåŸŸå†…çš„åƒç´ æ¢¯åº¦ï¼Œå¹¶æŒ‰ç…§Ïƒ=0.5dè¿›è¡Œé«˜æ–¯åŠ æƒï¼Œç„¶åæ’å€¼è®¡ç®—å¾—åˆ°æ¯ä¸ªç§å­ç‚¹çš„å…«ä¸ªæ–¹å‘çš„æ¢¯åº¦ï¼Œæ’å€¼æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><img src="http://dingdm.online/5d.PNG" alt=""></p><p>æ¯ä¸ªç§å­ç‚¹çš„æ¢¯åº¦éƒ½æ˜¯ç”±è¦†ç›–å…¶çš„å››ä¸ªå­åŒºåŸŸæ’å€¼è€Œå¾—åˆ°çš„ã€‚å¦‚å›¾ä¸­çš„çº¢è‰²ç‚¹ï¼Œè½åœ¨ç¬¬0è¡Œå’Œç¬¬1è¡Œä¹‹é—´ï¼Œå¯¹è¿™ä¸¤è¡Œéƒ½æœ‰è´¡çŒ®ã€‚å¯¹ç¬¬0è¡Œå’Œç¬¬3åˆ—ç§å­ç‚¹çš„è´¡çŒ®å› å­ä¸ºdrï¼Œå¯¹ç¬¬ä¸€è¡Œå’Œç¬¬ä¸‰åˆ—çš„è´¡çŒ®å› æ­¤ä¸º1-drï¼ŒåŒç†ï¼Œå¯¹é‚»è¿‘ä¸¤åˆ—çš„è´¡çŒ®å› å­ä¸ºdcå’Œ1-dcï¼Œå¯¹é‚»è¿‘ä¸¤ä¸ªæ–¹å‘çš„è´¡çŒ®å› å­ä¸ºdoå’Œ1-doã€‚åˆ™æœ€ç»ˆç»“æœç´¯åŠ åœ¨æ¯ä¸ªæ–¹å‘ä¸Šçš„æ¢¯åº¦å¤§å°ä¸º</p><p><img src="http://dingdm.online/qyab.PNG" alt=""></p><p>å…¶ä¸­kï¼Œmï¼Œnä¸º0æˆ–ä¸º1ï¼Œå¦‚ä¸Šç»Ÿè®¡128ä¸ªæ¢¯åº¦ä¿¡æ¯å³ä¸ºè¯¥å…³é”®ç‚¹çš„ç‰¹å¾å‘é‡ï¼ŒæŒ‰ç…§ç‰¹å¾ç‚¹å¯¹æ¯ä¸ªå…³é”®ç‚¹çš„ç‰¹å¾å‘é‡è¿›è¡Œæ’åºï¼Œå°±å¾—åˆ°äº†SIFTç‰¹å¾æè¿°å‘é‡ã€‚</p><h6 id="SURFåŸç†">SURFåŸç†</h6><p>ä½¿ç”¨SIFTç®—æ³•è¿›è¡Œå…³é”®å­—æ£€æµ‹å’Œæè¿°çš„æ‰§è¡Œé€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œéœ€è¦é€Ÿåº¦æ›´å¿«çš„ç®—æ³•ã€‚2006å¹´Bayæå‡ºäº†SURFç®—æ³•ï¼Œæ˜¯SIFTç®—æ³•çš„å¢å¼ºç‰ˆï¼Œå®ƒçš„è®¡ç®—é‡å°ï¼Œè¿ç®—é€Ÿåº¦å¿«ï¼Œæå–çš„ç‰¹å¾å€¼ä¸SIFTå‡ ä¹ç›¸åŒï¼Œå°†å…¶ä¸SIFTç®—æ³•å¯¹æ¯”ã€‚</p><table><thead><tr><th></th><th>SIFT</th><th>SURF</th></tr></thead><tbody><tr><td>ç‰¹å¾ç‚¹æ£€æµ‹</td><td>ä½¿ç”¨ä¸åŒå°ºåº¦çš„å›¾ç‰‡ä¸é«˜æ–¯å‡½æ•°è¿›è¡Œå·ç§¯</td><td>ä½¿ç”¨ä¸åŒå¤§å°çš„ç›’æ»¤æ³¢å™¨ä¸åŸå§‹å›¾åƒåšå·ç§¯ï¼Œæ˜“äºå¹¶è¡Œ</td></tr><tr><td>æ–¹å‘</td><td>å…³é”®ç‚¹é‚»æ¥çŸ©å½¢åŒºåŸŸå†…ï¼Œåˆ©ç”¨æ¢¯åº¦ç›´æ–¹å›¾è®¡ç®—</td><td>å…³é”®ç‚¹é‚»æ¥åœ†åŸŸå†…ï¼Œè®¡ç®—xï¼Œyæ–¹å‘çš„haarå°æ³¢</td></tr><tr><td>æè¿°ç¬¦ç”Ÿæˆ</td><td>å…³é”®ç‚¹é‚»åŸŸå†…åˆ’åˆ†d*då­åŒºåŸŸï¼Œæ¯ä¸ªå­åŒºåŸŸå†…è®¡ç®—8ä¸ªæ–¹å‘çš„ç›´æ–¹å›¾</td><td>å…³é”®ç‚¹é‚»åŸŸå†…åˆ’åˆ†d*dä¸ªå­åŒºåŸŸï¼Œæ¯ä¸ªå­åŒºåŸŸè®¡ç®—é‡‡æ ·ç‚¹çš„haarå°æ³¢å“åº”ï¼Œå³dxï¼ŒdyåŠå¯¹åº”çš„ç»å¯¹å€¼çš„ç´¯åŠ </td></tr></tbody></table><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python"># 1.å®ä¾‹åŒ–siftsift = cv.xfeatures2d.SIFT_create()# 2.åˆ©ç”¨sift.detectAndCompute()æ£€æµ‹å…³é”®ç‚¹å¹¶è®¡ç®—kp, des = sift.detectAndCompute(gray,None)# 3.å°†å…³é”®ç‚¹æ£€æµ‹ç»“æœç»˜åˆ¶åœ¨å›¾åƒä¸Šcv.drawKeypoints(images,keypoints,outputimages,color,flags)</code></pre><p>grayï¼šè¿›è¡Œå…³é”®ç‚¹æ£€æµ‹çš„å›¾åƒï¼Œæ³¨æ„æ˜¯ç°åº¦å›¾åƒ<br>kpï¼šå…³é”®ç‚¹ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½ç½®ã€å°ºåº¦å’Œæ–¹å‘ä¿¡æ¯<br>desï¼šå…³é”®ç‚¹æè¿°ç¬¦ï¼Œæ¯ä¸ªå…³é”®ç‚¹å¯¹åº”128ä¸ªæ¢¯åº¦ä¿¡æ¯çš„ç‰¹å¾å‘é‡<br>imageï¼šåŸå§‹å›¾åƒ<br>keypointsï¼šå…³é”®ç‚¹ä¿¡æ¯ï¼Œå°†å…¶ç»˜åˆ¶åœ¨å›¾åƒä¸Š<br>outputimageï¼šè¾“å‡ºå›¾ç‰‡ï¼Œå¯ä»¥æ˜¯åŸå§‹å›¾åƒ<br>colorï¼šé¢œè‰²è®¾ç½®ï¼Œé€šè¿‡ä¿®æ”¹bgrçš„å€¼æ›´æ”¹ç”»ç¬”çš„é¢œè‰²<br>flagsï¼šç»˜å›¾åŠŸèƒ½çš„æ ‡è¯†è®¾ç½®<br>1.cv2.DRAW_MATCHES_FLAGS_DEFAULTï¼šåˆ›å»ºè¾“å‡ºå›¾åƒçŸ©é˜µï¼Œä½¿ç”¨ç°å­˜çš„è¾“å‡ºå›¾åƒç»˜åˆ¶åŒ¹é…å¯¹å’Œç‰¹å¾ç‚¹ï¼Œå¯¹æ¯ä¸€ä¸ªå…³é”®ç‚¹åªç»˜åˆ¶ä¸­é—´ç‚¹<br>2.cv2.DRAW_MATCHES_FLAGS_OVER_OUTIMGï¼šä¸åˆ›å»ºè¾“å‡ºå›¾åƒçŸ©é˜µï¼Œè€Œæ˜¯åœ¨è¾“å‡ºå›¾åƒä¸Šç»˜åˆ¶åŒ¹é…å¯¹<br>3.cv2.DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTSï¼šå¯¹æ¯ä¸€ä¸ªç‰¹å¾ç‚¹ç»˜åˆ¶å¸¦å¤§å°å’Œæ–¹å‘çš„å…³é”®ç‚¹å›¾å½¢<br>4.cv2.DRAW_MATCHES_FLAGS_NOT_DRAW_SINGLE_POINTSï¼šå•ç‚¹çš„ç‰¹å¾ç‚¹ä¸è¢«ç»˜åˆ¶</p><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvimport numpy as npimport matplotlib.pyplot as plt# è¯»å–å›¾åƒï¼Œå¹¶è½¬æ¢ä¸ºç°åº¦å›¾åƒimg = cv.imread('/Users/dinggongcheng/Downloads/lou.jpeg')gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)# SIFTå…³é”®ç‚¹æ£€æµ‹# å®ä¾‹åŒ–siftå¯¹è±¡sift = cv.xfeatures2d.SIFT_create()# å…³é”®ç‚¹æ£€æµ‹ï¼škpå…³é”®ç‚¹ä¿¡æ¯åŒ…æ‹¬æ–¹å‘ã€å°ºåº¦ã€ä½ç½®ä¿¡æ¯ï¼Œdesæ˜¯å…³é”®ç‚¹çš„æè¿°ç¬¦kp, des = sift.detectAndCompute(gray, None)# åœ¨å›¾åƒæ¡‘ç»˜åˆ¶å…³é”®ç‚¹çš„æ£€æµ‹ç»“æœcv.drawKeypoints(img, kp, img, flags=cv.DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS)# å›¾åƒæ˜¾ç¤ºplt.figure(figsize=(10, 8), dpi=100)plt.imshow(img[:, :, ::-1]), plt.title('sift')plt.xticks([]), plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/feature.png" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒå¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenCVå­¦ä¹ ç¬”è®°äºŒ</title>
      <link href="/2021/04/16/opencv-xue-xi-bi-ji-er/"/>
      <url>/2021/04/16/opencv-xue-xi-bi-ji-er/</url>
      
        <content type="html"><![CDATA[<h3 id="OpenCVå­¦ä¹ ç¬”è®°äºŒ">OpenCVå­¦ä¹ ç¬”è®°äºŒ</h3><h4 id="å›¾åƒå¤„ç†">å›¾åƒå¤„ç†</h4><h5 id="ç›´æ–¹å›¾">ç›´æ–¹å›¾</h5><p>ç›´æ–¹å›¾æ˜¯å¯¹æ•°æ®è¿›è¡Œç»Ÿè®¡çš„ä¸€ç§æ–¹æ³•ï¼Œå¹¶ä¸”å°†ç»Ÿè®¡å€¼ç»„ç»‡åˆ°ä¸€ç³»åˆ—å®ç°å®šä¹‰å¥½çš„binä¸­ã€‚å…¶ä¸­ï¼Œbinä¸ºç›´æ–¹å›¾ä¸­ç»å¸¸ç”¨åˆ°çš„ä¸€ä¸ªæ¦‚å¿µï¼Œå¯ä»¥è¯‘ä¸ºç›´æ¡æˆ–ç»„è·ï¼Œå…¶æ•°å€¼æ˜¯ä»æ•°æ®ä¸­è®¡ç®—å‡ºçš„ç‰¹å¾ç»Ÿè®¡é‡ï¼Œè¿™äº›æ•°æ®å¯ä»¥æ˜¯è¯¸å¦‚æ¢¯åº¦ã€æ–¹å‘ã€è‰²å½©æˆ–ä»»ä½•å…¶ä»–ç‰¹å¾ã€‚</p><p>å›¾åƒç›´æ–¹å›¾é€‚ç”¨ä»¥è¡¨ç¤ºæ•°å­—å›¾åƒä¸­äº®åº¦åˆ†å¸ƒçš„ç›´æ–¹å›¾ï¼Œæ ‡ç»˜äº†å›¾åƒä¸­æ¯ä¸ªäº®åº¦å€¼çš„åƒç´ ä¸ªæ•°ã€‚è¿™ç§ç›´æ–¹å›¾ä¸­ï¼Œæ¨ªåæ ‡çš„å·¦ä¾§ä¸ºè¾ƒæš—çš„åŒºåŸŸï¼Œè€Œå³ä¾§ä¸ºè¾ƒäº®çš„åŒºåŸŸã€‚å› æ­¤ä¸€å¼ è¾ƒæš—å›¾ç‰‡çš„ç›´æ–¹å›¾ä¸­çš„æ•°æ®å¤šé›†ä¸­äºå·¦ä¾§å’Œä¸­é—´éƒ¨åˆ†ï¼Œè€Œæ•´ä½“æ˜äº®ï¼Œåªæœ‰å°‘é‡é˜´å½±çš„å›¾åƒåˆ™ç›¸åã€‚</p><p>æ³¨æ„ï¼šç›´æ–¹å›¾æ˜¯æ ¹æ®ç°åº¦å›¾è¿›è¡Œç»˜åˆ¶çš„ï¼Œè€Œä¸æ˜¯å½©è‰²å›¾åƒã€‚</p><p>ç»˜åˆ¶åŸç†ï¼šå°†å›¾åƒçš„ä¿¡æ¯(ç°åº¦å€¼ 0-255)ï¼Œå·²çŸ¥æ•°å­—çš„èŒƒå›´åŒ…å«256ä¸ªå€¼ï¼Œäºæ˜¯å¯ä»¥æŒ‰ä¸€å®šè§„å¾‹å°†è¿™ä¸ªèŒƒå›´åˆ†å‰²æˆå­åŒºåŸŸ(bins)ã€‚</p><p><img src="http://dingdm.online/huidu.PNG" alt=""></p><p>dimsï¼šéœ€è¦ç»Ÿè®¡çš„ç‰¹å¾æ•°ç›®ã€‚å›¾ä¸­dims = 1ï¼Œå› ä¸ºä»…ä»…ç»Ÿè®¡äº†ç°åº¦å€¼ã€‚<br>binsï¼šæ¯ä¸ªç‰¹å¾ç©ºé—´å­åŒºæ®µçš„æ•°ç›®ï¼Œå¯è¯‘ä¸ºç›´æ¡æˆ–ç»„è·ï¼Œåœ¨å›¾ä¸­ï¼Œbins = 16ã€‚<br>rangeï¼šè¦ç»Ÿè®¡ç‰¹å¾çš„å–å€¼èŒƒå›´ã€‚å›¾ä¸­range = [0ï¼Œ255]ã€‚</p><p>ç›´æ–¹å›¾æ˜¯å›¾åƒä¸­åƒç´ å¼ºåº¦åˆ†å¸ƒçš„å›¾å½¢è¡¨è¾¾æ–¹å¼ã€‚å®ƒç»Ÿè®¡äº†æ¯ä¸€ä¸ªå¼ºåº¦å€¼æ‰€å…·æœ‰çš„åƒç´ ä¸ªæ•°ï¼Œä¸åŒçš„å›¾åƒçš„ç›´æ–¹å›¾å¯èƒ½æ˜¯ç›¸åŒçš„ã€‚</p><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python">cv2.calcHist(images,channels,mask,histSize,ranges[,hist[,accumlate]])</code></pre><p>imagesï¼šåŸå›¾åƒï¼Œå½“ä¼ å…¥å‡½æ•°æ—¶åº”è¯¥ç”¨ä¸­æ‹¬å·[]æ‹¬èµ·æ¥ï¼Œå¦‚[img]<br>channelsï¼šå¦‚æœè¾“å…¥å›¾åƒæ˜¯ç°åº¦å›¾ï¼Œä»–çš„å€¼å°±æ˜¯[0]ï¼›å¦‚æœæ˜¯å½©è‰²å›¾åƒçš„è¯ï¼Œä¼ å…¥çš„å‚æ•°å¯ä»¥æ˜¯[0],[1],[2]ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”ç€é€šé“Bï¼ŒGï¼ŒRã€‚<br>maskï¼šæ©è†œå›¾åƒï¼Œè¦ç»Ÿè®¡æ•´å¹…å›¾åƒçš„ç›´æ–¹å›¾å°±æŠŠå®ƒè®¾ä¸ºNoneï¼Œä½†æ˜¯å¦‚æœæƒ³ç»Ÿè®¡å›¾åƒçš„æŸä¸€éƒ¨åˆ†çš„ç›´æ–¹å›¾çš„è¯ï¼Œä½ å°±éœ€è¦åˆ¶ä½œä¸€ä¸ªæ©è†œå›¾åƒå¹¶ä½¿ç”¨å®ƒã€‚<br>hitSizeï¼šbinçš„æ•°ç›®ã€‚ä¹Ÿåº”è¯¥ç”¨ä¸­æ‹¬å·æ‹¬èµ·æ¥ï¼Œå³[256]ã€‚<br>rangesï¼šåƒç´ å€¼èŒƒå›´ï¼Œé€šå¸¸ä¸º[0ï¼Œ256]</p><p><img src="http://dingdm.online/pythondemo.jpeg" alt=""></p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvfrom matplotlib import pyplot as plt# ç›´æ¥ä»¥ç°åº¦å›¾çš„æ–¹å¼è¯»å…¥img = cv.imread('/Users/dinggongcheng/Downloads/pythondemo.jpeg', 0)# ç»Ÿè®¡ç°åº¦å›¾histr = cv.calcHist([img], [0], None, [256], [0,256])# ç»˜åˆ¶ç°åº¦å›¾plt.figure(figsize=(10, 6) ,dpi=100)plt.plot(histr)plt.grid()plt.show()</code></pre><p><img src="http://dingdm.online/4161.png" alt=""></p><h5 id="æ©è†œçš„åº”ç”¨">æ©è†œçš„åº”ç”¨</h5><p>æ©è†œæ˜¯ç”¨é€‰å®šçš„å›¾åƒï¼Œå›¾å½¢æˆ–ç‰©ä½“ï¼Œå¯¹è¦å¤„ç†çš„å›¾åƒè¿›è¡Œé®æŒ¡ï¼Œæ¥æ§åˆ¶å›¾åƒå¤„ç†çš„åŒºåŸŸã€‚</p><p>åœ¨æ•°å­—å›¾åƒå¤„ç†ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨äºŒç»´çŸ©é˜µæ•°ç»„è¿›è¡Œæ©è†œï¼Œæ©è†œæ˜¯ç”±0å’Œ1ç»„æˆä¸€ä¸ªäºŒè¿›åˆ¶å›¾åƒï¼Œåˆ©ç”¨è¯¥æ©è†œå›¾åƒè¦å¤„ç†çš„å›¾åƒè¿›è¡Œæ©è†œï¼Œå…¶ä¸­1å€¼çš„åŒºåŸŸè¢«å¤„ç†ï¼Œ0å€¼åŒºåŸŸè¢«å±è”½ï¼Œä¸ä¼šå¤„ç†ã€‚</p><p>æ©è†œçš„ä¸»è¦ç”¨é€”æ˜¯ï¼š<br>æå–æ„Ÿå…´è¶£åŒºåŸŸï¼šç”¨é¢„å…ˆåˆ¶ä½œçš„æ„Ÿå…´è¶£åŒºæ©è†œä¸å¾…å¤„ç†å›¾åƒè¿›è¡Œä¸æ“ä½œï¼Œå¾—åˆ°æ„Ÿå…´è¶£åŒºå›¾åƒï¼Œæ„Ÿå…´è¶£åŒºå†…å›¾åƒå€¼ä¿æŒä¸å˜ï¼Œè€ŒåŒºå¤–å›¾åƒå€¼éƒ½ä¸º0ã€‚<br>å±è”½ä½œç”¨ï¼šç”¨æ©è†œå¯¹å›¾åƒä¸ŠæŸäº›åŒºåŸŸä½œå±è”½ï¼Œä½¿å…¶ä¸å‚åŠ å¤„ç†æˆ–ä¸å‚åŠ å¤„ç†å‚æ•°çš„è®¡ç®—ï¼Œæˆ–ä»…å¯¹å±è”½åŒºä½œå¤„ç†æˆ–ç»Ÿè®¡ã€‚<br>ç»“æ„ç‰¹å¾æå–ï¼šç”¨ç›¸ä¼¼æ€§å˜é‡æˆ–å›¾åƒåŒ¹é…æ–¹æ³•æ£€æµ‹å’Œæå–å›¾åƒä¸­ä¸æ©è†œç›¸ä¼¼çš„ç»“æ„ç‰¹å¾ã€‚<br>ç‰¹æ®Šå½¢çŠ¶å›¾åƒåˆ¶ä½œ</p><p>æ©è†œåœ¨é¥æ„Ÿå½±åƒå¤„ç†ä¸­ä½¿ç”¨è¾ƒå¤šï¼Œå½“æå–é“è·¯æˆ–è€…æ²³æµï¼Œæˆ–è€…æˆ¿å±‹æ—¶ï¼Œé€šå¸¸ä¸€ä¸ªæ©è†œçŸ©é˜µæ¥å¯¹å›¾åƒè¿›è¡Œåƒç´ è¿‡æ»¤ï¼Œç„¶åå°†æˆ‘ä»¬éœ€è¦çš„åœ°ç‰©æˆ–è€…æ ‡å¿—çªå‡ºæ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨cv.calcHist()æ¥æŸ¥æ‰¾å®Œæ•´å›¾åƒçš„ç›´æ–¹å›¾ã€‚å¦‚æœè¦æŸ¥æ‰¾å›¾åƒçš„æŸäº›åŒºåŸŸçš„ç›´æ–¹å›¾ï¼Œåªéœ€åœ¨è¦æŸ¥æ‰¾ç›´æ–¹å›¾çš„åŒºåŸŸä¸Šåˆ›å»ºä¸€ä¸ªç™½è‰²çš„æ©è†œå›¾åƒï¼Œå¦åˆ™åˆ›å»ºé»‘è‰²ï¼Œç„¶åå°†å…¶ä½œä¸ºæ©ç maskä¼ é€’å³å¯ã€‚</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvfrom matplotlib import pyplot as plt# ç›´æ¥ä»¥ç°åº¦å›¾çš„æ–¹å¼è¯»å…¥img = cv.imread('/Users/dinggongcheng/Downloads/pythondemo.jpeg', 0)# åˆ›å»ºè’™æ¿mask = np.zeros(img.shape[:2], np.uint8)mask[400:650, 200:500] = 255# æ©è†œmasked_img = cv.bitwise_and(img, img, mask = mask)# ç»Ÿè®¡æ©è†œåå›¾åƒçš„ç°åº¦å›¾mask_histr = cv.calcHist([img], [0], mask, [256], [0, 256])# å›¾åƒæ¼”ç¤ºfig, axes = plt.subplots(nrows=2, ncols=2, figsize=(10, 8))axes[0, 0].imshow(img, cmap=plt.cm.gray)axes[0, 0].set_title("from")axes[0, 1].imshow(mask, cmap=plt.cm.gray)axes[0, 1].set_title("mask")axes[1, 0].imshow(masked_img, cmap=plt.cm.gray)axes[1, 0].set_title("mask_data")axes[1, 1].plot(mask_histr)axes[1, 1].grid()axes[1, 1].set_title("gray")plt.show()</code></pre><p><img src="http://dingdm.online/4162.png" alt=""></p><h5 id="ç›´æ–¹å›¾å‡è¡¡åŒ–">ç›´æ–¹å›¾å‡è¡¡åŒ–</h5><p>å¦‚æœä¸€å¹…å›¾åƒä¸­çš„å¤§å¤šæ•°åƒç´ ç‚¹çš„åƒç´ å€¼éƒ½é›†ä¸­åœ¨æŸä¸€ä¸ªå°çš„ç°åº¦å€¼èŒƒå›´ä¹‹å†…ï¼Œä¸€å¹…å›¾åƒæ•´ä½“å¾ˆäº®ï¼Œé‚£æ‰€æœ‰çš„åƒç´ å€¼çš„å–å€¼ä¸ªæ•°åº”è¯¥éƒ½ä¼šå¾ˆé«˜ã€‚æ‰€ä»¥åº”è¯¥æŠŠå®ƒçš„ç›´æ–¹å›¾åšä¸€ä¸ªæ¨ªå‘æ‹‰ä¼¸ï¼Œå°±å¯ä»¥æ‰©å¤§å›¾åƒåƒç´ å€¼çš„åˆ†å¸ƒèŒƒå›´ï¼Œæé«˜å›¾åƒçš„å¯¹æ¯”åº¦ï¼Œè¿™å°±æ˜¯ç›´æ–¹å›¾å‡è¡¡åŒ–è¦åšçš„äº‹æƒ…ã€‚</p><p>ç›´æ–¹å›¾å‡è¡¡åŒ–æ˜¯æŠŠåŸå§‹å›¾åƒçš„ç°åº¦ç›´æ–¹å›¾ä»æ¯”è¾ƒå¯†é›†çš„æŸä¸ªç°åº¦åŒºé—´å˜æˆåœ¨æ›´å¹¿æ³›ç°åº¦èŒƒå›´å†…çš„åˆ†å¸ƒã€‚ç›´æ–¹å›¾å‡è¡¡åŒ–å°±æ˜¯å¯¹å›¾åƒè¿›è¡Œéçº¿å½¢æ‹‰ä¼¸ï¼Œé‡æ–°åˆ†é…å›¾åƒåƒç´ å€¼ï¼Œä½¿ä¸€å®šç°åº¦èŒƒå›´å†…çš„åƒç´ æ•°é‡å¤§è‡´ç›¸åŒã€‚</p><p>è¿™ç§æ–¹æ³•æé«˜å›¾åƒæ•´ä½“çš„å¯¹æ¯”åº¦ï¼Œç‰¹åˆ«æ˜¯æœ‰ç”¨æ•°æ®çš„åƒç´ å€¼åˆ†å¸ƒæ¯”è¾ƒæ¥è¿‘æ—¶ï¼Œåœ¨xå…‰å›¾åƒä¸­ä½¿ç”¨å¹¿æ³›ï¼Œå¯ä»¥æé«˜éª¨æ¶ç»“æ„çš„æ˜¾ç¤ºï¼Œå¦å¤–åœ¨æ›å…‰è¿‡åº¦æˆ–ä¸è¶³çš„å›¾åƒä¸­å¯ä»¥æ›´å¥½çš„çªå‡ºç»†èŠ‚ã€‚</p><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python">dst = cv.equalizeHist(img)</code></pre><p>imgï¼šç°åº¦å›¾åƒ<br>dstï¼šå‡è¡¡åŒ–åçš„ç»“æœ</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvfrom matplotlib import pyplot as plt# ç›´æ¥ä»¥ç°åº¦å›¾çš„æ–¹å¼è¯»å…¥img = cv.imread('/Users/dinggongcheng/Downloads/pythondemo.jpeg', 0)# å‡è¡¡åŒ–å¤„ç†dst = cv.equalizeHist(img)# ç»“æœæ˜¾ç¤ºfig, axes = plt.subplots(nrows=2, ncols=2, figsize=(10, 8), dpi=100)axes[0, 0].imshow(img, cmap=plt.cm.gray)axes[0, 0].set_title("from")axes[0, 1].imshow(dst, cmap=plt.cm.gray)axes[0, 1].set_title("equalize")plt.show()</code></pre><p><img src="http://dingdm.online/4163.png" alt=""></p><h5 id="è‡ªé€‚åº”çš„ç›´æ–¹å›¾å‡è¡¡åŒ–">è‡ªé€‚åº”çš„ç›´æ–¹å›¾å‡è¡¡åŒ–</h5><p>ä¸Šè¿°çš„ç›´æ–¹å›¾å‡è¡¡ï¼Œæˆ‘ä»¬è€ƒè™‘çš„æ˜¯å›¾åƒçš„å…¨å±€å¯¹æ¯”åº¦ã€‚çš„ç¡®åœ¨è¿›è¡Œå®Œç›´æ–¹å›¾å‡è¡¡åŒ–åï¼Œå›¾ç‰‡èƒŒæ™¯çš„å¯¹æ¯”åº¦è¢«æ”¹å˜äº†ï¼Œä½†åœ¨æŸä¸ªå±€éƒ¨å¤ªæš—ï¼Œä¸¢å¤±äº†å¾ˆå¤šä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œè¿™æ ·åšçš„æ•ˆæœå¹¶ä¸å¥½ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨è‡ªé€‚åº”çš„ç›´æ–¹å›¾å‡è¡¡åŒ–ã€‚æ­¤æ—¶ï¼Œæ•´å¹…å›¾åƒä¼šè¢«åˆ†æˆå¾ˆå¤šå°å—ï¼Œè¿™äº›å°å—è¢«ç§°ä¸ºâ€œtilesâ€(åœ¨OpenCVä¸­tilesçš„å¤§å°é»˜è®¤ä¸º8*8)ã€‚å¦‚æœæœ‰å™ªå£°çš„è¯ï¼Œå™ªå£°ä¼šè¢«æ”¾å¤§ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µçš„å‡ºç°è¦ä½¿ç”¨å¯¹æ¯”åº¦é™åˆ¶ã€‚å¯¹äºæ¯ä¸ªå°å—æ¥è¯´ï¼Œå¦‚æœç›´æ–¹å›¾ä¸­çš„binè¶…è¿‡å¯¹æ¯”åº¦çš„ä¸Šé™çš„è¯ï¼Œå°±æŠŠå…¶ä¸­çš„åƒç´ ç‚¹å‡åŒ€åˆ†æ•£åˆ°å…¶ä»–binsä¸­ï¼Œç„¶ååœ¨è¿›è¡Œç›´æ–¹å›¾å‡è¡¡åŒ–ã€‚</p><p>æœ€åä¸ºäº†å»é™¤æ¯ä¸€ä¸ªå°å—ä¹‹é—´çš„è¾¹ç•Œï¼Œåœ¨ä½¿ç”¨åŒçº¿æ€§å·®å€¼ï¼Œå¯¹æ¯ä¸€å°å—è¿›è¡Œæ‹¼æ¥ã€‚</p><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python">cv.createCLAHE(clipLimit, tileGridSize)</code></pre><p>clipLimitï¼šå¯¹æ¯”åº¦é™åˆ¶ï¼Œé»˜è®¤ä¸º40<br>tileGridsizeï¼šåˆ†å—çš„å¤§å°ï¼Œé»˜è®¤ä¸º8*8</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvfrom matplotlib import pyplot as plt# ç›´æ¥ä»¥ç°åº¦å›¾çš„æ–¹å¼è¯»å…¥img = cv.imread('/Users/dinggongcheng/Downloads/pythondemo.jpeg', 0)# åˆ›å»ºä¸€ä¸ªè‡ªé€‚åº”å‡è¡¡åŒ–çš„å¯¹è±¡ï¼Œå¹¶åº”ç”¨äºå›¾åƒclahe = cv.createCLAHE(clipLimit=2.0, tileGridSize=(8, 8))cl1 = clahe.apply(img)# ç»“æœæ˜¾ç¤ºfig, axes = plt.subplots(nrows=2, ncols=2, figsize=(10, 8), dpi=100)axes[0, 0].imshow(img, cmap=plt.cm.gray)axes[0, 0].set_title("from")axes[0, 1].imshow(cl1, cmap=plt.cm.gray)axes[0, 1].set_title("clahe")plt.show()</code></pre><p><img src="http://dingdm.online/4164.png" alt=""></p><h5 id="è¾¹ç¼˜æ£€æµ‹">è¾¹ç¼˜æ£€æµ‹</h5><p>åŸç†ï¼š</p><p>è¾¹ç¼˜æ£€æµ‹æ˜¯å›¾åƒå¤„ç†å’Œè®¡ç®—æœºè§†è§‰ä¸­çš„åŸºæœ¬é—®é¢˜ï¼Œè¾¹ç¼˜æ£€æµ‹çš„ç›®çš„æ˜¯æ ‡è¯†æ•°å­—å›¾åƒä¸­äº®åº¦å˜åŒ–æ˜æ˜¾çš„ç‚¹ã€‚å›¾åƒå±æ€§ä¸­çš„æ˜¾è‘—å˜åŒ–é€šå¸¸åæ˜ äº†å±æ€§çš„é‡è¦äº‹ä»¶å’Œå˜åŒ–ã€‚</p><p>å›¾åƒè¾¹ç¼˜æ£€æµ‹å¤§å¹…åº¦çš„å‡å°‘äº†æ•°æ®é‡ï¼Œå¹¶ä¸”å‰”é™¤äº†å¯ä»¥è®¤ä¸ºä¸ç›¸å…³çš„ä¿¡æ¯ï¼Œä¿ç•™äº†å›¾åƒé‡è¦çš„ç»“æ„å±æ€§ã€‚æœ‰è®¸å¤šæ–¹æ³•ç”¨äºè¾¹ç¼˜æ£€æµ‹ï¼Œå®ƒä»¬çš„ç»å¤§éƒ¨åˆ†å¯ä»¥åˆ’åˆ†ä¸ºä¸¤ç±»ï¼šåŸºäºæœç´¢å’ŒåŸºäºé›¶ç©¿è¶Šã€‚</p><p>åŸºäºæœç´¢ï¼šé€šè¿‡å¯»æ‰¾å›¾åƒä¸€é˜¶å¯¼æ•°ä¸­çš„æœ€å¤§å€¼æ¥æ£€æµ‹è¾¹ç•Œï¼Œç„¶ååˆ©ç”¨è®¡ç®—ç»“æœä¼°è®¡è¾¹ç¼˜çš„å±€éƒ¨æ–¹å‘ï¼Œé€šå¸¸é‡‡ç”¨æ¢¯åº¦çš„æ–¹å‘ï¼Œå¹¶åˆ©ç”¨æ­¤æ–¹å‘æ‰¾åˆ°å±€éƒ¨æœ€å¤§æ¢¯åº¦æ¨¡çš„æœ€å¤§å€¼ï¼Œä»£è¡¨ç®—æ³•æ˜¯Sobelç®—å­å’ŒScharrç®—å­ã€‚<br><img src="http://dingdm.online/sousuo.PNG" alt=""></p><p>åŸºäºé›¶ç©¿è¶Šï¼šé€šè¿‡å¯»æ‰¾å›¾åƒäºŒé˜¶å¯¼æ•°é›¶ç©¿è¶Šæ¥å¯»æ‰¾è¾¹ç•Œï¼Œä»£è¡¨ç®—æ³•æ˜¯Laplacianç®—å­<br><img src="http://dingdm.online/lapu.PNG" alt=""></p><h5 id="Sobelæ£€æµ‹ç®—å­">Sobelæ£€æµ‹ç®—å­</h5><p>Sobelæ£€æµ‹ç®—æ³•æ¯”è¾ƒç®€å•ï¼Œå®é™…åº”ç”¨ä¸­æ•ˆç‡æ¯”cannyè¾¹ç¼˜æ£€æµ‹æ•ˆç‡è¦é«˜ï¼Œä½†æ˜¯è¾¹ç¼˜ä¸å¦‚Cannyæ£€æµ‹çš„å‡†ç¡®ï¼Œä½†æ˜¯å¾ˆå¤šå®é™…åº”ç”¨çš„åœºåˆï¼Œsobelè¾¹ç¼˜å´æ˜¯é¦–é€‰ï¼ŒSobelç®—å­æ˜¯é«˜æ–¯å¹³æ»‘ä¸å¾®åˆ†æ“ä½œçš„ç»“åˆä½“ï¼Œæ‰€ä»¥å…¶æŠ—å™ªå£°èƒ½åŠ›å¾ˆå¼ºï¼Œç”¨é€”è¾ƒå¤šã€‚å°¤å…¶æ˜¯æ•ˆç‡è¦æ±‚è¾ƒé«˜ï¼Œè€Œå¯¹çº¹ç†ä¸å¤ªå…³å¿ƒçš„æ—¶å€™ã€‚</p><p><img src="http://dingdm.online/sobel.PNG" alt=""></p><p>æ³¨æ„ï¼šå½“å†…æ ¸å¤§å°ä¸º3æ—¶ï¼Œä»¥ä¸ŠSobelå†…æ ¸å¯èƒ½äº§ç”Ÿæ¯”è¾ƒæ˜æ˜¾çš„è¯¯å·®ï¼Œä¸ºè§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨Scharrå‡½æ•°ï¼Œä½†è¯¥å‡½æ•°ä»…ä½œç”¨äºå¤§å°ä¸º3çš„å†…æ ¸ã€‚è¯¥å‡½æ•°çš„è¿ç®—ä¸Sobelå‡½æ•°ä¸€æ ·å¿«ï¼Œä½†ç»“æœå´æ›´åŠ ç²¾ç¡®ã€‚</p><p><img src="http://dingdm.online/schar.PNG" alt=""></p><p>Sobel APIï¼š</p><pre class=" language-language-python"><code class="language-language-python">Sobel_x_or_y = cv2.Sobel(src,ddepth,dx,dy,dst,ksize,scale,delta,borderType)</code></pre><p>srcï¼šä¼ å…¥çš„å›¾åƒ<br>ddepthï¼šå›¾åƒçš„æ·±åº¦<br>dxå’Œdyï¼šæŒ‡æ±‚å¯¼çš„é˜¶æ•°ï¼Œ0è¡¨ç¤ºè¿™ä¸ªæ–¹å‘ä¸Šæ²¡æœ‰æ±‚å¯¼ï¼Œå–å€¼ä¸º0ï¼Œ1ã€‚<br>ksizeï¼šæ˜¯Sobelç®—å­çš„å¤§å°ï¼Œå³å·ç§¯æ ¸çš„å¤§å°ï¼Œå¿…é¡»ä¸ºå¥‡æ•°1ã€3ã€5ã€7ï¼Œé»˜è®¤ä¸º3ã€‚æ³¨æ„ï¼šå¦‚æœksizeä¸º-1ï¼Œå°±æ¼”å˜ä¸º3*3çš„Scharrç®—å­ã€‚<br>scaleï¼šç¼©æ”¾å¯¼æ•°çš„æ¯”ä¾‹å¸¸æ•°ï¼Œé»˜è®¤æƒ…å†µä¸ºæ²¡æœ‰ä¼¸ç¼©ç³»æ•°ã€‚<br>borderTypeï¼šå›¾åƒè¾¹ç•Œçš„æ¨¡å¼ï¼Œé»˜è®¤å€¼ä¸ºcv2.BORDER_DEFAULTã€‚</p><p>Sobelå‡½æ•°æ±‚å®Œå¯¼æ•°åä¼šæœ‰è´Ÿå€¼ï¼Œè¿˜ä¼šæœ‰å¤§äº255çš„å€¼ã€‚è€ŒåŸå›¾åƒæ˜¯uint8ï¼Œå³8ä½æ— ç¬¦å·æ•°ï¼Œæ‰€ä»¥Sobelå»ºç«‹çš„å›¾åƒä½æ•°ä¸å¤Ÿï¼Œä¼šæœ‰æˆªæ–­ã€‚å› æ­¤è¦ä½¿ç”¨16ä½æœ‰ç¬¦å·çš„æ•°æ®ç±»å‹ï¼Œå³cv2.CV_16Sã€‚å¤„ç†å®Œå›¾åƒåï¼Œåœ¨ä½¿ç”¨cv2.convertScaleAbs()å‡½æ•°å°†å…¶è½¬å›åŸæ¥çš„uint8æ ¼å¼ï¼Œå¦åˆ™å›¾åƒæ— æ³•æ˜¾ç¤ºã€‚</p><p>Sobelç®—å­æ˜¯åœ¨ä¸¤ä¸ªæ–¹å‘è®¡ç®—çš„ï¼Œæœ€åè¿˜éœ€è¦ç”¨cv2.addWieghted()å‡½æ•°å°†å…¶ç»„åˆèµ·æ¥ã€‚</p><pre class=" language-language-python"><code class="language-language-python">Scale_abs = cv2.convertScaleAbs(x)result = cv2.addWeighted(src1, alpha, src2, beta)</code></pre><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvimport  numpy as npfrom matplotlib import pyplot as plt# è¯»å–å›¾åƒimg = cv.imread('/Users/dinggongcheng/Downloads/pythondemo.jpeg', 0)# è®¡ç®—Sobelå·ç§¯ç»“æœx = cv.Sobel(img, cv.CV_16S, 1, 0)y = cv.Sobel(img, cv.CV_16S, 0, 1)# å°†æ•°æ®è¿›è¡Œè½¬æ¢Scale_absX = cv.convertScaleAbs(x)Scale_absY = cv.convertScaleAbs(y)# ç»“æœåˆæˆresult = cv.addWeighted(Scale_absX, 0.5, Scale_absY, 0.5, 0)# å›¾åƒæ˜¾ç¤ºplt.figure(figsize=(10, 8), dpi=100)plt.subplot(121), plt.imshow(img, cmap=plt.cm.gray), plt.title("from")plt.xticks([]), plt.yticks([])plt.subplot(122), plt.imshow(result, cmap=plt.cm.gray), plt.title("result")plt.xticks([]), plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/4165.png" alt=""></p><h5 id="Laplacianç®—å­">Laplacianç®—å­</h5><p><img src="http://dingdm.online/lp.PNG" alt=""></p><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python">laplacian = cv2.Laplacian(src,ddepth,dst,ksize,scale,delta,borderType)</code></pre><p>srcï¼šéœ€è¦å¤„ç†çš„å›¾åƒã€‚<br>ddepthï¼šå›¾åƒçš„æ·±åº¦ï¼Œ-1è¡¨ç¤ºé‡‡ç”¨çš„æ˜¯åŸå›¾åƒç›¸åŒçš„æ·±åº¦ï¼Œç›®æ ‡å›¾åƒçš„æ·±åº¦å¿…é¡»å¤§äºç­‰äºåŸå›¾åƒçš„æ·±åº¦ã€‚<br>ksizeï¼šç®—å­çš„å¤§å°ï¼Œå³å·ç§¯æ ¸çš„å¤§å°ï¼Œå¿…é¡»ä¸º1ã€3ã€5ã€7ã€‚</p><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvimport  numpy as npfrom matplotlib import pyplot as plt# è¯»å–å›¾åƒimg = cv.imread('/Users/dinggongcheng/Downloads/pythondemo.jpeg', 0)# laplacianè½¬æ¢result = cv.Laplacian(img, cv.CV_16S)Scale_abs = cv.convertScaleAbs(result)# å›¾åƒæ˜¾ç¤ºplt.figure(figsize=(10, 8), dpi=100)plt.subplot(121), plt.imshow(img, cmap=plt.cm.gray), plt.title("from")plt.xticks([]), plt.yticks([])plt.subplot(122), plt.imshow(Scale_abs, cmap=plt.cm.gray), plt.title("laplacian")plt.xticks([]), plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/4166.png" alt=""></p><h5 id="Cannyè¾¹ç¼˜æ£€æµ‹">Cannyè¾¹ç¼˜æ£€æµ‹</h5><p>cannyè¾¹ç¼˜æ£€æµ‹ç®—æ³•æ˜¯ä¸€ç§éå¸¸æµè¡Œçš„è¾¹ç¼˜æ£€æµ‹ç®—æ³•ï¼Œè¢«è®¤ä¸ºæ˜¯æœ€ä¼˜çš„è¾¹ç¼˜æ£€æµ‹ç®—æ³•ã€‚</p><p>åŸç†ï¼š</p><p>ç¬¬ä¸€æ­¥ï¼šå™ªå£°å»é™¤<br>ç”±äºè¾¹ç¼˜æ£€æµ‹å¾ˆå®¹æ˜“å—åˆ°å™ªå£°çš„å½±å“ï¼Œæ‰€ä»¥é¦–å…ˆç”¨5*5çš„é«˜æ–¯æ»¤æ³¢å™¨å»é™¤å™ªå£°ã€‚<br>ç¬¬äºŒæ­¥ï¼šè®¡ç®—å›¾åƒæ¢¯åº¦<br>å¯¹å¹³æ»‘åçš„å›¾åƒä½¿ç”¨Sobelç®—å­è®¡ç®—æ°´å¹³æ–¹å‘å’Œç«–ç›´æ–¹å‘çš„ä¸€é˜¶å¯¼æ•°ï¼Œæ ¹æ®å¾—åˆ°çš„è¿™ä¸¤å¹…æ¢¯åº¦å›¾æ‰¾åˆ°è¾¹ç•Œçš„æ¢¯åº¦å’Œæ–¹å‘ã€‚å¦‚æœæŸä¸ªåƒç´ ç‚¹æ˜¯è¾¹ç¼˜ï¼Œåˆ™å…¶æ¢¯åº¦æ–¹å‘æ€»æ˜¯ä¸è¾¹ç¼˜å‚ç›´ã€‚æ¢¯åº¦æ–¹å‘è¢«å½’ä¸ºå››ç±»ï¼šå‚ç›´ã€æ°´å¹³ã€å’Œä¸¤ä¸ªå¯¹è§’çº¿æ–¹å‘ã€‚<br>ç¬¬ä¸‰æ­¥ï¼šéæå¤§å€¼æŠ‘åˆ¶<br>åœ¨è·å¾—æ¢¯åº¦çš„æ–¹å‘å’Œå¤§å°ä¹‹åï¼Œå¯¹æ•´å¹…å›¾åƒè¿›è¡Œæ‰«æï¼Œå»é™¤éè¾¹ç•Œä¸Šçš„ç‚¹ã€‚å¯¹æ¯ä¸€ä¸ªåƒç´ è¿›è¡Œæ£€æŸ¥ï¼Œçœ‹è¿™ä¸ªç‚¹çš„æ¢¯åº¦æ˜¯ä¸æ˜¯å‘¨å›´å…·æœ‰ç›¸åŒæ¢¯åº¦æ–¹å‘çš„ç‚¹ä¸­æœ€å¤§çš„ã€‚<br><img src="http://dingdm.online/cann.PNG" alt=""></p><p>Aç‚¹ä½äºå›¾åƒçš„è¾¹ç¼˜ï¼Œåœ¨å…¶æ¢¯åº¦å˜åŒ–æ–¹å‘ï¼Œé€‰æ‹©åƒç´ ç‚¹Bå’ŒCï¼Œç”¨æ¥æ£€éªŒAç‚¹çš„æ¢¯åº¦æ˜¯å¦ä¸ºæå¤§å€¼ï¼Œè‹¥ä¸ºæå¤§å€¼ï¼Œåˆ™è¿›è¡Œä¿ç•™ï¼Œå¦åˆ™Aç‚¹è¢«æŠ‘åˆ¶ï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯å…·æœ‰ç»†è¾¹çš„äºŒè¿›åˆ¶å›¾åƒã€‚<br>ç¬¬å››æ­¥ï¼šæ»åé˜ˆå€¼<br><img src="http://dingdm.online/yu.PNG" alt=""></p><p>ç°åœ¨è¦ç¡®å®šçœŸæ­£çš„è¾¹ç•Œã€‚æˆ‘ä»¬è®¾ç½®ä¸¤ä¸ªé˜ˆå€¼ï¼šminValå’ŒmaxValã€‚å½“å›¾åƒçš„ç°åº¦æ¢¯åº¦é«˜äºmaxValæ—¶è¢«è®¤ä¸ºæ˜¯çœŸçš„è¾¹ç•Œï¼Œä½äºminValçš„è¾¹ç•Œä¼šè¢«æŠ›å¼ƒã€‚å¦‚æœä»‹äºä¸¤è€…ä¹‹é—´çš„è¯ï¼Œå°±è¦çœ‹è¿™ä¸ªç‚¹æ˜¯å¦ä¸æŸä¸ªè¢«ç¡®å®šä¸ºçœŸæ­£çš„è¾¹ç•Œç‚¹ç›¸è¿ï¼Œå¦‚æœæ˜¯å°±è®¤ä¸ºå®ƒä¹Ÿæ˜¯è¾¹ç•Œç‚¹ï¼Œå¦‚æœä¸æ˜¯å°±æŠ›å¼ƒã€‚</p><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python">canny = cv2.Canny(image,threshold1,threshold2)</code></pre><p>imageï¼šç°åº¦å›¾ã€‚<br>threshold1ï¼šminValï¼Œè¾ƒå°çš„é˜ˆå€¼å°†é—´æ–­çš„è¾¹ç¼˜è¿æ¥èµ·æ¥<br>threshold2ï¼šmaxValï¼Œè¾ƒå¤§çš„é˜ˆå€¼å°†æ£€æµ‹å›¾åƒä¸­æ˜æ˜¾çš„è¾¹ç¼˜</p><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvimport  numpy as npfrom matplotlib import pyplot as plt# è¯»å–å›¾åƒimg = cv.imread('/Users/dinggongcheng/Downloads/pythondemo.jpeg', 0)# cannyè¾¹ç¼˜æ£€æµ‹lowThreshold = 0max_lowThreshold = 100canny = cv.Canny(img, lowThreshold, max_lowThreshold)# å›¾åƒæ˜¾ç¤ºplt.figure(figsize=(10, 8), dpi=100)plt.subplot(121), plt.imshow(img, cmap=plt.cm.gray), plt.title("from")plt.xticks([]), plt.yticks([])plt.subplot(122), plt.imshow(canny, cmap=plt.cm.gray), plt.title("canny")plt.xticks([]), plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/4167.png" alt=""></p><h5 id="æ¨¡æ¿åŒ¹é…å’Œéœå¤«å˜æ¢">æ¨¡æ¿åŒ¹é…å’Œéœå¤«å˜æ¢</h5><p>æ¨¡æ¿åŒ¹é…</p><p>åŸç†ï¼š</p><p>æ‰€è°“æ¨¡æ¿åŒ¹é…ï¼Œå°±æ˜¯ç»™å®šçš„å›¾ç‰‡ä¸­æŸ¥æ‰¾å’Œæ¨¡æ¿æœ€ç›¸ä¼¼çš„åŒºåŸŸï¼Œè¯¥ç®—æ³•çš„è¾“å…¥åŒ…æ‹¬æ¨¡æ¿å’Œå›¾ç‰‡ï¼Œæ•´ä¸ªä»»åŠ¡çš„æ€è·¯å°±æ˜¯æŒ‰ç…§æ»‘çª—çš„æ€è·¯ä¸æ–­çš„ç§»åŠ¨æ¨¡æ¿å›¾ç‰‡ï¼Œè®¡ç®—å…¶ä¸å›¾åƒä¸­å¯¹åº”åŒºåŸŸçš„åŒ¹é…åº¦ï¼Œæœ€ç»ˆå°†åŒ¹é…åº¦æœ€å¥½çš„åŒºåŸŸé€‰æ‹©ä¸ºæœ€ç»ˆçš„ç»“æœã€‚</p><p>å®ç°æµç¨‹ï¼š<br>å‡†å¤‡ä¸¤å¹…å›¾åƒï¼š<br>1.åŸå›¾åƒï¼šåœ¨è¿™å¹…å›¾ä¸­ï¼Œæ‰¾åˆ°ä¸æ¨¡æ¿ç›¸åŒ¹é…çš„åŒºåŸŸ<br>2.æ¨¡æ¿ï¼šä¸åŸå›¾åƒè¿›è¡Œå¯¹æ¯”çš„å›¾åƒå—</p><p>æ»‘åŠ¨æ¨¡æ¿å›¾åƒå’ŒåŸå›¾åƒè¿›è¡Œæ¯”å¯¹ï¼š<br>å°†æ¨¡æ¿å—æ¯æ¬¡ç§»åŠ¨ä¸€ä¸ªåƒç´ (ä»å·¦å¾€å³ï¼Œä»ä¸Šå¾€ä¸‹)ï¼Œåœ¨æ¯ä¸€ä¸ªä½ç½®ï¼Œéƒ½è®¡ç®—ä¸æ¨¡æ¿å›¾åƒçš„ç›¸ä¼¼ç¨‹åº¦ã€‚<br>å¯¹äºæ¯ä¸€ä¸ªä½ç½®å°†è®¡ç®—çš„ç›¸ä¼¼ç»“æœä¿å­˜åœ¨ç»“æœçŸ©é˜µRä¸­ï¼Œå¦‚æœè¾“å…¥å›¾åƒçš„å¤§å°ä¸ºW*Hï¼Œè€Œæ¨¡æ¿å›¾åƒçš„å¤§å°ä¸ºw*hï¼Œåˆ™è¾“å‡ºçŸ©é˜µRçš„å¤§å°ä¸º(W-w+ 1ï¼ŒH-h+1)å°†Ræ˜¾ç¤ºä¸ºå›¾åƒã€‚<br>è·å–ä¸Šè¿°å›¾åƒåï¼ŒæŸ¥æ‰¾æœ€å¤§å€¼æ‰€åœ¨çš„ä½ç½®ï¼Œé‚£ä¹ˆè¯¥ä½ç½®å¯¹åº”çš„åŒºåŸŸå°±è¢«è®¤å®šæ˜¯æœ€åŒ¹é…çš„ã€‚å¯¹åº”çš„åŒºåŸŸå°±æ˜¯ä»¥è¯¥ç‚¹ä¸ºé¡¶ç‚¹ï¼Œé•¿å®½å’Œæ¨¡æ¿å›¾åƒä¸€æ ·å¤§å°çš„çŸ©é˜µã€‚</p><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python">res = cv2.matchTemplate(img,template,method)</code></pre><p>imgï¼šè¦è¿›è¡Œæ¨¡æ¿åŒ¹é…çš„å¯¹è±¡<br>templateï¼šæ¨¡æ¿<br>methodï¼šå®ç°æ¨¡æ¿åŒ¹é…çš„ç®—æ³•ï¼Œä¸»è¦æœ‰ï¼š<br>1.å¹³æ–¹å·®åŒ¹é…(CV_TM_SQDIFF)ï¼šåˆ©ç”¨æ¨¡æ¿å’Œå›¾åƒä¹‹é—´çš„å¹³æ–¹å·®è¿›è¡ŒåŒ¹é…ï¼Œæœ€å¥½çš„åŒ¹é…æ˜¯0ï¼ŒåŒ¹é…è¶Šå·®ï¼ŒåŒ¹é…çš„å€¼è¶Šå¤§ã€‚<br>2.ç›¸å…³åŒ¹é…(CV_TM_CCORR)ï¼šåˆ©ç”¨æ¨¡æ¿ä¸å›¾åƒé—´çš„ä¹˜æ³•è¿›è¡ŒåŒ¹é…ï¼Œæ•°å€¼è¶Šå¤§è¡¨ç¤ºåŒ¹é…ç¨‹åº¦è¶Šé«˜ï¼Œè¶Šå°è¡¨ç¤ºåŒ¹é…æ•ˆæœè¶Šå·®ã€‚<br>3.åˆ©ç”¨ç›¸å…³ç³»æ•°åŒ¹é…(CV_TM_CCOEFF)ï¼šåˆ©ç”¨æ¨¡æ¿ä¸å›¾åƒé—´çš„ç›¸å…³ç³»æ•°åŒ¹é…ï¼Œ1è¡¨ç¤ºå®Œç¾çš„åŒ¹é…ï¼Œ-1è¡¨ç¤ºæœ€å·®çš„åŒ¹é…ã€‚</p><p>å®ŒæˆåŒ¹é…åï¼Œä½¿ç”¨cv.minMaxLoc()æ–¹æ³•æŸ¥æ‰¾æœ€å¤§å€¼æ‰€åœ¨çš„ä½ç½®å³å¯ã€‚å¦‚æœä½¿ç”¨å¹³æ–¹å·®ä½œä¸ºæ¯”è¾ƒæ–¹æ³•ï¼Œåˆ™æœ€å°å€¼ä½ç½®æ˜¯æœ€ä½³åŒ¹é…ä½ç½®ã€‚</p><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvimport  numpy as npfrom matplotlib import pyplot as plt# å›¾åƒå’Œæ¨¡æ¿è¯»å–img = cv.imread('/Users/dinggongcheng/Downloads/pythondemo.jpeg')template = cv.imread('/Users/dinggongcheng/Downloads/template.PNG')h, w, l = template.shape# æ¨¡æ¿åŒ¹é…res = cv.matchTemplate(img, template, cv.TM_CCOEFF)# è¿”å›å›¾åƒä¸­æœ€åŒ¹é…çš„ä½ç½®ï¼Œç¡®å®šå·¦ä¸Šè§’çš„åæ ‡ï¼Œå¹¶å°†åŒ¹é…ä½ç½®ç»˜åˆ¶åœ¨å›¾åƒä¸Šmin_val, max_val, min_loc, max_loc = cv.minMaxLoc(res)# ä½¿ç”¨å¹³æ–¹å·®æ—¶æœ€å°å€¼ä¸ºæœ€ä½³åŒ¹é…ä½ç½®top_left = max_locbottom_right = (top_left[0] + w, top_left[1] + h)cv.rectangle(img, top_left, bottom_right, (0, 255, 0), 2)# å›¾åƒæ˜¾ç¤ºplt.imshow(img[:, :, ::-1])plt.title("result"), plt.xticks([]), plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/4168.png" alt=""></p><p>æ‰©å±•ï¼šæ¨¡æ¿åŒ¹é…ä¸é€‚ç”¨å°ºåº¦å˜æ¢ï¼Œè§†è§’å˜å¹»åçš„å›¾åƒï¼Œè¿™æ—¶æˆ‘ä»¬å°±è¦ä½¿ç”¨å…³é”®ç‚¹åŒ¹é…ç®—æ³•ï¼Œæ¯”è¾ƒç»å…¸çš„å…³é”®ç‚¹æ£€æµ‹ç®—æ³•åŒ…æ‹¬SIFTå’ŒSURFç­‰ï¼Œä¸»è¦çš„æ€è·¯æ˜¯é¦–å…ˆé€šè¿‡å…³é”®ç‚¹æ£€æµ‹ç®—æ³•è·å–æ¨¡æ¿å’Œæµ‹è¯•å›¾ç‰‡ä¸­çš„å…³é”®ç‚¹ï¼›ç„¶åä½¿ç”¨å…³é”®ç‚¹åŒ¹é…ç®—æ³•å¤„ç†å³å¯ï¼Œè¿™äº›å…³é”®ç‚¹å¯ä»¥å¾ˆå¥½çš„å¤„ç†å°ºåº¦å˜åŒ–ã€è§†è§’å˜æ¢ã€æ—‹è½¬å˜æ¢ã€å…‰ç…§å˜æ¢ç­‰ï¼Œå…·æœ‰å¾ˆå¥½çš„ä¸å˜æ€§ã€‚</p><h5 id="éœå¤«å˜æ¢">éœå¤«å˜æ¢</h5><p>åŸç†ï¼š</p><p><img src="http://dingdm.online/hu.PNG" alt=""></p><p>å˜æ¢åçš„ç©ºé—´æˆ‘ä»¬å«åšéœå¤«ç©ºé—´ã€‚å³ï¼šç¬›å¡å°”åæ ‡ç³»ä¸­çš„ä¸€æ¡ç›´çº¿ï¼Œå¯¹åº”äºéœå¤«ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹ã€‚åè¿‡æ¥ï¼ŒåŒæ ·æˆç«‹ï¼Œéœå¤«ç©ºé—´ä¸­çš„ä¸€æ¡çº¿ï¼Œå¯¹åº”ç¬›å¡å°”åæ ‡ä¸­çš„ä¸€ä¸ªç‚¹ã€‚</p><p>å¦‚æœåœ¨ç¬›å¡å°”åæ ‡ç³»çš„ç‚¹å…±çº¿ï¼Œé‚£ä¹ˆè¿™äº›ç‚¹åœ¨éœå¤«ç©ºé—´ä¸­å¯¹åº”ç›´çº¿äº¤äºä¸€ç‚¹ã€‚</p><p>å¦‚æœä¸æ­¢å­˜åœ¨ä¸€æ¡ç›´çº¿æ—¶ï¼Œæˆ‘ä»¬é€‰æ‹©å°½å¯èƒ½å¤šçš„ç›´çº¿æ±‡æˆçš„ç‚¹ã€‚å½“ç‚¹çš„æ¨ªåæ ‡ç›¸åŒæ—¶ï¼Œå°†ç¬›å¡å°”åæ ‡ç³»è½¬æ¢ä¸ºæåæ ‡ï¼Œåœ¨æåæ ‡ä¸‹æ˜¯ä¸€æ ·çš„ï¼Œæåæ ‡ä¸­çš„ç‚¹å¯¹åº”äºéœå¤«ç©ºé—´çš„çº¿ï¼Œè¿™æ—¶çš„éœå¤«ç©ºé—´ä¸å†æ˜¯å‚æ•°(k,q)çš„ç©ºé—´ï¼Œè€Œæ˜¯æåæ ‡çš„ç©ºé—´ï¼Œåˆ†åˆ«ä¸ºåŸç‚¹åˆ°ç›´çº¿çš„å‚ç›´è·ç¦»å’Œç›´çº¿çš„å‚çº¿ä¸æ¨ªè½´é¡ºæ—¶é’ˆæ–¹å‘çš„å¤¹è§’ï¼Œå‚ç›´çº¿çš„è§’åº¦ä¸º0åº¦ï¼Œæ°´å¹³çº¿çš„è§’åº¦æ˜¯180åº¦ã€‚</p><p><img src="http://dingdm.online/ji.PNG" alt=""></p><p>æˆ‘ä»¬åªè¦æ±‚å¾—éœå¤«ç©ºé—´ä¸­çš„äº¤ç‚¹çš„ä½ç½®ï¼Œå³å¯å¾—åˆ°åŸåæ ‡ç³»ä¸‹çš„ç›´çº¿ã€‚</p><p>å®ç°æµç¨‹ï¼š</p><p>å‡è®¾æœ‰ä¸€ä¸ªå¤§å°ä¸º100*100çš„å›¾ç‰‡ï¼Œä½¿ç”¨éœå¤«å˜æ¢æ£€æµ‹å›¾ä¸­çš„ç›´çº¿ï¼Œåˆ™æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>ç›´çº¿éƒ½å¯ä»¥ä½¿ç”¨æåæ ‡ç³»è¡¨ç¤ºï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª2Dæ•°ç»„ï¼Œæˆ‘ä»¬å«åšç´¯åŠ å™¨ï¼Œåˆå§‹åŒ–æ‰€æœ‰å€¼ä¸º0ï¼Œè¡Œè¡¨ç¤ºÏï¼Œåˆ—è¡¨ç¤ºÎ¸ã€‚è¯¥æ•°ç»„çš„å¤§å°å†³å®šäº†ç»“æœçš„å‡†ç¡®æ€§ï¼Œè‹¥å¸Œæœ›è§’åº¦çš„ç²¾åº¦ä¸º1åº¦ï¼Œé‚£å°±éœ€è¦180åˆ—ã€‚å¯¹äºÏï¼Œæœ€å¤§å€¼ä¸ºå›¾ç‰‡å¯¹è§’çº¿çš„è·ç¦»ï¼Œå¦‚æœå¸Œæœ›ç²¾åº¦è¾¾åˆ°åƒç´ çº§åˆ«ï¼Œè¡Œæ•°åº”è¯¥ä¸å›¾åƒçš„å¯¹è§’çº¿çš„è·ç¦»ç›¸ç­‰ã€‚<br>å–ç›´çº¿ä¸Šçš„ç¬¬ä¸€ä¸ªç‚¹(x,y)ï¼Œå°†å…¶å¸¦å…¥ç›´çº¿åœ¨æåæ ‡ä¸­çš„å…¬å¼ï¼Œç„¶åéå†Î¸çš„å–å€¼ï¼š0ã€1ã€2ã€â€¦ã€180ï¼Œåˆ†åˆ«æ±‚å‡ºå¯¹åº”çš„Ïå€¼ï¼Œå¦‚æœè¿™ä¸ªæ•°å€¼åœ¨ä½ ä¸Šè¿°ç´¯åŠ å™¨ä¸­å­˜åœ¨ç›¸åº”çš„ä½ç½®ï¼Œåˆ™åœ¨è¯¥ä½ç½®ä¸ŠåŠ 1ã€‚<br>å–ç›´çº¿ä¸Šçš„ç¬¬äºŒä¸ªç‚¹ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œæ›´æ–°ç´¯åŠ å™¨ä¸­çš„å€¼ã€‚å¯¹å›¾åƒä¸­çš„ç›´çº¿ä¸Šçš„æ¯ä¸ªç‚¹æ‰§è¡Œä»¥ä¸Šæ­¥éª¤ï¼Œæ¯æ¬¡æ›´æ–°ç´¯åŠ å™¨ä¸­çš„å€¼ã€‚<br>æœç´¢ç´¯åŠ å™¨ä¸­çš„æœ€å¤§å€¼ï¼Œå¹¶æ‰¾åˆ°å…¶å¯¹åº”çš„(Ï,Î¸)ï¼Œå°±å¯å°†å›¾åƒä¸­çš„ç›´çº¿è¡¨ç¤ºå‡ºæ¥ã€‚</p><h5 id="éœå¤«çº¿æ£€æµ‹">éœå¤«çº¿æ£€æµ‹</h5><pre class=" language-language-python"><code class="language-language-python">cv.Houghlines(img,rho,theta,threshold)</code></pre><p>imgï¼šæ£€æµ‹çš„å›¾åƒï¼Œè¦æ±‚æ˜¯äºŒå€¼åŒ–çš„å›¾åƒï¼Œæ‰€ä»¥åœ¨è°ƒç”¨éœå¤«å˜æ¢ä¹‹å‰é¦–å…ˆè¦è¿›è¡ŒäºŒå€¼åŒ–ï¼Œæˆ–è€…è¿›è¡Œcannyè¾¹ç¼˜æ£€æµ‹ã€‚<br>rhoï¼Œthetaï¼šÏå’ŒÎ¸çš„ç²¾ç¡®åº¦ã€‚<br>thresholdï¼šé˜ˆå€¼ï¼Œåªæœ‰ç´¯åŠ å™¨ä¸­çš„å€¼é«˜äºè¯¥é˜ˆå€¼æ—¶æ‰è¢«è®¤å®šæ˜¯ç›´çº¿ã€‚</p><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvimport  numpy as npfrom matplotlib import pyplot as plt# åŠ è½½å›¾ç‰‡ï¼Œè½¬ä¸ºäºŒå€¼å›¾img = cv.imread('/Users/dinggongcheng/Downloads/lineandcircle.PNG')gray = cv.cvtColor(img, cv.COLOR_BGR2GRAY)edges = cv.Canny(gray, 50, 150)# éœå¤«æ›¼ç›´çº¿å˜æ¢lines = cv.HoughLines(edges, 0.8, np.pi / 180, 150)# å°†æ£€æµ‹çš„çº¿ç»˜åˆ¶åœ¨å›¾åƒä¸Šfor line in lines:    rho, theta = line[0]    a = np.cos(theta)    b = np.sin(theta)    x0 = a * rho    y0 = b * rho    x1 = int(x0 + 1000 * (-b))    y1 = int(y0 + 1000 * a)    x2 = int(x0 - 1000 * (-b))    y2 = int(y0 - 1000 * a)    cv.line(img, (x1, y1), (x2,y2), (0, 255, 0))# å›¾åƒæ˜¾ç¤ºplt.figure(figsize=(10, 8), dpi=100)plt.imshow(img[:, :, ::-1])plt.title("houghlines"), plt.xticks([]), plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/4169.png" alt=""></p><h5 id="éœå¤«åœ†æ£€æµ‹">éœå¤«åœ†æ£€æµ‹</h5><p>åŸç†ï¼š</p><p>åœ†çš„è¡¨ç¤ºæ˜¯(x-a)Â²+(y-b)Â²=rÂ²ï¼Œå…¶ä¸­aå’Œbè¡¨ç¤ºåœ†å¿ƒåæ ‡ï¼Œrè¡¨ç¤ºåœ†åŠå¾„ï¼Œå› æ­¤æ ‡å‡†çš„éœå¤«åœ†æ£€æµ‹å°±æ˜¯åœ¨è¿™ä¸‰ä¸ªå‚æ•°ç»„æˆçš„ä¸‰ä½ç©ºé—´ç´¯åŠ å™¨ä¸Šè¿›è¡Œåœ†å½¢æ£€æµ‹ï¼Œæ­¤æ—¶æ•ˆç‡å°±ä¼šå¾ˆä½ï¼Œæ‰€ä»¥OpenCVä¸­ä½¿ç”¨éœå¤«æ¢¯åº¦æ³•è¿›è¡Œåœ†å½¢çš„æ£€æµ‹ã€‚</p><p>éœå¤«æ¢¯åº¦æ³•å°†éœå¤«åœ†æ£€æµ‹èŒƒå›´åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œç¬¬ä¸€é˜¶æ®µæ£€æµ‹åœ†å¿ƒï¼Œç¬¬äºŒé˜¶æ®µåˆ©ç”¨åœ†å¿ƒæ¨å¯¼å‡ºåœ†åŠå¾„ã€‚<br>åœ†å¿ƒæ£€æµ‹çš„åŸç†ï¼šåœ†å¿ƒæ˜¯åœ†å‘¨æ³•çº¿çš„äº¤æ±‡å¤„ï¼Œè®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œåœ¨æŸåº—çš„ç›¸äº¤çš„ç›´çº¿çš„æ¡æ•°å¤§äºè¿™ä¸ªé˜ˆå€¼å°±è®¤ä¸ºè¯¥äº¤æ±‡ç‚¹ä¸ºåœ†å¿ƒã€‚<br>åœ†åŠå¾„ç¡®å®šåŸç†ï¼šåœ†å¿ƒåˆ°åœ†å‘¨ä¸Šçš„è·ç¦»æ˜¯ç›¸åŒçš„ï¼Œç¡®å®šä¸€ä¸ªé˜ˆå€¼ï¼Œåªè¦ç›¸åŒè·ç¦»çš„æ•°é‡å¤§äºè¯¥é˜ˆå€¼ï¼Œå°±è®¤ä¸ºè¯¥è·ç¦»æ˜¯è¯¥åœ†å¿ƒçš„åŠå¾„ã€‚</p><p>åŸåˆ™ä¸Šéœå¤«å˜æ¢å¯ä»¥æ£€æµ‹ä»»ä½•å½¢çŠ¶ï¼Œä½†å¤æ‚çš„å½¢çŠ¶éœ€è¦çš„å‚æ•°å°±å¤šï¼Œéœå¤«ç©ºé—´çš„ç»´æ•°å°±å¤šï¼Œå› æ­¤åœ¨ç¨‹åºå®ç°ä¸Šæ‰€éœ€è¦çš„å†…å­˜ç©ºé—´ä»¥åŠè¿è¡Œæ•ˆç‡ä¸Šéƒ½ä¸åˆ©äºæŠŠæ ‡å‡†éœå¤«å˜æ¢åº”ç”¨äºå®é™…å¤æ‚å›¾å½¢çš„æ£€æµ‹ä¸­ã€‚éœå¤«æ¢¯åº¦æ³•æ˜¯éœå¤«å˜æ¢çš„æ”¹è¿›ï¼Œå®ƒçš„ç›®çš„æ˜¯å‡å°éœå¤«ç©ºé—´çš„ç»´åº¦ï¼Œæé«˜æ•ˆç‡ã€‚</p><p>APIï¼š</p><pre class=" language-language-python"><code class="language-language-python">circles = cv.HoughCircles(images,method,dp,minDist,param1=100,param2=100,minRadius=0,maxRadius=0)</code></pre><p>imagesï¼šè¾“å…¥å›¾åƒï¼Œåº”è¾“å…¥ç°åº¦å›¾åƒ<br>methodï¼šä½¿ç”¨éœå¤«å˜æ¢åœ†æ£€æµ‹çš„ç®—æ³•ï¼Œå®ƒçš„å‚æ•°æ˜¯CV_HOUGH_GRADIENT<br>dpï¼šéœå¤«ç©ºé—´çš„åˆ†è¾¨ç‡ï¼Œdp=1æ—¶è¡¨ç¤ºéœå¤«ç©ºé—´ä¸è¾“å…¥å›¾åƒç©ºé—´çš„å¤§å°ä¸€è‡´ï¼Œdp=2æ—¶éœå¤«ç©ºé—´æ—¶è¾“å…¥å›¾åƒç©ºé—´çš„ä¸€åŠ<br>minDistï¼šä¸ºåœ†å¿ƒä¹‹é—´çš„æœ€å°è·ç¦»ï¼Œå¦‚æœæ£€æµ‹åˆ°çš„ä¸¤ä¸ªåœ†å¿ƒä¹‹é—´è·ç¦»å°äºè¯¥å€¼ï¼Œåˆ™è®¤ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªåœ†å¿ƒ<br>param1ï¼šè¾¹ç¼˜æ£€æµ‹æ—¶ä½¿ç”¨cannyç®—å­çš„é«˜é˜ˆå€¼ï¼Œä½é˜ˆå€¼æ˜¯é«˜é˜ˆå€¼çš„ä¸€åŠ<br>param2ï¼šæ£€æµ‹åœ†å¿ƒå’Œç¡®å®šåŠå¾„æ—¶æ‰€å…±ç”¨çš„é˜ˆå€¼<br>minRadiuså’ŒmaxRadiusï¼šæ‰€æ£€æµ‹åˆ°çš„åœ†åŠå¾„çš„æœ€å°å€¼å’Œæœ€å¤§å€¼</p><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvimport  numpy as npfrom matplotlib import pyplot as plt# åŠ è½½å›¾ç‰‡ï¼Œè½¬ä¸ºç°åº¦å›¾plants = cv.imread('/Users/dinggongcheng/Downloads/lineandcircle.PNG')gray_img = cv.cvtColor(plants, cv.COLOR_BGR2GRAY)# è¿›è¡Œä¸­å€¼æ¨¡ç³Šï¼Œå»ç‡¥ç‚¹img = cv.medianBlur(gray_img, 7)# éœå¤«åœ†æ£€æµ‹circles = cv.HoughCircles(img, cv.HOUGH_GRADIENT, 1, 20, param1=100, param2=30, minRadius=0, maxRadius=100)# å°†æ£€æµ‹ç»“æœç»˜åˆ¶åœ¨å›¾åƒä¸Šfor i in circles[0, :]:    # ç»˜åˆ¶åœ†å½¢    cv.circle(plants, (i[0], i[1]), int(i[2]), (0, 255, 0), 2)    # ç»˜åˆ¶åœ†å¿ƒ    cv.circle(plants, (i[0], i[1]), 2, (0, 255, 0), -1)# å›¾åƒæ˜¾ç¤ºplt.figure(figsize=(10, 8), dpi=100)plt.imshow(plants[:, :, ::-1])plt.title("houghCircle"), plt.xticks([]), plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/41610.png" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒå¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ç¬”è®°ä¸€</title>
      <link href="/2021/04/15/shen-du-xue-xi-bi-ji-yi/"/>
      <url>/2021/04/15/shen-du-xue-xi-bi-ji-yi/</url>
      
        <content type="html"><![CDATA[<h3 id="æ·±åº¦å­¦ä¹ ç¬”è®°ä¸€">æ·±åº¦å­¦ä¹ ç¬”è®°ä¸€</h3><h4 id="åè¯">åè¯</h4><p>å‡½æ•°çš„Lossï¼šæ·±åº¦å­¦ä¹ çš„é”™è¯¯ç‡<br>Regressionï¼šå›å½’ç®—æ³•ï¼Œæ‰¾åˆ°ä¸€ä¸ªå‡½æ•° functionï¼Œé€šè¿‡è¾“å…¥ç‰¹å¾ x ï¼Œè¾“å‡ºä¸€ä¸ªæ•°å€¼ Scalar ã€‚ä¸å…¶ä»–ä»»åŠ¡ä¸åŒçš„æ˜¯è¾“å‡ºä¸€ä¸ªæ•°å€¼<br>Classificationï¼šåˆ†ç±»ï¼Œè¾“å…¥å‚æ•°ï¼Œé€šè¿‡æŸç§æ¨¡å‹è®¡ç®—åï¼Œè¾“å‡ºæ‰€å±ç±»åˆ«<br>Meta Learningï¼šè®©æœºå™¨å­¦ä¼šå­¦ä¹ ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡æ˜¯è¯­éŸ³è¯†åˆ«ï¼Œç¬¬äºŒä¸ªä»»åŠ¡æ˜¯å›¾åƒè¯†åˆ«ï¼Œç¬¬ä¸€ç™¾ä¸ªä»»åŠ¡æ˜¯æ–‡æœ¬åˆ†ç±»ï¼Œæœºå™¨ä¼šå› ä¸ºä¹‹å‰æ‰€å­¦åˆ°å¾—ä»»åŠ¡ï¼Œæ‰€ä»¥åœ¨åé¢å¾—ä»»åŠ¡å­¦ä¹ å¾—æ›´å¥½ã€‚<br>Unsupervised Learningï¼šæ— ç›‘ç£å­¦ä¹ ï¼Œæ•°æ®æ²¡æœ‰labelï¼Œéœ€è¦æ ¹æ®æ•°æ®è‡ªèº«ç»“æ„ç‰¹æ€§æ¥å°†æ•°æ®åˆ†ç±»<br>Life-long Learningï¼šç»ˆèº«å­¦ä¹ ï¼Œå¯¹å¤šä¸ªä»»åŠ¡ä½¿ç”¨ä¸€ä¸ªæ¨¡å‹è¿›è¡Œå­¦ä¹ ï¼ŒæœŸæœ›æœºå™¨å­¦å®Œç¬¬ä¸€ä¸ªä»»åŠ¡åï¼Œå†å­¦ä¹ å­¦ç¬¬äºŒä¸ªä»»åŠ¡åï¼Œä¸ä¼šé—å¿˜ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼Œç»§ç»­å­¦ä¹ ç¬¬ä¸‰ä¸ªä»»åŠ¡åï¼Œä¸ä¼šå¿˜è®°ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªä»»åŠ¡ã€‚<br>Reinforcement Learningï¼šå¼ºåŒ–å­¦ä¹ ï¼Œä¼°è®¡æœªæ¥çš„æ”¶ç›Šï¼Œå¹¶æ ¹æ®è¿™äº›æ”¶ç›Šå¯¹<strong>å½“å‰åŠ¨ä½œè¿›è¡Œå¼ºåŒ–</strong>çš„ç®—æ³•è®¾è®¡æ€æƒ³æ˜¯<strong>å¼ºåŒ–å­¦ä¹ </strong><br>Domain Adversarial Learningï¼šå¯¹æŠ—è®­ç»ƒï¼Œåœ¨å¯¹æŠ—è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œæ ·æœ¬ä¼šè¢«æ··åˆä¸€äº›å¾®å°çš„æ‰°åŠ¨ï¼ˆæ”¹å˜å¾ˆå°ï¼Œä½†æ˜¯å¾ˆå¯èƒ½é€ æˆè¯¯åˆ†ç±»ï¼‰ï¼Œç„¶åä½¿ç¥ç»ç½‘ç»œé€‚åº”è¿™ç§æ”¹å˜ï¼Œä»è€Œå¯¹å¯¹æŠ—æ ·æœ¬å…·æœ‰é²æ£’æ€§ã€‚<br>Network Compressionï¼šæ¨¡å‹å‹ç¼©<br>Anomaly Detectionï¼š<strong>å¼‚å¸¸æ£€æµ‹</strong>ï¼Œç›®çš„åœ¨äºè®©æœºå™¨çŸ¥é“æˆ‘æ‰€ä¸çŸ¥é“çš„äº‹æƒ…<br>Explainable AIï¼šå¯è§£é‡ŠAI</p><h4 id="Regression">Regression</h4><p>Step1:Model<br>è§†é¢‘é€šè¿‡å®å¯æ¢¦çš„ä¾‹å­è¿›è¡Œè®²è§£ï¼Œè¿™é‡Œæˆ‘é€šè¿‡æ–°é—»æ¨èçš„æ–¹å¼å¯¹ç›¸å…³å†…å®¹è¿›è¡Œç†è§£ã€‚<br>å‡½æ•°ï¼Œå³é€šè¿‡çº¿æ€§æ¨¡å‹æ„é€ å‡½æ•°ã€‚y = b + w*x(similar)ï¼›<br>è¿™é‡Œçš„yä¸ºæ¨èæ–°é—»çš„æ¨èæŒ‡æ•°ï¼Œè€Œbå¯ä»¥ä¸ºæ–°é—»åˆ†ç±»çš„ç›¸ä¼¼åº¦ä¸‹æ—¶é—´å‘è¡¨çš„å‰åæˆ–è€…æ–°é—»çš„é˜…è¯»é‡ç­‰å› ç´ æ„æˆçš„æ¨èæ•°å€¼ã€‚è€Œwä¸ºç”¨æˆ·è¡Œä¸º(ç‚¹èµï¼Œè¯„è®ºï¼Œæ”¶è—ï¼Œåˆ†äº«)åˆ†æçš„æ¨èæ•°å€¼ã€‚x(similar)åˆ™ä¸ºè¢«æ¨èæ–°é—»ä¸ç”¨æˆ·é˜…è¯»è¿‡æ–°é—»å…³é”®å­—çš„åŒ¹é…å€¼ã€‚<br>å…¶ä¸­xä¸­çš„å„ç§å±æ€§ï¼Œå³å…³é”®å­—åŒ¹é…åº¦æˆ–è€…å‘è¡¨æœºæ„çš„åŒ¹é…åº¦ç­‰ä¸ºè¾“å…¥ç‰¹å¾ã€‚wä¸ºæƒé‡ï¼Œxä¸ºåå·®ã€‚</p><p>Step2:Goodness of Function<br>è·å–å¤šä¸ªæ•°æ®é€šè¿‡è¡¨æ ¼ï¼ŒæŠ˜çº¿ç­‰å¤šç§å½¢å¼è¿›è¡Œåˆ†æã€‚<br>å®šä¹‰Loss function Lï¼šè¡¡é‡å‚æ•°çš„å¥½å<br>é€šè¿‡å¯¹åº”çš„ä¼°æµ‹è¯¯å·®çš„å‡½æ•°æ¥è®¡ç®—æ‰€æœ‰å·²æœ‰æ ·æœ¬æ ¹æ®ä¸åŒfunctionè®¡ç®—çš„Losså€¼ã€‚</p><p><img src="http://dingdm.online/ss.png" alt=""></p><p>Step3:Best Function<br>æ ¹æ®Losså€¼è·å–æœ€å¥½çš„functionã€‚<br>gradient descentï¼šå¤„ç†functionæ‰¾åˆ°æœ€ä¼˜å€¼<br>1.ç©·ä¸¾<br>2.Gradient Descent<br>å•å‚<br>éšæœºé€‰å–æˆ–è€…å…¶ä»–æ–¹æ³•æ‰¾åˆ°ä¸€ä¸ªåˆå§‹ç‚¹w0ï¼›<br>è®¡ç®—w0ä½ç½®çš„å¾®åˆ†ã€‚ä¸ºè´Ÿçš„è¯åº”è¯¥å¢åŠ wçš„å€¼ã€‚ä¸ºæ­£çš„è¯åº”è¯¥å‡å°‘wçš„å€¼ã€‚<br>å¢é‡é€‰å–ï¼šæ ¹æ®å¾®åˆ†çš„å¤§å°(é™¡å³­ç¨‹åº¦)ï¼›å¸¸æ•°é¡¹learning rate(äº‹å…ˆå®šä¹‰å¥½çš„å€¼)ã€‚<br>é‡å¤ä¹‹å‰çš„æ­¥éª¤ã€‚<br>ç»è¿‡tæ¬¡çš„æ›´æ–°ï¼Œæ‰¾åˆ°local optimalå¾®åˆ†ä¸º0çš„ä½ç½®ã€‚å±€éƒ¨æœ€ä¼˜è§£ã€‚<br>åŒå‚<br>å’Œå•å‚æ•°ç›¸åŒï¼Œä¸è¿‡æ˜¯è®¡ç®—åŒå‚æ•°çš„å¾®åˆ†ã€‚ä½¿ç”¨åŒä¸€ä¸ªå¸¸æ•°é¡¹learning rateã€‚<br>å¯¹äºä¸‰ç»´Loss Functionå‡½æ•°çš„è®¡ç®—æ˜¯æ ¹æ®é€‰å–ç‚¹çš„ï¼Œè€Œå¯¹çº¿æ€§æ¨¡å‹å¾—åˆ°çš„æ˜¯åŒä¸€ç»„å‚æ•°ã€‚<br>æ ¹æ®åŸå›¾åƒä¸å¾—åˆ°çš„æœ€ä¼˜çš„functionè¿›è¡Œè¯¯å·®ä¼°æµ‹ã€‚<br>è·å–æ–°çš„æ¨¡å‹ç”¨äºæµ‹è¯•å¾—åˆ°çš„æœ€ä¼˜å‡½æ•°ï¼Œåœ¨è¿›è¡Œè¯¯å·®ä¼°æµ‹ã€‚</p><p>Step4ï¼šæ–°çš„æ¨¡å‹è¯¯å·®è¾ƒå¤§æˆ–è€…æŸä¸ªå±€éƒ¨é¢„æµ‹ä¸å‡†<br>å¼•å…¥äºŒæ¬¡å¼è¿›è¡Œå†æ¬¡é¢„æµ‹æˆ–ç»§ç»­å¼•å…¥ä¸‰æ¬¡æ–¹å†æ¬¡é¢„æµ‹ã€‚<br>ç”±äºç°æœ‰æ¨¡å‹çš„ä¸è¶³å’Œåˆ†å¸ƒä¸å‡ï¼Œä½¿ç”¨è¾ƒé«˜çš„æ¬¡æ–¹è¿›è¡Œé¢„æµ‹çš„åŸæ•°æ®æ¨¡å‹å¯¹å½“å‰æ•°æ®æ¨¡å‹è¯¯å·®å¯èƒ½å¢å¤§ã€‚äº§ç”Ÿoverfittingã€‚<br>é«˜æ¬¡æ–¹ç¨‹çš„èŒƒå›´æ˜¯ä½æ¬¡æ–¹ç¨‹çš„è¶…é›†ï¼Œåœ¨æ‰¾å‡ºæœ€ä¼˜functionçš„æƒ…å†µä¸‹ï¼Œæ ¹æ®æœ€ä¼˜functionåœ¨æ‰¾åˆ°æœ€ä¼˜çš„è¯¯å·®ã€‚</p><p>Step5ï¼šæ ¹æ®è¾ƒå¤§çš„æ•°æ®æ¨¡å‹å’Œåˆ†å¸ƒé‡æ–°è®¾è®¡function<br>æ˜¾ç„¶æ ¹æ®ä¸åŒçš„æ–°é—»çš„åˆ†ç±»æˆ–è€…ä¸åŒçš„æ–°é—»åˆ†ç±»ä¸‹çš„å†æ¬¡ç»†åˆ†è®¾è®¡ä¸åŒçš„functionã€‚<br>ä½¿ç”¨switchåŒºåˆ†åˆ†ç±»æ¥æ„æˆçº¿æ€§å‡½æ•°ã€‚çº¿æ€§å‡½æ•°åˆ™ç”±xçš„å¤šä¸ªç‰¹å¾æ¥è®¾è®¡ã€‚</p><p>Step6ï¼šè‹¥ä»æƒ³å–æœ€ä¼˜<br>å°†æ‰€æœ‰xçš„ç‰¹å¾éƒ½åŠ å…¥åˆ°functionä¸­ï¼Œå¹¶é‡‡å–å¤šæ¬¡å‡½æ•°è¿›è¡Œé¢„æµ‹ã€‚å¯èƒ½ä¼šäº§ç”Ÿoverfittingã€‚<br>Regularizationï¼š<br>ç¬¬äºŒæ­¥ä¸­çš„ä¼°è®¡è¯¯å·®çš„loss functioné€‰å–æ›´å¥½çš„è¯¯å·®ä¼°è®¡å‡½æ•°ã€‚<br>åœ¨è¿›è¡Œregularizationçš„æ—¶å€™ï¼Œè¿›è¡Œå›¾åƒçš„å¹³æ»‘ç¨‹åº¦è°ƒæ•´ä¸éœ€è¦è€ƒè™‘åå·®ï¼Œåå·®åªæ˜¯è®©å›¾åƒä¸Šä¸‹ç§»åŠ¨è€Œå·²ã€‚<br>è¯¯å·®å‡½æ•°æ–°å¢çš„é¡¹çš„å€¼åº”è¯¥è¾ƒå°ï¼Œä½¿åŠ ä¸Šçš„é¡¹äº§ç”Ÿçš„å‡½æ•°è¾ƒå¹³æ»‘ã€‚è¾“å…¥å¯¹è¾“å‡ºçš„å½±å“è¾ƒå°ã€‚<br>æ ¹æ®ç»“æœå¾—å‡ºï¼Œæ–°å¢çš„å˜é‡çš„å€¼è¶Šå¤§ï¼Œå›¾åƒè¶Šå¹³æ»‘ã€‚å˜é‡çš„å€¼è¶Šå¤§ï¼Œè¶Šä¾èµ–äºwï¼Œåˆ™errorè¶Šå¤§ã€‚<br>è€Œå¯¹äºæ–°çš„æµ‹è¯•æ•°æ®ï¼Œå¹³æ»‘å›¾åƒçš„æœ€ä¼˜ä¹Ÿå¯èƒ½å¯¼è‡´erroræ›´å¤§ã€‚</p><h4 id="Erroræ¥æº">Erroræ¥æº</h4><p>f*æ¥è‡ªäºè®­ç»ƒå¾—å‡ºçš„æœ€ä¼˜functionï¼Œè€Œç¨‹åºä½¿ç”¨çš„functionä¸ºfhat<br>å…¶ä¸­f*è·fhatçš„â€˜è·ç¦»â€™æ¥è‡ªäºbiaså’Œvarianceã€‚<br>è®¡ç®—f*çš„æ•°å­¦æœŸæœ› E[f*] ã€‚biaså³E[f*] ä¸f hatçš„è¯¯å·®ï¼Œè€Œvarianceå³E[f*] ä¸f*çš„æ–¹å·®ã€‚<br>å¯¹äºç®€å•çš„æ¨¡å‹å‡½æ•°æ‹¥æœ‰è¾ƒä½çš„varianceï¼Œæ‹¥æœ‰è¾ƒå¤§çš„biasã€‚è€Œå¯¹äºå¤æ‚çš„æ¨¡å‹å‡½æ•°æ‹¥æœ‰è¾ƒå¤§çš„varianceï¼Œæ‹¥æœ‰è¾ƒå°çš„biasã€‚<br>å¯¹äºç®€å•çš„æ¨¡å‹å‡½æ•°å¯èƒ½ä¸åŒ…å«ä½ çš„fhatï¼Œè€Œè¾ƒå¤æ‚çš„æ¨¡å‹å‡½æ•°å¯èƒ½åŒ…å«ä½ çš„fhatï¼Œä½†æ˜¯varianceè¾ƒå¤§ã€‚<br>å¯¹äºæ¨¡å‹å‡½æ•°æ¥è®²ï¼Œå½“å‡†åº¦é«˜å³biasè¶Šæ¥è¶Šå°çš„æ—¶å€™ï¼Œä½ çš„ç²¾åº¦ä½å³varianceä¼šè¶Šæ¥è¶Šå¤§ã€‚<br>å¯¹äºè®­ç»ƒæ•°æ®å¾—åˆ°çš„f*æ²¡æœ‰fitçš„æƒ…å†µä¸‹ï¼Œbiasè¾ƒå¤§ã€‚è€Œå¯¹äºæµ‹è¯•æ•°æ®æµ‹è¯•f*æ—¶ï¼Œäº§ç”Ÿçš„errorè¾ƒå¤§ï¼Œåˆ™åº”è¯¥è€ƒè™‘varianceè¾ƒå¤§ã€‚<br>å½“biasè¾ƒå¤§æ—¶ï¼Œåº”è¾“å…¥æ›´å¤šç‰¹å¾ï¼Œä¼˜åŒ–æ¨¡å‹å‡½æ•°ã€‚è€Œvarianceè¾ƒå¤§æ—¶ï¼Œåº”å¢å¤§è®­ç»ƒæ•°æ®æˆ–è€…regularization(å¯èƒ½å¹³æ»‘ä¹‹åæ— æ³•åŒ…å«fhat)ã€‚<br><strong>è®­ç»ƒæ•°æ®åº”åˆ†ä¸ºä¸¤ç»„ï¼Œä¸€ç»„ä¸ºTraining setï¼Œå¦ä¸€ç»„ä¸ºValidation setã€‚é€šè¿‡è®­ç»ƒå¾—åˆ°çš„f*åœ¨Validation setä¸Šè¿›è¡ŒéªŒè¯ï¼Œæˆ–è€…ä½¿ç”¨å…¨éƒ¨çš„è®­ç»ƒæ•°æ®ã€‚</strong><br>N-fold Cross Validationï¼šå°†è®­ç»ƒæ•°æ®åˆ†ä¸ºä¸‰ä»½ï¼Œä»¥ç»„åˆçš„å½¢å¼(ä¸¤ä»½è®­ç»ƒï¼Œä¸€ä»½éªŒè¯)è®­ç»ƒæ¨¡å‹å‡½æ•°å¾—åˆ°f*ï¼Œå†åœ¨å…¨éƒ¨çš„è®­ç»ƒæ•°æ®ä¸­è¿›è¡Œæµ‹è¯•ã€‚</p><h4 id="Gradient-Descent">Gradient Descent</h4><p>è¡¨è¾¾å¼ï¼š</p><p><img src="http://dingdm.online/grad.png" alt=""></p><h4 id="tuning-your-learning-rate">tuning your learning rate</h4><p>å¯è§†åŒ–å‚æ•°çš„å˜åŒ–å¯¹lossçš„å½±å“ï¼Œå½“æŠ˜çº¿å¹³ç¨³ä¸‹é™æ—¶ï¼Œrateè¾ƒå°ï¼Œè€ŒæŠ˜ç°ä¸‹é™å¹³ç¨³ä¹‹åï¼Œåˆ™rateè¾ƒå¤§ï¼Œå½“æŠ˜çº¿å¼€å§‹ä¸Šå‡åˆ™rateé”™è¯¯ã€‚<br>learning rateä¼šéšç€å‚æ•°çš„æ›´æ–°è¶Šæ¥è¶Šå°ã€‚æ¯ä¸€ä¸ªä¸åŒçš„å‚æ•°éƒ½åº”è¯¥æœ‰ä¸åŒçš„learning rateã€‚</p><p><img src="http://dingdm.online/desct.png" alt=""></p><p>Adagradï¼šé€‰å–ä¸€ä¸ªæ•°å€¼ä¸ºå‚æ•°ä¹‹å‰çš„å‡æ–¹æ ¹è¿›è¡Œæ›´æ–°</p><p><img src="http://dingdm.online/Adagrad.png" alt=""></p><p>gä¸ºåå¾®åˆ†ã€‚</p><p>æ¨èä½¿ç”¨Adamã€‚</p><p>Adagradä¼šä½¿ç”¨é™¤å€¼æ¥å¼¥è¡¥åå·®ã€‚å½“è¿›è¡Œè·¨å‚æ•°æ—¶ï¼Œåˆ†å­å’Œä¸€æ¬¡å¾®åˆ†æˆæ­£æ¯”ï¼Œåˆ†æ¯å’ŒäºŒæ¬¡å¾®åˆ†æˆåæ¯”ã€‚</p><p><img src="http://dingdm.online/er.png" alt=""></p><p>å¯¹äºè·¨å‚æ•°è€Œè¨€ï¼Œå‚è€ƒå¦‚å›¾å³å¯å¾—çŸ¥ï¼Œåœ¨aä½ç½®çš„ä¸€æ¬¡å¾®åˆ†è¾ƒå°ï¼ŒäºŒæ¬¡å¾®åˆ†ä¹Ÿè¾ƒå°ã€‚è€Œå¯¹äºcçš„ä½ç½®ä¸€æ¬¡å¾®åˆ†è¾ƒå¤§ï¼ŒåŒæ—¶äºŒæ¬¡å¾®åˆ†ä¹Ÿè¾ƒå¤§ã€‚Adagradå°±æ˜¯é€šè¿‡åˆ†æ¯é¢„ä¼°äºŒæ¬¡å¾®åˆ†çš„å€¼ã€‚</p><h4 id="Stochastic-Gradient-Descent">Stochastic Gradient Descent</h4><p>è®¡ç®—å•ä¸ªæ ·æœ¬çš„Losså’Œå•ä¸ªGradient</p><p><img src="http://dingdm.online/sss.png" alt=""></p><p><img src="http://dingdm.online/sgrad.png" alt=""></p><p>æ¯ä¸ªæ ·æœ¬æ›´æ–°ä¸€æ¬¡å‚æ•°ï¼Œè®¡ç®—è¾ƒå¿«ã€‚</p><h4 id="Feature-Scaling">Feature Scaling</h4><p>å½“è¾“å…¥æ—¶è€ƒè™‘å¤šä¸ªç‰¹å¾ï¼Œä¸”å¤šä¸ªç‰¹å¾çš„è§„æ¨¡ç›¸å·®è¾ƒå¤§æ—¶ï¼Œå¯ä»¥rescalingå°†å¤šä¸ªç‰¹å¾çš„è§„æ¨¡è°ƒæ•´åˆ°åŸºæœ¬ä¸€è‡´ã€‚<br>å½“å¤šç‰¹å¾çš„é€‰å€¼ç›¸å·®è¾ƒå¤§æ—¶ï¼Œä¼šå‘ç°è¾ƒå¤§çš„ç‰¹å¾å€¼å˜æ›´æ—¶å¯¹äºlossçš„å˜åŒ–æ˜¯è¾ƒå¤§çš„ï¼Œè€Œç‰¹å¾å€¼å°å˜åŒ–è¾ƒå°ã€‚æ‰€ä»¥å°çš„ç‰¹å¾å€¼æ–¹å‘ä¸Šæ¯”è¾ƒå¹³æ»‘ï¼Œè€Œç‰¹å¾å€¼å¤§æ–¹å‘ä¸Šçš„æ¯”è¾ƒé™¡å³­ã€‚è¿™ä¸ªæ—¶å€™å‚æ•°çš„updateå¯»æ‰¾f*æ—¶æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œæ¶ˆè€—çš„æ—¶é—´è¾ƒé•¿ã€‚<br>è€Œå¯¹ç‰¹å¾è¿›è¡Œrescalingä¹‹åï¼Œæ­£åœ†å½¢çš„å‚æ•°æ›´æ–°æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ã€‚</p><p>rescalingçš„æ–¹æ³•</p><p><img src="http://dingdm.online/resc.png" alt=""></p><h4 id="Gradient-DescentèƒŒååŸç†">Gradient DescentèƒŒååŸç†</h4><p>åœ¨ä½¿ç”¨gradient descentçš„æ—¶å€™ï¼Œéšç€æ¯æ¬¡å‚æ•°çš„æ›´æ–°ï¼Œlossçš„å€¼å¯èƒ½å¢å¤§ä¹Ÿå¯èƒ½ä¹Ÿå‡å°ã€‚</p><p>æ³°å‹’å…¬å¼ï¼šæœ‰</p><p><img src="http://dingdm.online/tai.png" alt="img"></p><p>è¿™æ˜¯åœ¨å¯¹å‡½æ•°è¿›è¡Œå±€éƒ¨çº¿æ€§åŒ–å¤„ç†æ—¶å¸¸ç”¨çš„å…¬å¼ä¹‹ä¸€ã€‚ä»å‡ ä½•ä¸Šçœ‹ï¼Œå®ƒæ˜¯ç”¨åˆ‡çº¿è¿‘ä¼¼ä»£æ›¿æ›²çº¿ã€‚<br><strong>è®©è¿‘ä¼¼å¤šé¡¹å¼å‡½æ•°åœ¨x=x0å¤„çš„yå€¼, ä¸€é˜¶å¯¼, äºŒé˜¶å¯¼ â€¦né˜¶å¯¼çš„å€¼ = åŸå§‹å‡½æ•°åœ¨x=x0å¤„çš„yå€¼, ä¸€é˜¶å¯¼, äºŒé˜¶å¯¼ â€¦né˜¶å¯¼</strong><br>æ³°å‹’å…¬å¼å‡ ä½•æ„ä¹‰ï¼Œä¸€çœ‹å°±æ‡‚ã€‚<a href="https://www.zhihu.com/question/21149770" target="_blank" rel="noopener">https://www.zhihu.com/question/21149770</a><br>å¤šç»´ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p><img src="http://dingdm.online/sasa.png" alt=""></p><p>è€Œå¯¹äºgradient descentæ¥è¯´ï¼Œç»™å®šä¸€ä¸ªåˆå§‹ç‚¹å’ŒèŒƒå›´ï¼Œå¯ä»¥ä½¿ç”¨æ³°å‹’å…¬å¼è®¡ç®—æœ€å°çš„lossï¼›è€Œè®¡ç®—æœ€å°å€¼çš„è®¡ç®—å…¬å¼å³ä¸ºgradientã€‚è€Œlearning rateè®¾ç½®æ—¶å³è¦ä¿è¯ä½¿ç”¨åˆ°çš„æ³°å‹’å…¬å¼è¦æˆç«‹ï¼Œå³x-x0çš„é«˜é˜¶å¯¼ä¸ºæ— ç©·å°é‡æ—¶ã€‚</p><p><img src="http://dingdm.online/tr.png" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ€§å›å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡æŸ¥æ¼è¡¥ç¼ºä¸€</title>
      <link href="/2021/04/14/ji-yi-ci-cha-lou-bu-que-yi/"/>
      <url>/2021/04/14/ji-yi-ci-cha-lou-bu-que-yi/</url>
      
        <content type="html"><![CDATA[<h3 id="è®°ä¸€æ¬¡æŸ¥æ¼è¡¥ç¼ºä¸€">è®°ä¸€æ¬¡æŸ¥æ¼è¡¥ç¼ºä¸€</h3><h4 id="ä¸šåŠ¡åŠŸèƒ½ï¼šä¸ä½¿ç”¨mysqlæˆ–oracleå®ç°æŒç»­ç­¾åˆ°é¢†å¥–">ä¸šåŠ¡åŠŸèƒ½ï¼šä¸ä½¿ç”¨mysqlæˆ–oracleå®ç°æŒç»­ç­¾åˆ°é¢†å¥–</h4><p>æŠ€æœ¯å®ç°ï¼šä½¿ç”¨redisçš„bitmapå®ç°</p><p>bitmapåŸºäºæœ€å°çš„å•ä½bitè¿›è¡Œå­˜å‚¨ï¼Œè®¾ç½®æ—¶å€™æ—¶é—´å¤æ‚åº¦O(1)ã€è¯»å–æ—¶å€™æ—¶é—´å¤æ‚åº¦O(n)ï¼Œæ–¹ä¾¿æ‰©å®¹ã€‚</p><p>ç­¾åˆ°ä¿¡æ¯ä»¥ç”¨æˆ·idå’Œå¹´æ•°æœˆæ•°ä¸ºkeyï¼Œæ‰€åœ¨å¤©æ•°ä¸ºåç§»å€¼è¿›è¡Œç­¾åˆ°ï¼Œ1ä¸ºç­¾åˆ°ï¼Œ0ä¸ºæœªç­¾åˆ°ã€‚</p><p>ä¼ªä»£ç å®ç°</p><pre class=" language-language-java"><code class="language-language-java">//ç­¾åˆ°jedis.setbit(getKey(userId,keyDate), dayDate, true);//è·å–ç­¾åˆ°æƒ…å†µ//è·å–ä½äºåç§»é‡ 0 ä¸Šçš„ monthDayLength ä½é•¿æ— ç¬¦å·æ•°List<Long> list = jedis.bitfield(getKey(userId,keyDate), "GET", monthDayLength, "0");//ä¸šåŠ¡é€»è¾‘å¤„ç†æ–­ç­¾...//ç»Ÿè®¡ç­¾åˆ°æ¬¡æ•°jedis.bitcount(getKey(userId,keyDate))</code></pre><p>redisçš„æ¥å£æ–‡æ¡£åœ°å€ï¼š<a href="http://redisdoc.com/bitmap/index.html" target="_blank" rel="noopener">http://redisdoc.com/bitmap/index.html</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°äºŒ</title>
      <link href="/2021/04/14/python-xue-xi-bi-ji-er/"/>
      <url>/2021/04/14/python-xue-xi-bi-ji-er/</url>
      
        <content type="html"><![CDATA[<h3 id="pythonå­¦ä¹ ç¬”è®°äºŒ">pythonå­¦ä¹ ç¬”è®°äºŒ</h3><h4 id="å¾ªç¯ç»“æ„">å¾ªç¯ç»“æ„</h4><p>è¯­æ³•ï¼š<br>while a &gt; 0:<br>print(a)<br>for a in list:<br>print(a)<br>å¯¹äºfor inå¾ªç¯ï¼Œä¸éœ€è¦ä½¿ç”¨åˆ°è‡ªå®šä¹‰å˜é‡ï¼Œå¯å°†è‡ªå®šä¹‰å˜é‡å†™ä¸º_</p><h4 id="åˆ—è¡¨">åˆ—è¡¨</h4><p>è¯­æ³•ï¼š<br>list = [â€œstringâ€,int,float]<br>å…¶ä¸­list()ä¸ºå†…ç½®å‡½æ•°<br>lst2 = list([â€œstringâ€,int,float])<br>æ··æ·†ç‚¹ï¼špythonä¸­åˆ—è¡¨ä¸­ä»»æ„æ•°æ®ç±»å‹æ··å­˜ï¼Œåˆ—è¡¨çš„ç´¢å¼•å­˜åœ¨è´Ÿå€¼çš„ç´¢å¼•</p><p>APIï¼š<br>.index(var) varï¼šåˆ—è¡¨ä¸­çš„å…ƒç´  åˆ—è¡¨ä¸­æœ‰ç›¸åŒå…ƒç´ ï¼Œåªè¿”å›åˆ—è¡¨ä¸­ç›¸åŒå…ƒç´ çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•<br>.index(var,start,end) start,endï¼šæŒ‡å®šæŸ¥æ‰¾çš„åˆ—è¡¨ç´¢å¼•èŒƒå›´ï¼Œå‰é—­åå¼€ã€‚<br>list[start:stop:step] stepï¼šæ­¥é•¿ è·å–åˆ—è¡¨ä¸­çš„å¤šä¸ªå…ƒç´ ã€‚è·å–åˆ°çš„å¯¹è±¡ä¸ºæ–°å¯¹è±¡ï¼Œå ç”¨æ–°çš„å†…å­˜ç©ºé—´ï¼Œè€Œéå¯¹åŸæ•°æ®çš„æ“ä½œã€‚æ­¥é•¿ä¸ºè´Ÿæ—¶ï¼Œå°†æˆªå–çš„åˆ—è¡¨é€†åºè¾“å‡ºã€‚ç›¸åº”çš„startä¸stopä¹Ÿé€†åºè®¾ç½®ã€‚<br>var in listï¼šåˆ¤æ–­å…ƒç´ åœ¨åˆ—è¡¨ä¸­æ˜¯å¦å­˜åœ¨<br>.append(var)ï¼šåœ¨åˆ—è¡¨å°¾è¿½åŠ ä¸€ä¸ªå…ƒç´ ã€‚å¯¹åŸæ•°æ®è¿›è¡Œæ“ä½œï¼Œä¸äº§ç”Ÿæ–°çš„å¯¹è±¡ã€‚å…ƒç´ çš„ç±»å‹å¯ä»¥ä¸ºåˆ—è¡¨ã€‚<br>.extend(var)ï¼šè¿½åŠ å…ƒç´ æ—¶ï¼Œè‹¥æ·»åŠ çš„å…ƒç´ ä¸ºåˆ—è¡¨ï¼Œåˆ™è§£æåˆ—è¡¨ï¼Œä»¥å•å…ƒç´ çš„æ–¹å¼è¿½åŠ ã€‚<br>.insert(index,var)ï¼šåœ¨ç´¢å¼•ä¸ºindexçš„ä½ç½®ä¸Šæ’å…¥varå…ƒç´ <br>list[start:] = lstï¼šå°†åˆ‡æ‰çš„éƒ¨åˆ†è¿›è¡Œæ›¿æ¢<br>.remove(var)ï¼šç§»é™¤åˆ—è¡¨ä¸­çš„varå…ƒç´ ï¼Œå­˜åœ¨ç›¸åŒå…ƒç´ æ—¶ï¼Œåªç§»é™¤ç¬¬ä¸€ä¸ª<br>.pop(index)ï¼šæ ¹æ®åˆ—è¡¨ç´¢å¼•indexç§»é™¤å…ƒç´ ã€‚å‚æ•°åˆ—è¡¨ä¸ºç©ºç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ <br>list[start:stop] = []ï¼šä½¿ç”¨ç©ºå…ƒç´ æ›¿ä»£<br>.clear()ï¼šæ¸…é™¤åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ <br>del varï¼šåˆ é™¤åˆ—è¡¨ï¼Œå›æ”¶åˆ—è¡¨å ç”¨çš„å†…å­˜ç©ºé—´<br>.sort(reverse=True)ï¼šå¯¹å½“å‰åˆ—è¡¨è¿›è¡Œæ’åºï¼Œé»˜è®¤ç”±å°è‡³å¤§æ’åºã€‚reverseè®¾ç½®ä¸ºtrueè¿›è¡Œé™åºæ’åºã€‚<br>sorted(var,reverse=True)ï¼šä½¿ç”¨å†…ç½®å‡½æ•°å¯¹åˆ—è¡¨è¿›è¡Œæ’åºï¼Œé»˜è®¤ç”Ÿåºæ’åºï¼Œæ’åºç”Ÿæˆæ–°çš„åˆ—è¡¨å¯¹è±¡ã€‚ä½¿ç”¨reverseå‚æ•°å€¼è¿›è¡Œé™åºæ’åºã€‚</p><p>åˆ—è¡¨ç”Ÿæˆå¼ï¼š<br>[i for i in range(1,10)] å°†1åˆ°9äº§ç”Ÿçš„æ•´æ•°ä½œä¸ºåˆ—è¡¨ï¼Œforä¹‹å‰çš„å…ƒç´ å¯ä»¥ä½œä¸ºè¡¨è¾¾å¼è¿›è¡Œå¯¹åˆ—è¡¨å…ƒç´ è¿›è¡Œè®¾ç½®</p><h4 id="å­—å…¸">å­—å…¸</h4><p>è¯­æ³•ï¼š<br>map = {key:value, key:value,key:value}<br>dict()ä¸ºå†…ç½®å‡½æ•°<br>dict(name=â€˜varâ€™,age=20)<br>é¢å‘å¯¹è±¡ï¼Œjsonåºåˆ—åŒ–<br>å­—å…¸ä¸­çš„keyæ— æ³•é‡å¤ï¼ŒåŒæ—¶å¿…é¡»æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚æ ¹æ®hashå€¼å­˜æ”¾å…ƒç´ ï¼Œå› æ­¤å­—å…¸æ˜¯æ— åºçš„ã€‚</p><p>APIï¼š<br>map[key]ï¼šæ ¹æ®keyè·å–valueå€¼<br>get(key,default)ï¼šæ ¹æ®keyè·å–valueå€¼ã€‚ä¸å­˜åœ¨keyæ—¶è¿”å›Noneï¼Œä¸æŠ¥é”™ã€‚å¯ä»¥ä½¿ç”¨defaultæŒ‡å®šæŸ¥æ‰¾å¤±è´¥æ—¶çš„é»˜è®¤å€¼ã€‚<br>del map[key]ï¼šåˆ é™¤æŒ‡å®škeyçš„é”®å€¼å¯¹<br>clear()ï¼šæ¸…ç©ºå­—å…¸çš„å…ƒç´ <br>keys()ï¼šè·å–å­—å…¸ä¸­çš„æ‰€æœ‰keyï¼Œç±»å‹ä¸ºdict_keysã€‚å¯ä»¥é€šè¿‡list()è¿›è¡Œè½¬æ¢<br>values()ï¼šè·å–å­—å…¸ä¸­çš„æ‰€æœ‰valuesï¼Œç±»å‹ä¸ºdict_valuesã€‚<br>items()ï¼šè·å–å­—å…¸ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹ã€‚</p><p>å­—å…¸ç”Ÿæˆå¼ï¼š<br>zip(var1,var2)ï¼švar1ä¸var2ä¸ºå¯éå†å¯¹è±¡ã€‚éå†æ—¶æ ¹æ®ä¸¤ä¸ªåˆ—è¡¨çš„ç´¢å¼•åŠ¨æ€ç”Ÿæˆå­—å…¸ã€‚<br>{item:price for item, price in zip(items,prices)} æ‰“åŒ…æ—¶ä»¥çŸ­çš„åˆ—è¡¨ä¸ºåŸºå‡†ï¼Œforä¹‹å‰ä¸ºè¡¨è¾¾å¼</p><h4 id="å…ƒç»„">å…ƒç»„</h4><p>è¯­æ³•ï¼š<br>(â€˜varâ€™,â€˜strâ€™,int) å¯ä»¥çœç•¥æ‹¬å·è¿›è¡Œç®€å†™<br>ä½¿ç”¨å†…ç½®å‡½æ•°tuple()<br>tuple((â€˜strâ€™,int,float))<br>å…ƒç»„ä¸­åªåŒ…å«ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œéœ€è¦æ·»åŠ é€—å·ã€‚å¦åˆ™ä¼šè¢«è®¤å®šä¸ºString<br>å…ƒç»„çš„ä¸å¯å˜ç±»æ¯”äºjavaä¸­çš„finalã€‚</p><h4 id="é›†åˆ">é›†åˆ</h4><p>é›†åˆæ˜¯æ²¡æœ‰valueçš„å­—å…¸ï¼Œå¯¹æ¯”äºjavaçš„seté›†åˆ<br>è¯­æ³•ï¼š<br>{2,3,3,4,5,6,7} é›†åˆä¸­çš„valueå€¼ä¸å…è®¸é‡å¤<br>ä½¿ç”¨å†…ç½®å‡½æ•°set()<br>set(range(6))</p><p>APIï¼š<br>add(var)ï¼šå‘é›†åˆä¸­æ·»åŠ å…ƒç´ <br>update({var1,var2,var3})ï¼šå‘é›†åˆä¸­æ·»åŠ å¤šä¸ªå…ƒç´ ã€‚åŒæ—¶å¯ä»¥å‘é›†åˆä¸­æ·»åŠ åˆ—è¡¨å’Œå…ƒç»„ï¼Œåˆ—è¡¨å’Œå…ƒç»„ä¼šè¢«è§£æä¸ºå•ä¸ªå…ƒç´ æ·»åŠ ã€‚<br>remove(var)ï¼šåˆ é™¤é›†åˆä¸­çš„å…ƒç´ <br>discard(var)ï¼šåˆ é™¤é›†åˆä¸­çš„å…ƒç´ ï¼Œä¸ä¼šæŠ¥é”™å€¼ä¸å­˜åœ¨å¼‚å¸¸<br>pop()ï¼šæ— å‚apiï¼Œåˆ é™¤ä»»æ„å…ƒç´ <br>clear()ï¼šæ¸…ç©ºé›†åˆå…ƒç´ <br>==å’Œ!=ï¼šåˆ¤æ–­æ—¶åˆ¤æ–­é›†åˆä¸­çš„æ•°æ®ï¼Œè€Œéåœ°å€<br>var1.issubset(var2)ï¼švar1æ˜¯var2çš„å­é›†åˆ¤æ–­<br>var2.issuperset(var1)ï¼švar2æ˜¯var1çš„è¶…é›†åˆ¤æ–­<br>var1.isdisjoint(var2)ï¼švar1å’Œvar2çš„äº¤é›†åˆ¤æ–­</p><p>é›†åˆçš„æ•°å­¦æ“ä½œï¼š<br>äº¤é›†ï¼švar1.intersection(var2)     var1 &amp; var2     é›†åˆä¸å˜åŒ–<br>å¹¶é›†ï¼švar1.union(var2)     var1 | var2     é›†åˆä¸å˜åŒ–<br>å·®é›†ï¼švar1.difference(var2)   var1-var2    é›†åˆä¸å˜åŒ–<br>å¯¹ç§°å·®é›†ï¼švar1.symmetric_difference(var2)</p><p>é›†åˆç”Ÿæˆå¼ï¼š<br>{i for i in range(1,10)} å’Œåˆ—è¡¨ç”Ÿæˆå¼ä¸€è‡´ï¼ŒåŒºåˆ«åœ¨äº{}å’Œ[]</p><h4 id="å­—ç¬¦ä¸²çš„æ“ä½œ">å­—ç¬¦ä¸²çš„æ“ä½œ</h4><p>å­—ç¬¦ä¸²é©»ç•™ï¼Œä¸javaç›¸åŒã€‚<br>é©»ç•™æœºåˆ¶ï¼š<br>1.å­—ç¬¦ä¸²é•¿åº¦ä¸º0æˆ–è€…1<br>2.ç¬¦åˆæ ‡è¯†ç¬¦çš„å­—ç¬¦ä¸²<br>3.åªåœ¨ç¼–è¯‘æ—¶è¿›è¡Œé©»ç•™ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ä¼šå¼€è¾Ÿæ–°çš„ç©ºé—´ã€‚<br>4.[-5,256]é—´çš„æ•´æ•°æ•°å­—</p><p>APIï¼š<br>index(var)ï¼šæŸ¥æ‰¾å­ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œæœªå‡ºç°å­ä¸²æŠ¥å¼‚å¸¸<br>find(var)ï¼šæŸ¥æ‰¾å­ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œæœªå‡ºç°å­ä¸²è¿”å›-1<br>rindex(var)ï¼šæŸ¥æ‰¾å­ä¸²æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®<br>rfind(var)ï¼šæŸ¥æ‰¾å­ä¸²æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®<br>upper()ï¼šè½¬æ¢å­—ç¬¦ä¸ºå¤§å†™å­—æ¯ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡<br>lower()ï¼šè½¬æ¢å­—ç¬¦ä¸ºå°å†™å­—æ¯ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡<br>swapcase()ï¼šå¤§å°å†™äº’ç›¸è½¬æ¢<br>capitalize()ï¼šç¬¬ä¸€ä¸ªå­—ç¬¦è½¬æ¢ä¸ºå¤§å†™ï¼Œå…¶ä½™å­—ç¬¦è½¬æ¢ä¸ºå°å†™<br>title()ï¼šæŠŠæ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—ç¬¦è½¬æ¢ä¸ºå¤§å†™ï¼ŒæŠŠæ¯ä¸ªå•è¯çš„å‰©ä½™å­—ç¬¦è½¬æ¢ä¸ºå°å†™ã€‚<br>center(var1,var2)ï¼šå±…ä¸­å¯¹é½ï¼Œvar1æŒ‡å®šå®½åº¦ï¼Œvar2æŒ‡å®šå¡«å……ç¬¦ï¼Œvar2å¯é€‰ï¼Œé»˜è®¤ä¸ºç©ºæ ¼ï¼Œå¦‚æœè®¾ç½®å®½åº¦å°äºå®é™…å®½åº¦åˆ™è¿”å›åŸå­—ç¬¦ä¸²<br>ljust(var1,var2)ï¼šå·¦å¯¹é½ï¼Œvar1æŒ‡å®šå®½åº¦ï¼Œvar2æŒ‡å®šå¡«å……ç¬¦ï¼Œvar2å¯é€‰ï¼Œé»˜è®¤ä¸ºç©ºæ ¼ï¼Œå¦‚æœè®¾ç½®å®½åº¦å°äºå®é™…å®½åº¦åˆ™è¿”å›åŸå­—ç¬¦ä¸²<br>rjust(var1,var2)ï¼šå³å¯¹é½ï¼Œvar1æŒ‡å®šå®½åº¦ï¼Œvar2æŒ‡å®šå¡«å……ç¬¦ï¼Œvar2å¯é€‰ï¼Œé»˜è®¤ä¸ºç©ºæ ¼ï¼Œå¦‚æœè®¾ç½®å®½åº¦å°äºå®é™…å®½åº¦åˆ™è¿”å›åŸå­—ç¬¦ä¸²<br>zfill(var)ï¼šå³å¯¹é½ï¼Œå·¦è¾¹ç”¨0å¡«å……ï¼Œè¯¥æ–¹æ³•åªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šå­—ç¬¦ä¸²çš„å®½åº¦ï¼Œå¦‚æœè®¾ç½®å®½åº¦å°äºå®é™…å®½åº¦åˆ™è¿”å›åŸå­—ç¬¦ä¸²<br>split(var1,var2)ï¼šä»å­—ç¬¦ä¸²çš„å·¦ä¾§å¼€å§‹åŠˆåˆ†ï¼Œé»˜è®¤ä¸ºç©ºæ ¼ï¼Œè¿”å›ä¸€ä¸ªåˆ—è¡¨ã€‚é€šè¿‡var1å‚æ•°è®¾ç½®åŠˆåˆ†çš„å­—ç¬¦ï¼Œé€šè¿‡var2è®¾ç½®åŠˆåˆ†çš„æœ€å¤§æ¬¡æ•°ï¼Œå‰©ä½™çš„å­ä¸²ä¼šå•ç‹¬åšä¸ºä¸€éƒ¨åˆ†ä¿å­˜ã€‚<br>rsplit(var1,var2)ï¼šä»å­—ç¬¦ä¸²çš„å³ä¾§å¼€å§‹åŠˆåˆ†ï¼Œé»˜è®¤ä¸ºç©ºæ ¼ï¼Œè¿”å›ä¸€ä¸ªåˆ—è¡¨ã€‚é€šè¿‡var1å‚æ•°è®¾ç½®åŠˆåˆ†çš„å­—ç¬¦ï¼Œé€šè¿‡var2è®¾ç½®åŠˆåˆ†çš„æœ€å¤§æ¬¡æ•°ï¼Œå‰©ä½™çš„å­ä¸²ä¼šå•ç‹¬åšä¸ºä¸€éƒ¨åˆ†ä¿å­˜ã€‚<br>isidentifier()ï¼šåˆ¤æ–­æŒ‡å®šçš„å­—ç¬¦ä¸²æ˜¯ä¸æ˜¯åˆæ³•çš„æ ‡è¯†ç¬¦<br>isspace()ï¼šåˆ¤æ–­æŒ‡å®šçš„å­—ç¬¦ä¸²æ˜¯å¦å…¨éƒ¨ç”±ç©ºç™½å­—ç¬¦ç»„æˆ<br>isaplha()ï¼šåˆ¤æ–­æŒ‡å®šçš„å­—ç¬¦ä¸²æ˜¯å¦å…¨éƒ¨ç”±å­—æ¯ç»„æˆ<br>isdecimal()ï¼šåˆ¤æ–­æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦å…¨éƒ¨ç”±åè¿›åˆ¶çš„æ•°å­—ç»„æˆ<br>isnumeric()ï¼šåˆ¤æ–­æŒ‡å®šçš„å­—ç¬¦ä¸²æ˜¯å¦å…¨éƒ¨ç”±æ•°å­—ç»„æˆ<br>isalnum()ï¼šåˆ¤æ–­æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦å…¨éƒ¨ç”±å­—æ¯å’Œæ•°å­—ç»„æˆ<br>replace(var1,var2,var3)ï¼švar1æŒ‡å®šè¢«æ›¿æ¢çš„å­ä¸²ï¼Œvar2æŒ‡å®šæ›¿æ¢å­ä¸²çš„å­—ç¬¦ä¸²ï¼Œè¯¥æ–¹æ³•è¿”å›æ›¿æ¢åå¾—åˆ°çš„å­—ç¬¦ä¸²ï¼Œæ›¿æ¢å‰çš„å­—ç¬¦ä¸²ä¸å‘ç”Ÿå˜åŒ–ï¼Œè°ƒç”¨è¯¥æ–¹æ³•å¯ä»¥é€šè¿‡var3æŒ‡å®šæœ€å¤§æ›¿æ¢æ¬¡æ•°<br>join()ï¼šå°†åˆ—è¡¨æˆ–å…ƒç»„ä¸­çš„å­—ç¬¦ä¸²åˆå¹¶æˆä¸€ä¸ªå­—ç¬¦ä¸²</p><p>æ ¼å¼åŒ–å­—ç¬¦ä¸²</p><p>%s %d % (name,age)<br>{0} {1} .format(name,age)<br>f {name} {age}<br>%10d 10è¡¨ç¤ºå®½åº¦<br>%.3f % 3.1415926 .3ä¿ç•™å°æ•°<br>{0:.3}.format(3.1415926) .3ä¸€å…±è¡¨ç¤ºä¸‰ä½æ•°<br>{0:.3f}.format(3.1415926) .3fè¡¨ç¤ºä¸‰ä½å°æ•°<br>{0:10.3f}.format(3.1415926) å®½åº¦ä¸º10</p><p>å­—ç¬¦ä¸²çš„ç¼–ç è½¬æ¢</p><p>å³åºåˆ—åŒ–<br>encode(var) varå³ç¼–ç æ ¼å¼ GBKä¸­æ–‡ä¸¤ä¸ªå­—èŠ‚ UTF-8ä¸­æ–‡ä¸‰ä¸ªå­—èŠ‚<br>decode(var) varå³è§£ç æ ¼å¼</p><h4 id="å‡½æ•°">å‡½æ•°</h4><p>è¯­æ³•ï¼š<br>def main(var1,var2):<br>ä¸šåŠ¡é€»è¾‘<br>return var3<br>Pythonå‡½æ•°ä¸ºå€¼ä¼ é€’ å…·ä½“çš„è¯¦ç»†ä¸šåŠ¡ä¸javaä¸€æ ·<br>å‡½æ•°è¿”å›å€¼ä¸ºå¤šä¸ªæ—¶ï¼Œè¿”å›çš„æ•°æ®ç±»å‹ä¸ºå…ƒç»„</p><p>å‚æ•°ï¼š<br>å¯å˜çš„ä½ç½®å‚æ•°ï¼š*argsï¼Œä¼ å…¥çš„å‚æ•°ä¸ºä¸€ä¸ªå…ƒç»„ã€‚å¯å˜çš„ä½ç½®å‚æ•°åªèƒ½ä¸ºä¸€ä¸ª<br>ä¸ªæ•°å¯å˜çš„å…³é”®å­—å½¢å‚ï¼š**argsï¼Œä¼ å…¥çš„å‚æ•°ä¸ºä¸€ä¸ªå­—å…¸ã€‚ä¸ªæ•°å¯å˜çš„å…³é”®å­—å½¢å‚åªèƒ½ä¸ºä¸€ä¸ªã€‚<br>åœ¨ä¸€ä¸ªå‡½æ•°çš„å®šä¹‰è¿‡ç¨‹ä¸­ï¼Œæ—¢æœ‰ä¸ªæ•°å¯å˜çš„å…³é”®å­—å½¢å‚ï¼Œä¹Ÿæœ‰ä¸ªæ•°å¯å˜çš„ä½ç½®å½¢å‚ï¼Œè¦æ±‚ä¸ªæ•°å¯å˜çš„ä½ç½®å‚æ•°åœ¨ä¸ªæ•°å¯å˜çš„å…³é”®å­—å½¢å‚ä¹‹å‰ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring bootç›¸å…³çŸ¥è¯†ç‚¹</title>
      <link href="/2021/03/30/springboot-xiang-guan-zhi-shi-dian/"/>
      <url>/2021/03/30/springboot-xiang-guan-zhi-shi-dian/</url>
      
        <content type="html"><![CDATA[<h3 id="Springbootä¸­å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ">Springbootä¸­å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿ</h3><p>åœ¨è„šæœ¬è¿›è¡Œhttpè¯·æ±‚çš„æ—¶å€™è¦æ»¡è¶³åŒæºåè®®ï¼Œå³urlçš„åè®®ï¼ŒåŸŸåå’Œç«¯å£è¦ç›¸åŒæ‰èƒ½æ‰èƒ½å‘èµ·è¯·æ±‚ã€‚æµè§ˆå™¨åœ¨è„šæœ¬å‘å‡ºè·¨åŸŸè¯·æ±‚åï¼Œä¼šæ‹¦æˆªè¿”å›çš„ç»“æœï¼Œæ‰€ä»¥éœ€è¦é…ç½®è·¨åŸŸã€‚</p><p>å½“ç”¨æˆ·é€€å‡ºæˆ–è€…tokenè¿‡æœŸæ—¶ï¼Œæ‹¦æˆªå™¨å’Œè·¨åŸŸçš„é¡ºåºé…ç½®ä¼šå¯¼è‡´è·¨åŸŸé—®é¢˜ï¼Œä¸€ä¸ªhttpè¯·æ±‚ï¼Œå…ˆèµ°filterï¼Œåˆ°è¾¾servletåæ‰è¿›è¡Œæ‹¦æˆªå™¨çš„å¤„ç†ã€‚ä¸€èˆ¬åœ¨å‰åç«¯åˆ†ç¦»éƒ¨ç½²æ—¶è¦è§£å†³è·¨åŸŸé—®é¢˜ï¼Œé€šè¿‡corsæ¥å®ç°è·¨åŸŸé—®é¢˜ã€‚</p><p>å¦‚æœä¸æ˜¯å‰åç«¯åˆ†ç¦»éƒ¨ç½²çš„é¡¹ç›®ã€‚å¯ä»¥é€šè¿‡å®ç°WebMvcConfigurerç„¶åé‡å†™addCorsMappingsæ–¹æ³•æ¥å®ç°è·¨åŸŸé…ç½®ã€‚</p><pre class=" language-language-java"><code class="language-language-java">@Configurationpublic class CorsConfig implements WebMvcConfigurer {    @Override    public void addCorsMappings(CorsRegistry registry) {        registry.addMapping("/**")                .allowedOrigins("*")                .allowCredentials(true)                .allowedMethods("GET", "POST", "PUT", "DELETE", "OPTIONS")                .maxAge(3600);    }}</code></pre><p>æŠŠcorsæ”¾åœ¨filteré‡Œé¢ï¼Œå°±å¯ä»¥åœ¨æ‹¦æˆªå™¨ä¹‹å‰è¿›è¡Œã€‚</p><pre class=" language-language-java"><code class="language-language-java">@Configurationpublic class CorsConfig {    @Bean    public CorsFilter corsFilter() {        CorsConfiguration corsConfiguration = new CorsConfiguration();        corsConfiguration.addAllowedOrigin("*");        corsConfiguration.addAllowedHeader("*");        corsConfiguration.addAllowedMethod("*");        corsConfiguration.setAllowCredentials(true);        UrlBasedCorsConfigurationSource urlBasedCorsConfigurationSource = new UrlBasedCorsConfigurationSource();        urlBasedCorsConfigurationSource.registerCorsConfiguration("/**", corsConfiguration);        return new CorsFilter(urlBasedCorsConfigurationSource);    }}</code></pre><h3 id="SpringBootçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶æœ‰å“ªå‡ ä¸ªï¼Ÿä»–ä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ">SpringBootçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶æœ‰å“ªå‡ ä¸ªï¼Ÿä»–ä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Spring bootçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶æœ‰ä¸¤ä¸ªï¼Œapplicationå’Œbootstrapã€‚applicationä¸»è¦ç”¨äºspring bootçš„è‡ªåŠ¨åŒ–é…ç½®ã€‚spring bootä½¿ç”¨@EnableConfigurationPropertiesæ³¨è§£æ˜ å°„applicationä¸­çš„å‚æ•°å’ŒPOJOçš„å…³ç³»ã€‚</p><p>bootstrapé…ç½®æ–‡ä»¶çš„åŠ è½½è¦ä¼˜äºapplicationï¼Œä¸”é‡Œé¢é…ç½®çš„å±æ€§ä¸èƒ½è¢«è¦†ç›–ã€‚ä½¿ç”¨spring Cloud config é…ç½®ä¸­å¿ƒæ—¶ï¼Œè¿™æ—¶éœ€è¦åœ¨bootstrap é…ç½®æ–‡ä»¶ä¸­æ·»åŠ è¿æ¥åˆ°é…ç½®ä¸­å¿ƒçš„é…ç½®å±æ€§æ¥åŠ è½½å¤–éƒ¨é…ç½®ä¸­å¿ƒçš„é…ç½®ä¿¡æ¯ã€‚</p><h3 id="Spring-bootçš„å¼‚å¸¸å¤„ç†">Spring bootçš„å¼‚å¸¸å¤„ç†</h3><h4 id="Spring-Bootç±»BasicErrorController">Spring Bootç±»BasicErrorController</h4><p><img src="http://dingdm.online/20190608165028699.png" alt=""></p><p>è¿™æ˜¯ä¸€ä¸ªåŸºç¡€å…¨å±€é”™è¯¯controller,Spring Bootè‡ªå¸¦çš„ï¼Œçœ‹åˆ°è¿™ä¸ªRequestMappingåœ°å€ï¼Œè¿™æ˜¯ä¸€ä¸ªç›¸å½“äºä¸‰å…ƒå†™æ³•ï¼Œå¦‚æœä½ åœ¨é…ç½®æ–‡ä»¶é…ç½®äº†server.error.pathçš„è¯ï¼Œå°±ä¼šä½¿ç”¨ä½ é…ç½®çš„å¼‚å¸¸å¤„ç†åœ°å€ï¼Œå¦‚æœæ²¡æœ‰å°±ä¼šä½¿ç”¨ä½ é…ç½®çš„error.pathè·¯å¾„åœ°å€ï¼Œå¦‚æœè¿˜æ˜¯æ²¡æœ‰ï¼Œé»˜è®¤ä½¿ç”¨/erroræ¥ä½œä¸ºå‘ç”Ÿå¼‚å¸¸çš„å¤„ç†åœ°å€ã€‚</p><p>é»˜è®¤çš„ç±»åœ¨ä½ çš„è¯·æ±‚è¿”å›æ–‡æœ¬æˆ–è€…jsonæ•°æ®çš„æ—¶å€™ï¼Œå½“å‘ç”Ÿé”™è¯¯çš„è¯ï¼Œå¦‚æœä½ åœ¨é…ç½®æ–‡ä»¶é‡Œé¢é…ç½®äº†æ¨¡æ¿å¼•æ“å¹¶ä¸”æœ‰errorçš„é¡µé¢ï¼Œè¿™ä¸ªç±»å°±ä¼šè¿”å›ä½ çš„erroré¡µé¢ã€‚è¿”å›çš„æ•°æ®é€šè¿‡getErrorAttributesæ–¹æ³•å°è£…ä½ çš„è·¯å¾„ï¼ŒçŠ¶æ€ï¼Œä¿¡æ¯ï¼Œæ—¶é—´æˆ³ç­‰ä¿¡æ¯ã€‚</p><p>å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ä¸€ä¸ªbeanæ¥å®ç°ErrorControlleræ¥å±è”½é»˜è®¤çš„å¼‚å¸¸å¤„ç†ã€‚å¦‚æœä¸æƒ³å…¨éƒ¨å±è”½ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªbeanæ¥ç»§æ‰¿BasicErrorControlleræ¥å£æ¥ä½¿ç”¨éƒ¨åˆ†åŠŸèƒ½ï¼Œå¹¶è‡ªå®šä¹‰è‡ªå·±çš„é”™è¯¯æ˜ å°„åœ°å€ã€‚</p><h4 id="ç»Ÿä¸€å¼‚å¸¸å¤„ç†">ç»Ÿä¸€å¼‚å¸¸å¤„ç†</h4><pre class=" language-language-java"><code class="language-language-java">package com.riemann.springbootdemo.exception;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.web.bind.annotation.ControllerAdvice;import org.springframework.web.bind.annotation.ExceptionHandler;import org.springframework.web.bind.annotation.ResponseBody;import org.springframework.web.servlet.ModelAndView;import javax.servlet.http.HttpServletRequest;@ControllerAdvicepublic class GlobalExceptionHandle extends RuntimeException{    private static final Logger logger = LoggerFactory.getLogger(GlobalExceptionHandle.class);    @ExceptionHandler(value = Exception.class)    public ModelAndView exceptionHandle(HttpServletRequest request, Exception exception) {        String url = request.getRequestURL().toString();        logger.error("URL: " + url);        logger.error("Excption: ", exception);        ModelAndView mv = new ModelAndView();        mv.addObject("exception", exception);        mv.addObject("url", url);        mv.setViewName("error");        return mv;    }}</code></pre><p>ç»Ÿä¸€å¤„ç†Exceptionå¼‚å¸¸ï¼Œåªéœ€è¦åœ¨ç±»ä¸Šæ ‡æ³¨ControllerAdviceè¿™ä¸ªæ³¨è§£ï¼Œç„¶ååœ¨ç±»æ–¹æ³•ä¸Šæ ‡æ³¨å¥½å¯¹åº”çš„ExceptionHandleråŠå¼‚å¸¸ç±»ã€‚ControllerAdviceå¯ä»¥ç”¨æ¥è¿›è¡Œå…¨å±€å¼‚å¸¸å¤„ç†ï¼Œå…¨å±€æ•°æ®ç»‘å®šå’Œå…¨å±€æ•°æ®é¢„å¤„ç†ã€‚</p><h3 id="Spring-Bootä¸Springçš„åŒºåˆ«">Spring Bootä¸Springçš„åŒºåˆ«</h3><h4 id="Spring">Spring</h4><p>springæ¡†æ¶ä¸ºå¼€å‘Javaåº”ç”¨ç¨‹åºæä¾›äº†å…¨é¢çš„åŸºç¡€æ¶æ„æ”¯æŒï¼Œå®ƒåŒ…å«ä¸€äº›å¾ˆå¥½çš„åŠŸèƒ½ï¼Œå¦‚ä¾èµ–æ³¨å…¥å’Œå¼€ç®±å³ç”¨çš„æ¨¡å—ã€‚</p><p><strong>Spring JDBC</strong></p><p>springä¸­çš„JDBCä¸»è¦ä¸ºæ•°æ®åº“èµ„æºç®¡ç†å’Œé”™è¯¯å¤„ç†ï¼Œç®€åŒ–å¼€å‘äººå‘˜å¯¹æ•°æ®åº“çš„æ“ä½œã€‚å…¶ä¸­ï¼ŒJDBC Templateæ˜¯JDBCçš„æ ¸å¿ƒç±»ï¼Œä½¿ç”¨æ ¸å¿ƒç±»æä¾›çš„æ–¹æ³•æ¥æ“ä½œæ•°æ®åº“ã€‚</p><p><strong>Spring MVC</strong></p><p>Spring MVCå°†ä¼ ç»Ÿçš„æ¨¡å‹å±‚æ‹†åˆ†ä¸ºäº†ä¸šåŠ¡å±‚(Service)å’Œæ•°æ®è®¿é—®å±‚(DAO)ã€‚åœ¨ Service ä¸‹å¯ä»¥é€šè¿‡ Spring çš„å£°æ˜å¼äº‹åŠ¡æ“ä½œæ•°æ®è®¿é—®å±‚ï¼Œè€Œåœ¨ä¸šåŠ¡å±‚ä¸Šè¿˜å…è®¸æˆ‘ä»¬è®¿é—® NoSQLã€‚å…¶ä¸­ï¼ŒMå³æ¨¡å‹ï¼Œæ•°æ®ï¼ŒVä»£è¡¨è§†å›¾ï¼ŒCä¸ºæ§åˆ¶å™¨ï¼Œå°†ä¸åŒçš„æ•°æ®æ˜¾ç¤ºåœ¨ä¸åŒçš„è§†å›¾ä¸Šã€‚</p><p><strong>Spring Security</strong></p><p>Spring Securityçš„æ ¸å¿ƒåŠŸèƒ½ä¸ºè®¤è¯ï¼Œæˆæƒå’Œæ”»å‡»é˜²æŠ¤ã€‚æ ¸å¿ƒä¸ºä½¿ç”¨Basic Authentication Filterè¿‡æ»¤å™¨è®¤è¯ç”¨æˆ·èº«ä»½ã€‚</p><p><strong>Spring AOP</strong></p><p>ä¸æƒ³å¤šè¯´</p><p><strong>Spring ORM</strong></p><p>å¯¹è±¡å…³ç³»æ˜ å°„ï¼ŒORMæ˜¯é€šè¿‡ä½¿ç”¨æè¿°å¯¹è±¡å’Œæ•°æ®åº“ä¹‹é—´æ˜ å°„çš„å…ƒæ•°æ®ï¼Œå°†ç¨‹åºä¸­çš„å¯¹è±¡è‡ªåŠ¨æŒä¹…åŒ–åˆ°å…³ç³»æ•°æ®åº“ä¸­ã€‚</p><p><strong>Spring Test</strong></p><p>å¹¶ä¸é‡è¦</p><h4 id="Spring-Boot">Spring Boot</h4><p>Spring BootåŸºæœ¬ä¸Šæ˜¯Springæ¡†æ¶çš„æ‰©å±•ï¼Œå®ƒæ¶ˆé™¤äº†è®¾ç½®Springåº”ç”¨ç¨‹åºæ‰€éœ€çš„å¤æ‚ä¾‹è¡Œé…ç½®ã€‚</p><ul><li>é€šè¿‡starterè¿™ä¸€ä¸ªä¾èµ–ï¼Œä»¥ç®€åŒ–æ„å»ºå’Œå¤æ‚çš„åº”ç”¨ç¨‹åºé…ç½®</li><li>å¯ä»¥ç›´æ¥mainå‡½æ•°å¯åŠ¨ï¼ŒåµŒå…¥å¼webæœåŠ¡å™¨ï¼Œé¿å…äº†åº”ç”¨ç¨‹åºéƒ¨ç½²çš„å¤æ‚æ€§</li><li>Metricsåº¦é‡ï¼ŒHelth checkå¥åº·æ£€æŸ¥å’Œå¤–éƒ¨åŒ–é…ç½®</li><li>è‡ªåŠ¨åŒ–é…ç½®SpringåŠŸèƒ½</li></ul><h4 id="ä¸¤è€…çš„åŒºåˆ«">ä¸¤è€…çš„åŒºåˆ«</h4><h5 id="mavenä¾èµ–">mavenä¾èµ–</h5><p>Springåˆ›å»ºWebåº”ç”¨ç¨‹åºæ‰€éœ€çš„æœ€å°ä¾èµ–é¡¹ï¼š</p><pre class=" language-language-xml"><code class="language-language-xml">org.springframeworkspring-web5.1.0.RELEASEorg.springframeworkspring-webmvc5.1.0.RELEASE</code></pre><p>ä¸Springä¸åŒï¼ŒSpring Bootåªéœ€è¦ä¸€ä¸ªä¾èµ–é¡¹æ¥å¯åŠ¨å’Œè¿è¡ŒWebåº”ç”¨ç¨‹åºï¼š</p><pre class=" language-language-xml"><code class="language-language-xml">org.springframework.bootspring-boot-starter-web2.0.5.RELEASE</code></pre><p>åœ¨æ„å»ºæœŸé—´ï¼Œæ‰€æœ‰å…¶ä»–ä¾èµ–é¡¹å°†è‡ªåŠ¨æ·»åŠ åˆ°æœ€ç»ˆå½’æ¡£ä¸­ã€‚spring-boot-starter-webåŒ…è‡ªåŠ¨å¸®æˆ‘ä»¬å¼•å…¥äº†webæ¨¡å—å¼€å‘éœ€è¦çš„ç›¸å…³jaråŒ…ã€‚spring-boot-starter-webä¼šè‡ªåŠ¨å¼•å…¥spring-webmvcï¼Œspring-boot-starter-validationï¼Œspring-boot-starterï¼Œspring-boot-starter-jsonï¼Œspring-boot-starter-tomcat5ä¸ªåŸºç¡€ä¾èµ–ã€‚</p><h5 id="MVCé…ç½®">MVCé…ç½®</h5><p>é€šè¿‡å®ç°WebApplicationInitializerï¼Œåœ¨å…¶ä¸­å¯ä»¥æ·»åŠ servletï¼Œlistenerç­‰ï¼Œåœ¨åŠ è½½Webé¡¹ç›®çš„æ—¶å€™ä¼šåŠ è½½è¿™ä¸ªæ¥å£å®ç°ç±»ï¼Œä»è€Œèµ·åˆ°web.xmlç›¸åŒçš„ä½œç”¨</p><pre class=" language-language-java"><code class="language-language-java">package org.springframework.web; import java.lang.reflect.Modifier;import java.util.Iterator;import java.util.LinkedList;import java.util.List;import java.util.Set;import javax.servlet.ServletContainerInitializer;import javax.servlet.ServletContext;import javax.servlet.ServletException;import javax.servlet.annotation.HandlesTypes;import org.springframework.core.annotation.AnnotationAwareOrderComparator; @HandlesTypes({WebApplicationInitializer.class})public class SpringServletContainerInitializer implements ServletContainerInitializer {    public SpringServletContainerInitializer() {    }     public void onStartup(Set<Class<?>> webAppInitializerClasses, ServletContext servletContext) throws ServletException {        List<WebApplicationInitializer> initializers = new LinkedList();        Iterator var4;        if(webAppInitializerClasses != null) {            var4 = webAppInitializerClasses.iterator();             while(var4.hasNext()) {                Class<?> waiClass = (Class)var4.next();                if(!waiClass.isInterface() && !Modifier.isAbstract(waiClass.getModifiers()) && WebApplicationInitializer.class.isAssignableFrom(waiClass)) {                    try {                        initializers.add((WebApplicationInitializer)waiClass.newInstance());                    } catch (Throwable var7) {                        throw new ServletException("Failed to instantiate WebApplicationInitializer class", var7);                    }                }            }        }         if(initializers.isEmpty()) {            servletContext.log("No Spring WebApplicationInitializer types detected on classpath");        } else {            servletContext.log(initializers.size() + " Spring WebApplicationInitializers detected on classpath");            AnnotationAwareOrderComparator.sort(initializers);            var4 = initializers.iterator();             while(var4.hasNext()) {                WebApplicationInitializer initializer = (WebApplicationInitializer)var4.next();                initializer.onStartup(servletContext);            }         }    }}</code></pre><p>åˆ¤æ–­webAppInitializerClassesè¿™ä¸ªSetæ˜¯å¦ä¸ºç©ºã€‚å¦‚æœä¸ä¸ºç©ºçš„è¯ï¼Œæ‰¾åˆ°è¿™ä¸ªsetä¸­ä¸æ˜¯æ¥å£ï¼Œä¸æ˜¯æŠ½è±¡ç±»ï¼Œå¹¶ä¸”æ˜¯WebApplicationInitializeræ¥å£å®ç°ç±»çš„ç±»ï¼Œå°†å®ƒä»¬ä¿å­˜åˆ°listä¸­ã€‚å½“è¿™ä¸ªlistä¸ºç©ºçš„æ—¶å€™ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚ä¸ä¸ºç©ºçš„è¯å°±æŒ‰ç…§ä¸€å®šçš„é¡ºåºæ’åºï¼Œå¹¶å°†å®ƒä»¬æŒ‰ç…§ä¸€å®šçš„é¡ºåºå®ä¾‹åŒ–ã€‚è°ƒç”¨å…¶onStartupæ–¹æ³•æ‰§è¡Œã€‚</p><pre class=" language-language-java"><code class="language-language-java">public class MyWebAppInitializer implements WebApplicationInitializer {    @Override    public void onStartup(ServletContext container) {        AnnotationConfigWebApplicationContext context          = new AnnotationConfigWebApplicationContext();        context.setConfigLocation("com.test.package");        container.addListener(new ContextLoaderListener(context));        ServletRegistration.Dynamic dispatcher = container          .addServlet("dispatcher", new DispatcherServlet(context));        dispatcher.setLoadOnStartup(1);        dispatcher.addMapping("/");    }}</code></pre><p>æˆ‘ä»¬è¿˜éœ€è¦å°†@EnableWebMvcæ³¨è§£æ·»åŠ åˆ°@Configurationæ³¨è§£ç±»ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§†å›¾è§£æå™¨æ¥è§£æä»æ§åˆ¶å™¨è¿”å›çš„è§†å›¾ã€‚åœ¨ä½¿ç”¨è¯¥æ³¨è§£åé…ç½®ä¸€ä¸ªç»§æ‰¿äºWebMvcConfigurerAdapterçš„é…ç½®ç±»å³å¯é…ç½®å¥½Spring WebMVCã€‚</p><pre class=" language-language-java"><code class="language-language-java">@EnableWebMvc@Configurationpublic class ClientWebConfig implements WebMvcConfigurer {   @Bean   public ViewResolver viewResolver() {      InternalResourceViewResolver bean        = new InternalResourceViewResolver();      bean.setViewClass(JstlView.class);      bean.setPrefix("/WEB-INF/view/");      bean.setSuffix(".jsp");      return bean;   }}</code></pre><p>ä¸æ‰€æœ‰è¿™äº›ç›¸æ¯”ï¼Œä¸€æ—¦æˆ‘ä»¬æ·»åŠ äº†Spring boot web starterï¼ŒSpring Bootåªéœ€è¦ä¸€äº›å±æ€§æ¥ä½¿ä¸Šé¢çš„äº‹æƒ…æ­£å¸¸å·¥ä½œã€‚</p><pre class=" language-language-yml"><code class="language-language-yml">spring.mvc.view.prefix=/WEB-INF/jsp/spring.mvc.view.suffix=.jsp</code></pre><p>ä¸Šé¢çš„æ‰€æœ‰Springé…ç½®éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªåä¸ºauto-configurationçš„è¿›ç¨‹æ·»åŠ Boot web starteræ¥è‡ªåŠ¨åŒ…å«çš„ã€‚è¿™æ„å‘³ç€Spring Bootå°†è‡ªåŠ¨æ‰«æåº”ç”¨ç¨‹åºä¸­å­˜åœ¨çš„ä¾èµ–é¡¹ï¼Œå±æ€§å’Œbeanï¼Œå¹¶æ ¹æ®è¿™äº›å†…å®¹å¯ç”¨ç›¸åº”çš„é…ç½®ã€‚</p><p>SpringBoot è‡ªåŠ¨é…ç½®ä¸»è¦é€šè¿‡ <code>@EnableAutoConfiguration</code>, <code>@Conditional</code>, <code>@EnableConfigurationProperties</code> æˆ–è€… <code>@ConfigurationProperties</code> ç­‰å‡ ä¸ªæ³¨è§£æ¥è¿›è¡Œè‡ªåŠ¨é…ç½®å®Œæˆçš„ã€‚</p><p><code>@EnableAutoConfiguration</code> å¼€å¯è‡ªåŠ¨é…ç½®ï¼Œä¸»è¦ä½œç”¨å°±æ˜¯è°ƒç”¨ <code>Spring-Core</code> åŒ…é‡Œçš„ <code>loadFactoryNames()</code>ï¼Œå°† <code>autoconfig</code> åŒ…é‡Œçš„å·²ç»å†™å¥½çš„è‡ªåŠ¨é…ç½®åŠ è½½è¿›æ¥ã€‚</p><p><code>@Conditional</code> æ¡ä»¶æ³¨è§£ï¼Œé€šè¿‡åˆ¤æ–­ç±»è·¯å¾„ä¸‹æœ‰æ²¡æœ‰ç›¸åº”é…ç½®çš„ <code>jar</code> åŒ…æ¥ç¡®å®šæ˜¯å¦åŠ è½½å’Œè‡ªåŠ¨é…ç½®è¿™ä¸ªç±»ã€‚</p><p><code>@EnableConfigurationProperties</code> çš„ä½œç”¨å°±æ˜¯ï¼Œç»™è‡ªåŠ¨é…ç½®æä¾›å…·ä½“çš„é…ç½®å‚æ•°ï¼Œåªéœ€è¦å†™åœ¨ <code>application.properties</code> ä¸­ï¼Œå°±å¯ä»¥é€šè¿‡æ˜ å°„å†™å…¥é…ç½®ç±»çš„ <code>POJO</code> å±æ€§ä¸­</p><h5 id="æ¨¡æ¿å¼•æ“">æ¨¡æ¿å¼•æ“</h5><p>åœ¨Springä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºè§†å›¾è§£æå™¨æ·»åŠ   thymeleaf-spring5ä¾èµ–é¡¹å’Œä¸€äº›é…ç½®</p><pre class=" language-language-java"><code class="language-language-java">@Configuration@EnableWebMvcpublic class MvcWebConfig implements WebMvcConfigurer {    @Autowired    private ApplicationContext applicationContext;    @Bean    public SpringResourceTemplateResolver templateResolver() {        SpringResourceTemplateResolver templateResolver = new SpringResourceTemplateResolver();        templateResolver.setApplicationContext(applicationContext);        templateResolver.setPrefix("/WEB-INF/views/");        templateResolver.setSuffix(".html");        return templateResolver;    }    @Bean    public SpringTemplateEngine templateEngine() {        SpringTemplateEngine templateEngine = new SpringTemplateEngine();        templateEngine.setTemplateResolver(templateResolver());        templateEngine.setEnableSpringELCompiler(true);        return templateEngine;    }    @Override    public void configureViewResolvers(ViewResolverRegistry registry) {        ThymeleafViewResolver resolver = new ThymeleafViewResolver();        resolver.setTemplateEngine(templateEngine());        registry.viewResolver(resolver);    }</code></pre><p>ApplicationContextæ˜¯springç»§BeanFactoryä¹‹å¤–çš„å¦ä¸€ä¸ªæ ¸å¿ƒæ¥å£æˆ–å®¹å™¨ï¼Œå…è®¸å®¹å™¨é€šè¿‡åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ç¯å¢ƒåˆ›å»ºã€è·å–ã€ç®¡ç†beanã€‚ä¸ºåº”ç”¨ç¨‹åºæä¾›é…ç½®çš„ä¸­å¤®æ¥å£ã€‚</p><p>Spring Boot åªéœ€è¦spring-boot-starter-thymeleafçš„ä¾èµ–é¡¹ æ¥å¯ç”¨Webåº”ç”¨ç¨‹åºä¸­çš„Thymeleafæ”¯æŒã€‚ä¸€æ—¦ä¾èµ–å…³ç³»æ·»åŠ æˆåŠŸåï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†æ¨¡æ¿æ·»åŠ åˆ°src / main / resources / templatesæ–‡ä»¶å¤¹ä¸­ï¼ŒSpring Bootå°†è‡ªåŠ¨æ˜¾ç¤ºå®ƒä»¬ã€‚å…·ä½“è¿‡ç¨‹ä¹Ÿå‚è€ƒä¸Šæ–¹çš„è‡ªåŠ¨é…ç½®ã€‚</p><h5 id="å®‰å…¨é…ç½®">å®‰å…¨é…ç½®</h5><p>Springéœ€è¦æ ‡å‡†çš„  spring-security-webå’Œspring-security-config  ä¾èµ–é¡¹æ¥åœ¨åº”ç”¨ç¨‹åºä¸­è®¾ç½®Securityã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªæ‰©å±•WebSecurityConfigurerAdapterçš„ç±»ï¼Œå¹¶ä½¿ç”¨@EnableWebSecurityæ³¨è§£</p><pre class=" language-language-java"><code class="language-language-java">@Configuration@EnableWebSecuritypublic class CustomWebSecurityConfigurerAdapter extends WebSecurityConfigurerAdapter {    @Autowired    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {        auth.inMemoryAuthentication()          .withUser("user1")            .password(passwordEncoder()            .encode("user1Pass"))          .authorities("ROLE_USER");    }    @Override    protected void configure(HttpSecurity http) throws Exception {        http.authorizeRequests()          .anyRequest().authenticated()          .and()          .httpBasic();    }    @Bean    public PasswordEncoder passwordEncoder() {        return new BCryptPasswordEncoder();    }}</code></pre><p>WebSecurityConfigurerAdapter ç±»æ˜¯ä¸ªé€‚é…å™¨, åœ¨é…ç½®çš„æ—¶å€™,éœ€è¦æˆ‘ä»¬è‡ªå·±å†™ä¸ªé…ç½®ç±»å»ç»§æ‰¿ä»–,ç„¶åç¼–å†™è‡ªå·±æ‰€ç‰¹æ®Šéœ€è¦çš„é…ç½®ã€‚</p><p>Spring Bootä¹Ÿéœ€è¦è¿™äº›ä¾èµ–é¡¹æ‰èƒ½ä½¿å…¶å·¥ä½œã€‚ä½†æ˜¯æˆ‘ä»¬åªéœ€è¦å®šä¹‰spring-boot-starter-securityçš„ä¾èµ–å…³ç³»ï¼Œå®ƒä¼šè‡ªåŠ¨å°†æ‰€æœ‰ç›¸å…³çš„ä¾èµ–é¡¹æ·»åŠ åˆ°ç±»è·¯å¾„ä¸­ã€‚</p><h5 id="åº”ç”¨å¼•å¯¼Application-Bootstrap">åº”ç”¨å¼•å¯¼Application Bootstrap</h5><p><strong>web.xmlå¼•å¯¼æ–¹æ³•</strong></p><ol><li>Servletå®¹å™¨ï¼ˆæœåŠ¡å™¨ï¼‰è¯»å–web.xml</li><li>web.xmlä¸­å®šä¹‰çš„DispatcherServletç”±å®¹å™¨å®ä¾‹åŒ–</li><li>DispatcherServleté€šè¿‡è¯»å–WEB-INF / {servletName} -servlet.xmlæ¥åˆ›å»ºWebApplicationContext</li><li>æœ€åï¼ŒDispatcherServletæ³¨å†Œåœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„bean</li></ol><p><strong>servlet 3+å¼•å¯¼æ–¹æ³•</strong></p><p><strong>åœ¨webå®¹å™¨å¯åŠ¨æ—¶ä¸ºæä¾›ç»™ç¬¬ä¸‰æ–¹ç»„ä»¶æœºä¼šåšä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œï¼Œä¾‹å¦‚æ³¨å†Œservletæˆ–è€…filtesç­‰ï¼Œservletè§„èŒƒä¸­é€šè¿‡ServletContainerInitializerå®ç°æ­¤åŠŸèƒ½ã€‚æ¯ä¸ªæ¡†æ¶è¦ä½¿ç”¨ServletContainerInitializerå°±å¿…é¡»åœ¨å¯¹åº”çš„jaråŒ…çš„META-INF/services ç›®å½•åˆ›å»ºä¸€ä¸ªåä¸ºjavax.servlet.ServletContainerInitializerçš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹æŒ‡å®šå…·ä½“çš„ServletContainerInitializerå®ç°ç±»ï¼Œé‚£ä¹ˆï¼Œå½“webå®¹å™¨å¯åŠ¨æ—¶å°±ä¼šè¿è¡Œè¿™ä¸ªåˆå§‹åŒ–å™¨åšä¸€äº›ç»„ä»¶å†…çš„åˆå§‹åŒ–å·¥ä½œã€‚</strong></p><ol><li>å®¹å™¨æœç´¢å®ç°ServletContainerInitializerçš„ ç±»å¹¶æ‰§è¡Œ</li><li>SpringServletContainerInitializeræ‰¾åˆ°å®ç°ç±»WebApplicationInitializerçš„å­ç±»</li><li>WebApplicationInitializeråˆ›å»ºä¼šè¯ä½¿ç”¨XMLæˆ–ä¸Šä¸‹æ–‡@Configurationç±»</li><li>WebApplicationInitializeråˆ›å»ºDispatcherServletï¼Œä½¿ç”¨å…ˆå‰åˆ›å»ºçš„ä¸Šä¸‹æ–‡ã€‚</li></ol><p><strong>Spring Bootå¼•å¯¼</strong></p><p>è¯¦æƒ…å‚è€ƒSpring Bootå¯åŠ¨è¿‡ç¨‹çš„æ–‡ç« ã€‚</p><p><strong>å‚è€ƒæ–‡ç« ï¼š<a href="https://mp.weixin.qq.com/s/0qk2kaCKLdAViVzsw401sg" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/0qk2kaCKLdAViVzsw401sg</a></strong></p><h3 id="ShiroçŸ¥è¯†ç‚¹">ShiroçŸ¥è¯†ç‚¹</h3><p>shiroå’Œæ ¸å¿ƒæ¦‚å¿µä¸ºsubjectï¼ŒsecurityManagerå’Œrealmã€‚subjectå³ä¸ºä¸å½“å‰åº”ç”¨äº¤äº’çš„ä¸»ä½“ï¼Œä¸»ä½“å°†äº¤äº’è¯·æ±‚å§”æ‰˜ç»™securityManagerã€‚securityManageré€šè¿‡realmåˆ¤æ–­å½“å‰ç”¨æˆ·è®¤è¯ä¿¡æ¯ï¼Œå¹¶æˆæƒç”¨æˆ·çš„èº«ä»½å’Œè§’è‰²ä¿¡æ¯ï¼Œåˆ¤æ–­æ˜¯å¦å…·æœ‰ç›¸å…³æƒé™ã€‚</p><h4 id="è‡ªå®šä¹‰relam">è‡ªå®šä¹‰relam</h4><p>AuthorizingRealmä¸­çš„doGetAuthenticationInfoç”¨äºèº«ä»½éªŒè¯ï¼ŒdoGetAuthorizationInfoç”¨äºæˆæƒã€‚</p><h4 id="èº«ä»½è®¤è¯è¿‡ç¨‹">èº«ä»½è®¤è¯è¿‡ç¨‹</h4><p>ä¸»ä½“subjectè°ƒç”¨subject.login(token)ï¼Œå°†è¯·æ±‚å§”æ‰˜ç»™securityManagerã€‚</p><p>Authenticatorè·å–tokenä¿¡æ¯å¹¶ä¼ å…¥realmï¼Œä»realmè·å–èº«ä»½éªŒè¯ä¿¡æ¯ã€‚</p><p>realmæ ¹æ®åŠ å¯†æ–¹å¼æŸ¥è¯¢æ•°æ®åº“è¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯æˆåŠŸè¿”å›æˆåŠŸä¿¡æ¯ã€‚å¯ä»¥å•ä¸ªrealméªŒè¯ï¼Œä¹Ÿå¯ä»¥å¤šrealméªŒè¯ï¼Œæ ¹æ®ä¸åŒç­–ç•¥åˆ¤æ–­æ˜¯å¦éœ€è¦å¤šä¸ªrealmåŒæ—¶éªŒè¯æˆåŠŸã€‚</p><p>doGetAuthenticationInfoè·å–èº«ä»½éªŒè¯ç›¸å…³ä¿¡æ¯ï¼šé¦–å…ˆæ ¹æ®ä¼ å…¥çš„ç”¨æˆ·åè·å–Userä¿¡æ¯ï¼›å¦‚æœuserä¸ºç©ºï¼Œé‚£ä¹ˆæŠ›å‡ºæ²¡æ‰¾åˆ°è´¦å·å¼‚å¸¸UnknownAccountExecptionï¼›å¦‚æœuseræ‰¾åˆ°ä½†å´è¢«é”å®šäº†æŠ›å‡ºé”å®šå¼‚å¸¸LockedAccountExceptionï¼›æœ€åç”ŸæˆAuthenticationInfoä¿¡æ¯ï¼Œäº¤ç»™é—´æ¥çˆ¶ç±»AuthenticatingRealmä½¿ç”¨CredentialsMatcherè¿›è¡Œåˆ¤æ–­å¯†ç æ˜¯å¦åŒ¹é…ï¼Œå¦‚æœä¸åŒ¹é…å°†æŠ›å‡ºå¯†ç é”™è¯¯å¼‚å¸¸ä¿¡æ¯IncorrectCredentialsExceptionï¼›å¦‚æœå¯†ç é‡è¯•æ¬¡æ•°å¤ªå¤šå°†æŠ›å‡ºè¶…å‡ºé‡è¯•æ¬¡æ•°å¼‚å¸¸ExcessiveAttemptsExceptionï¼›åœ¨ç»„è£…SimpleAuthenticationInfoä¿¡æ¯æ—¶ï¼Œéœ€è¦ä¼ å…¥ï¼šèº«ä»½ä¿¡æ¯ï¼ˆç”¨æˆ·åï¼‰ã€å‡­æ®ï¼ˆå¯†æ–‡å¯†ç ï¼‰ã€ç›ï¼ˆusername+saltï¼‰ï¼ŒCredentialsMatcherä½¿ç”¨ç›åŠ å¯†ä¼ å…¥çš„æ˜æ–‡å¯†ç å’Œæ­¤å¤„çš„å¯†æ–‡å¯†ç è¿›è¡ŒåŒ¹é…ã€‚</p><h4 id="æˆæƒè¿‡ç¨‹">æˆæƒè¿‡ç¨‹</h4><p>èº«ä»½éªŒè¯æˆåŠŸï¼Œé€šè¿‡Authorizationè¿›è¡Œæˆæƒã€‚å¯ä»¥åœ¨åå°ä½¿ç”¨é€»è¾‘ä»£ç åˆ¤æ–­æ˜¯å¦å…·æœ‰æƒé™å’Œè§’è‰²ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨è§£ç»™æ¥å£æˆæƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‰å°æ ‡ç­¾çš„å½¢å¼è¿›è¡Œæˆæƒã€‚</p><p>åŒæ—¶å¯ä»¥åœ¨shiroçš„é…ç½®æ–‡ä»¶ä¸­æ”¾å¼€ç™»å½•æ¥å£å’Œé™æ€èµ„æºçš„è®¿é—®æƒé™ã€‚</p><p>doGetAuthorizationInfoè·å–æˆæƒä¿¡æ¯ï¼šPrincipalCollectionæ˜¯ä¸€ä¸ªèº«ä»½é›†åˆï¼Œå› ä¸ºåªç”¨åˆ°äº†ä¸€ä¸ªRealmï¼Œæ‰€ä»¥ç›´æ¥è°ƒç”¨getPrimaryPrincipalå¾—åˆ°ä¹‹å‰ä¼ å…¥çš„ç”¨æˆ·åå³å¯ï¼›ç„¶åæ ¹æ®ç”¨æˆ·åè°ƒç”¨UserServiceæ¥å£è·å–è§’è‰²åŠæƒé™ä¿¡æ¯ã€‚</p><h4 id="Session-Manager">Session Manager</h4><p>Session Manageræ˜¯securityManagerçš„çˆ¶ç±»ï¼Œç»´æŠ¤subjectä¸»ä½“çš„ç›¸å…³ä¿¡æ¯ã€‚Session managerä¸€èˆ¬å°†ä¼šè¯å§”æ‰˜ä¹Ÿå°±æ˜¯ç»§æ‰¿çš„æ–¹å¼ç»™securityManagerè¿›è¡Œå¤„ç†ã€‚</p><h3 id="JWTçŸ¥è¯†ç‚¹">JWTçŸ¥è¯†ç‚¹</h3><h4 id="jwtå’Œsecurityçš„å¯¹æ¯”">jwtå’Œsecurityçš„å¯¹æ¯”</h4><p>jwtä½¿ç”¨tokenéªŒè¯ï¼Œjwtæ— éœ€åœ¨æœåŠ¡å™¨ç«¯å­˜å‚¨ç”¨æˆ·æ•°æ®ï¼Œå‡è½»æœåŠ¡ç«¯å‹åŠ›ã€‚securityæ˜¯å°†ç”¨æˆ·æ•°æ®ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ã€‚</p><p>jwtæ˜¯å¯ä»¥è·¨è¯­è¨€çš„ï¼Œä¸æƒ³securityé’ˆå¯¹æŸä¸ªè¯­è¨€è¿›è¡Œå¼€å‘ä¸€ä¸ªé€‚ç”¨çš„æ¡†æ¶ã€‚</p><p>éšä¹‹è€Œæ¥çš„å°±æ˜¯å¯¹tokençš„æ§åˆ¶é—®é¢˜ã€‚</p><h4 id="å¦‚ä½•è§£å†³tokenæ³¨é”€é—®é¢˜">å¦‚ä½•è§£å†³tokenæ³¨é”€é—®é¢˜</h4><p>å‡å°‘tokençš„æœ‰æ•ˆæœŸï¼Œä½¿tokenå°½å¿«å¤±æ•ˆã€‚</p><p>ä½¿ç”¨redisï¼Œå‰ç«¯å‘èµ·è¯·æ±‚æ—¶ï¼Œæºå¸¦çš„jwtæ•°æ®ä¿¡æ¯ï¼ŒæŠŠä¿¡æ¯ä¸­çš„å”¯ä¸€çš„idå­˜åˆ°redisé‡Œé¢ï¼ŒéªŒè¯çš„æ—¶å€™æŸ¥è¯¢redisä¸­æ˜¯å¦æœ‰è¿™ä¸ªidï¼Œåœ¨tokenæ³¨é”€çš„æ—¶å€™åˆ é™¤redisé‡Œé¢çš„idå³å¯ã€‚</p><h4 id="æ€ä¹ˆè§£å†³tokenå¤±æ•ˆåçš„ç»­ç­¾é—®é¢˜">æ€ä¹ˆè§£å†³tokenå¤±æ•ˆåçš„ç»­ç­¾é—®é¢˜</h4><p>åœ¨ç”¨æˆ·ç™»å½•éªŒè¯çš„æ—¶å€™æ ¹æ®ç›¸å…³æ ‡å‡†åˆ¤æ–­å½“å‰çš„tokenæ˜¯å¦è¦è¿‡æœŸã€‚å¦‚æœtokenå¿«è¦è¿‡æœŸï¼Œé‡æ–°ç”Ÿæˆtokenå°±å¯ä»¥ã€‚</p><h4 id="è§£å†³cookieè¢«ç›—ç”¨é—®é¢˜">è§£å†³cookieè¢«ç›—ç”¨é—®é¢˜</h4><p>å¦‚æœæ”¶åˆ°XSSæ”»å‡»çš„è¯ï¼Œè®¾ç½®ä¸€ä¸‹cookieçš„httponlyä¸ºtrueï¼Œé˜²æ­¢è„šæœ¬æ”»å‡»ã€‚</p><p>å¯¹äºæŠ“åŒ…çš„è¯ä½¿ç”¨httpsåè®®å³å¯ã€‚</p><p>å¯¹äºCSRFæ”»å‡»ï¼Œåœ¨è¯·æ±‚å¤´ä¸­åŠ ä¸ªéšæœºç ã€‚</p><h4 id="cookieè¢«ç¦ç”¨æ€ä¹ˆåŠ">cookieè¢«ç¦ç”¨æ€ä¹ˆåŠ</h4><p>åˆ¤æ–­ä¸€ä¸‹ç”¨æˆ·çš„cookieæ˜¯å¦ç¦ç”¨ï¼Œå¦‚æœç¦ç”¨æç¤ºç”¨æˆ·æ‰“å¼€å³å¯ã€‚</p><h4 id="è§£å†³cookieè¢«ç¯¡æ”¹é—®é¢˜">è§£å†³cookieè¢«ç¯¡æ”¹é—®é¢˜</h4><p>cookieè¢«ç¯¡æ”¹ï¼Œä½†æ˜¯jwtéªŒè¯æ˜¯é€šè¿‡ç­¾åè¿›è¡ŒéªŒè¯çš„ï¼Œç­¾åä¸å¯¹ï¼Œåå°çš„jwtéªŒè¯å°±é€šè¿‡ä¸äº†ã€‚</p><h4 id="æœåŠ¡ç«¯å¾®æœåŠ¡åœ°å€ä¸å°å¿ƒæš´éœ²äº†ï¼Œç”¨æˆ·å°±å¯ä»¥ç»•è¿‡ç½‘å…³ï¼Œç›´æ¥è®¿é—®å¾®æœåŠ¡ï¼Œæ€ä¹ˆåŠ">æœåŠ¡ç«¯å¾®æœåŠ¡åœ°å€ä¸å°å¿ƒæš´éœ²äº†ï¼Œç”¨æˆ·å°±å¯ä»¥ç»•è¿‡ç½‘å…³ï¼Œç›´æ¥è®¿é—®å¾®æœåŠ¡ï¼Œæ€ä¹ˆåŠ</h4><p>ä¸€èˆ¬æ¥è¯´å¾®æœåŠ¡éƒ½æ˜¯ä½¿ç”¨nginxä»£ç†çš„ï¼Œä¸€èˆ¬æš´éœ²çš„éƒ½æ˜¯nginxçš„åœ°å€ã€‚</p><p>å¦‚æœæ‹…å¿ƒæ¥å£æš´éœ²ï¼Œé‚£ä¹Ÿå¯ä»¥åœ¨å¾®æœåŠ¡ä¹‹é—´é€šä¿¡ä¹Ÿä½¿ç”¨jwtéªŒè¯å³å¯ã€‚</p><h4 id="jwtæµç¨‹åˆ†æ">jwtæµç¨‹åˆ†æ</h4><p>åœ¨å‰ç«¯ï¼Œjwtå¤´éƒ¨è®°å½•ä¿¡æ¯å’ŒåŠ å¯†æ–¹å¼ï¼Œç„¶åè¿›è¡Œç¼–ç ã€‚è½½è·è®°å½•tokençš„å¯¹è±¡å’Œæ—¶é—´ç­‰ä¿¡æ¯ï¼Œä¹Ÿè¿›è¡Œç¼–ç ã€‚ä»¥å¥å·æ‹¼æ¥ä¸¤éƒ¨åˆ†çš„ç¼–ç å†…å®¹ä½¿ç”¨å¯†é’¥å’Œç®—æ³•è¿›è¡ŒåŠ å¯†å½¢æˆç­¾åã€‚æœåŠ¡å™¨ç«¯ä»¥ç›¸åŒçš„æ–¹å¼å³ç›¸åŒçš„å¯†ç å’Œç®—æ³•è¿›è¡Œç­¾åå¾—åˆ°ä¸€ç›´çš„ç»“æœéªŒè¯æˆåŠŸè¿”å›å®¢æˆ·ç«¯jwtä¿¡æ¯ï¼Œå®¢æˆ·ç«¯è¯·æ±‚æ¥å£æ—¶æºå¸¦jwtä¿¡æ¯å°±å¯ä»¥äº†ã€‚</p><h3 id="redisçŸ¥è¯†ç‚¹">redisçŸ¥è¯†ç‚¹</h3><h4 id="redisçš„ç‰¹ç‚¹">redisçš„ç‰¹ç‚¹</h4><p>redisçš„æ•°æ®å­˜åœ¨äºå†…å­˜ä¹‹ä¸­ï¼Œå› æ­¤redisçš„è¯»å†™é€Ÿåº¦å¾ˆå¿«ï¼Œæ‰€ä»¥å¸¸ç”¨ä½œç¼“å­˜ã€‚</p><p>æ”¯æŒAOFå’ŒRDBä¸¤ç§æ•°æ®æŒä¹…åŒ–æ–¹å¼ã€‚</p><p>æ”¯æŒäº‹åŠ¡ï¼Œredisçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ã€‚</p><p>æ”¯æŒä¸»ä»å¤åˆ¶ï¼Œä¸»æœºå¯ä»¥å°†æ•°æ®åŒæ­¥åˆ°ä»æœºã€‚</p><p>redisæ•°æ®å­˜åœ¨äºå†…å­˜ä¸­ï¼Œæ‰€ä»¥ä¸é€‚åˆæµ·é‡æ•°æ®çš„è¯»å†™ã€‚</p><p>rediså¯¹æ‰©å®¹çš„å…¼å®¹æ€§è¾ƒå·®ã€‚</p><h4 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨redis">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨redis</h4><p>redisæ˜¯è¿è¡Œåœ¨å†…å­˜çš„ï¼Œå½“ä¸€ä¸ªé¡¹ç›®å¤šæˆ·å‘èµ·å¤šæ¬¡è¯·æ±‚è®¿é—®æ•°æ®åº“æ—¶ï¼Œè®¿é—®é€Ÿåº¦å¾ˆæ…¢ï¼Œå¦‚æœå°†æ•°æ®åº“çš„æ•°æ®æ”¾åœ¨redisä¸­ç”¨ä½œç¼“å­˜ï¼Œé‚£ä¹ˆç”¨æˆ·è®¿é—®redisä¸­çš„æ•°æ®å³å¯ã€‚å½“æ•°æ®åº“çš„æ•°æ®å˜æ›´æ—¶ï¼ŒåŒæ­¥ä¸€ä¸‹redisä¸­çš„æ•°æ®å³å¯ã€‚åŠ å¿«è®¿é—®é€Ÿåº¦ï¼Œæä¾›ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p><p>å½“ä½¿ç”¨ç”¨æˆ·è¾ƒå¤šæ—¶ï¼Œå¤šç”¨æˆ·åŒæ—¶è®¿é—®æ•°æ®åº“ï¼Œæ•°æ®åº“çš„å‹åŠ›è¾ƒå¤§ï¼Œå¯èƒ½æ‰¿å—ä¸ä½ï¼Œè€Œè¿è¡Œåœ¨å†…å­˜ä¸­çš„redisæ”¯æŒé«˜å¹¶å‘ï¼Œå› æ­¤ä½¿ç”¨rediså¯ä»¥å‡è½»æ•°æ®åº“çš„å‹åŠ›ï¼Œä¹Ÿå¯ä»¥æå‡ç³»ç»Ÿæ€§èƒ½ã€‚</p><p>rediså±äºåˆ†å¸ƒå¼ç¼“å­˜ï¼Œå¤šå®ä¾‹å…¬ç”¨ä¸€ä»½ç¼“å­˜æ•°æ®ï¼Œç¼“å­˜å…·æœ‰ä¸€è‡´æ€§ã€‚</p><h4 id="redisä¸ºä»€ä¹ˆè®¿é—®é€Ÿåº¦å¿«">redisä¸ºä»€ä¹ˆè®¿é—®é€Ÿåº¦å¿«</h4><p>redisè¿è¡Œåœ¨å†…å­˜ä¹‹ä¸­æ‰€ä»¥è®¿é—®é€Ÿåº¦å¿«ã€‚</p><p>redisä½¿ç”¨çš„æ˜¯å•çº¿ç¨‹ï¼Œä¸å­˜åœ¨çº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚</p><p>æ•°æ®ç»“æ„ç®€å•ï¼Œæœ‰stringï¼Œlistï¼Œsetï¼Œzsetï¼Œhashäº”ç§æ•°æ®ç»“æ„ã€‚ioé‡‡ç”¨å¤šè·¯å¤ç”¨æ–¹å¼ã€‚</p><h4 id="redisçš„åº”ç”¨åœºæ™¯">redisçš„åº”ç”¨åœºæ™¯</h4><p>ç”¨ä½œè®¡æ•°å™¨ï¼Œåœ¨æ–°é—»ä¸­ï¼Œå¯¹äºçƒ­é—¨æ–°é—»çš„ç‚¹å‡»ï¼Œå¯ä»¥ä½¿ç”¨redisçš„stringè¿›è¡Œè®°å½•ï¼Œé€Ÿåº¦å¿«ã€‚</p><p>ç¼“å­˜ï¼Œå¯¹äºç»å¸¸è®¿é—®åˆ°çš„çƒ­ç‚¹æ•°æ®ï¼Œå¯ä»¥åŒæ­¥åˆ°redisä¸­ï¼Œå‡è½»æ•°æ®åº“çš„å‹åŠ›ã€‚</p><p>å­˜å‚¨ä¼šè¯ä¿¡æ¯ï¼Œä½¿ç”¨jwtçš„æ—¶å€™ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨jwtçš„å”¯ä¸€idï¼Œåœ¨ç™»å½•é€»è¾‘ä¸­è¿›è¡Œåˆ¤æ–­ï¼Œæ³¨é”€tokenæ—¶åˆ é™¤redisä¸­çš„idå°±è¡Œã€‚</p><p>å¯¹äºäº¤é›†å¹¶é›†æ•°æ®ï¼ŒæŸ¥æ‰¾å…±åŒå¥½å‹æˆ–è€…ç¬”è®°å…±åŒçš„åˆ†ç±»ï¼Œå¯ä»¥ä½¿ç”¨redisçš„seté›†åˆå®ç°ã€‚</p><h4 id="redisçš„æŒä¹…åŒ–">redisçš„æŒä¹…åŒ–</h4><p>æŒä¹…åŒ–å°±æ˜¯å°†æ•°æ®æŒä¹…åŒ–åˆ°ç¡¬ç›˜ä¹‹ä¸­ï¼Œé˜²æ­¢å®•æœºä¹‹åçš„æ•°æ®ä¸¢å¤±ã€‚redisæä¾›äº†AOFå’ŒRDBä¸¤ç§æ•°æ®æŒä¹…åŒ–æ–¹å¼ã€‚</p><p>RDBæ˜¯redisçš„é»˜è®¤çš„æŒä¹…åŒ–æ–¹å¼ï¼ŒæŒ‰ç…§æ—¶é—´æŒä¹…åŒ–æ•°æ®ï¼Œæ—¶é—´å¯åœ¨é…ç½®ä¸­è‡ªå·±å®šä¹‰ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ã€‚ä¸”æŒä¹…åŒ–æ—¶ä¸»è¿›ç¨‹å¤„ç†å‘½ä»¤ï¼Œå­è¿›ç¨‹è´Ÿè´£ioæ“ä½œï¼Œä¿è¯äº†redisçš„é«˜æ€§èƒ½ã€‚ä½†æ˜¯å› ä¸ºæ˜¯æŒ‰ç…§æ—¶é—´è¿›è¡ŒæŒä¹…åŒ–ï¼Œä¼šå‘ç”Ÿæ•°æ®ä¸¢å¤±ã€‚</p><p>AOFå°†Redisæ‰§è¡Œçš„æ¯æ¬¡å†™å‘½ä»¤è®°å½•åˆ°å•ç‹¬çš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œå½“é‡å¯Redisä¼šé‡æ–°å°†æŒä¹…åŒ–çš„æ—¥å¿—ä¸­æ–‡ä»¶æ¢å¤æ•°æ®ã€‚AOFé€šè¿‡ append æ¨¡å¼å†™æ–‡ä»¶ï¼Œå³ä½¿ä¸­é€”æœåŠ¡å™¨å®•æœºï¼Œå¯ä»¥é€šè¿‡ redis-check-aof å·¥å…·è§£å†³æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚æ•°æ®å®‰å…¨ï¼Œæ¯è¿›è¡Œä¸€æ¬¡ å‘½ä»¤æ“ä½œå°±è®°å½•åˆ° aof æ–‡ä»¶ä¸­ä¸€æ¬¡ã€‚AOFçš„æ–‡ä»¶è¾ƒå¤§ï¼Œä¸”æ•ˆç‡è¾ƒä½ã€‚</p><p>é€šå¸¸åº”è¯¥åŒæ—¶ä½¿ç”¨AOFå’ŒRDBä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼Œå› ä¸ºAOFçš„æŒä¹…åŒ–æ–¹å¼æ•°æ®è¾ƒä¸ºå®Œæ•´ï¼Œä½†æ˜¯ä½¿ç”¨RDBçš„æŒä¹…åŒ–æ–‡ä»¶å¯ä»¥ä½œä¸ºæ•°æ®åº“çš„å¤‡ä»½æ¥ä½¿ç”¨ï¼Œå› ä¸ºä»–æ¢å¤è¾ƒå¿«ã€‚</p><h4 id="redisè¿‡æœŸé”®çš„åˆ é™¤ç­–ç•¥">redisè¿‡æœŸé”®çš„åˆ é™¤ç­–ç•¥</h4><p>ä¸€èˆ¬æ¥è¯´å†…å­˜è¾ƒå¤§æˆ–è€…å¯¹å†…å­˜çš„å ç”¨æ€§èƒ½å½±å“ä¸å¤§çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æƒ°æ€§è¿‡æœŸï¼Œåœ¨è®¿é—®keyçš„æ—¶å€™åœ¨åˆ¤æ–­å½“å‰çš„keyæ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸçš„è¯å°±åˆ é™¤ã€‚</p><p>å¦‚æœæ•°æ®è¾ƒå¤šï¼Œä¼šä¸¥é‡å ç”¨å†…å­˜ï¼Œè€ƒè™‘å®šæœŸè¿‡æœŸï¼Œæ¯éš”ä¸€æ®µæ—¶é—´æ‰«ækeyï¼Œç„¶åæ¸…æ¥šè¿‡æœŸçš„keyå³å¯ã€‚</p><p>ä¸€èˆ¬ä¸ä½¿ç”¨å®šæ—¶è¿‡æœŸï¼Œå› ä¸ºä¼šæµªè´¹cpuèµ„æºï¼Œå½±å“redisæ€§èƒ½ã€‚</p><h4 id="redisçš„å†…å­˜æ·˜æ±°">redisçš„å†…å­˜æ·˜æ±°</h4><p>å½“redisä¸­çš„æ•°æ®æ»¡ï¼Œè€Œæ•°æ®åº“çš„æ•°æ®ä»ç„¶åœ¨æŒç»­å¢åŠ æ—¶ã€‚</p><p>å¦‚æœç³»ç»Ÿçš„éœ€æ±‚æ˜¯å½“å‰redisä¸­çš„æ•°æ®å·²ç»æ»¡è¶³ä½¿ç”¨ï¼Œåˆ™ä¸è¿›è¡Œæ·˜æ±°ï¼Œä¸æ’å…¥æ–°çš„æ•°æ®åˆ°redisä¸­ã€‚</p><p>å¦‚æœåƒæ–°é—»éœ€è¦å®æ—¶æ›´æ–°çƒ­é—¨æ–°é—»çš„è¯ï¼Œå¯ä»¥å°†å½“å‰å†…å­˜ä¸­ä¸å¸¸ä½¿ç”¨çš„keyè¿›è¡Œåˆ é™¤ã€‚</p><p>è€Œç±»ä¼¼äºæ™®é€šçš„ç”¨æˆ·ä¿¡æ¯ï¼Œä¸å­˜åœ¨ä¼˜å…ˆçº§é—®é¢˜ï¼Œä¹Ÿå¯ä»¥éšæœºåˆ é™¤keyã€‚</p><h4 id="redisçš„å†…å­˜ä¼˜åŒ–">redisçš„å†…å­˜ä¼˜åŒ–</h4><p>å¯¹äºredisï¼Œä¸åº”æŒ‰ç…§å¹³å¸¸é¢å‘å¯¹è±¡çš„ä¹ æƒ¯ä½¿ç”¨key-valueçš„å½¢å¼å­˜å‚¨æ•°æ®ï¼Œå ç”¨çš„ç©ºé—´ä¼šå¾ˆå¤§ã€‚åœ¨redisä¸­ï¼Œhashå ç”¨çš„ç©ºé—´è¾ƒå°ï¼Œæ‰€ä»¥åº”å°†ä¿¡æ¯å­˜å‚¨åˆ°hashä¸­ã€‚</p><h4 id="redisäº‹åŠ¡">redisäº‹åŠ¡</h4><p>äº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šåºåˆ—åŒ–ã€æŒ‰é¡ºåºåœ°æ‰§è¡Œã€‚äº‹åŠ¡åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯å‘é€æ¥çš„å‘½ä»¤è¯·æ±‚æ‰€æ‰“æ–­ã€‚redisçš„äº‹åŠ¡ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p>redisä½¿ç”¨multiäº‹åŠ¡å¼€å§‹ï¼Œç„¶åå‘½ä»¤å…¥é˜Ÿï¼Œç„¶åexecæ‰§è¡Œã€‚äº‹åŠ¡æ‰§è¡Œæ—¶æœåŠ¡ç«¯æ”¶åˆ°æœ‰EXECã€DISCARDã€WATCHã€MULTIä¹‹å¤–çš„è¯·æ±‚ï¼Œå°†ä¼šæŠŠè¯·æ±‚æ”¾å…¥é˜Ÿåˆ—ä¸­æ’ã€‚</p><p>ä¸€èˆ¬äº‹åŠ¡å…·æœ‰åŸå­æ€§ï¼Œéš”ç¦»æ€§ï¼Œä¸€è‡´æ€§å’ŒæŒä¹…æ€§ã€‚redisçš„äº‹åŠ¡å…·æœ‰ä¸€è‡´æ€§å’Œéš”ç¦»æ€§ï¼Œä½¿ç”¨æŒä¹…åŒ–æ—¶ï¼Œå…·æœ‰æŒä¹…æ€§ã€‚åœ¨redisä¸­ï¼Œå‘½ä»¤çš„æ‰§è¡Œæ˜¯åŸå­æ€§çš„ï¼Œä½†æ˜¯äº‹åŠ¡ä¸æ˜¯ï¼Œä¹Ÿæ— æ³•è¿›è¡Œå›æ»šã€‚</p><h3 id="rabbitmqçŸ¥è¯†ç‚¹">rabbitmqçŸ¥è¯†ç‚¹</h3><h4 id="ä¸ºä»€ä¹ˆä½¿ç”¨MQ">ä¸ºä»€ä¹ˆä½¿ç”¨MQ</h4><p>å¯ä»¥è¿›è¡Œå¼‚æ­¥å¤„ç†ï¼Œç”¨æˆ·çš„è¯·æ±‚éœ€è¦å¤šä¸ªç³»ç»Ÿå†™å…¥æ•°æ®ï¼Œå¦‚æœå»¶è¿Ÿè¿‡é«˜ï¼Œç”¨æˆ·ä½“éªŒè¾ƒå·®ã€‚ä½¿ç”¨MQï¼Œæˆ‘æŠŠè¯·æ±‚æ”¾åœ¨mqé‡Œï¼Œè®©å»¶è¿Ÿå¿«çš„ä¼˜å…ˆååº”å¹¶è¿”å›ä¿¡æ¯ç»™ç”¨æˆ·ï¼Œè®©å…¶ä»–ç³»ç»Ÿè®¢é˜…mqï¼Œå–æ¶ˆæ¯åœ¨ä¿å­˜åˆ°æ•°æ®åº“å³å¯ã€‚</p><p>è§£è€¦ï¼Œå½“å‰ç³»ç»Ÿäº§ç”Ÿçš„æ•°æ®å¯èƒ½è¢«å…¶ä»–å¤šä¸ªç³»ç»Ÿä½¿ç”¨ï¼Œè®©å…¶ä»–ç³»ç»Ÿè¯·æ±‚ï¼Œå½“å‰ç³»ç»Ÿåˆ†å‘çš„è¯ï¼Œæœ‰å¯èƒ½äº§ç”Ÿä¸ä¸€è‡´é—®é¢˜ï¼Œé‚£ä¹ˆä½¿ç”¨MQæŠŠæ•°æ®æ”¾åˆ°MQé‡Œï¼Œè°ä½¿ç”¨è°è®¢é˜…å¹¶ä¸”å–æ•°æ®å³å¯ã€‚</p><p>æµé‡å‰Šå³°ï¼Œå¯¹äºé‚£äº›æŸæ—¶åˆ»ä¼šæœ‰å¤§é‡è¯·æ±‚çš„ç³»ç»Ÿï¼Œä½¿ç”¨MQçš„è¯ï¼Œå¯ä»¥å°†è¯·æ±‚å…ˆæ”¾åœ¨MQä¸­ï¼Œå…ˆç”±MQå¤„ç†ï¼Œä¹‹ååœ¨æ…¢æ…¢äº¤ç»™åå°ï¼Œé˜²æ­¢æ•°æ®é‡è¿‡å¤§ï¼ŒæœåŠ¡å™¨ç›´æ¥å¥”æºƒã€‚</p><p>å¯¹äºç”µå•†ï¼Œç”¨æˆ·ä¸‹å•ï¼Œæ²¡æœ‰ä»˜æ¬¾çš„è¯ï¼Œä½¿ç”¨æ­»ä¿¡é˜Ÿåˆ—ï¼Œä½¿å½“å‰çš„è®¢å•è¶…è¿‡åŠä¸ªå°æ—¶è‡ªåŠ¨å…³é—­ã€‚</p><p>ä½¿ç”¨MQçš„æ—¶å€™é™¤äº†ä»–ä¼˜ç‚¹ï¼Œè¦éå¸¸æ³¨æ„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œå³æŠŠMQå½“æˆä¸­é—´ä»¶ï¼Œè¦ç¡®ä¿åé¢çš„æ•°æ®å†™å…¥è¦åŒæ­¥å®Œæˆã€‚</p><h4 id="ä¸ºä»€ä¹ˆä½¿ç”¨rabbitMQ">ä¸ºä»€ä¹ˆä½¿ç”¨rabbitMQ</h4><p>rabbitmqå¯¹é«˜å¹¶å‘çš„å¤„ç†å’Œé€‚é…æ¯”è¾ƒå¥½ï¼Œæ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨è¿™ä¸ªï¼Œè€Œä¸”ä½¿ç”¨çš„å…¬å¸æ¯”è¾ƒå¤šï¼Œç¤¾åŒºçš„æ›´æ–°é¢‘ç¹ï¼Œbugå°‘ã€‚</p><h4 id="ä¿è¯æ¶ˆæ¯çš„é¡ºåº">ä¿è¯æ¶ˆæ¯çš„é¡ºåº</h4><p>é€šè¿‡MQè‡ªèº«çš„å®ç°çš„è¯å¯èƒ½ä¼šå½±å“MQçš„æ€§èƒ½ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ä¸šåŠ¡å±‚é¢ä¿è¯æ¶ˆæ¯æ¶ˆè´¹çš„é¡ºåºï¼Œæˆ–è€…ä½¿æ— åºçš„æ¶ˆæ¯æ¶ˆè´¹é¡ºåºä¸å½±å“ç³»ç»Ÿçš„ä½¿ç”¨ã€‚</p><h4 id="ä¿è¯æ¶ˆæ¯çš„é‡å¤æ€§">ä¿è¯æ¶ˆæ¯çš„é‡å¤æ€§</h4><p>ä¿è¯æ¥æ”¶ç«¯çš„å¹‚ç­‰æ€§å³å¯ã€‚å¯ä»¥ä½¿ç”¨æ—¥å¿—æ–‡ä»¶è®°å½•æ¶ˆæ¯çš„å”¯ä¸€idï¼Œæ¶ˆè´¹ä¿¡æ¯åæ›´æ–°æ—¥å¿—idï¼Œå†æ­¤æ¶ˆè´¹æ—¶åˆ¤æ–­ä¸€ä¸‹å½“å‰çš„æ—¥å¿—ä¸­æ˜¯å¦å­˜åœ¨è¯¥æ¶ˆæ¯çš„idå³å¯ã€‚</p><h4 id="æ¶ˆæ¯çš„è·¯ç”±æ–¹å¼">æ¶ˆæ¯çš„è·¯ç”±æ–¹å¼</h4><p>é€šè¿‡é˜Ÿåˆ—çš„è·¯ç”±é”®å°†é˜Ÿåˆ—ç»‘å®šåˆ°å¯¹åº”çš„äº¤æ¢å™¨ä¸Šï¼Œæ¶ˆæ¯åˆ°è¾¾äº¤æ¢å™¨æ—¶ï¼Œæ ¹æ®æ¶ˆæ¯åˆ›å»ºæ—¶æºå¸¦çš„è·¯ç”±å’Œäº¤æ¢å™¨ä¸­é˜Ÿåˆ—çš„è·¯ç”±è¿›è¡ŒåŒ¹é…å³å¯ã€‚</p><h4 id="æ¶ˆæ¯åŸºäºä»€ä¹ˆä¼ è¾“">æ¶ˆæ¯åŸºäºä»€ä¹ˆä¼ è¾“</h4><p>ç”±äº TCP è¿æ¥çš„åˆ›å»ºå’Œé”€æ¯å¼€é”€è¾ƒå¤§ï¼Œä¸”å¹¶å‘æ•°å—ç³»ç»Ÿèµ„æºé™åˆ¶ï¼Œä¼šé€ æˆæ€§èƒ½ç“¶é¢ˆã€‚RabbitMQ ä½¿ç”¨ä¿¡é“çš„æ–¹å¼æ¥ä¼ è¾“æ•°æ®ã€‚ä¿¡é“æ˜¯å»ºç«‹åœ¨çœŸå®çš„ TCP è¿æ¥å†…çš„è™šæ‹Ÿè¿æ¥ï¼Œä¸”æ¯æ¡ TCP è¿æ¥ä¸Šçš„ä¿¡é“æ•°é‡æ²¡æœ‰é™åˆ¶ã€‚</p><h4 id="ç¡®ä¿æ¶ˆæ¯è¢«æ¶ˆè´¹">ç¡®ä¿æ¶ˆæ¯è¢«æ¶ˆè´¹</h4><p>å°†ä¿¡é“è®¾ç½®ä¸ºconfirmæ–¹å¼ï¼Œå‘é€æ–¹å‘é€çš„æ¶ˆæ¯æºå¸¦å”¯ä¸€çš„idï¼Œæ¥æ”¶æ–¹æ¶ˆè´¹å®Œæˆä¹‹åéœ€è¦è¿”å›ç¡®è®¤ç»™å‘é€æ–¹ï¼Œå‘é€æ–¹æ‰å¯ä»¥åˆ é™¤æ¶ˆæ¯ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œä¸ä¼šå½±å“å‘é€æ–¹ç»§ç»­å‘é€æ¶ˆæ¯ã€‚å¦‚æœæ²¡æœ‰æ¥æ”¶åˆ°ç¡®è®¤æ–¹çš„ä¿¡æ¯ï¼Œæ¥æ”¶æ–¹æ–­å¼€æˆ–è€…å–æ¶ˆè®¢é˜…ï¼Œå°±æŠŠæ¶ˆæ¯é€ç»™ä¸‹ä¸€ä¸ªæ¥æ”¶æ–¹ã€‚å¦‚æœæ²¡æœ‰æ–­å¼€ä¹Ÿæ²¡æœ‰è¿”å›ç¡®è®¤ä¿¡æ¯ï¼Œå‘é€æ–¹åˆ¤æ–­æ¥æ”¶æ–¹å¿™ä¸”ä¸åœ¨å‘é€æ•°æ®ã€‚</p><h4 id="å¦‚ä½•ç¡®ä¿æ¶ˆæ¯çš„å¯é ä¼ è¾“">å¦‚ä½•ç¡®ä¿æ¶ˆæ¯çš„å¯é ä¼ è¾“</h4><p>å¯¹äºå‘é€æ–¹æ¥è¯´é™¤äº†ä¿¡é“è®¾ç½®confirmæ–¹å¼é‡‡ç”¨å”¯ä¸€idç­‰å¾…ç¡®è®¤æ–¹å¼ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨äº‹åŠ¡ï¼Œå¦‚æœå‡ºé”™ï¼Œäº‹åŠ¡å›æ»šç¡®ä¿æ•°æ®çš„å®‰å…¨ã€‚</p><p>é˜Ÿåˆ—çš„è¯å¯ä»¥è®¾ç½®ä¸€ä¸‹æŒä¹…åŒ–ï¼Œå°†æ•°æ®ä¿å­˜åˆ°ç£ç›˜ï¼Œæ•°æ®ä¸¢å¤±å¯ä»¥è¿›è¡Œæ¢å¤ã€‚</p><p>æ¥æ”¶æ–¹é€šè¿‡ä¸šåŠ¡é€»è¾‘æ‰‹åŠ¨å›å¤ç¡®è®¤å³å¯ã€‚</p><h4 id="å¦‚ä½•è§£å†³MQä¸­çš„æ¶ˆæ¯ç§¯å‹é—®é¢˜">å¦‚ä½•è§£å†³MQä¸­çš„æ¶ˆæ¯ç§¯å‹é—®é¢˜</h4><p>æ–°å»ºä¸€ä¸ª topicæ¨¡å¼(é€šé…ç¬¦çš„æ–¹å¼)ï¼Œåˆ†åŒºæ˜¯åŸæ¥çš„ 10 å€ï¼Œä¸´æ—¶å»ºç«‹å¥½åŸå…ˆ 10 å€çš„é˜Ÿåˆ— æ•°é‡ã€‚ç„¶åå†™ä¸€ä¸ªä¸´æ—¶çš„åˆ†å‘æ•°æ®çš„ consumer ç¨‹åºï¼Œè¿™ä¸ªç¨‹åºéƒ¨ç½²ä¸Šå»æ¶ˆè´¹ç§¯å‹çš„æ•°æ®ï¼Œæ¶ˆè´¹ä¹‹åä¸åšè€—æ—¶çš„å¤„ç†ï¼Œç›´æ¥å‡åŒ€è½®è¯¢å†™å…¥ä¸´æ—¶å»ºç«‹å¥½çš„ 10 å€æ•°é‡çš„ é˜Ÿåˆ—ä¸­ã€‚æ¥ç€ä¸´æ—¶å¾ç”¨ 10 å€çš„æœºå™¨æ¥éƒ¨ç½² consumerï¼Œæ¯ä¸€æ‰¹ consumer æ¶ˆè´¹ä¸€ä¸ªä¸´æ—¶ queue çš„æ•°æ®ã€‚è¿™ç§åšæ³•ç›¸å½“äºæ˜¯ä¸´æ—¶å°† queue èµ„æºå’Œ consumer èµ„æºæ‰©å¤§ 10 å€ï¼Œä»¥æ­£å¸¸çš„ 10 å€é€Ÿåº¦æ¥æ¶ˆè´¹æ•°æ®ã€‚ç­‰å¿«é€Ÿæ¶ˆè´¹å®Œç§¯å‹æ•°æ®ä¹‹åï¼Œå¾—æ¢å¤åŸå…ˆéƒ¨ç½²çš„æ¶æ„ï¼Œé‡æ–°ç”¨åŸå…ˆçš„ consumer æœºå™¨æ¥æ¶ˆè´¹æ¶ˆæ¯ã€‚</p><h3 id="mysqlé¢è¯•é¢˜">mysqlé¢è¯•é¢˜</h3><h4 id="æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼">æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼</h4><p>ç¬¬ä¸€èŒƒå¼ä¿è¯åŸå­æ€§ï¼Œå³å½“å‰å­—æ®µä¸å¯åœ¨åˆ†å‰²ï¼Œå½“å‰å­—æ®µä¸èƒ½ç”±å¤šæ¡ä¿¡æ¯ç»„æˆã€‚</p><p>ç¬¬äºŒèŒƒå¼æ˜¯ä¸åº”å­˜åœ¨è”åˆä¸»é”®ï¼Œæ¯æ¡è®°å½•è¦æœ‰å”¯ä¸€æ€§ã€‚</p><p>ç¬¬ä¸‰èŒƒå¼ä¿è¯æ•°æ®åº“çš„å•æŒ‘æ•°æ®çš„å­—æ®µä¸­ä¸å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå­—æ®µä¹‹é—´åº”ä¿è¯ç‹¬ç«‹ã€‚</p><h4 id="MySQLçš„binlogæœ‰æœ‰å‡ ç§å½•å…¥æ ¼å¼ï¼Ÿåˆ†åˆ«æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ">MySQLçš„binlogæœ‰æœ‰å‡ ç§å½•å…¥æ ¼å¼ï¼Ÿåˆ†åˆ«æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>binlogä¸ºmysqlçš„äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ï¼Œè®°å½•æ•°æ®åº“çš„æ“ä½œè¯­å¥ï¼Œæ–¹ä¾¿æ•°æ®åº“è¿›è¡Œä¸»ä»å¤åˆ¶æ—¶ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œäº§ç”Ÿå®•æœºåçš„æ•°æ®æ¢å¤é—®é¢˜ã€‚</p><p>binlogä½¿ç”¨statementæ–¹å¼å½•å…¥ï¼Œä¼šè®°å½•ä¿®æ”¹æ•°æ®çš„sqlè¯­å¥ï¼Œå‡å°‘æ—¥å¿—æ–‡ä»¶çš„å¤§å°ã€‚ä½¿ç”¨rowæ–¹å¼å½•å…¥ï¼Œä¼šè®°å½•è¡¨ä¸­æ¯ä¸€è¡Œçš„æ”¹åŠ¨ï¼Œäº§ç”Ÿçš„æ—¥å¿—æ–‡ä»¶è¾ƒå¤§ï¼Œè®°å½•è¾ƒå…¨ã€‚mixedæ··åˆå½•å…¥æ–¹å¼å¯¹äºæ™®é€šçš„æ“ä½œè¯­å¥ä½¿ç”¨statementæ–¹å¼å½•å…¥ï¼Œè‹¥æ— æ³•ä½¿ç”¨statementï¼Œä½¿ç”¨rowæ–¹å¼å½•å…¥ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿ">ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿ</h4><p>ç´¢å¼•ç›¸å½“äºç›®å½•ï¼Œå»ºç«‹ç´¢å¼•å¯ä»¥æ–¹ä¾¿æ•°æ®çš„æŸ¥æ‰¾ã€‚ç´¢å¼•æ˜¯ä¸€ç§æ–‡ä»¶ç³»ç»Ÿï¼Œå ç”¨ç‰©ç†ç©ºé—´ï¼Œä¸€èˆ¬é€šè¿‡Bæ ‘æˆ–è€…B+æ ‘æ¥å®ç°ã€‚</p><h4 id="ç´¢å¼•çš„ä½¿ç”¨åœºæ™¯">ç´¢å¼•çš„ä½¿ç”¨åœºæ™¯</h4><p>ä¸€èˆ¬ä½¿ç”¨æœ€å¤šçš„æ˜¯ä¸»é”®ç´¢å¼•ï¼Œé€šè¿‡ä¸»é”®idè¿›è¡ŒæŸ¥è¯¢ã€‚æ–°å»ºçš„å­—æ®µä¸€èˆ¬æŸ¥è¯¢æ—¶éƒ½æ²¡æœ‰ç´¢å¼•ï¼Œå½“æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨add indexä¸ºå­—æ®µæ·»åŠ ç´¢å¼•æ¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p><p>ä½¿ç”¨order byå¯¹æ•°æ®åº“æŸä¸ªå­—æ®µè¿›è¡Œæ’åºæ—¶ï¼Œå½“å­—æ®µæ²¡æœ‰ç´¢å¼•çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šå°†æ‰€æœ‰çš„æ•°æ®è¯»å…¥åˆ°å†…å­˜ä¸­ï¼Œå†åˆ©ç”¨å†…éƒ¨æ’åºè¿›è¡Œæ’åºæœ€åå°†æ¯ä¸ªéƒ¨åˆ†è¿›è¡Œåˆå¹¶ï¼Œå¾ˆå¤§çš„æµªè´¹äº†æ€§èƒ½ã€‚é€šè¿‡å¯¹æ’åºå­—æ®µæ·»åŠ ç´¢å¼•ï¼Œå¯ä»¥æ ¹æ®ç´¢å¼•çš„é¡ºåºè¿›è¡Œé€æ¡è¯»å–æ•°æ®ã€‚</p><p>å»ºç«‹æ‰€ä»¥å¯ä»¥æé«˜è¿æ¥æŸ¥è¯¢çš„æ•ˆç‡ã€‚</p><p>selectå’Œselect *çš„åŒºåˆ«ï¼Œå¦‚æœè¦æŸ¥è¯¢çš„å­—æ®µå·²ç»å»ºç«‹äº†ç´¢å¼•ï¼Œé‚£ä¹ˆæŸ¥è¯¢æ—¶å°±ä¼šæ ¹æ®ç´¢å¼•æŸ¥è¯¢ï¼Œè€Œä¸æ˜¯è®¿é—®åŸæ•°æ®ã€‚æ‰€ä»¥æ¨èä½¿ç”¨selectåŠ å­—æ®µçš„æ–¹å¼ï¼Œè€Œselect * åˆ™ä¼šå…¨è¡¨æ‰«æã€‚</p><h4 id="ç´¢å¼•æœ‰å“ªå‡ ç§ç±»å‹">ç´¢å¼•æœ‰å“ªå‡ ç§ç±»å‹</h4><p>ä½¿ç”¨æœ€å¤šçš„å°±æ˜¯ä¸»é”®ç´¢å¼•ï¼Œå”¯ä¸€idï¼Œæ•°æ®é¡¹ä¸èƒ½é‡å¤ä¸”ä¸èƒ½ä¸ºç©ºã€‚</p><p>æ•°æ®é¡¹ä¸èƒ½é‡å¤ä¸”å¯ä»¥ä¸ºç©ºçš„ä¸ºå”¯ä¸€ç´¢å¼•ã€‚</p><p>æ•°æ®é¡¹å¯ä»¥é‡å¤å¯ä»¥ä¸ºç©ºçš„ä¸ºæ™®é€šç´¢å¼•ã€‚</p><p>å¯¹äºæœç´¢å¼•æ“è¿˜æœ‰ä¸€ç§å…¨æ–‡ç´¢å¼•ã€‚</p><h4 id="ç´¢å¼•çš„å®ç°åŸç†">ç´¢å¼•çš„å®ç°åŸç†</h4><p>å¯¹å­—æ®µæ·»åŠ ç´¢å¼•ï¼Œæ•°æ®åº“ä¼šå¯¹æ·»åŠ ç´¢å¼•çš„å­—æ®µè¿›è¡Œæ’åºç”Ÿæˆæ’åºè¡¨ï¼Œåœ¨æ’åºè¡¨ä¸Šè®°å½•æ•°æ®çš„åœ°å€ã€‚å¯¹å­—æ®µè¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™ä¼šå…ˆæ‰¾åˆ°æ’åºè¡¨ï¼Œåœ¨é€šè¿‡æ’åºè¡¨ä¸­çš„æ•°æ®åœ°å€è·å–æ•°æ®ã€‚</p><h4 id="ç´¢å¼•è®¾è®¡çš„åŸåˆ™">ç´¢å¼•è®¾è®¡çš„åŸåˆ™</h4><p>å¦‚æœä½ çš„æŸ¥è¯¢æ¡ä»¶ä¸­æœ‰&gt;,&lt;,betweenç­‰æ¡ä»¶ï¼Œå¯¹äºè¿™äº›æ¡ä»¶ä»¥åçš„å­—æ®µä¸åº”è®¾ç½®ç´¢å¼•ï¼Œä¼šå¤±æ•ˆï¼Œæˆ–è€…å°†å¸¦æœ‰è¿™äº›æ¡ä»¶çš„å­—æ®µæ”¾åœ¨æœ€åï¼Œå› ä¸ºmysqlæ˜¯é»˜è®¤å‘å³åŒ¹é…åˆ°è¿™äº›æ¡ä»¶å°±åœæ­¢çš„ã€‚</p><p>å»ºç«‹ç´¢å¼•ç”¨äºæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œå› æ­¤è¢«é¢‘ç¹æŸ¥è¯¢çš„å­—æ®µå¯ä»¥æ·»åŠ ç´¢å¼•ï¼Œä½†æ˜¯é¢‘ç¹æ›´æ–°çš„å­—æ®µä¸åº”è¯¥å»ºç«‹ç´¢å¼•ã€‚</p><p>å¯¹äºå·²ç»æœ‰ç´¢å¼•çš„è¡¨ï¼Œæ·»åŠ æ–°çš„å­—æ®µç´¢å¼•çš„æ—¶å€™åº”æœ‰é™æ‰©å±•ç´¢å¼•ï¼Œå³åœ¨å½“å‰çš„åŸºç¡€ä¸Šæ‰©å±•ã€‚</p><p>å¦‚æœè¯¥åˆ—ä½œä¸ºå¤–é”®ä½¿ç”¨ä¸åº”å»ºç«‹ç´¢å¼•ã€‚</p><p>ç”±äºå»ºç«‹ç´¢å¼•è¦è¿›è¡Œæ’åºï¼Œå¯¹äºå­—æ®µä¸­çš„æ•°æ®å¤§é‡é‡å¤çš„æƒ…å½¢æˆ–è€…å­—æ®µè¾ƒé•¿çš„ä¹Ÿä¸åº”è¯¥è¿›è¡Œè®¾ç½®ç´¢å¼•ã€‚è®¾ç½®çŸ­ç´¢å¼•ã€‚</p><h4 id="åˆ›å»ºç´¢å¼•çš„æ–¹å¼">åˆ›å»ºç´¢å¼•çš„æ–¹å¼</h4><p>åœ¨åˆ›å»ºè¡¨æ—¶æ·»åŠ ç´¢å¼•ã€‚</p><p>å·²ç»è¡¨çš„åŸºç¡€ä¸Šé€šè¿‡add indexæˆ–è€…create indexçš„æ–¹å¼åˆ›å»ºç´¢å¼•ã€‚</p><h4 id="ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸€å®šèƒ½æé«˜æŸ¥è¯¢çš„æ€§èƒ½å—ï¼Ÿä¸ºä»€ä¹ˆ">ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸€å®šèƒ½æé«˜æŸ¥è¯¢çš„æ€§èƒ½å—ï¼Ÿä¸ºä»€ä¹ˆ</h4><p>ç´¢å¼•éœ€è¦ç©ºé—´æ¥å­˜å‚¨ï¼Œä¹Ÿéœ€è¦å®šæœŸç»´æŠ¤ï¼Œ æ¯å½“æœ‰è®°å½•åœ¨è¡¨ä¸­å¢å‡æˆ–ç´¢å¼•åˆ—è¢«ä¿®æ”¹æ—¶ï¼Œç´¢å¼•æœ¬èº«ä¹Ÿä¼šè¢«ä¿®æ”¹ã€‚ è¿™æ„å‘³ç€æ¯æ¡è®°å½•çš„INSERTï¼ŒDELETEï¼ŒUPDATEå°†ä¸ºæ­¤å¤šä»˜å‡º4ï¼Œ5 æ¬¡çš„ç£ç›˜I/Oã€‚ å› ä¸ºç´¢å¼•éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´å’Œå¤„ç†ï¼Œé‚£äº›ä¸å¿…è¦çš„ç´¢å¼•åè€Œä¼šä½¿æŸ¥è¯¢ååº”æ—¶é—´å˜æ…¢ã€‚ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢ä¸ä¸€å®šèƒ½æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</p><p>ä¸€èˆ¬æ¥è¯´å½“ä½ æ ¹æ®å­—æ®µæŸ¥è¯¢çš„æ•°æ®ä¸ºå½“å‰è¡¨çš„ä¸‰åˆ†ä¹‹ä¸€çš„æ—¶å€™æ€§èƒ½æå‡è¾ƒå¤§ã€‚æˆ–è€…éå”¯ä¸€æ€§ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢æ€§èƒ½æå‡ä¹Ÿè¾ƒå¤§ã€‚</p><h4 id="å¯¹äºç™¾ä¸‡çº§çš„æ•°æ®çš„åˆ é™¤">å¯¹äºç™¾ä¸‡çº§çš„æ•°æ®çš„åˆ é™¤</h4><p>å¯¹äºæœ‰ç€ç™¾ä¸‡æ•°æ®çš„è¡¨ä¸­çš„å­—æ®µç´¢å¼•åœ¨åˆ é™¤æ•°æ®å‰ï¼Œåº”è¯¥å…ˆåˆ é™¤ç´¢å¼•ï¼Œåˆ é™¤ç´¢å¼•åè¿›è¡Œæ•°æ®çš„åˆ é™¤ã€‚æ•°æ®åˆ é™¤å®Œæ¯•ä¹‹åé‡æ–°åˆ›å»ºç´¢å¼•è¾ƒä¸ºå®‰å…¨ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯èšç°‡ç´¢å¼•ï¼Ÿä½•æ—¶ä½¿ç”¨èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•">ä»€ä¹ˆæ˜¯èšç°‡ç´¢å¼•ï¼Ÿä½•æ—¶ä½¿ç”¨èšç°‡ç´¢å¼•ä¸éèšç°‡ç´¢å¼•</h4><p>èšç°‡ç´¢å¼•å°±æ˜¯å°†æ•°æ®å’Œç´¢å¼•æ”¾åˆ°ä¸€èµ·ï¼Œæ‰¾åˆ°ç´¢å¼•å³æ‰¾åˆ°äº†æ•°æ®ã€‚</p><p>éèšç°‡ç´¢å¼•æ•°æ®å’Œç´¢å¼•ä¸åœ¨ä¸€èµ·ï¼Œä¼˜å…ˆå°†ç´¢å¼•ç¼“å­˜åˆ°å†…å­˜ï¼ŒæŸ¥è¯¢æ•°æ®å…ˆæ‰¾åˆ°ç´¢å¼•åœ¨è¯»å–ç£ç›˜æ‰¾åˆ°æ•°æ®ã€‚</p><h4 id="è”åˆç´¢å¼•æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦æ³¨æ„è”åˆç´¢å¼•ä¸­çš„é¡ºåºï¼Ÿ">è”åˆç´¢å¼•æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦æ³¨æ„è”åˆç´¢å¼•ä¸­çš„é¡ºåºï¼Ÿ</h4><p>è”åˆç´¢å¼•æ˜¯å°†å¤šä¸ªå­—æ®µçš„ç´¢å¼•ç»„åˆï¼Œè”åˆç´¢å¼•æ˜¯ä¸¥æ ¼æŒ‰ç…§ç´¢å¼•çš„æ’åºé¡ºåºè¿›è¡ŒæŸ¥è¯¢çš„ï¼Œå³å…ˆä»¥ç¬¬ä¸€ä¸ªç´¢å¼•ä¸ºåŸºç¡€æ’åºï¼Œå†ä»¥ç¬¬äºŒä¸ªæ’åºã€‚æ‰€ä»¥è¦ä¸¥æ ¼æŒ‰ç…§è”åˆç´¢å¼•çš„é¡ºåºä½¿ç”¨ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯è„è¯»ï¼Ÿå¹»è¯»ï¼Ÿä¸å¯é‡å¤è¯»ï¼Ÿ">ä»€ä¹ˆæ˜¯è„è¯»ï¼Ÿå¹»è¯»ï¼Ÿä¸å¯é‡å¤è¯»ï¼Ÿ</h4><p>è„è¯»å°±æ˜¯è¯»åˆ°ä¸è¯¥è¯»çš„æ•°æ®ï¼ŒAäº‹åŠ¡è¿›è¡Œå›æ»šå‰çš„æ•°æ®è¢«Bäº‹åŠ¡è¯»åˆ°äº†ã€‚</p><p>å¹»è¯»å°±æ˜¯æ²¡è¯»å…¨ï¼ŒAäº‹åŠ¡åœ¨æ’å…¥æ•°æ®å‰å·²ç»è¢«Bäº‹åŠ¡è¯»äº†ï¼ŒAäº‹åŠ¡æ’å…¥æ•°æ®å®Œæˆï¼ŒBäº‹åŠ¡åœ¨è¯»å‘ç°æœ‰ä¸€éƒ¨åˆ†æ²¡è¯»åˆ°ã€‚</p><p>ä¸å¯é‡å¤è¯»å°±æ˜¯æ•°æ®è¢«åˆ«äººåŠ¨äº†ï¼ŒAäº‹åŠ¡è¿›è¡Œé€»è¾‘å¤„ç†çš„æ—¶å€™ï¼ŒBäº‹åŠ¡æ›´æ–°äº†æ•°æ®ï¼ŒAäº‹åŠ¡ä½¿ç”¨çš„æ•°æ®ä¸æ˜¯åŸæ¥çš„ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ">ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>æ•°æ®åº“å®šä¹‰çš„éš”ç¦»çº§åˆ«é˜»æ­¢è„è¯»å¹»è¯»å’Œä¸å¯é‡å¤è¯»çš„å‘ç”Ÿã€‚</p><p>read-uncommitedè¯»å–æœªæäº¤ï¼Œæœ€ä½çš„éš”ç¦»çº§åˆ«ï¼Œå®¹æ˜“å¯¼è‡´è„è¯»å¹»è¯»å’Œä¸å¯é‡å¤è¯»ã€‚</p><p>read-commitedè¯»å–å·²æäº¤ï¼Œè¯»å–äº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®ï¼Œé˜²æ­¢è„è¯»ã€‚</p><p>repeatable-readå¯é‡å¤è¯»ï¼Œå¯¹åŒä¸€ä¸ªå­—æ®µçš„è¯»å–ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œé™¤éè‡ªèº«çš„äº‹åŠ¡æ›´æ–°äº†æ•°æ®ï¼Œå¯ä»¥é˜²æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»ã€‚</p><p>serializableï¼šå¯ä¸²è¡ŒåŒ–ï¼Œæ»¡è¶³äº‹åŠ¡çš„å››ä¸ªæ€§è´¨ï¼Œæœ€é«˜éš”ç¦»çº§åˆ«ï¼Œå¯ä»¥é˜²æ­¢è„è¯»ï¼Œå¹»è¯»å’Œä¸å¯é‡å¤è¯»ã€‚</p><p>mysqlçš„é»˜è®¤çº§åˆ«æ˜¯å¯é‡å¤è¯»ï¼Œåœ¨ä½¿ç”¨innoDBå¼•æ“çš„æ—¶å€™åˆ†å¸ƒå¼äº‹åŠ¡ä½¿ç”¨å¯ä¸²è¡ŒåŒ–ã€‚</p><h4 id="éš”ç¦»çº§åˆ«ä¸é”çš„å…³ç³»">éš”ç¦»çº§åˆ«ä¸é”çš„å…³ç³»</h4><p>read-uncommitedè¯»å–æœªæäº¤è¯»æ“ä½œä¸ä½¿ç”¨å…±äº«é”ã€‚</p><p>read-commitedè¯»å–å·²æäº¤ï¼Œè¯»æ“ä½œæ˜¯ä½¿ç”¨å…±äº«é”ï¼Œè¯»æ“ä½œå®Œæˆä¹‹åé‡Šæ”¾é”ã€‚</p><p>repeatable-readå¯é‡å¤è¯»ï¼Œè¯»æ“ä½œä½¿ç”¨å…±äº«é”ï¼Œè¯»æ“ä½œå®Œæˆä¹‹åä¸é‡Šæ”¾é”ï¼Œäº‹åŠ¡å®Œæˆä¹‹ååœ¨é‡Šæ”¾é”ã€‚</p><p>serializableå¯¹äºé”®ä¸€ç›´ä¿æŒé”ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸã€‚</p><h4 id="æŒ‰ç…§é”çš„ç²’åº¦åˆ†æ•°æ®åº“é”æœ‰å“ªäº›ï¼Ÿé”æœºåˆ¶ä¸InnoDBé”ç®—æ³•">æŒ‰ç…§é”çš„ç²’åº¦åˆ†æ•°æ®åº“é”æœ‰å“ªäº›ï¼Ÿé”æœºåˆ¶ä¸InnoDBé”ç®—æ³•</h4><p>æ•°æ®åº“çš„é”åˆ†ä¸ºè¡Œçº§é”ï¼Œè¡¨çº§é”å’Œé¡µçº§é”ã€‚</p><p>å…¶ä¸­mysqlçš„MyISAMå¼•æ“ä½¿ç”¨è¡¨çº§é”ã€‚</p><p>InnoDBä½¿ç”¨è¡Œçº§é”å’Œè¡¨çº§é”ï¼Œé»˜è®¤ä½¿ç”¨è¡Œçº§é”ã€‚</p><p>è¡Œçº§é”æ˜¯ç²’åº¦æœ€ç»†çš„é”ï¼Œå¯¹è¡Œè¿›è¡ŒåŠ é”ï¼Œå‡å°‘æ•°æ®åº“æ“ä½œçš„å†²çªï¼Œä½†æ˜¯å› ä¸ºæ˜¯å¯¹æ¯è¡ŒåŠ é”ï¼Œæ‰€ä»¥å¼€é”€è¾ƒå¤§ï¼Œä¹Ÿè¾ƒä¸ºå®‰å…¨ã€‚</p><p>è¡¨çº§é”æ˜¯å¯¹æ•´å¼ è¡¨åŠ é”ï¼Œç²’åº¦æœ€å¤§ï¼Œå‘ç”Ÿçš„æ¦‚ç‡ä¹Ÿæœ€å¤§ï¼Œæ¶ˆè€—è¾ƒä½ã€‚</p><p>é¡µçº§é”å…¼å®¹ä¸Šé¢ä¸¤ç§ï¼Œåšåˆ°ä¸­æ¶ˆè€—ï¼Œä¸­å†²çªï¼Œæ¯æ¬¡é”å®šç›¸é‚»çš„ä¸€ç»„è®°å½•ã€‚</p><h4 id="ä»é”çš„ç±»åˆ«ä¸Šåˆ†MySQLéƒ½æœ‰å“ªäº›é”å‘¢ï¼Ÿ">ä»é”çš„ç±»åˆ«ä¸Šåˆ†MySQLéƒ½æœ‰å“ªäº›é”å‘¢ï¼Ÿ</h4><p>é”çš„ç±»åˆ«åŒºåˆ†mysqlæœ‰å…±äº«é”å’Œæ’ä»–é”ã€‚</p><p>å…±äº«é”å³è¯»æ“ä½œæ—¶ä½¿ç”¨çš„é”ï¼Œæ•°æ®å¯ä»¥è¢«å¤šä¸ªè¯­å¥è¯»ï¼Œå¯ä»¥è¢«åŠ å¤šä¸ªå…±äº«é”ã€‚</p><p>æ’ä»–é”æ˜¯å†™æ“ä½œæ—¶ä½¿ç”¨çš„é”ï¼Œåªèƒ½åŠ ä¸€ä¸ªï¼Œå’Œå…¶ä»–çš„æ‰€æœ‰é”äº’æ–¥ã€‚</p><h4 id="MySQLä¸­InnoDBå¼•æ“çš„è¡Œé”æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ">MySQLä¸­InnoDBå¼•æ“çš„è¡Œé”æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</h4><p>ä½¿ç”¨ç´¢å¼•æ¥å®ç°è¡Œé”ã€‚ä½¿ç”¨for update</p><p>select * from tab_with_index where id = 1 for update;</p><p>ä¸”for updateæŸ¥è¯¢çš„å­—æ®µè¦æœ‰ç´¢å¼•ï¼Œå¦åˆ™ä¼šä½¿ç”¨è¡¨çº§é”ã€‚</p><h4 id="æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯ä»€ä¹ˆï¼Ÿ">æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>åœ¨æ•°æ®åº“æ“ä½œå¹¶å‘æ—¶ä½¿ç”¨æ‚²è§‚é”å’Œä¹è§‚é”ä¸¤ç§æ‰‹æ®µç¡®ä¿æ•°æ®å®‰å…¨ã€‚</p><p>æ‚²è§‚é”æ˜¯åœ¨äº‹åŠ¡æŸ¥è¯¢æ•°æ®çš„æ—¶å€™å°±åŠ é”ï¼Œè€Œä¹è§‚é”æ˜¯åœ¨äº‹åŠ¡æœ€åä¿®æ”¹æ•°æ®çš„æ—¶å€™åœ¨åŠ é”ã€‚</p><p>å½“è¯»æ“ä½œè§’åº¦çš„æ—¶å€™ä½¿ç”¨ä¹è§‚é”å¯ä»¥æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚</p><p>è€Œåœ¨å†™æ“ä½œå¤šçš„æ—¶å€™ä¿è¯æ•°æ®çš„å®‰å…¨ä½¿ç”¨æ‚²è§‚é”ã€‚</p><h4 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è§†å›¾ï¼Ÿä»€ä¹ˆæ˜¯è§†å›¾ï¼Ÿ">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è§†å›¾ï¼Ÿä»€ä¹ˆæ˜¯è§†å›¾ï¼Ÿ</h4><p>è§†å›¾å’Œè¡¨ç›¸ä¼¼ä½†æ˜¯æ˜¯ä¸€ç§è™šæ‹Ÿè¡¨ï¼Œåœ¨è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™æ ¹æ®ä»åŸºæœ¬è¡¨å³å®è¡¨ä¸­æŸ¥è¯¢çš„æ•°æ®åŠ¨æ€ç”Ÿæˆä¸€ä¸ªå«æœ‰è¿™äº›æ•°æ®çš„è§†å›¾ã€‚</p><p>åœ¨ä½¿ç”¨æ•°æ®åº“æ—¶ï¼Œåªæ˜¯ç”¨æŸå‡ å¼ è¡¨ä¸­çš„éƒ¨åˆ†æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨è§†å›¾ï¼Œç¡®ä¿å…¶ä»–æ•°æ®çš„å®‰å…¨æ€§ã€‚</p><h4 id="è§†å›¾æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ">è§†å›¾æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ</h4><p>è§†å›¾æ˜¯ä¸€ç§è™šè¡¨ã€‚</p><p>è§†å›¾ä¸­çš„å†…å®¹å¯ä»¥ç”±æ¥è‡ªä¸åŒçš„å®è¡¨ç»„åˆç”Ÿæˆã€‚</p><p>å¯¹äºæŸ¥è¯¢è§†å›¾çš„æ“ä½œä¸ä¼šå½±å“çš„åŸè¡¨ã€‚</p><p>å¯¹äºæ•°æ®æ›´æ–°çš„æ“ä½œåˆ™ä¼šæ›´æ–°åŸè¡¨ï¼Œå¦‚æœè§†å›¾æ˜¯ç”±å¤šä¸ªå®è¡¨ä¸­çš„æ•°æ®ç»„åˆï¼Œä¸å…è®¸è¿›è¡Œæ•°æ®æ›´æ”¹ã€‚</p><h4 id="è§†å›¾çš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ">è§†å›¾çš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</h4><p>æ‰€ä½¿ç”¨åˆ°çš„æ•°æ®æ¥è‡ªå¤šä¸ªè¡¨ï¼Œä¸”æ˜¯å¤šä¸ªè¡¨ä¸­çš„éƒ¨åˆ†å­—æ®µã€‚</p><p>ç”¨æˆ·æƒé™ç»†åˆ†çš„æ—¶å€™ï¼Œåªç»™æœ‰å…·ä½“æƒé™çš„ç”¨æˆ·å±•ç¤ºå…·ä½“çš„æ•°æ®ã€‚</p><p>é‡ç”¨sqlè¯­å¥æ—¶ï¼Œå¤šä¸ªä¸šåŠ¡é€»è¾‘éƒ½ç”¨åˆ°å½“å‰çš„sqlè¯­å¥æŸ¥è¯¢çš„ç»“æœã€‚</p><p>ç”±äºè¦ç”Ÿæˆè§†å›¾ï¼Œæ‰€ä»¥æ€§èƒ½ä¸Šä¼šæœ‰æ‰€æ¶ˆè€—ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Ÿæœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ">ä»€ä¹ˆæ˜¯å­˜å‚¨è¿‡ç¨‹ï¼Ÿæœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ</h4><p>å­˜å‚¨è¿‡ç¨‹æ˜¯é¢„ç¼–è¯‘çš„sqlè¯­å¥ï¼Œå¯ä»¥è¿›è¡Œæ¨¡å—åŒ–è®¾è®¡ï¼Œä½¿ç”¨çš„æ—¶å€™ç›´æ¥è°ƒç”¨å­˜å‚¨è¿‡ç¨‹å³å¯ã€‚</p><p>å­˜å‚¨è¿‡ç¨‹æ˜¯é¢„ç¼–è¯‘çš„ä¸”å­˜åœ¨äºæ•°æ®åº“ä¸­ï¼Œæ‰€ä»¥é€Ÿåº¦è¾ƒå¿«ã€‚åŒæ—¶é‡ç”¨æ€§å¯ä»¥å‡å°‘å¼€å‘äººå‘˜çš„å·¥ä½œé‡ã€‚å¯ä»¥è¿›è¡Œæƒé™çš„åˆ’åˆ†ã€‚</p><p>ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ä¹‹åå¤§é‡çš„å­˜å‚¨è¿‡ç¨‹ç»´æŠ¤è¾ƒä¸ºéº»çƒ¦ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯è§¦å‘å™¨ï¼Ÿè§¦å‘å™¨çš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ">ä»€ä¹ˆæ˜¯è§¦å‘å™¨ï¼Ÿè§¦å‘å™¨çš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</h4><p>è§¦å‘å™¨å³è§¦å‘æŸä¸ªæ“ä½œæ—¶è‡ªåŠ¨æ‰§è¡Œçš„ä»£ç ã€‚</p><p>å¯ä»¥è¿›è¡Œçº§è”æ›´æ”¹ã€‚</p><p>ç”±å½“å‰æ•°æ®ç”Ÿæˆå…¶ä»–æ•°æ®çš„ç›¸å…³ä¿¡æ¯ã€‚</p><h4 id="å…³è”æŸ¥è¯¢">å…³è”æŸ¥è¯¢</h4><p>å†…è¿æ¥inner join</p><p>å¤–è¿æ¥ï¼Œleft joinï¼Œå·¦è¿æ¥ä»¥å·¦è¡¨ä¸ºåŸºç¡€ï¼Œå³è¿æ¥ä»¥å³è¡¨ä¸ºåŸºç¡€ï¼Œæ²¡æœ‰çš„å­—æ®µä¿¡æ¯ä½¿ç”¨nullã€‚</p><h4 id="mysqlä¸­-in-å’Œ-exists-åŒºåˆ«">mysqlä¸­ in å’Œ exists åŒºåˆ«</h4><p>inè¯­å¥å°†å¤–è¡¨å’Œå†…è¡¨åšhashè¿æ¥ï¼Œexistså¯¹å¤–è¡¨è¿›è¡Œloopå¾ªç¯ã€‚æ¯æ¬¡å¾ªç¯è¿‡ç¨‹ä¸­åœ¨å¯¹å†…è¡¨è¿›è¡ŒæŸ¥è¯¢ã€‚</p><p>åœ¨æŸ¥è¯¢çš„è¡¨å¤§å°å·®ä¸å¤šæ—¶ï¼Œinå’Œexistsçš„æ•ˆç‡ç›¸åŒã€‚</p><p>å½“æŸ¥è¯¢çš„è¡¨å¤§å°å·®åˆ«å¤§æ—¶ï¼Œå­æŸ¥è¯¢çš„è¡¨ä¸ºå¤§è¡¨ä½¿ç”¨exists,å°è¡¨ä½¿ç”¨in</p><p>ä½¿ç”¨notè¯­å¥ï¼Œnot existsä¸€å®šæ¯”not inæ•ˆç‡é«˜ï¼Œå› ä¸ºnot existså¯ä»¥ä½¿ç”¨ç´¢å¼•ã€‚</p><h4 id="varcharä¸charçš„åŒºåˆ«">varcharä¸charçš„åŒºåˆ«</h4><p>charçš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œä¸º255ï¼Œç©ºç™½ç”¨ç©ºæ ¼å¡«å……ï¼ŒæŸ¥è¯¢çš„é€Ÿåº¦è¾ƒå¿«ã€‚</p><p>varcharçš„é•¿åº¦æ˜¯å¯å˜çš„ï¼Œæ•°æ®å¤šé•¿ï¼Œvarcharå¯ä»¥è®¾ç½®å¤šé•¿ï¼Œä¸ä¼šæµªè´¹ç©ºé—´ã€‚</p><h4 id="å¦‚ä½•å®šä½åŠä¼˜åŒ–SQLè¯­å¥çš„æ€§èƒ½é—®é¢˜ï¼Ÿåˆ›å»ºçš„ç´¢å¼•æœ‰æ²¡æœ‰è¢«ä½¿ç”¨åˆ°-æˆ–è€…è¯´æ€ä¹ˆæ‰å¯ä»¥çŸ¥é“è¿™æ¡è¯­å¥è¿è¡Œå¾ˆæ…¢çš„åŸå› ï¼Ÿ">å¦‚ä½•å®šä½åŠä¼˜åŒ–SQLè¯­å¥çš„æ€§èƒ½é—®é¢˜ï¼Ÿåˆ›å»ºçš„ç´¢å¼•æœ‰æ²¡æœ‰è¢«ä½¿ç”¨åˆ°?æˆ–è€…è¯´æ€ä¹ˆæ‰å¯ä»¥çŸ¥é“è¿™æ¡è¯­å¥è¿è¡Œå¾ˆæ…¢çš„åŸå› ï¼Ÿ</h4><p>ä½¿ç”¨explainå‘½ä»¤æŸ¥çœ‹è¯­å¥çš„æ‰§è¡Œè®¡åˆ’ï¼Œé€šè¿‡typeåˆ¤æ–­å½“å‰è¿è¡Œçš„è¯­å¥æ˜¯å¦ä½¿ç”¨äº†ç´¢å¼•ã€‚eq_refæ˜¯åœ¨joinä¸­ä½¿ç”¨äº†ç´¢å¼•å…³è”ï¼Œrefä½¿ç”¨äº†éå”¯ä¸€ç´¢å¼•ï¼Œindex_subqueryåœ¨å­æŸ¥è¯¢ä¸­ä½¿ç”¨éå”¯ä¸€ç´¢å¼•ï¼Œindexä¸ºéå†ç´¢å¼•ï¼ŒALLä¸ºå…¨è¡¨æ‰«æã€‚</p><p>å¦‚æœpossible_keysä¸ºnullåº”è¯¥è€ƒè™‘sqlä¼˜åŒ–ï¼Œå› ä¸ºè¯¥å­—æ®µæ˜¾ç¤ºæŸ¥è¯¢æ—¶æ‰€æŸ¥è¯¢å­—æ®µçš„ç´¢å¼•ã€‚ä»¥åŠkeyå­—æ®µæ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„ç´¢å¼•ã€‚</p><h4 id="SQLçš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ">SQLçš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ</h4><p>åº”ç”¨æœåŠ¡å™¨å’Œæ•°æ®åº“æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œæ•°æ®åº“æœåŠ¡å™¨è·å–åº”ç”¨æœåŠ¡å™¨çš„sqlè¯­å¥ï¼Œç”Ÿæˆæ‰§è¡Œè®¡åˆ’ï¼ŒæŸ¥è¯¢æ•°æ®å¹¶è¯»å–åˆ°å†…å­˜è¿›è¡Œé€»è¾‘å¤„ç†ï¼Œæœ€åå°†æ•°æ®è¿”å›ç»™åº”ç”¨æœåŠ¡å™¨ï¼Œæ–­å¼€è¿æ¥ï¼Œé‡Šæ”¾èµ„æºã€‚</p><h4 id="å¤§è¡¨æ•°æ®æŸ¥è¯¢ï¼Œæ€ä¹ˆä¼˜åŒ–">å¤§è¡¨æ•°æ®æŸ¥è¯¢ï¼Œæ€ä¹ˆä¼˜åŒ–</h4><p>ä½¿ç”¨ç´¢å¼•æˆ–è€…ä½¿ç”¨ç¼“å­˜æŠ€æœ¯ã€‚</p><h4 id="è¶…å¤§åˆ†é¡µæ€ä¹ˆå¤„ç†ï¼Ÿ">è¶…å¤§åˆ†é¡µæ€ä¹ˆå¤„ç†ï¼Ÿ</h4><p>ä½¿ç”¨ç¼“å­˜æˆ–è€…ä½¿ç”¨å¸¦ç´¢å¼•çš„å­—æ®µè¿›è¡Œå­æŸ¥è¯¢ã€‚</p><h4 id="ä¸ºä»€ä¹ˆè¦å°½é‡è®¾å®šä¸€ä¸ªä¸»é”®ï¼Ÿ">ä¸ºä»€ä¹ˆè¦å°½é‡è®¾å®šä¸€ä¸ªä¸»é”®ï¼Ÿ</h4><p>ä¸»é”®æ˜¯ä¸€å¼ è¡¨ä¸­ä¸€è¡Œæ•°æ®å”¯ä¸€æ€§çš„ä¿è¯ã€‚åœ¨å¢åˆ æ”¹æŸ¥çš„æ—¶å€™ï¼Œä½¿ç”¨ä¸»é”®æ›´å¿«ä¸”èƒ½ä¿è¯æ•°æ®çš„å®‰å…¨å’Œéšè”½ã€‚</p><h4 id="ä¸»é”®ä½¿ç”¨è‡ªå¢IDè¿˜æ˜¯UUIDï¼Ÿ">ä¸»é”®ä½¿ç”¨è‡ªå¢IDè¿˜æ˜¯UUIDï¼Ÿ</h4><p>æ¨èä½¿ç”¨è‡ªå¢idï¼Œå› ä¸ºmysqlä½¿ç”¨çš„ç®—æ³•æ˜¯B+æ ‘ï¼Œå¶å­èŠ‚ç‚¹ä¸ŠæŒ‰ç…§é¡ºåºå­˜æ”¾ä¸»é”®ç´¢å¼•ï¼Œè‹¥æ˜¯è‡ªå¢idï¼Œæ’å…¥æ•°æ®è¿›è¡Œå¾€ä¸‹æ’åˆ—å³å¯ã€‚å¦‚æœæ˜¯uuidï¼Œè‹¥æ–°çš„idä¸å·²æœ‰çš„idå¤§å°ä¸ä¸€è‡´ä¼šå¯¼è‡´æ•°æ®çš„ç§»åŠ¨ï¼Œäº§ç”Ÿå†…å­˜ç¢ç‰‡æ¶ˆè€—æ€§èƒ½ã€‚</p><h4 id="ä¼˜åŒ–æŸ¥è¯¢è¿‡ç¨‹ä¸­çš„æ•°æ®è®¿é—®">ä¼˜åŒ–æŸ¥è¯¢è¿‡ç¨‹ä¸­çš„æ•°æ®è®¿é—®</h4><p>é¿å…æŸ¥è¯¢è¿‡å¤šçš„ä¸å¿…è¦çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨limitå­—æ®µã€‚å°½é‡é¿å…ä½¿ç”¨select *è€Œåº”è¯¥ä½¿ç”¨selectå…·ä½“å­—æ®µï¼Œå°¤å…¶æ˜¯åœ¨å¤šè¡¨å…³è”æŸ¥è¯¢çš„æ—¶å€™æ›´åº”è¯¥æŒ‡å®šåˆ—åã€‚å¯¹äºçƒ­ç‚¹æ•°æ®çš„æŸ¥è¯¢ï¼Œåº”ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ç¼“å­˜ã€‚</p><h4 id="ä¼˜åŒ–ç‰¹å®šç±»å‹çš„æŸ¥è¯¢è¯­å¥">ä¼˜åŒ–ç‰¹å®šç±»å‹çš„æŸ¥è¯¢è¯­å¥</h4><p>ä½¿ç”¨count(*)ä¼šç›´æ¥ç»Ÿè®¡åˆ—æ ‘ï¼Œä¸å»ºè®®ä½¿ç”¨count(åˆ—å)ã€‚å½“å¯¹countæ²¡æœ‰ç¡®åˆ‡çš„éœ€æ±‚æ˜¯å¯ä»¥ç”¨explainè¿‘ä¼¼å€¼ä»£æ›¿countã€‚ä½¿ç”¨limitå¯ä»¥è®°å½•ä¸Šä¸€æ¬¡æŸ¥è¯¢çš„æœ€å¤§idã€‚</p><h4 id="ä¼˜åŒ–WHEREå­å¥">ä¼˜åŒ–WHEREå­å¥</h4><p>åœ¨whereå­å¥ä¸­åº”é¿å…ä½¿ç”¨nullï¼Œ!=å’Œå¤§äºå°äºæ“ä½œç¬¦ã€‚é¿å…ä½¿ç”¨inï¼Œnot inï¼Œé¿å…ä½¿ç”¨å‡½æ•°ï¼Œå‚æ•°å’Œè¡¨è¾¾å¼æ±‚å€¼ç­‰ã€‚éƒ½ä¼šå¯¼è‡´å…¨è¡¨æ‰«æã€‚</p><h4 id="MySQLæ•°æ®åº“cpué£™å‡åˆ°500-çš„è¯ä»–æ€ä¹ˆå¤„ç†ï¼Ÿ">MySQLæ•°æ®åº“cpué£™å‡åˆ°500%çš„è¯ä»–æ€ä¹ˆå¤„ç†ï¼Ÿ</h4><p>æŸ¥çœ‹å½“å‰çš„è¿›ç¨‹åˆ¤æ–­æ˜¯å¦æ˜¯mysqldçš„è¿›ç¨‹å¯¼è‡´çš„cpuå¢åŠ ã€‚å¦‚æœæ˜¯ä½¿ç”¨show processlistæŸ¥çœ‹sqlè¯­å¥çš„æ€§èƒ½æ¶ˆè€—ï¼Œæ‰¾åˆ°æ¶ˆè€—å¤§çš„sqlè¯­å¥æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œè¿›è¡Œsqlä¼˜åŒ–ã€‚</p><h3 id="springbootçŸ¥è¯†ç‚¹">springbootçŸ¥è¯†ç‚¹</h3><h4 id="Spring-Boot-çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ªï¼Ÿå®ƒä¸»è¦ç”±å“ªå‡ ä¸ªæ³¨è§£ç»„æˆçš„ï¼Ÿ">Spring Boot çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ªï¼Ÿå®ƒä¸»è¦ç”±å“ªå‡ ä¸ªæ³¨è§£ç»„æˆçš„ï¼Ÿ</h4><p>springbootçš„æ ¸å¿ƒæ³¨è§£æ˜¯springbootApplicationï¼Œå®ƒåŒ…å«ä¸‰ä¸ªæ³¨è§£åˆ†åˆ«æ˜¯springbootConfigurationï¼ŒEnableAutoConfigurationå’ŒComponentScanã€‚å…¶ä¸­SpringbootConfigurationç”¨äºå®ç°é…ç½®æ–‡ä»¶ï¼ŒEnableAutoConfigurationç”¨äºå®ç°è‡ªåŠ¨åŒ–é…ç½®ï¼ŒComponentScanå®ç°ç»„ä»¶æ‰«æã€‚</p><h4 id="ä»€ä¹ˆæ˜¯-JavaConfigï¼Ÿ">ä»€ä¹ˆæ˜¯ JavaConfigï¼Ÿ</h4><p>javaconfigæä¾›é…ç½®å®¹å™¨çš„çº¯javaæ–¹æ³•ï¼Œä»è€Œé¿å…ä½¿ç”¨ç¹æ‚çš„xmlé…ç½®ã€‚å¯ä»¥ç›´æ¥ä½¿ç”¨ç±»çš„æ–¹å¼æ¥è¿›è¡Œå®¹å™¨é…ç½®ã€‚é€šè¿‡æ³›å‹æŒ‰ç…§ç±»å‹çš„æ–¹å¼æ¥é…ç½®æ›´åŠ å®‰å…¨ï¼Œä¾¿äºé‡æ„ã€‚</p><h4 id="Spring-Boot-æ˜¯å¦å¯ä»¥ä½¿ç”¨-XML-é…ç½®">Spring Boot æ˜¯å¦å¯ä»¥ä½¿ç”¨ XML é…ç½® ?</h4><p>å¯ä»¥ä½¿ç”¨@importResourceæ³¨è§£æ¥ä½¿ç”¨xmlé…ç½®</p><h3 id="mybatisçŸ¥è¯†">mybatisçŸ¥è¯†</h3><h4 id="ä¸ºä»€ä¹ˆè¯´Mybatisæ˜¯åŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ï¼Ÿå®ƒä¸å…¨è‡ªåŠ¨çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ">ä¸ºä»€ä¹ˆè¯´Mybatisæ˜¯åŠè‡ªåŠ¨ORMæ˜ å°„å·¥å…·ï¼Ÿå®ƒä¸å…¨è‡ªåŠ¨çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ</h4><p>å…¨è‡ªåŠ¨ORM hibernateå¯ä»¥æ ¹æ®å¯¹è±¡å…³ç³»æ˜ å°„è·å–æ•°æ®ï¼Œè€ŒmybatisåŠè‡ªåŠ¨æ˜ å°„éœ€è¦è‡ªå·±ä¹¦å†™sqlè¯­å¥ã€‚</p><h4 id="mybatisçš„ä¼˜åŠ¿">mybatisçš„ä¼˜åŠ¿</h4><p>mybatisä½¿ç”¨çº¿ç¨‹æ± ï¼Œä½¿ç”¨çš„æ—¶å€™å»çº¿ç¨‹æ± ä¸­å–å³å¯ï¼Œé¿å…äº†åˆ›å»ºé‡Šæ”¾å¯¼è‡´çš„èµ„æºæ¶ˆè€—ã€‚</p><p>mybatiså°†javaä»£ç å’Œsqlè¯­å¥åˆ†ç¦»å¼€æ¥ï¼Œé…ç½®åœ¨mapper.xmlä¸­ï¼Œå¯¹ç³»ç»Ÿè¿›è¡Œè§£è€¦ã€‚</p><p>mybatiså¯ä»¥å°†ç±»å¯¹è±¡ç›´æ¥æ˜ å°„åˆ°sqlè¯­å¥ï¼Œåä¹‹æ ¹æ®è¿”å›ç±»å‹çš„è®¾ç½®å¯ä»¥å°†æ•°æ®æ˜ å°„åˆ°ç±»ã€‚</p><h4 id="MyBatisçš„å·¥ä½œåŸç†">MyBatisçš„å·¥ä½œåŸç†</h4><p>æ¡†æ¶å¯åŠ¨åŠ è½½mybatisçš„é…ç½®æ–‡ä»¶ï¼Œè¯»å–é¡¹ç›®ä¸­çš„å¯¹åº”çš„mapper.xmlä¸­çš„sqlè¯­å¥ã€‚æ„é€ ä¼šè¯å·¥å‚sqlsessionfactoryï¼Œåˆ›å»ºsqlsessionä¼šè¯ä¿¡æ¯ã€‚ä½¿ç”¨execæ‰§è¡Œå™¨åˆ›å»ºmappedstatementå¯¹è±¡ï¼Œmapped statementè¯»å–ä¼ å…¥çš„å‚æ•°ï¼Œå¹¶å°†è¿”å›çš„æ•°æ®æ˜ å°„åˆ°ç±»å¯¹è±¡ã€‚</p><h4 id="ä¸ºä»€ä¹ˆéœ€è¦é¢„ç¼–è¯‘">ä¸ºä»€ä¹ˆéœ€è¦é¢„ç¼–è¯‘</h4><p>é¢„ç¼–è¯‘çš„sqlè¯­å¥åœ¨æ•°æ®åº“æ‹¿åˆ°ä¹‹åå¯ä»¥ç›´æ¥æ‰§è¡Œï¼Œå‡å°‘æ•°æ®åº“å¯¹å¤æ‚sqlè¯­å¥ç¼–è¯‘çš„æ¶ˆè€—ã€‚</p><p>å¯¹äºé¢„ç¼–è¯‘äº§ç”Ÿçš„statementå¯¹è±¡å¯ä»¥é‡å¤åˆ©ç”¨ä»è€Œå‡å°‘å¼€é”€ã€‚</p><p>ä½¿ç”¨é¢„ç¼–è¯‘å¯ä»¥é˜²æ­¢sqlæ³¨å…¥ã€‚</p><h4 id="Mybatiséƒ½æœ‰å“ªäº›Executoræ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ">Mybatiséƒ½æœ‰å“ªäº›Executoræ‰§è¡Œå™¨ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>mybatisæœ‰ä¸‰ç§æ‰§è¡Œå™¨ï¼Œsimpleï¼Œreuseå’Œbatch</p><p>simpleæ¯æ‰§è¡Œä¸€æ¬¡æŸ¥è¯¢æˆ–è€…æ›´æ–°åˆ›å»ºä¸€ä¸ªstatementå¯¹è±¡ï¼Œä½¿ç”¨å®Œåå…³é—­ã€‚</p><p>reuseåˆ›å»ºstatementå¯¹è±¡åï¼Œä½¿ç”¨å®Œä¸å…³é—­ï¼Œæ”¾å…¥Mapä¸­å­˜å‚¨è¿›è¡Œé‡å¤ä½¿ç”¨ã€‚</p><p>batchæ‰§è¡Œæ›´æ–°æ—¶ä½¿ç”¨æ‰¹å¤„ç†ï¼Œå°†æ‰€æœ‰sqlæ·»åŠ åˆ°æ‰¹å¤„ç†ä¹‹åç»Ÿä¸€æ‰§è¡Œã€‚</p><h4 id="Mybatisä¸­å¦‚ä½•æŒ‡å®šä½¿ç”¨å“ªä¸€ç§Executoræ‰§è¡Œå™¨ï¼Ÿ">Mybatisä¸­å¦‚ä½•æŒ‡å®šä½¿ç”¨å“ªä¸€ç§Executoræ‰§è¡Œå™¨ï¼Ÿ</h4><p>å¯ä»¥åœ¨mybatisçš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®æ‰§è¡Œå™¨ã€‚ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºsqlsessionfactoryå·¥å‚æ—¶å°†æ‰§è¡Œå™¨çš„ç±»å‹ä½œä¸ºå‚æ•°æŒ‡å®šã€‚</p><h4 id="Mybatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ">Mybatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå¦‚æœæ”¯æŒï¼Œå®ƒçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>åœ¨mybatisä¸­å¯¹äºassociationå’Œcollectionæ˜¯æ”¯æŒå»¶è¿ŸåŠ è½½çš„ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡lazyLoadingEnableå¼€å¯å»¶è¿ŸåŠ è½½ã€‚</p><p>ä½¿ç”¨cglibåˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå½“è¿›è¡Œæ–¹æ³•è°ƒç”¨çš„æ—¶å€™å‘ç°å€¼ä¸ºç©ºæ—¶ï¼Œæ ¹æ®å®ç°ä¿å­˜çš„sqlæŸ¥è¯¢åˆ°å½“å‰ä¸ºç©ºçš„å€¼å¹¶è¿›è¡Œèµ‹å€¼ï¼Œç„¶ååœ¨è¿›è¡Œæ–¹æ³•è°ƒç”¨ã€‚</p><h4 id="å’Œ-çš„åŒºåˆ«">#{}å’Œ${}çš„åŒºåˆ«</h4><p>#{}ä¼šå¯¹sqlè¯­å¥è¿›è¡Œé¢„å¤„ç†å¯ä»¥é˜²æ­¢sqlæ³¨å…¥ã€‚è€Œ${}æ˜¯ç›´æ¥å°†å­—ç¬¦ä¸²è¿›è¡Œæ›¿æ¢ã€‚</p><h4 id="æ¨¡ç³ŠæŸ¥è¯¢likeè¯­å¥è¯¥æ€ä¹ˆå†™">æ¨¡ç³ŠæŸ¥è¯¢likeè¯­å¥è¯¥æ€ä¹ˆå†™</h4><p>ä¸€èˆ¬ç”¨concat(â€™%â€™,#{},â€™%â€™)çš„å½¢å¼æ‹¼æ¥æŸ¥è¯¢ã€‚</p><p>ä¹Ÿå¯ä»¥åœ¨sqlä¸­ä½¿ç”¨bindæ ‡ç­¾ï¼ŒæŒ‡å®šnameå’Œvalueï¼Œå…¶ä¸­valueè¿›è¡Œç»„åˆæŸ¥è¯¢å­—æ®µï¼Œsqlè¯­å¥ä¸­ä½¿ç”¨bindæ ‡ç­¾å®šä¹‰çš„nameã€‚</p><h4 id="åœ¨mapperä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°">åœ¨mapperä¸­å¦‚ä½•ä¼ é€’å¤šä¸ªå‚æ•°</h4><p>å¯ä»¥ä½¿ç”¨å ä½ç¬¦çš„æ–¹å¼ï¼Œå³0ï¼Œ1</p><p>å¯ä»¥åœ¨daoå±‚çš„æ¥å£ä¸­ä½¿ç”¨Paramæ³¨è§£ï¼ŒæŒ‡å®šä¼ å…¥å‚æ•°çš„åç§°</p><p>å¯ä»¥å°è£…mapï¼Œå°†mapä¸­çš„keyä¸å­—æ®µè¿›è¡Œç›´æ¥æ˜ å°„ã€‚</p><p>ä½¿ç”¨javabeanï¼Œé€šè¿‡parameterTypeä¼ å…¥æŒ‡å®šçš„ç±»çš„åœ°å€è¿›è¡Œç±»å’Œå­—æ®µçš„æ˜ å°„ã€‚</p><h4 id="Mybatiså¦‚ä½•æ‰§è¡Œæ‰¹é‡æ“ä½œ">Mybatiså¦‚ä½•æ‰§è¡Œæ‰¹é‡æ“ä½œ</h4><p>ä½¿ç”¨foreachè¿›è¡Œè¿­ä»£å¤„ç†ã€‚</p><h4 id="å¦‚ä½•è·å–ç”Ÿæˆçš„ä¸»é”®">å¦‚ä½•è·å–ç”Ÿæˆçš„ä¸»é”®</h4><p>å¼€å¯useGeneratedKeysæ ‡ç­¾ï¼Œä½¿ç”¨keyPropertyæŒ‡å®šè¿”å›çš„ä¸»é”®å­—æ®µåç§°ã€‚</p><h4 id="å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ ·-ï¼Œæ€ä¹ˆåŠ">å½“å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸ä¸€æ · ï¼Œæ€ä¹ˆåŠ</h4><p>åœ¨sqlè¯­å¥ä¸­å¯ä»¥å®šä¹‰åˆ«åã€‚</p><p>ä½¿ç”¨resultMapå®šä¹‰æ˜ å°„å…³ç³»ï¼Œåœ¨sqlæ ‡ç­¾ä¸­æŒ‡å®šå®šä¹‰çš„resultMapè¿›è¡Œæ˜ å°„ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯MyBatisçš„æ¥å£ç»‘å®šï¼Ÿæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ">ä»€ä¹ˆæ˜¯MyBatisçš„æ¥å£ç»‘å®šï¼Ÿæœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ</h4><p>å°†æ¥å£å’Œsqlè¯­å¥ç»‘å®šï¼Œä½¿ç”¨æ¥å£å³å¯è°ƒç”¨sqlè¿›è¡Œæ•°æ®æŸ¥è¯¢ã€‚</p><p>ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¥ç»‘å®šï¼Œä½†æ˜¯è€¦åˆåº¦å¤ªé«˜ã€‚</p><p>ä¸€èˆ¬ä½¿ç”¨namespaceæŒ‡å®šdaoç±»çš„æ–¹å¼è¿›è¡Œæ¥å£ç»‘å®šã€‚</p><h4 id="ä½¿ç”¨MyBatisçš„mapperæ¥å£è°ƒç”¨æ—¶æœ‰å“ªäº›è¦æ±‚ï¼Ÿ">ä½¿ç”¨MyBatisçš„mapperæ¥å£è°ƒç”¨æ—¶æœ‰å“ªäº›è¦æ±‚ï¼Ÿ</h4><p>æ–¹æ³•åå’Œsqlidè¦ç›¸åŒã€‚</p><p>ä¼ å…¥å‚æ•°å’Œè¿”å›å‚æ•°çš„ç±»å‹è¦åœ¨sqlä¸­é€šè¿‡parameterTypeå’ŒresultTypeè¿›è¡Œå®šä¹‰ã€‚</p><h4 id="Mybatisæ˜ å°„æ–‡ä»¶ä¸­ï¼Œå¦‚æœAæ ‡ç­¾é€šè¿‡includeå¼•ç”¨äº†Bæ ‡ç­¾çš„å†…å®¹ï¼Œè¯·é—®ï¼ŒBæ ‡ç­¾èƒ½å¦å®šä¹‰åœ¨Aæ ‡ç­¾çš„åé¢ï¼Œè¿˜æ˜¯è¯´å¿…é¡»å®šä¹‰åœ¨Aæ ‡ç­¾çš„å‰é¢ï¼Ÿ">Mybatisæ˜ å°„æ–‡ä»¶ä¸­ï¼Œå¦‚æœAæ ‡ç­¾é€šè¿‡includeå¼•ç”¨äº†Bæ ‡ç­¾çš„å†…å®¹ï¼Œè¯·é—®ï¼ŒBæ ‡ç­¾èƒ½å¦å®šä¹‰åœ¨Aæ ‡ç­¾çš„åé¢ï¼Œè¿˜æ˜¯è¯´å¿…é¡»å®šä¹‰åœ¨Aæ ‡ç­¾çš„å‰é¢ï¼Ÿ</h4><p>é¡ºåºæ²¡æœ‰å…³ç³»ï¼Œå½“aæ ‡ç­¾è°ƒç”¨bæ ‡ç­¾æ—¶ï¼Œè‹¥aæ ‡ç­¾è§£ææ—¶å‘ç°bä¸å­˜åœ¨ï¼Œåˆ™ä¼šæš‚åœaæ ‡ç­¾è§£æï¼Œè§£æéœ€è¦çš„æ ‡ç­¾ï¼Œéœ€è¦çš„æ ‡ç­¾è§£æå®Œæ¯•ä¹‹åï¼Œåœ¨è§£æaæ ‡ç­¾ã€‚</p><h4 id="MyBatiså®ç°ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šæœ‰å‡ ç§æ–¹å¼ï¼Œæ€ä¹ˆæ“ä½œçš„ï¼Ÿ">MyBatiså®ç°ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šæœ‰å‡ ç§æ–¹å¼ï¼Œæ€ä¹ˆæ“ä½œçš„ï¼Ÿ</h4><p>é€šè¿‡associationæ ‡ç­¾å®ç°ä¸€å¯¹ä¸€ï¼Œé€šè¿‡collectionæ ‡ç­¾å®ç°ä¸€å¯¹å¤šã€‚</p><h3 id="SpringçŸ¥è¯†ç‚¹">SpringçŸ¥è¯†ç‚¹</h3><h4 id="ç‰ˆæœ¬è¿­ä»£">ç‰ˆæœ¬è¿­ä»£</h4><p>4.x å¢åŠ äº†lamdaè¡¨è¾¾å¼ï¼ŒåŒæ—¶ä¸ºäº†é€‚é…restfuiæ¥å£æ ¼å¼ï¼Œæ·»åŠ äº†restControlleræ¥å£ã€‚</p><p>5.xæ”¯æŒå‡½æ•°å’Œå“åº”å¼ç¼–ç¨‹</p><h4 id="springæ ¸å¿ƒ">springæ ¸å¿ƒ</h4><p>springæ ¸å¿ƒåŒ…æ‹¬IOCï¼ŒAOPå’ŒDI</p><p>å…¶ä¸­IOCæ˜¯æ§åˆ¶åè½¬ï¼Œspringæ¡†æ¶èµ·åˆ°äº†ä¸­ä»‹çš„ä½œç”¨ï¼Œç¨‹åºå‘˜åªéœ€è¦ç¼–ç¨‹è‡ªå·±çš„éœ€æ±‚ï¼Œç›¸åº”çš„æä¾›ç”±springæ¡†æ¶æ¥å®Œæˆã€‚å®ç°äº†å¯æ’æ‹”å¼æ¥å£ï¼Œé™ä½äº†ä»£ç çš„è€¦åˆåº¦ã€‚</p><p>ä¸ºäº†æå‡ç»„ä»¶é‡ç”¨çš„æ¦‚ç‡ï¼Œä½¿ç”¨DIï¼Œå®¹å™¨åœ¨ç³»ç»Ÿè¿è¡ŒæœŸé—´è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚é€šè¿‡DIæ¥å®ç°springçš„IOCçš„åŠŸèƒ½ã€‚</p><p>å¸¸è§çš„æ³¨å…¥æ¨¡å¼ä¸€èˆ¬ä¸ºsetteræ³¨å…¥å’Œæ„é€ æ–¹æ³•æ³¨å…¥å’Œæ³¨è§£æ³¨å…¥ã€‚</p><p>ä½¿ç”¨setteræ–¹å¼æ³¨å…¥ä¸€èˆ¬ä½¿ç”¨xmlçš„å½¢å¼ï¼Œä½¿ç”¨beanæ ‡ç­¾è¿›è¡Œç±»çš„æ³¨å…¥ã€‚</p><p>ä½¿ç”¨æ³¨è§£æ³¨å…¥ä¸€èˆ¬ä½¿ç”¨autowiredï¼Œserviceç­‰æ³¨è§£å®ç°ã€‚</p><p>aopæ˜¯åˆ‡é¢ç¼–ç¨‹ï¼Œä¸€èˆ¬ä½¿ç”¨æ³¨è§£çš„æ–¹å¼afterï¼Œbeforeï¼Œpointcutç­‰æ³¨è§£å®ç°ï¼Œä½¿ç”¨springbootä¹‹åè¿›è¡Œæ—¥å¿—è®°å½•æˆ–è€…æ¥å£é˜²åˆ·ç­‰ï¼Œè‡ªå®šä¹‰æ³¨è§£åï¼Œåœ¨å…·ä½“çš„æ–¹æ³•ä¸Šä½¿ç”¨è‡ªå·±çš„æ³¨è§£å³å¯ã€‚</p><h4 id="Component-å’Œ-Bean-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ">@Component å’Œ @Bean æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>@Componentæ³¨è§£ä¸»è¦è¿ç”¨äºç±»ä¸Šé¢ï¼Œä½¿ç”¨SomponentScanè¿›è¡Œæ‰«æå¹¶æ³¨å†Œåˆ°springå®¹å™¨ä¹‹ä¸­ï¼Œè€Œ@beanä¸»è¦è¿ç”¨äºæ–¹æ³•ï¼Œæ ‡å¿—æŸä¸ªç±»çš„å®ä¾‹ï¼Œéœ€è¦æ—¶åœ¨ä½¿ç”¨ã€‚</p><h4 id="Spring-ä¸­-bean-çš„ä½œç”¨åŸŸæœ‰å‡ ç§ç±»å‹ï¼Ÿ">Spring ä¸­ bean çš„ä½œç”¨åŸŸæœ‰å‡ ç§ç±»å‹ï¼Ÿ</h4><p>å•ä¾‹æ¨¡å¼æ•´ä¸ªåº”ç”¨ç¨‹åºåªåˆ›å»ºä¸€ä¸ªbeanã€‚åŸå‹æ¨¡å¼ï¼Œæ¯æ¬¡æ³¨å…¥éƒ½ä¼šåˆ›å»ºä¸€ä¸ªbeanã€‚ä¼šè¯æ¨¡å¼ï¼Œæ¯æ¬¡ä¼šè¯åˆ›å»ºä¸€ä¸ªbeanï¼Œä½†åªåœ¨webç³»ç»Ÿä¸­æœ‰æ•ˆã€‚è¯·æ±‚æ¨¡å¼ï¼Œæ¯æ¬¡è¯·æ±‚åˆ›å»ºä¸€ä¸ªbeanï¼Œåªåœ¨webç³»ç»Ÿä¸­æœ‰æ•ˆã€‚</p><h4 id="springå®ç°äº‹åŠ¡çš„æ–¹å¼">springå®ç°äº‹åŠ¡çš„æ–¹å¼</h4><p>ä½¿ç”¨ç¼–ç¨‹å¼æˆ–è€…æ³¨è§£çš„æ–¹æ³•ã€‚ä¸€èˆ¬ä½¿ç”¨ä¸»æœºçš„æ–¹æ³•ä½¿ç”¨äº‹åŠ¡ã€‚å£°æ˜å¼äº‹åŠ¡ï¼Œåº•å±‚æ˜¯å»ºç«‹åœ¨ Spring AOP çš„åŸºç¡€ä¸Šï¼Œåœ¨æ–¹å¼æ‰§è¡Œå‰åè¿›è¡Œæ‹¦æˆªï¼Œå¹¶åœ¨ç›®æ ‡æ–¹æ³•å¼€å§‹æ‰§è¡Œå‰åˆ›å»ºæ–°äº‹åŠ¡æˆ–åŠ å…¥ä¸€ä¸ªå·²å­˜åœ¨äº‹åŠ¡ï¼Œæœ€ååœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œåæ ¹æ®æƒ…å†µæäº¤æˆ–è€…å›æ»šäº‹åŠ¡ã€‚<br>å£°æ˜å¼äº‹åŠ¡çš„ä¼˜ç‚¹ï¼šä¸éœ€è¦ç¼–ç¨‹ï¼Œå‡å°‘äº†ä»£ç çš„è€¦åˆï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®å¹¶åœ¨ç›®æ ‡æ–¹æ³•ä¸Šæ·»åŠ  @Transactional æ³¨è§£æ¥å®ç°ã€‚</p><h4 id="Spring-å£°æ˜å¼äº‹åŠ¡æ— æ•ˆå¯èƒ½çš„åŸå› æœ‰å“ªäº›ï¼Ÿ">Spring å£°æ˜å¼äº‹åŠ¡æ— æ•ˆå¯èƒ½çš„åŸå› æœ‰å“ªäº›ï¼Ÿ</h4><p>mysqlä½¿ç”¨MyISAMå¼•æ“ã€‚</p><p>æ³¨è§£åªæ”¯æŒpublicæ–¹æ³•ã€‚</p><h4 id="Spring-ä¸­çš„-Bean-æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ">Spring ä¸­çš„ Bean æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</h4><p>beané»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ï¼Œæ‰€ä»¥æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚å¯ä»¥è®¾ç½®ä¸ºåŸå‹æ¨¡å¼ï¼Œæ¯æ¬¡æ³¨å…¥åˆ›å»ºä¸€ä¸ªbeanå¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p><h4 id="Spring-ä¸­éƒ½æ˜¯ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ">Spring ä¸­éƒ½æ˜¯ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</h4><p>åœ¨listenä¸­è¿›è¡Œç›‘å¬ï¼ŒåŠ¨ä½œè§¦å‘è¿›è¡Œé€šçŸ¥ä½¿ç”¨äº†è§‚å¯Ÿè€…æ¨¡å¼ã€‚</p><p>é€šè¿‡beanFactoryæˆ–è€…ApplicationContextåˆ›å»ºbeanä½¿ç”¨çš„æ˜¯å·¥å‚æ¨¡å¼ã€‚</p><p>beançš„å•ä¾‹æˆ–è€…åŸå‹ä½¿ç”¨å•ä¾‹åŸå‹æ¨¡å¼ã€‚</p><p>åœ¨åˆ›å»ºä»£ç†ç±»æ—¶ï¼Œæ ¹æ®ä»£ç†çš„æ˜¯ä¸æ˜¯æ¥å£é€‰æ‹©ä¸åŒçš„ä»£ç†æ–¹å¼ä½¿ç”¨çš„æ˜¯ç­–ç•¥æ¨¡å¼ã€‚</p><h3 id="SpringMVCçŸ¥è¯†ç‚¹">SpringMVCçŸ¥è¯†ç‚¹</h3><h4 id="Spring-MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ">Spring MVCçš„ä¸»è¦ç»„ä»¶ï¼Ÿ</h4><p>DispatcherServletå‰ç«¯æ§åˆ¶å™¨ï¼Œä¸»è¦ç”¨äºæ¥æ”¶è¯·æ±‚å’Œå“åº”ç»“æœã€‚</p><p>HandlerMappingæ˜ å°„å™¨ï¼Œæ ¹æ®å¯¹åº”çš„æ˜ å°„è·¯å¾„æ‰¾åˆ°handlerã€‚</p><p>HandlerAdapteré€‚é…å™¨ï¼Œç”¨äºæ‰§è¡Œhandlerã€‚</p><p>handlerç¨‹åºå‘˜å¼€å‘ï¼Œç›¸å½“äºæ–¹æ³•ã€‚</p><p>ViewResolverè§†å›¾è§£æå™¨ï¼Œç”¨äºè§£æè§†å›¾ã€‚</p><p>Viewè§†å›¾ï¼Œå³ç¨‹åºå‘˜ç¼–å†™çš„å‰ç«¯é¡µé¢ã€‚</p><h4 id="è¯·æè¿°Spring-MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹-DispatcherServlet-çš„å·¥ä½œæµç¨‹ï¼Ÿ">è¯·æè¿°Spring MVCçš„å·¥ä½œæµç¨‹ï¼Ÿæè¿°ä¸€ä¸‹ DispatcherServlet çš„å·¥ä½œæµç¨‹ï¼Ÿ</h4><p>ç”¨æˆ·å‘èµ·è¯·æ±‚è‡³DispatcherServletï¼ŒDispatcherServletæ‹¿åˆ°è¯·æ±‚ä¹‹åè°ƒç”¨handlerMappingæ˜ å°„å™¨è¯·æ±‚è·å–handlerã€‚HandlerMappingæ ¹æ®urlæ˜ å°„åœ°å€æ‰¾åˆ°handleråç”Ÿæˆå¤„ç†å™¨å¯¹è±¡è¿”å›ç»™DispatcherServletã€‚DispatcherServletæ‹¿åˆ°å¯¹è±¡ä¹‹åè°ƒç”¨adapteré€‚é…å™¨ï¼Œé€‚é…å™¨è°ƒç”¨å…·ä½“çš„handlerå¤„ç†é€»è¾‘ï¼Œæœ€ç»ˆè¿”å›modelandViewã€‚DispatcherServletå°†ModelAndViewä¼ ç»™ViewResolverè§†å›¾è§£æå™¨è§£æã€‚è§£æå®Œæˆåé€ç»™viewé¡µé¢ã€‚DispatcherServletæ¸²æŸ“é¡µé¢ï¼Œå°†æ•°æ®æ˜¾ç¤ºåˆ°è§†å›¾ä¸­ï¼Œæœ€ç»ˆå“åº”ç»™ç”¨æˆ·ã€‚</p><h4 id="MVCæ˜¯ä»€ä¹ˆï¼ŸMVCè®¾è®¡æ¨¡å¼çš„å¥½å¤„æœ‰å“ªäº›">MVCæ˜¯ä»€ä¹ˆï¼ŸMVCè®¾è®¡æ¨¡å¼çš„å¥½å¤„æœ‰å“ªäº›</h4><p>MVCæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œé‡‡ç”¨ä¸‰å±‚æ¶æ„çš„æ–¹å¼ã€‚å°†ç³»ç»Ÿè¿›è¡Œè§£è€¦ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p><h4 id="Spring-MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ">Spring MVCå¸¸ç”¨çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</h4><p>@RequestMappingç”¨äºæ˜ å°„urlå’Œç±»ä¸­çš„æ–¹æ³•ã€‚</p><p>@RequestBodyå°†httpè¯·æ±‚ä¸­æ¥æ”¶åˆ°çš„jsonæ•°æ®è½¬æ¢ä¸ºç³»ç»Ÿä¸­çš„ç±»ã€‚</p><p>@ResponseBodyå°†è¿”å›çš„ç±»æ•°æ®è½¬æ¢ä¸ºjsonè¿”å›ç»™å‰ç«¯ã€‚</p><h4 id="Controlleræ³¨è§£çš„ä½œç”¨">@Controlleræ³¨è§£çš„ä½œç”¨</h4><p>@Controllerè´Ÿè´£æ¥æ”¶DispatcherServletçš„è¯·æ±‚ï¼Œç„¶åäº¤ç”±å¯¹åº”çš„æ–¹æ³•å¤„ç†ï¼Œæœ€ç»ˆå†æŠŠè¿”å›çš„ModelAndViewäº¤ç»™è§†å›¾ã€‚åœ¨ç±»ä¸Šæ ‡æ³¨æ³¨è§£å¹¶åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ è½½å¯¹åº”çš„controllerç±»çš„beanå¯¹è±¡å³å¯ã€‚</p><h4 id="Spring-MVCæ€ä¹ˆæ ·è®¾å®šé‡å®šå‘å’Œè½¬å‘çš„ï¼Ÿ">Spring MVCæ€ä¹ˆæ ·è®¾å®šé‡å®šå‘å’Œè½¬å‘çš„ï¼Ÿ</h4><p>è½¬å‘ä½¿ç”¨forwardï¼Œä¸æ”¹å˜é¡µé¢è·¯å¾„ã€‚è€Œé‡å®šå‘ä½¿ç”¨redirectï¼Œæ”¹å˜é¡µé¢urlã€‚</p><h4 id="å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ">å¦‚ä½•è§£å†³POSTè¯·æ±‚ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ŒGETçš„åˆå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</h4><p>POSTè¯·æ±‚åœ¨web.xmlæ–‡ä»¶ä¸­é…ç½®ä¸€ä¸‹CharacterEncodeingFilterçš„å±æ€§ä¸ºutf-8å³å¯ã€‚</p><p>GETè¯·æ±‚ä¿®æ”¹ä¸€ä¸‹tomcatæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ã€‚</p><h3 id="javaSE">javaSE</h3><h4 id="JVMã€JREå’ŒJDKçš„å…³ç³»">JVMã€JREå’ŒJDKçš„å…³ç³»</h4><p>jvmæ˜¯è™šæ‹Ÿæœºï¼Œjavaç¨‹åºæ˜¯è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸Šçš„ï¼Œä¸åŒçš„å¹³å°æœ‰ä¸åŒçš„è™šæ‹Ÿæœºï¼Œå› æ­¤javaæ˜¯å¯ä»¥è·¨å¹³å°çš„ã€‚</p><p>jreæ˜¯è™šæ‹Ÿæœºå’Œjavaç¨‹åºè¿è¡Œçš„å¿…ä¸å¯å°‘çš„ç±»åº“å’Œå„ç§åŒ…ã€‚</p><p>jdkæ˜¯ç¨‹åºå‘˜ä½¿ç”¨çš„å¼€å‘å·¥å…·ï¼ŒåŒ…æ‹¬jreå’Œç¼–è¯‘å·¥å…·ï¼Œæ‰“åŒ…å·¥å…·ç­‰ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿé‡‡ç”¨å­—èŠ‚ç çš„æœ€å¤§å¥½å¤„æ˜¯ä»€ä¹ˆ">ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿé‡‡ç”¨å­—èŠ‚ç çš„æœ€å¤§å¥½å¤„æ˜¯ä»€ä¹ˆ</h4><p>å­—èŠ‚ç æ˜¯javaä»£ç é€šè¿‡è™šæ‹Ÿæœºç¼–è¯‘åäº§ç”Ÿçš„åªé¢å‘è™šæ‹Ÿæœºçš„.classæ–‡ä»¶ã€‚</p><p>ä½¿ç”¨å­—èŠ‚ç ï¼Œç”±äºå­—èŠ‚ç æ˜¯é¢å‘è™šæ‹Ÿæœºçš„ï¼Œå› æ­¤ç§»æ¤çš„æ—¶å€™å®‰è£…å…·ä½“çš„è™šæ‹Ÿæœºå³å¯ï¼Œä¸ç”¨è€ƒè™‘å¹³å°ã€‚ä½¿ç”¨å­—èŠ‚ç ï¼Œè™šæ‹Ÿæœºè§£é‡Šè¯­è¨€çš„æ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚</p><h4 id="Javaæœ‰å“ªäº›æ•°æ®ç±»å‹">Javaæœ‰å“ªäº›æ•°æ®ç±»å‹</h4><p>byte 1å­—èŠ‚ï¼Œint 4å­—èŠ‚ï¼Œboolean ä¸€å­—èŠ‚ï¼Œdouble 8å­—èŠ‚ï¼Œlong 8å­—èŠ‚ï¼Œchar 2å­—èŠ‚ï¼Œshort 2å­—èŠ‚ã€‚float 4å­—èŠ‚ã€‚</p><p>å¯¹åº”çš„åŒ…è£…ç±»ï¼ŒByteï¼ŒIntegerï¼ŒBooleanï¼ŒDoubleï¼ŒLongï¼ŒCharacterï¼ŒShortï¼ŒFloat</p><h4 id="switch-æ˜¯å¦èƒ½ä½œç”¨åœ¨-byte-ä¸Šï¼Œæ˜¯å¦èƒ½ä½œç”¨åœ¨-long-ä¸Šï¼Œæ˜¯å¦èƒ½ä½œç”¨åœ¨-String-ä¸Š">switch æ˜¯å¦èƒ½ä½œç”¨åœ¨ byte ä¸Šï¼Œæ˜¯å¦èƒ½ä½œç”¨åœ¨ long ä¸Šï¼Œæ˜¯å¦èƒ½ä½œç”¨åœ¨ String ä¸Š</h4><p>java7ä¹‹åswitchæ˜¯å¯ä»¥æ”¯æŒStringçš„ï¼Œbyteæ˜¯ä¸€åªæ”¯æŒçš„ã€‚longæ˜¯ä¸æ”¯æŒçš„ã€‚</p><h4 id="ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•è®¡ç®—-2-ä¹˜ä»¥-8">ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•è®¡ç®— 2 ä¹˜ä»¥ 8</h4><p>a&lt;&lt;bï¼Œ&lt;&lt;ç›¸å½“äºä¹˜ï¼Œ&gt;&gt;ç›¸å½“äºé™¤ï¼Œaä¸ºåº•æ•°ï¼Œbä¸ºæ¬¡æ–¹ã€‚</p><h4 id="Math-round-11-5-ç­‰äºå¤šå°‘ï¼ŸMath-round-11-5-ç­‰äºå¤šå°‘">Math.round(11.5) ç­‰äºå¤šå°‘ï¼ŸMath.round(-11.5)ç­‰äºå¤šå°‘</h4><p>roundå‡½æ•°å¯¹äºæ­£æ•°æ¥è®²å‘ä¸Šå–æ•´ï¼Œå¯¹äºè´Ÿæ•°æ¥è¯´ä¹Ÿæ˜¯å‘ä¸Šå–æ•´ã€‚</p><h4 id="short-s1-1-s1-s1-1-æœ‰é”™å—-short-s1-1-s1-1-æœ‰é”™å—">short s1 = 1; s1 = s1 + 1;æœ‰é”™å—?short s1 = 1; s1 += 1;æœ‰é”™å—</h4><p>+=ç¬¦å·ä¼šè‡ªåŠ¨è¿›è¡Œè½¬å‹ï¼Œä¸ä¼šå‘ç”Ÿé”™è¯¯ã€‚</p><h4 id="è®¿é—®ä¿®é¥°ç¬¦-public-private-protected-ä»¥åŠä¸å†™ï¼ˆé»˜è®¤ï¼‰æ—¶çš„åŒºåˆ«">è®¿é—®ä¿®é¥°ç¬¦ public,private,protected,ä»¥åŠä¸å†™ï¼ˆé»˜è®¤ï¼‰æ—¶çš„åŒºåˆ«</h4><p>publicæ˜¯åŒåŒ…ä¸‹å’Œå…¶ä»–åŒ…ä¸‹ï¼Œprivateæ˜¯æœ¬ç±»ï¼Œprotectæ˜¯æœ¬åŒ…ï¼Œå­ç±»ã€‚defaultæ˜¯æœ¬åŒ…ã€‚</p><h4 id="å’Œ-çš„åŒºåˆ«-2">&amp;å’Œ&amp;&amp;çš„åŒºåˆ«</h4><p>å’Œ| ||ç›¸åŒï¼Œ&amp;åªæ˜¯å‰ä¸€ä¸ªæˆåŠŸï¼Œåä¸€ä¸ªå°±å¿½ç•¥ã€‚è€Œ&amp;&amp;æ˜¯åŒæ–¹å¿…é¡»éƒ½æˆåŠŸã€‚</p><h4 id="final-æœ‰ä»€ä¹ˆç”¨ï¼Ÿ">final æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h4><p>finalä¿®é¥°å˜é‡æ— æ³•æ›´æ”¹ã€‚ä¿®é¥°æ–¹æ³•æ— æ³•é‡å†™ã€‚ä¿®é¥°ç±»æ— æ³•ç»§æ‰¿ã€‚</p><p>finalä¿®é¥°å˜é‡æ—¶ï¼Œè‹¥å˜é‡æ˜¯å¼•ç”¨å˜é‡ï¼Œåœ°å€æ— æ³•æ›´æ”¹ï¼Œè€Œå†…å®¹å¯ä»¥æ›´æ”¹ã€‚</p><h4 id="final-finally-finalizeåŒºåˆ«">final finally finalizeåŒºåˆ«</h4><p>finallyç”¨äºå¼‚å¸¸æ•è·ï¼Œæ— è®ºå¼‚å¸¸æ˜¯å¦å‘ç”Ÿéƒ½ä¼šæ‰§è¡Œï¼Œä¸”åœ¨æ–¹æ³•returnä¹‹å‰æ‰§è¡Œã€‚finalizeæ˜¯Objectçš„æ–¹æ³•ï¼Œæ‰€æœ‰çš„ç±»éƒ½ç»§æ‰¿ï¼Œå¦‚æœå®ç°äº†è¯¥æ–¹æ³•ï¼Œåœ¨ç¬¬ä¸€æ¬¡åƒåœ¾å›æ”¶è¯¥å¯¹è±¡æ—¶ï¼Œå…ˆè°ƒç”¨è¯¥æ–¹æ³•ã€‚ç¬¬äºŒæ¬¡åˆ™è¿›è¡Œæ ‡è®°ç›´æ¥å›æ”¶ã€‚</p><h4 id="staticå­˜åœ¨çš„ä¸»è¦æ„ä¹‰">staticå­˜åœ¨çš„ä¸»è¦æ„ä¹‰</h4><p>å³ä¾¿æ²¡æœ‰åˆ›å»ºå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç±»åè°ƒç”¨å˜é‡å’Œæ–¹æ³•ã€‚</p><p>ä½¿ç”¨é™æ€ä»£ç å—æ¥ä¼˜åŒ–æ€§èƒ½ï¼Œåœ¨ç±»ä¸­è€Œä¸æ˜¯æ–¹æ³•ä¸­æ˜¯æ— æ³•è¿›è¡Œå˜é‡è¿ç®—çš„ï¼Œå¯ä»¥ä½¿ç”¨é™æ€ä»£ç å—ã€‚</p><h4 id="staticçš„ç‹¬ç‰¹ä¹‹å¤„">staticçš„ç‹¬ç‰¹ä¹‹å¤„</h4><p>ä¸å±äºåˆ›å»ºçš„å®ä¾‹å¯¹è±¡ï¼Œè€Œæ˜¯è¢«ç±»çš„å®ä¾‹å¯¹è±¡å…±äº«ã€‚</p><p>å…±äº«å¯¹è±¡å€¼çš„å˜åŒ–æ˜¯é€šç”¨çš„ã€‚</p><h4 id="break-continue-return-çš„åŒºåˆ«åŠä½œç”¨">break ,continue ,return çš„åŒºåˆ«åŠä½œç”¨</h4><p>breakæ˜¯è·³å‡ºå½“å‰çš„å¾ªç¯ä½“ã€‚continueæ˜¯è·³å‡ºå½“å‰å¾ªç¯ï¼Œè¿›è¡Œä¸‹ä¸€è½®ã€‚returnæ˜¯è¿”å›ï¼Œå±è”½returnä»¥åçš„è¯­å¥ã€‚</p><h4 id="æŠ½è±¡ç±»å’Œæ¥å£çš„å¯¹æ¯”">æŠ½è±¡ç±»å’Œæ¥å£çš„å¯¹æ¯”</h4><p>æŠ½è±¡ç±»å’Œæ¥å£éƒ½ä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚å…¶ä¸­åŒ…æ‹¬çš„æ–¹æ³•å­ç±»å¿…é¡»å®ç°ã€‚</p><p>æ¥å£æ²¡æœ‰æ„é€ å‡½æ•°ã€‚æŠ½è±¡ç±»çš„æ–¹æ³•æ²¡æœ‰æ–¹æ³•ä½“ã€‚</p><p>æ¥å£åªèƒ½è¢«å®šä¹‰ä¸ºpublicï¼ŒæŠ½è±¡ç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªã€‚</p><p>æ¥å£çš„å­—æ®µé»˜è®¤éƒ½æ˜¯staticå’Œfinalçš„ã€‚</p><h4 id="åœ¨Javaä¸­å®šä¹‰ä¸€ä¸ªä¸åšäº‹ä¸”æ²¡æœ‰å‚æ•°çš„æ„é€ æ–¹æ³•çš„ä½œç”¨">åœ¨Javaä¸­å®šä¹‰ä¸€ä¸ªä¸åšäº‹ä¸”æ²¡æœ‰å‚æ•°çš„æ„é€ æ–¹æ³•çš„ä½œç”¨</h4><p>å½“è°ƒç”¨å­ç±»çš„æ—¶å€™ï¼Œå­ç±»æ²¡æœ‰ä½¿ç”¨superæ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œå°±ä¼šé»˜è®¤è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ å™¨ã€‚è€Œå¦‚æœçˆ¶ç±»æ²¡æœ‰æ— å‚æ„é€ å™¨ï¼Œåˆ™ç¼–è¯‘é”™è¯¯ã€‚</p><h4 id="å†…éƒ¨ç±»">å†…éƒ¨ç±»</h4><p>å†…éƒ¨ç±»ä¸ºé™æ€å†…éƒ¨ç±»ï¼Œæˆå‘˜å†…éƒ¨ç±»ï¼Œå±€éƒ¨å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»</p><p>é™æ€å†…éƒ¨ç±»æ˜¯ç±»ä¸­çš„é™æ€ç±»ï¼Œé™æ€å†…éƒ¨ç±»æ— æ³•è®¿é—®å¤–éƒ¨çš„éé™æ€å˜é‡ã€‚æˆå‘˜å†…éƒ¨ç±»æ˜¯ç±»å†…éƒ¨å®šä¹‰åœ¨æˆå‘˜ä½ç½®ä¸Šçš„éé™æ€ç±»ï¼Œæˆå‘˜å†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨çš„é™æ€å’Œéé™æ€å˜é‡ï¼Œç§æœ‰å’Œéç§æœ‰å˜é‡ã€‚å±€éƒ¨å†…éƒ¨ç±»æ˜¯å®šä¹‰åœ¨æ–¹æ³•ä¸­çš„å†…éƒ¨ç±»ï¼Œå¯ä»¥è®¿é—®å¤–éƒ¨çš„æ‰€æœ‰æ–¹æ³•å’Œæ‰€æœ‰å˜é‡ã€‚åŒ¿åå†…éƒ¨ç±»æ˜¯æ²¡æœ‰åå­—çš„å†…éƒ¨ç±»ï¼Œé¦–å…ˆåŒ¿åå†…éƒ¨ç±»å®ç°æ¥å£æˆ–è€…ç»§æ‰¿ä¸€ä¸ªç±»ï¼ŒåŒ¿åå†…éƒ¨ç±»ä¸­ä¸èƒ½å®šä¹‰é™æ€æ–¹æ³•å’Œé™æ€å˜é‡ï¼ŒåŒ¿åå†…éƒ¨ç±»ç”¨åˆ°çš„å¤–éƒ¨å‚æ•°éœ€è¦è®¾ç½®ä¸ºfinalç±»å‹ã€‚</p><h4 id="åŒ¿åå†…éƒ¨ç±»ä½¿ç”¨å‚æ•°ä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸ºfinal">åŒ¿åå†…éƒ¨ç±»ä½¿ç”¨å‚æ•°ä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸ºfinal</h4><p>åœ¨ç±»ä¸­å®šä¹‰çš„æˆå‘˜å˜é‡å­˜å‚¨åœ¨æ ˆä¸­ï¼Œå½“æ–¹æ³•é”€æ¯æ—¶ä¼šé”€æ¯æˆå‘˜å˜é‡ï¼Œè€ŒåŒ¿åå†…éƒ¨ç±»ä»ç„¶ä¿æœ‰å¯¹æˆå‘˜å˜é‡çš„å¼•ç”¨ï¼Œå› æ­¤å¦‚æœä¸æŠŠå˜é‡è®¾ç½®ä¸ºfinalï¼Œåˆ™ä¼šè¢«é”€æ¯ï¼ŒåŒ¿åå†…éƒ¨ç±»ä¼šå‡ºé”™ã€‚</p><h4 id="é‡å†™å’Œé‡è½½">é‡å†™å’Œé‡è½½</h4><p>çˆ¶ç±»çš„æ„é€ å‡½æ•°æ— æ³•ç»§æ‰¿å› æ­¤æ— æ³•è¢«é‡å†™ï¼Œå¯ä»¥è¢«é‡è½½ã€‚é‡è½½æ„å‘³ç€æ–¹æ³•åç›¸åŒï¼Œå…¶ä»–å¯ä»¥ä¸åŒã€‚è€Œé‡å†™æ–¹æ³•åç›¸åŒï¼Œå‚æ•°åˆ—è¡¨ç›¸åŒã€‚è¿”å›å€¼å°äºçˆ¶ç±»ï¼Œå¯è§æ€§å¤§äºçˆ¶ç±»ã€‚</p><h4 id="å’Œ-equals-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ">== å’Œ equals çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</h4><p>==å¯¹äºå¯¹è±¡çš„åˆ¤æ–­æ˜¯åˆ¤æ–­å¼•ç”¨åœ°å€ï¼Œå¯¹äºåŸºæœ¬å˜é‡çš„åˆ¤æ–­æ˜¯åˆ¤æ–­å€¼ã€‚equalsåˆ¤æ–­çš„æ˜¯å˜é‡çš„å€¼ã€‚</p><p>å¯¹äºStringç±»å‹çš„æ•°æ®ä½¿ç”¨equalsè¿›è¡Œæ¯”è¾ƒï¼Œç”±äºStringçš„equalsæ–¹æ³•è¢«é‡å†™è¿‡ï¼Œå› æ­¤æ¯”è¾ƒçš„æ˜¯Stringçš„å€¼ã€‚åœ¨åˆ›å»ºStringæ—¶ï¼Œè‹¥åœ¨å¸¸é‡æ± ä¸­å­˜åœ¨å½“å‰çš„å­—ç¬¦ä¸²ï¼Œåˆ™ç›´æ¥å¼•ç”¨ï¼Œå¦åˆ™é‡æ–°åˆ›å»ºå¯¹è±¡ã€‚</p><h4 id="hashCode-ä¸-equals">hashCode ä¸ equals</h4><p>hashcodeæ˜¯æ•°æ®å­˜å‚¨çš„ç´¢å¼•ï¼Œå­˜å‚¨æ•°æ®æ—¶æ ¹æ®hashcodeçš„å€¼è¿›è¡Œå­˜å‚¨ï¼Œè‹¥å­˜åœ¨ç›¸åŒçš„å€¼ï¼Œåˆ™ä¸å­˜ï¼Œè‹¥hashcodeè®¡ç®—ç›¸åŒï¼Œå€¼ä¸ç›¸åŒåˆ™å‘ç”Ÿå†²çªåœ¨è¿›è¡Œæ•£åˆ—ã€‚</p><p>ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œåˆ™hashcodeä¸€å®šç›¸ç­‰ã€‚è‹¥hashcodeç›¸ç­‰ï¼Œåˆ™ä¸¤ä¸ªå¯¹è±¡ä¸ä¸€å®šç›¸ç­‰ã€‚</p><p>hashcodeæ˜¯å¯¹å †ä¸Šçš„å¯¹è±¡äº§ç”Ÿç‹¬ç‰¹å€¼ï¼Œè‹¥ä¸é‡å†™ï¼Œåˆ™ä¸¤ä¸ªclassç±»æ°¸è¿œä¸ä¼šç›¸ç­‰ã€‚</p><h4 id="å¯¹è±¡çš„ç›¸ç­‰ä¸æŒ‡å‘ä»–ä»¬çš„å¼•ç”¨ç›¸ç­‰ï¼Œä¸¤è€…æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ">å¯¹è±¡çš„ç›¸ç­‰ä¸æŒ‡å‘ä»–ä»¬çš„å¼•ç”¨ç›¸ç­‰ï¼Œä¸¤è€…æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h4><p>å¯¹è±¡çš„ç›¸ç­‰æŒ‡å€¼çš„ç›¸ç­‰ã€‚è€Œå¼•ç”¨ç›¸ç­‰ï¼Œæ„å‘³ç€æ‰€åœ¨çš„å†…å­˜åœ°å€ç›¸ç­‰ã€‚</p><h4 id="å€¼ä¼ é€’">å€¼ä¼ é€’</h4><p>javaä¸­åªå­˜åœ¨å€¼ä¼ é€’ã€‚å½“ä¸€ä¸ªåŸºæœ¬æ•°æ®å˜é‡é€šè¿‡å‚æ•°ä½¿ç”¨æ—¶ï¼Œå‚æ•°åªæ˜¯ä¸€ä»½åŸå…ˆæ•°æ®çš„æ‹·è´ï¼Œå¯¹äºå…¶ä»–æ–¹æ³•ä¸­å¯¹å˜é‡çš„æ“ä½œä¸ä¼šå½±å“åˆ°åŸå˜é‡ã€‚å½“å¯¹è±¡å¼•ç”¨ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œæ–¹æ³•ä¸­å¯¹å‚æ•°çš„æ›´æ”¹ä¼šæ›´æ”¹åŸå¯¹è±¡çš„ç›¸å…³æ•°æ®ã€‚</p><h4 id="java-ä¸­-IO-æµåˆ†ä¸ºå‡ ç§">java ä¸­ IO æµåˆ†ä¸ºå‡ ç§?</h4><p>è¾“å…¥è¾“å‡ºæµï¼Œå­—èŠ‚å­—ç¬¦æµ</p><h4 id="ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶ï¼Ÿ">ä»€ä¹ˆæ˜¯åå°„æœºåˆ¶ï¼Ÿ</h4><p>åå°„å³åœ¨ç¨‹åºè¿è¡ŒæœŸé—´åŠ¨æ€çš„è·å–å½“å‰ç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚å¯ä»¥ä½¿ç”¨æŒ‡å®šä½ç½®æˆ–è€…forClassNameæŒ‡å®šç±»åçš„æ–¹å¼è·å–å¯¹åº”çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><h4 id="StringçœŸçš„æ˜¯ä¸å¯å˜çš„å—ï¼Ÿ">StringçœŸçš„æ˜¯ä¸å¯å˜çš„å—ï¼Ÿ</h4><p>ä¸å¯å˜ï¼ŒStringæ˜¯ç”¨finalä¿®é¥°çš„æ— æ³•è¢«ç»§æ‰¿ï¼Œåº•å±‚ä½¿ç”¨çš„æ˜¯charå‹çš„æ•°ç»„ã€‚</p><h4 id="åœ¨ä½¿ç”¨-HashMap-çš„æ—¶å€™ï¼Œç”¨-String-åš-key-æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ">åœ¨ä½¿ç”¨ HashMap çš„æ—¶å€™ï¼Œç”¨ String åš key æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</h4><p>Stringæ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤ä½¿ç”¨Stringä½œä¸ºkeyå¾—åˆ°çš„hashcodeè¢«ç¼“å­˜åä¸éœ€è¦å†æ­¤è®¡ç®—ã€‚</p><h4 id="Integer-a-127-ä¸-Integer-b-127ç›¸ç­‰å—">Integer a= 127 ä¸ Integer b = 127ç›¸ç­‰å—</h4><p>å½“intå‹å˜é‡åœ¨-128åˆ°127ä¹‹é—´æ—¶ï¼Œä¼šåœ¨å¸¸é‡æ± ä¸­è°ƒç”¨å·²æœ‰çš„å˜é‡å€¼ã€‚å½“è¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</p><h4 id="Stringå’ŒStringBufferã€StringBuilderçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ">Stringå’ŒStringBufferã€StringBuilderçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>å½“å­—ç¬¦ä¸²ä½¿ç”¨è¾ƒå¤šä¸”ä¸å­˜åœ¨å¤šçº¿ç¨‹çš„æ—¶å€™å»ºè®®ä½¿ç”¨StringBuilderï¼Œå­˜åœ¨ç¼“å†²åŒºï¼Œå‡å°‘äº†Stringé¢‘ç¹çš„æ€§èƒ½æ¶ˆè€—ã€‚ä½¿ç”¨å¤šçº¿ç¨‹ä¸‹ä½¿ç”¨StringBufferï¼ŒStringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> é¢è¯•é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>opencvå­¦ä¹ ç¬”è®°ä¸€</title>
      <link href="/2021/03/29/opencv-xue-xi-bi-ji-yi/"/>
      <url>/2021/03/29/opencv-xue-xi-bi-ji-yi/</url>
      
        <content type="html"><![CDATA[<h3 id="opencvå­¦ä¹ ç¬”è®°ä¸€">opencvå­¦ä¹ ç¬”è®°ä¸€</h3><h4 id="opencvæ¨¡å—">opencvæ¨¡å—</h4><p>coreï¼šå®ç°äº†æœ€æ ¸å¿ƒçš„æ•°æ®ç»“æ„åŠå…¶åŸºæœ¬è¿ç®—ï¼Œå¦‚ç»˜å›¾å‡½æ•°ï¼Œæ•°ç»„æ“ä½œç›¸å…³å‡½æ•°ç­‰ã€‚</p><p>highguiï¼šå®ç°äº†è§†é¢‘ä¸å›¾åƒçš„è¯»å–ï¼Œæ˜¾ç¤ºï¼Œå­˜å‚¨ç­‰æ¥å£</p><p>imgprocï¼šå®ç°äº†å›¾åƒå¤„ç†çš„åŸºç¡€æ–¹æ³•ï¼ŒåŒ…æ‹¬å›¾åƒæ»¤æ³¢ï¼Œå›¾åƒçš„å‡ ä½•å˜æ¢ï¼Œå¹³æ»‘ï¼Œé˜ˆå€¼åˆ†å‰²ï¼Œå½¢æ€å­¦å¤„ç†ï¼Œè¾¹ç¼˜æ£€æµ‹ï¼Œç›®æ ‡æ£€æµ‹ï¼Œè¿åŠ¨åˆ†æå’Œå¯¹è±¡è·Ÿè¸ªç­‰ç­‰ã€‚</p><p>features2dï¼šç”¨äºæå–å›¾åƒç‰¹å¾ä»¥åŠç‰¹å¾åŒ¹é…ï¼Œnonfreeæ¨¡å—å®ç°äº†ä¸€äº›ä¸“åˆ©ç®—æ³•ï¼Œå¦‚siftç‰¹å¾ã€‚<br>objectectï¼šå®ç°äº†ä¸€äº›ç›®æ ‡æ£€æµ‹çš„åŠŸèƒ½ï¼Œç»å…¸çš„åŸºäºhaarï¼ŒLBPç‰¹å¾çš„äººè„¸æ£€æµ‹ï¼ŒåŸºäºHOGçš„è¡Œäººï¼Œæ±½è½¦ç­‰ç›®æ ‡æ£€æµ‹ï¼Œåˆ†ç±»å™¨ä½¿ç”¨Cascade Classification(çº§è”åˆ†ç±»)å’ŒLatent SVMç­‰ã€‚<br>stitchingï¼šå®ç°äº†å›¾åƒæ‹¼æ¥åŠŸèƒ½ã€‚<br>FLANNï¼šåŒ…å«å¿«é€Ÿè¿‘ä¼¼æœ€è¿‘é‚»æœç´¢FLANNå’Œèšç±»Clusteringç®—æ³•<br>mlï¼šæœºå™¨å­¦ä¹ æ¨¡å—(SVMï¼Œå†³ç­–æ ‘ï¼ŒBoostingç­‰ç­‰)<br>photoï¼šåŒ…å«å›¾åƒä¿®å¤å’Œå›¾åƒå»å™ªä¸¤éƒ¨åˆ†<br>videoï¼šé’ˆå¯¹è§†é¢‘å¤„ç†ï¼Œå¦‚èƒŒæ™¯åˆ†ç¦»ï¼Œå‰æ™¯æ£€æµ‹ï¼Œå¯¹è±¡è·Ÿè¸ªç­‰ã€‚<br>calib3dï¼šå³Calibration3Dï¼Œè¿™ä¸ªæ¨¡å—ä¸»è¦æ˜¯ç›¸æœºæ ¡å‡†å’Œä¸‰ç»´é‡å»ºç›¸å…³çš„å†…å®¹ã€‚åŒ…å«äº†åŸºæœ¬çš„å¤šè§†è§’å‡ ä½•ç®—æ³•ï¼Œå•ä¸ªç«‹ä½“æ‘„åƒå¤´æ ‡å®šï¼Œç‰©ä½“å§¿æ€ä¼°è®¡ï¼Œç«‹ä½“ç›¸ä¼¼æ€§ç®—æ³•ï¼Œ3Dä¿¡æ¯çš„é‡å»ºç­‰ç­‰ã€‚<br>G-APIï¼šåŒ…å«è¶…é«˜æ•ˆçš„å›¾åƒå¤„ç†piplineå¼•æ“</p><h4 id="å›¾åƒçš„åŸºæœ¬æ“ä½œ">å›¾åƒçš„åŸºæœ¬æ“ä½œ</h4><h5 id="è¯»å–å›¾åƒ">è¯»å–å›¾åƒ</h5><p>cv.imread(var1,var2)<br>var1ä¸ºè¯»å–å›¾åƒçš„è·¯å¾„<br>var2ï¼šcv.IMREAD*COLORï¼šä»¥å½©è‰²æ¨¡å¼åŠ è½½å›¾åƒï¼Œä»»ä½•å›¾åƒçš„é€æ˜åº¦éƒ½å°†è¢«å¿½ç•¥ã€‚è¿™æ˜¯é»˜è®¤å‚æ•°ã€‚var2ä¸º1<br>cv.IMREAD*GRAYSCALEï¼šä»¥ç°åº¦æ¨¡å¼åŠ è½½å›¾åƒã€‚var2ä¸º0<br>cv.IMREAD_UNCHANGEDï¼šåŒ…æ‹¬alphaé€šé“çš„åŠ è½½å›¾åƒæ¨¡å¼ã€‚var2ä¸º-1</p><h5 id="æ˜¾ç¤ºå›¾åƒ">æ˜¾ç¤ºå›¾åƒ</h5><p>cv.imshow(var1,var2)<br>var1ï¼šæ˜¾ç¤ºå›¾åƒçš„çª—å£åç§°ï¼Œä»¥å­—ç¬¦ä¸²ç±»å‹è¡¨ç¤º<br>var2ï¼šè¦åŠ è½½çš„å›¾åƒçš„ä»£ç†å¯¹è±¡<br>æ³¨æ„ï¼šåœ¨è°ƒç”¨æ˜¾ç¤ºå›¾åƒçš„APIåï¼Œè¦è°ƒç”¨cv.waitKey(var)ç»™å›¾åƒç»˜åˆ¶ç•™ä¸‹æ—¶é—´ï¼Œå¦åˆ™çª—å£ä¼šå‡ºç°æ— å“åº”æƒ…å†µï¼Œå¹¶ä¸”å›¾åƒæ— æ³•æ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>plt.imshow(img,<a href="http://camp=plt.cm" target="_blank" rel="noopener">camp=plt.cm</a>.) cmapå³colormaps,å›¾è°± plt.cmæ˜¯matplotlibåº“ä¸­å†…ç½®çš„è‰²å½©æ˜ å°„å‡½æ•° <a href="http://plt.cm" target="_blank" rel="noopener">plt.cm</a>.[è‰²å½©](â€™[æ•°æ®é›†]â€™)å³å¯¹[æ•°æ®é›†]åº”ç”¨[è‰²å½©]<br>plt.show()<br><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8A%E5%8D%8810.36.35.png" alt=""><br>åŠå…¶ä»–è‰²å½©è¡¨</p><h5 id="ä¿å­˜å›¾åƒ">ä¿å­˜å›¾åƒ</h5><p>cv.imwrite(var1,var2)<br>var1ï¼šå›¾ç‰‡ä¿å­˜çš„è·¯å¾„<br>var2ï¼šä¿å­˜å›¾åƒçš„ä»£ç†å¯¹è±¡</p><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvimport matplotlib.pyplot as pltimg = cv.imread('/Users/dinggongcheng/Downloads/me.JPG', 0)#cv.imshow('image', img)#cv.waitKey(0)#cv.destroyAllWindows()#cv.waitKey(1)plt.imshow(img, cmap=plt.cm.gray)plt.show()</code></pre><p><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8A%E5%8D%8810.42.37.png" alt=""></p><h4 id="ç»˜åˆ¶å‡ ä½•å›¾å½¢">ç»˜åˆ¶å‡ ä½•å›¾å½¢</h4><h5 id="ç»˜åˆ¶ç›´çº¿">ç»˜åˆ¶ç›´çº¿</h5><p>cv.line(img,start,end,color,thickness)<br>imgï¼šè¦ç»˜åˆ¶ç›´çº¿çš„å›¾åƒ<br>startï¼Œendï¼šç›´çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹<br>colorï¼šçº¿æ¡çš„é¢œè‰²<br>thicknessï¼šçº¿æ¡å®½åº¦</p><h5 id="ç»˜åˆ¶åœ†å½¢">ç»˜åˆ¶åœ†å½¢</h5><p>cv.circle(img,centerpoint,r,color,thickness)<br>imgï¼šè¦ç»˜åˆ¶å›¾å½¢çš„å›¾åƒ<br>centerpointï¼Œrï¼šåœ†å¿ƒå’ŒåŠå¾„<br>colorï¼šçº¿æ¡çš„é¢œè‰²<br>thicknessï¼šçº¿æ¡å®½åº¦ï¼Œä¸º-1æ—¶ç”Ÿæˆé—­åˆå›¾æ¡ˆå¹¶å¡«å……é¢œè‰²</p><h5 id="ç»˜åˆ¶çŸ©å½¢">ç»˜åˆ¶çŸ©å½¢</h5><p>cv.rectangle(img,leftupper,rightdown,color,thickness)<br>imgï¼šè¦ç»˜åˆ¶çŸ©å½¢çš„å›¾åƒ<br>leftupperï¼Œrightdownï¼šçŸ©å½¢çš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’åæ ‡<br>colorï¼šçº¿æ¡çš„é¢œè‰²<br>thicknessï¼šçº¿æ¡å®½åº¦</p><h5 id="å‘å›¾åƒä¸­æ·»åŠ æ–‡å­—">å‘å›¾åƒä¸­æ·»åŠ æ–‡å­—</h5><p>cv.putText(img,text,station,font,fontsize,color,thickness,cv.LINE_AA)<br>imgï¼šå›¾åƒ<br>textï¼šè¦å†™å…¥çš„æ–‡æœ¬æ•°æ®<br>stationï¼šæ–‡æœ¬çš„æ”¾ç½®ä½ç½®<br>fontï¼šå­—ä½“<br>fontsizeï¼šå­—ä½“å¤§å°</p><pre class=" language-language-python"><code class="language-language-python"># author:dinggc# date:2021/3/29 ä¸Šåˆ10:54import numpy as npimport cv2 as cvimport matplotlib.pyplot as plt# åˆ›å»ºä¸€ä¸ªç©ºç™½çš„å›¾åƒimg = np.zeros((512, 512, 3), np.uint8)# ç»˜åˆ¶å›¾å½¢cv.line(img, (0, 0), (511, 511), (255, 0, 0), 5)cv.rectangle(img, (384, 0), (510, 128), (0, 255, 0), 3)cv.circle(img, (447, 63), 63, (0, 0, 255), -1)font = cv.FONT_HERSHEY_SIMPLEXcv.putText(img, 'OpenCV', (10, 500), font, 4, (255, 255, 255), 2, cv.LINE_AA)# å›¾åƒå±•ç¤ºplt.imshow(img[:, :, ::-1])plt.title('åŒ¹é…ç»“æœ'), plt.xticks([]), plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8A%E5%8D%8811.02.51.png" alt=""></p><h4 id="è·å–å¹¶ä¿®æ”¹å›¾åƒä¸­çš„åƒç´ ç‚¹">è·å–å¹¶ä¿®æ”¹å›¾åƒä¸­çš„åƒç´ ç‚¹</h4><p>å¯ä»¥é€šè¿‡è¡Œå’Œåˆ—çš„åæ ‡å€¼è·å–è¯¥åƒç´ ç‚¹çš„åƒç´ å€¼ã€‚å¯¹äºBGRå›¾åƒï¼Œå®ƒè¿”å›ä¸€ä¸ªè“ï¼Œç»¿ï¼Œçº¢å€¼çš„æ•°ç»„ã€‚å¯¹äºç°åº¦å›¾åƒï¼Œä»…è¿”å›ç›¸åº”çš„å¼ºåº¦å€¼ã€‚ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•å¯¹åƒç´ å€¼è¿›è¡Œä¿®æ”¹ã€‚</p><pre class=" language-language-python"><code class="language-language-python">img = np.zeros((256, 256, 3), np.uint8)# è·å–æŸä¸ªåƒç´ ç‚¹çš„å€¼px = img[100, 100]print(px)# ä»…è·å–è“è‰²é€šé“çš„å¼ºåº¦å€¼blue = img[100, 100, 0]print(blue)# ä¿®æ”¹æŸä¸ªä½ç½®çš„åƒç´ å€¼img[100, 100] = [255, 255, 255]plt.imshow(img[:, :, ::-1])plt.show()</code></pre><h4 id="è·å–å›¾åƒçš„å±æ€§">è·å–å›¾åƒçš„å±æ€§</h4><p>å›¾åƒå±æ€§åŒ…æ‹¬è¡Œæ•°ï¼Œåˆ—æ•°å’Œé€šé“æ•°ï¼Œå›¾åƒæ•°æ®ç±»å‹ï¼Œåƒç´ æ•°ç­‰ã€‚</p><table><thead><tr><th>å±æ€§</th><th>API</th></tr></thead><tbody><tr><td>å½¢çŠ¶</td><td>img.shape</td></tr><tr><td>å›¾åƒå¤§å°</td><td>img.size</td></tr><tr><td>æ•°æ®ç±»å‹</td><td>img.dtype</td></tr></tbody></table><h4 id="å›¾åƒé€šé“çš„æ‹†åˆ†ä¸åˆå¹¶">å›¾åƒé€šé“çš„æ‹†åˆ†ä¸åˆå¹¶</h4><p>æœ‰æ—¶éœ€è¦åœ¨Bï¼ŒGï¼ŒRé€šé“å›¾åƒä¸Šå•ç‹¬å·¥ä½œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦å°†BGRå›¾åƒåˆ†å‰²ä¸ºå•ä¸ªé€šé“ã€‚æˆ–è€…åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦å°†è¿™äº›å•ç‹¬çš„é€šé“åˆå¹¶åˆ°BGRå›¾åƒã€‚</p><pre class=" language-language-python"><code class="language-language-python"># é€šé“æ‹†åˆ†b,g,r = cv.split(img)# é€šé“åˆå¹¶img = cv.merge((b,g,r))</code></pre><h4 id="è‰²å½©ç©ºé—´çš„æ”¹å˜">è‰²å½©ç©ºé—´çš„æ”¹å˜</h4><p>cv.cvtColor(input_image, flag)<br>input_imagesï¼šè¿›è¡Œé¢œè‰²ç©ºé—´è½¬æ¢çš„å›¾åƒ<br>flagï¼šè½¬æ¢ç±»å‹<br>cv.COLOR_BGR2GRAYï¼šBGR-GRAY<br>cv.COLOR_BGR2HSVï¼šBGR-HSV</p><h4 id="ç®—æ•°æ“ä½œ">ç®—æ•°æ“ä½œ</h4><h5 id="å›¾åƒçš„åŠ æ³•">å›¾åƒçš„åŠ æ³•</h5><p>å¯ä»¥ä½¿ç”¨OpenCVçš„cv.add()å‡½æ•°æŠŠä¸¤å¹…å›¾åƒç›¸åŠ ï¼Œæˆ–è€…å¯ä»¥ç®€å•çš„é€šè¿‡numpyæ“ä½œæ·»åŠ ä¸¤ä¸ªå›¾åƒï¼Œå¦‚res = img1 + img2.ä¸¤ä¸ªå›¾åƒåº”è¯¥å…·æœ‰ç›¸åŒçš„å¤§å°å’Œç±»å‹ï¼Œæˆ–è€…ç¬¬äºŒä¸ªå›¾åƒå¯ä»¥æ˜¯æ ‡é‡å€¼ã€‚</p><p>æ³¨æ„ï¼šOpenCVåŠ æ³•å’ŒNumpyåŠ æ³•ä¹‹é—´å­˜åœ¨å·®å¼‚ã€‚OpenCvçš„åŠ æ³•æ˜¯é¥±å’Œæ“ä½œï¼Œè€ŒNumpyæ·»åŠ æ˜¯æ¨¡è¿ç®—ã€‚</p><pre class=" language-language-python"><code class="language-language-python">>>> x = np.uint8([250])>>> y = np.uint8([10])>>> print(cv.add(x,y)) # 250+10 = 260 => 255[[255]]>>> print(x+y)  # 250+10 = 260 % 256 = 4[4]</code></pre><p>è¿™ç§å·®åˆ«åœ¨ä½ å¯¹ä¸¤å¹…å›¾åƒè¿›è¡ŒåŠ æ³•æ—¶ä¼šæ›´åŠ æ˜æ˜¾ã€‚OpenCVçš„ç»“æœä¼šæ›´å¥½ä¸€ç‚¹ã€‚æ‰€ä»¥å°½é‡ä½¿ç”¨OpenCVä¸­çš„å‡½æ•°ã€‚</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvimport matplotlib.pyplot as plt# è¯»å–å›¾åƒimg1 = cv.imread('/Users/dinggongcheng/Downloads/me.JPG')img2 = cv.imread('/Users/dinggongcheng/Downloads/me.JPG')# åŠ æ³•æ“ä½œimg3 = cv.add(img1, img2)img4 = img1 + img2# å›¾åƒæ˜¾ç¤ºplt.imshow(img3[:, :, ::-1])plt.imshow(img4[:, :, ::-1])plt.show()</code></pre><p><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8B%E5%8D%881.23.37.png" alt="cvç›¸åŠ "></p><p><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8B%E5%8D%881.24.06.png" alt="ç›´æ¥ç›¸åŠ "></p><h5 id="å›¾åƒçš„æ··åˆ">å›¾åƒçš„æ··åˆ</h5><p>é€šè¿‡åŠ æ³•å®ç°ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ä¸¤å¹…å›¾åƒçš„æƒé‡ä¸åŒï¼Œè¿™å°±ä¼šç»™äººä¸€ç§æ··åˆæˆ–è€…é€æ˜çš„æ„Ÿè§‰ã€‚å›¾åƒæ··åˆçš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š<br>g(x) = (1-a)f0(x) + af1(x)<br>é€šè¿‡ä¿®æ”¹açš„å€¼(0-&gt;1)ï¼Œå¯ä»¥å®ç°éå¸¸ç‚«é…·çš„æ··åˆã€‚<br>ç°åœ¨æŠŠä¸¤å¹…å›¾æ··åˆåœ¨ä¸€èµ·ã€‚ç¬¬ä¸€å¹…å›¾çš„æƒé‡æ˜¯0.7ï¼Œç¬¬äºŒå¹…å›¾çš„æƒé‡æ˜¯0.3ã€‚å‡½æ•°cv2.addWeighted()å¯ä»¥æŒ‰ä¸‹é¢çš„å…¬å¼å¯¹å›¾ç‰‡è¿›è¡Œæ··åˆæ“ä½œã€‚<br>dst = a*img1 + b*img2 + c</p><pre class=" language-language-python"><code class="language-language-python"># è¯»å–å›¾åƒimg1 = cv.imread('/Users/dinggongcheng/Downloads/me.JPG')img2 = cv.imread('/Users/dinggongcheng/Downloads/me.JPG')# å›¾åƒæ··åˆimg3 = cv.addWeighted(img1, 0.8, img2, 0.6, 0)# å›¾åƒæ˜¾ç¤ºplt.figure(figsize=(8, 8))plt.imshow(img3[:, :, ::-1])plt.show()</code></pre><h4 id="å‡ ä½•å˜æ¢">å‡ ä½•å˜æ¢</h4><h5 id="å›¾åƒç¼©æ”¾">å›¾åƒç¼©æ”¾</h5><p>ç¼©æ”¾æ˜¯å¯¹å›¾åƒçš„å¤§å°è¿›è¡Œè°ƒæ•´<br>cv.resize(src,dsize,fx=0,fy=0,interpolation=cv.INTER_LINEAR)<br>srcï¼šè¾“å…¥å›¾åƒ<br>dsizeï¼šç»å¯¹å°ºå¯¸ï¼Œç›´æ¥æŒ‡å®šè°ƒæ•´åå›¾åƒçš„å¤§å°<br>fxï¼Œfyï¼šç›¸å¯¹å°ºå¯¸ï¼Œå°†dsizeè®¾ç½®ä¸ºNoneï¼Œç„¶åå°†fxå’Œfyè®¾ç½®ä¸ºæ¯”ä¾‹å› å­å³å¯<br>interpolationï¼šæ’å€¼æ–¹æ³•</p><table><thead><tr><th>æ’å€¼</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>cv.INTER_LINEAR</td><td>åŒçº¿æ€§æ’å€¼æ³•</td></tr><tr><td>cv.INTER_NEAREST</td><td>æœ€è¿‘é‚»æ’å€¼</td></tr><tr><td>cv.INTER_AREA</td><td>åƒç´ åŒºåŸŸé‡é‡‡æ ·</td></tr><tr><td>cv.INTER_CUBIC</td><td>åŒä¸‰æ¬¡æ’å€¼</td></tr></tbody></table><pre class=" language-language-python"><code class="language-language-python">import cv2 as cvimport matplotlib.pyplot as pltimg = cv.imread("/Users/dinggongcheng/Downloads/me.JPG")# ç»å¯¹å°ºå¯¸ç¼©æ”¾rows, cols = img.shape[:2]res = cv.resize(img, (2*cols, 2*rows), interpolation=cv.INTER_CUBIC)# ç›¸å¯¹å°ºå¯¸ç¼©æ”¾res1 = cv.resize(img, None, fx=0.5, fy=0.5)# å›¾åƒæ˜¾ç¤ºfig, axes = plt.subplots(nrows=1, ncols=3, figsize=(10, 8), dpi=100)axes[0].imshow(res[:, :, ::-1])axes[0].set_title("dsize big")axes[1].imshow(img[:, :, ::-1])axes[1].set_title("from")axes[2].imshow(res1[:, :, ::-1])axes[2].set_title("fx small")plt.show()</code></pre><p><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8B%E5%8D%881.53.24.png" alt=""></p><h5 id="å›¾åƒå¹³ç§»">å›¾åƒå¹³ç§»</h5><p>å›¾åƒå¹³ç§»å°†å›¾åƒæŒ‰ç…§æŒ‡å®šæ–¹å‘å’Œè·ç¦»ï¼Œç§»åŠ¨åˆ°ç›¸åº”çš„ä½ç½®ã€‚<br>cv.warpAffine(img,M,dsize)<br>imgï¼šè¾“å…¥å›¾åƒ<br>Mï¼š2*3ç§»åŠ¨çŸ©é˜µï¼Œå¯¹äº(x,y)å¤„çš„åƒç´ ç‚¹ï¼Œè¦æŠŠå®ƒç§»åŠ¨åˆ°(x+tx,y+ty)å¤„æ—¶ï¼ŒMçŸ©é˜µåº”å¦‚ä¸‹è®¾ç½®ï¼š<br>M = 1 0 tx<br>0 1 ty<br>æ³¨æ„ï¼šå°†Mè®¾ç½®ä¸ºnp.float32ç±»å‹çš„Numpyæ•°ç»„<br>dsizeï¼šè¾“å‡ºå›¾åƒçš„å¤§å°<br>æ³¨æ„ï¼šè¾“å‡ºå›¾åƒçš„å¤§å°ï¼Œå®ƒåº”è¯¥æ˜¯(å®½åº¦ï¼Œé«˜åº¦)çš„å½¢å¼ã€‚è¯·è®°ä½ï¼Œwidth=åˆ—æ•°ï¼Œheight=è¡Œæ•°ã€‚</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvimport matplotlib.pyplot as pltimg = cv.imread("/Users/dinggongcheng/Downloads/me.JPG")# å›¾åƒå¹³ç§»rows, cols = img.shape[:2]M = np.float32([[1, 0, 100], [0, 1, 50]]) #å¹³ç§»çŸ©é˜µdst = cv.warpAffine(img, M, (cols, rows))# å›¾åƒæ˜¾ç¤ºfig, axes = plt.subplots(nrows=1, ncols=2, figsize=(10, 8), dpi=100)axes[0].imshow(dst[:, :, ::-1])axes[0].set_title("move")axes[1].imshow(img[:, :, ::-1])axes[1].set_title("from")plt.show()</code></pre><p><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8B%E5%8D%882.07.55.png" alt=""></p><h5 id="å›¾åƒæ—‹è½¬">å›¾åƒæ—‹è½¬</h5><p>å›¾åƒæ—‹è½¬æ˜¯æŒ‡å›¾åƒæŒ‰ç…§æŸä¸ªä½ç½®è½¬åŠ¨ä¸€å®šè§’åº¦çš„è¿‡ç¨‹ï¼Œæ—‹è½¬ä¸­å›¾åƒä»ä¿æŒåŸå§‹å°ºå¯¸ã€‚å›¾åƒæ—‹è½¬åå›¾åƒçš„æ°´å¹³å¯¹ç§°è½´ï¼Œå‚ç›´å¯¹ç§°è½´åŠä¸­å¿ƒåæ ‡åŸç‚¹éƒ½å¯èƒ½å‘ç”Ÿå˜æ¢ã€‚å› æ­¤éœ€è¦å¯¹å›¾åƒæ—‹è½¬ä¸­çš„åæ ‡è¿›è¡Œç›¸åº”è½¬æ¢ã€‚<br>åœ¨OpenCVä¸­å›¾åƒæ—‹è½¬é¦–å…ˆæ ¹æ®æ—‹è½¬è§’åº¦å’Œæ—‹è½¬ä¸­å¿ƒè·å–æ—‹è½¬çŸ©é˜µï¼Œç„¶åæ ¹æ®æ—‹è½¬çŸ©é˜µè¿›è¡Œå˜æ¢ï¼Œå³å¯å®ç°ä»»æ„è§’åº¦å’Œä»»æ„ä¸­å¿ƒçš„æ—‹è½¬æ•ˆæœã€‚<br>cv.getRotationMatrix2D(center, angle,scale)<br>centerï¼šæ—‹è½¬ä¸­å¿ƒ<br>angleï¼šæ—‹è½¬è§’åº¦<br>scaleï¼šç¼©æ”¾æ¯”ä¾‹<br>è¿”å›ï¼š<br>Mï¼šæ—‹è½¬çŸ©é˜µ<br>è°ƒç”¨cv.warpAffineå®Œæˆå›¾åƒçš„æ—‹è½¬</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvimport matplotlib.pyplot as pltimg = cv.imread("/Users/dinggongcheng/Downloads/me.JPG")# å›¾åƒæ—‹è½¬rows, cols = img.shape[:2]# ç”Ÿæˆæ—‹è½¬çŸ©é˜µM = cv.getRotationMatrix2D((cols/2, rows/2), 90, 1)# è¿›è¡Œæ—‹è½¬å˜æ¢dst = cv.warpAffine(img, M, (cols, rows))# å›¾åƒæ˜¾ç¤ºfig, axes = plt.subplots(nrows=1, ncols=2, figsize=(10, 8), dpi=100)axes[0].imshow(dst[:, :, ::-1])axes[0].set_title("rotate")axes[1].imshow(img[:, :, ::-1])axes[1].set_title("from")plt.show()</code></pre><p><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8B%E5%8D%882.25.20.png" alt=""></p><h5 id="ä»¿å°„å˜æ¢">ä»¿å°„å˜æ¢</h5><p>å›¾åƒçš„ä»¿å°„å˜æ¢æ¶‰åŠåˆ°å›¾åƒçš„å½¢çŠ¶ä½ç½®è§’åº¦çš„å˜åŒ–ï¼Œæ˜¯æ·±åº¦å­¦ä¹ é¢„å¤„ç†ä¸­å¸¸ç”¨åˆ°çš„åŠŸèƒ½ï¼Œä»¿å°„å˜æ¢ä¸»è¦æ˜¯å¯¹å›¾åƒçš„ç¼©æ”¾ï¼Œæ—‹è½¬ï¼Œç¿»è½¬å’Œå¹³ç§»ç­‰æ“ä½œçš„ç»„åˆã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºå›¾åƒè€Œè¨€ï¼Œå®½åº¦æ–¹å‘æ˜¯xï¼Œé«˜åº¦æ–¹å‘æ˜¯yï¼Œåæ ‡çš„é¡ºåºå’Œå›¾åƒåƒç´ å¯¹åº”ä¸‹æ ‡ä¸€è‡´ã€‚æ‰€ä»¥åŸç‚¹çš„ä½ç½®ä¸æ˜¯å·¦ä¸‹è§’è€Œæ˜¯å³ä¸Šè§’ï¼Œyçš„æ–¹å‘ä¹Ÿä¸æ˜¯å‘ä¸Šï¼Œè€Œæ˜¯å‘ä¸‹ã€‚<br>åœ¨ä»¿å°„å˜æ¢ä¸­ï¼ŒåŸå›¾ä¸­æ‰€æœ‰çš„å¹³è¡Œçº¿åœ¨ç»“æœå›¾åƒä¸­åŒæ ·å¹³è¡Œã€‚ä¸ºäº†åˆ›å»ºè¿™ä¸ªçŸ©é˜µæˆ‘ä»¬éœ€è¦ä»åŸå›¾åƒä¸­æ‰¾åˆ°ä¸‰ä¸ªç‚¹ä»¥åŠä»–ä»¬åœ¨è¾“å‡ºå›¾åƒä¸­çš„ä½ç½®ã€‚ç„¶åcv.getAffineTransformä¼šåˆ›å»ºä¸€ä¸ª2*3çš„çŸ©é˜µï¼Œæœ€åè¿™ä¸ªçŸ©é˜µä¼šè¢«ä¼ ç»™å‡½æ•°cv.warpAffine</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvimport matplotlib.pyplot as pltimg = cv.imread("/Users/dinggongcheng/Downloads/me.JPG")# ä»¿å°„å˜æ¢rows, cols = img.shape[:2]# åˆ›å»ºå˜æ¢çŸ©é˜µpts1 = np.float32([[50, 50], [200, 50], [50, 200]])pts2 = np.float32([[100, 100], [200, 50], [100, 250]])M = cv.getAffineTransform(pts1, pts2)# å®Œæˆä»¿å°„å˜æ¢dst = cv.warpAffine(img, M, (cols, rows))# å›¾åƒæ˜¾ç¤ºfig, axes = plt.subplots(nrows=1, ncols=2, figsize=(10, 8), dpi=100)axes[0].imshow(dst[:, :, ::-1])axes[0].set_title("affine")axes[1].imshow(img[:, :, ::-1])axes[1].set_title("from")plt.show()</code></pre><p><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8B%E5%8D%882.38.35.png" alt=""></p><h5 id="é€å°„å˜æ¢">é€å°„å˜æ¢</h5><p>é€å°„å˜æ¢æ˜¯è§†è§’å˜æ¢çš„ç»“æœï¼Œæ˜¯æŒ‡åˆ©ç”¨é€è§†ä¸­å¿ƒï¼Œåƒç‚¹ï¼Œç›®æ ‡ç‚¹ä¸‰ç‚¹å…±çº¿çš„æ¡ä»¶ï¼ŒæŒ‰é€è§†æ—‹è½¬å®šå¾‹ä½¿æ‰¿å½±é¢ç»•è¿¹çº¿æ—‹è½¬æŸä¸€è§’åº¦ï¼Œç ´ååŸæœ‰çš„æŠ•å½±å…‰çº¿æŸï¼Œä»èƒ½ä¿æŒæ‰¿å½±é¢ä¸ŠæŠ•å½±å‡ ä½•å›¾å½¢ä¸å˜çš„å˜æ¢ã€‚<br>åœ¨OpenCVä¸­ï¼Œæˆ‘ä»¬è¦æ‰¾åˆ°å››ä¸ªç‚¹ï¼Œå…¶ä¸­ä»»æ„ä¸‰ä¸ªä¸å…±çº¿ï¼Œç„¶åè·å–å˜æ¢çŸ©é˜µTï¼Œåœ¨è¿›è¡Œé€å°„å˜æ¢ã€‚é€šè¿‡å‡½æ•°cv.getPerspectiveTransformæ‰¾åˆ°å…¶å˜æ¢çŸ©é˜µï¼Œå°†cv.warpPerspectiveåº”ç”¨äºæ­¤3*3å˜æ¢çŸ©é˜µã€‚</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvimport matplotlib.pyplot as pltimg = cv.imread("/Users/dinggongcheng/Downloads/me.JPG")# é€å°„å˜æ¢rows, cols = img.shape[:2]# åˆ›å»ºå˜æ¢çŸ©é˜µpts1 = np.float32([[56, 65], [368, 52], [28, 387], [389,390]])pts2 = np.float32([[100, 145], [300, 100], [80, 290], [310, 300]])T = cv.getPerspectiveTransform(pts1,pts2)# è¿›è¡Œå˜æ¢dst = cv.warpPerspective(img, T, (cols, rows))# å›¾åƒæ˜¾ç¤ºfig, axes = plt.subplots(nrows=1, ncols=2, figsize=(10, 8), dpi=100)axes[0].imshow(dst[:, :, ::-1])axes[0].set_title("perspective")axes[1].imshow(img[:, :, ::-1])axes[1].set_title("from")plt.show()</code></pre><p><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8B%E5%8D%882.53.23.png" alt=""></p><h5 id="å›¾åƒé‡‘å­—å¡”">å›¾åƒé‡‘å­—å¡”</h5><p>å›¾åƒé‡‘å­—å¡”æ˜¯å›¾åƒå¤šå°ºåº¦è¡¨è¾¾çš„ä¸€ç§ï¼Œæœ€ä¸»è¦ç”¨äºå›¾åƒçš„åˆ†å‰²ï¼Œæ˜¯ä¸€ç§ä»¥å¤šåˆ†è¾¨ç‡æ¥è§£é‡Šå›¾åƒçš„æœ‰æ•ˆä½†æ¦‚å¿µç®€å•çš„ç»“æ„ã€‚<br>å›¾åƒé‡‘å­—å¡”ç”¨äºæœºå™¨è§†è§‰å’Œå›¾åƒå‹ç¼©ï¼Œä¸€å¹…å›¾åƒçš„é‡‘å­—å¡”æ˜¯ä¸€ç³»åˆ—ä»¥é‡‘å­—å¡”å½¢çŠ¶æ’åˆ—çš„åˆ†è¾¨ç‡é€æ­¥é™ä½ä¸”æ¥æºäºåŒä¸€å¼ åŸå§‹å›¾çš„å›¾åƒé›†åˆã€‚å…¶é€šè¿‡æ¢¯æ¬¡å‘ä¸‹é‡‡æ ·è·å¾—ï¼Œç›´åˆ°è¾¾åˆ°æŸä¸ªç»ˆæ­¢æ¡ä»¶æ‰åœæ­¢é‡‡æ ·ã€‚<br>é‡‘å­—å¡”çš„åº•éƒ¨æ˜¯å¾…å¤„ç†å›¾åƒçš„é«˜åˆ†è¾¨ç‡è¡¨ç¤ºï¼Œè€Œé¡¶éƒ¨æ˜¯ä½åˆ†è¾¨ç‡çš„è¿‘ä¼¼ï¼Œå±‚çº§è¶Šé«˜ï¼Œå›¾åƒè¶Šå°ï¼Œåˆ†è¾¨ç‡è¶Šä½ã€‚<br>cv.pyrUp(img) å¯¹å›¾åƒè¿›è¡Œä¸Šé‡‡æ ·<br>cv.pyrDown(img) å¯¹å›¾åƒè¿›è¡Œä¸‹é‡‡æ ·</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvimport matplotlib.pyplot as pltimg = cv.imread("/Users/dinggongcheng/Downloads/me.JPG")# è¿›è¡Œå›¾åƒé‡‡æ ·up_img = cv.pyrUp(img)down_img = cv.pyrDown(img)# å›¾åƒæ˜¾ç¤ºfig, axes = plt.subplots(nrows=1, ncols=2, figsize=(10, 8), dpi=100)axes[0].imshow(up_img[:, :, ::-1])axes[0].set_title("Up")axes[1].imshow(down_img[:, :, ::-1])axes[1].set_title("Down")plt.show()</code></pre><p><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8B%E5%8D%883.04.56.png" alt=""></p><h4 id="å½¢æ€å­¦æ“ä½œ">å½¢æ€å­¦æ“ä½œ</h4><h5 id="è¿é€šæ€§">è¿é€šæ€§</h5><p>è¿é€šæ€§æ˜¯æè¿°åŒºåŸŸå’Œè¾¹ç•Œçš„é‡è¦æ¦‚å¿µï¼Œä¸¤ä¸ªåƒç´ è”é€šçš„ä¸¤ä¸ªå¿…è¦æ¡ä»¶æ˜¯ï¼š<br>1.ä¸¤ä¸ªåƒç´ çš„ä½ç½®æ˜¯å¦ç›¸é‚»<br>2.ä¸¤ä¸ªåƒç´ çš„ç°åº¦å€¼æ˜¯å¦æ»¡è¶³ç‰¹å®šçš„ç›¸ä¼¼æ€§å‡†åˆ™</p><h5 id="è…èš€å’Œè†¨èƒ€">è…èš€å’Œè†¨èƒ€</h5><p>è…èš€å’Œè†¨èƒ€æ˜¯æœ€åŸºæœ¬çš„å½¢æ€å­¦æ“ä½œï¼Œè…èš€å’Œè†¨èƒ€éƒ½æ˜¯é’ˆå¯¹ç™½è‰²éƒ¨åˆ†(é«˜äº®éƒ¨åˆ†)è€Œè¨€çš„ã€‚<br>è†¨èƒ€å°±æ˜¯ä½¿å›¾åƒä¸­é«˜äº®éƒ¨åˆ†æ‰©å¼ ï¼Œæ•ˆæœå›¾æ‹¥æœ‰æ¯”åŸå›¾æ›´å¤§çš„é«˜äº®åŒºåŸŸï¼›è…èš€æ˜¯åŸå›¾ä¸­çš„é«˜äº®åŒºåŸŸè¢«èš•é£Ÿï¼Œæ•ˆæœå›¾æ‹¥æœ‰æ¯”åŸå›¾æ›´å°çš„é«˜äº®åŒºåŸŸã€‚è†¨èƒ€æ˜¯æ±‚å±€éƒ¨æœ€å¤§å€¼çš„æ“ä½œï¼Œè…èš€æ˜¯æ±‚å±€éƒ¨æœ€å°å€¼çš„æ“ä½œã€‚</p><p>è…èš€çš„å…·ä½“æ“ä½œæ˜¯ç”¨ä¸€ä¸ªç»“æ„å…ƒç´ æ‰«æå›¾åƒä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œç”¨ç»“æ„å…ƒç´ ä¸­çš„æ¯ä¸€ä¸ªåƒç´ ä¸å…¶è¦†ç›–çš„åƒç´ åšä¸æ“ä½œï¼Œå¦‚æœéƒ½ä¸º1ï¼Œåˆ™è¯¥åƒç´ ä¸º1ï¼Œå¦åˆ™ä¸º0.<br>è…èš€çš„ä½œç”¨æ˜¯æ¶ˆé™¤ç‰©ä½“è¾¹ç•Œç‚¹ï¼Œä½¿ç›®æ ‡ç¼©å°ï¼Œå¯ä»¥æ¶ˆé™¤å°äºç»“æ„å…ƒç´ çš„å™ªå£°ç‚¹ã€‚<br>cv.erode(img,kernel,iterations)<br>imgï¼šè¦å¤„ç†çš„å›¾åƒ<br>kernelï¼šæ ¸ç»“æ„<br>iterationsï¼šè…èš€çš„æ¬¡æ•°ï¼Œé»˜è®¤æ˜¯1</p><p>è†¨èƒ€çš„å…·ä½“æ“ä½œæ˜¯ç”¨ä¸€ä¸ªç»“æ„å…ƒç´ æ‰«æå›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ ï¼Œç”¨ç»“æ„å…ƒç´ ä¸­çš„æ¯ä¸€ä¸ªåƒç´ ä¸å…¶è¦†ç›–çš„åƒç´ åšä¸æ“ä½œï¼Œå¦‚æœéƒ½ä¸º0ï¼Œåˆ™è¯¥åƒç´ ä¸º0ï¼Œå¦åˆ™ä¸º1.<br>è†¨èƒ€çš„ä½œç”¨æ˜¯å°†ä¸ç‰©ä½“æ¥è§¦çš„æ‰€æœ‰èƒŒæ™¯ç‚¹åˆå¹¶åˆ°ç‰©ä½“ä¸­ï¼Œä½¿ç›®æ ‡å¢å¤§ï¼Œå¯æ·»è¡¥ç›®æ ‡ä¸­çš„å­”æ´ã€‚<br>cv.dilate(img,kernel,iterations)imgï¼šè¦å¤„ç†çš„å›¾åƒ<br>kernelï¼šæ ¸ç»“æ„<br>iterationsï¼šè…èš€çš„æ¬¡æ•°ï¼Œé»˜è®¤æ˜¯1</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvimport matplotlib.pyplot as plt# è¯»å–å›¾åƒimg = cv.imread("/Users/dinggongcheng/Downloads/me.JPG")# åˆ›å»ºæ ¸ç»“æ„kernel = np.ones((5, 5), np.uint8)# å›¾åƒè…èš€å’Œè†¨èƒ€erosion = cv.erode(img, kernel)dilate = cv.dilate(img, kernel)# å›¾åƒæ˜¾ç¤ºfig, axes = plt.subplots(nrows=1, ncols=3, figsize=(10, 8), dpi=100)axes[0].imshow(img[:, :, ::-1])axes[0].set_title("from")axes[1].imshow(erosion[:, :, ::-1])axes[1].set_title("erosion")axes[1].imshow(dilate[:, :, ::-1])axes[1].set_title("dilate")plt.show()</code></pre><p><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8B%E5%8D%883.34.21.png" alt=""></p><h5 id="å¼€é—­è¿ç®—">å¼€é—­è¿ç®—</h5><p>å¼€è¿ç®—å’Œé—­è¿ç®—æ˜¯å°†è…èš€å’Œè†¨èƒ€æŒ‰ç…§ä¸€å®šçš„æ¬¡åºè¿›è¡Œå¤„ç†ã€‚ä½†è¿™ä¸¤è€…å¹¶ä¸æ˜¯å¯é€†çš„ï¼Œå³å…ˆå¼€åé—­å¹¶ä¸éš¾å¾—åˆ°åŸæ¥çš„å›¾åƒã€‚<br>å¼€è¿ç®—æ˜¯å…ˆè…èš€åè†¨èƒ€ï¼Œå…¶ä½œç”¨æ˜¯åˆ†ç¦»ç‰©ä½“ï¼Œæ¶ˆé™¤å°åŒºåŸŸã€‚æ¶ˆé™¤å™ªç‚¹ï¼Œå»é™¤å°çš„å¹²æ‰°å—ï¼Œè€Œä¸å½±å“åŸæ¥çš„å›¾åƒã€‚<br>é—­è¿ç®—ä¸å¼€è¿ç®—ç›¸åï¼Œæ˜¯å…ˆè†¨èƒ€åè…èš€ï¼Œä½œç”¨æ˜¯æ¶ˆé™¤/é—­åˆç‰©ä½“é‡Œé¢çš„å­”æ´ã€‚å¯ä»¥å¡«å……é—­åˆåŒºåŸŸã€‚</p><p>cv.morphologyEx(img,op,kernel)<br>imgï¼šè¦å¤„ç†çš„å›¾åƒ<br>opï¼šå¤„ç†æ–¹å¼ï¼šè‹¥è¿›è¡Œå¼€è¿ç®—ï¼Œåˆ™è®¾ä¸ºcv.MORPH_OPENï¼Œè‹¥è¿›è¡Œé—­è¿ç®—ï¼Œåˆ™è®¾ä¸ºcv.MORPH_CLOSE<br>kernelï¼šæ ¸ç»“æ„</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvimport matplotlib.pyplot as plt# è¯»å–å›¾åƒimg = cv.imread("/Users/dinggongcheng/Downloads/me.JPG")# åˆ›å»ºæ ¸ç»“æ„kernel = np.ones((10, 10), np.uint8)# å›¾åƒçš„å¼€é—­è¿ç®—cvOpen = cv.morphologyEx(img, cv.MORPH_OPEN, kernel)cvClose = cv.morphologyEx(img, cv.MORPH_CLOSE, kernel)# å›¾åƒæ˜¾ç¤ºfig, axes = plt.subplots(nrows=1, ncols=3, figsize=(10, 8), dpi=100)axes[0].imshow(img[:, :, ::-1])axes[0].set_title("from")axes[1].imshow(cvOpen[:, :, ::-1])axes[1].set_title("cvOpen")axes[1].imshow(cvClose[:, :, ::-1])axes[1].set_title("cvClose")plt.show()</code></pre><h5 id="ç¤¼å¸½å’Œé»‘å¸½">ç¤¼å¸½å’Œé»‘å¸½</h5><p>ç¤¼å¸½è¿ç®—<br>åŸå›¾åƒä¸å¼€è¿ç®—çš„ç»“æœå›¾ä¹‹å·®ï¼Œå¦‚ä¸‹å¼è®¡ç®—ï¼š<br>dst = tophat(src,element) = src - open(src,element)<br>å› ä¸ºå¼€è¿ç®—å¸¦æ¥çš„ç»“æœæ˜¯æ”¾å¤§äº†è£‚ç¼æˆ–è€…å±€éƒ¨ä½äº®åº¦çš„åŒºåŸŸï¼Œå› æ­¤ï¼Œä»åŸå›¾ä¸­å‡å»å¼€è¿ç®—åçš„å›¾ï¼Œå¾—åˆ°çš„æ•ˆæœçªå‡ºäº†æ¯”åŸå›¾è½®å»“å‘¨å›´çš„åŒºåŸŸæ›´æ˜äº®çš„åŒºåŸŸï¼Œä¸”è¿™ä¸€æ“ä½œå’Œé€‰æ‹©çš„æ ¸çš„å¤§å°ç›¸å…³ã€‚<br>ç¤¼å¸½è¿ç®—ç”¨æ¥åˆ†ç¦»æ¯”é‚»è¿‘ç‚¹äº®ä¸€äº›çš„æ–‘å—ã€‚å½“ä¸€å¹…å›¾åƒå…·æœ‰å¤§å¹…çš„èƒŒæ™¯çš„æ—¶å€™ï¼Œè€Œå¾®å°ç‰©å“æ¯”è¾ƒæœ‰è§„å¾‹çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ç¤¼å¸½è¿ç®—è¿›è¡ŒèƒŒæ™¯æå–ã€‚</p><p>é»‘å¸½è¿ç®—<br>ä¸ºé—­è¿ç®—çš„ç»“æœå›¾ä¸åŸå›¾åƒä¹‹å·®ï¼Œæ•°å­¦è¡¨è¾¾å¼ä¸º<br>dst = blackout(src,element) = close(src,element) - src<br>é»‘å¸½è¿ç®—åçš„æ•ˆæœå›¾çªå‡ºäº†æ¯”åŸå›¾è½®å»“å‘¨å›´çš„åŒºåŸŸæ›´æš—çš„åŒºåŸŸï¼Œä¸”è¿™ä¸€æ“ä½œå’Œé€‰æ‹©çš„æ ¸çš„å¤§å°ç›¸å…³ã€‚é»‘å¸½è¿ç®—ç”¨æ¥åˆ†ç¦»æ¯”é‚»è¿‘ç‚¹æš—ä¸€äº›çš„æ–‘å—ã€‚</p><p>cv.morphologyEx(img,op,kernel)<br>imgï¼šè¦å¤„ç†çš„å›¾åƒ<br>opï¼šå¤„ç†æ–¹å¼ï¼šè‹¥è¿›è¡Œå¼€è¿ç®—ï¼Œåˆ™è®¾ä¸ºcv.MORPH_OPENï¼Œè‹¥è¿›è¡Œé—­è¿ç®—ï¼Œåˆ™è®¾ä¸ºcv.MORPH_CLOSEã€‚è‹¥è¿›è¡Œç¤¼å¸½è¿ç®—ï¼Œåˆ™è®¾ä¸ºcv.MORPH_TOPHATï¼Œè‹¥è¿›è¡Œé»‘å¸½è¿ç®—ï¼Œåˆ™è®¾ä¸ºcv.MORPH_BLACKHATã€‚<br>kernelï¼šæ ¸ç»“æ„</p><h4 id="å›¾åƒå¹³æ»‘">å›¾åƒå¹³æ»‘</h4><h5 id="å›¾åƒå™ªå£°">å›¾åƒå™ªå£°</h5><p>æ¤’ç›å™ªå£°<br>æ¤’ç›å™ªå£°ä¹Ÿç§°ä¸ºè„‰å†²å™ªå£°ï¼Œæ˜¯å›¾åƒä¸­ç»å¸¸è§åˆ°çš„ä¸€ç§å™ªå£°ï¼Œå®ƒæ˜¯ä¸€ç§éšæœºå‡ºç°çš„ç™½ç‚¹æˆ–è€…é»‘ç‚¹ï¼Œå¯èƒ½æ˜¯äº®çš„åŒºåŸŸæœ‰é»‘è‰²åƒç´ æˆ–æ˜¯åœ¨æš—çš„åŒºåŸŸæœ‰ç™½è‰²åƒç´ ã€‚</p><p>é«˜æ–¯å™ªå£°<br>å™ªå£°å¯†åº¦å‡½æ•°æœä»é«˜æ–¯åˆ†å¸ƒçš„ä¸€ç±»å™ªå£°ã€‚</p><h5 id="å›¾åƒå¹³æ»‘-2">å›¾åƒå¹³æ»‘</h5><h6 id="å‡å€¼æ»¤æ³¢">å‡å€¼æ»¤æ³¢</h6><p>cv.blur(src,ksize,anchor,borderType)<br>srcï¼šè¾“å…¥å›¾åƒ<br>ksizeï¼šå·ç§¯æ ¸çš„å¤§å°<br>anchorï¼šé»˜è®¤å€¼(-1,-1)ï¼Œè¡¨ç¤ºæ ¸ä¸­å¿ƒ<br>borderTypeï¼šè¾¹ç•Œç±»å‹</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvimport matplotlib.pyplot as plt# å›¾åƒè¯»å–img = cv.imread("/Users/dinggongcheng/Downloads/me.png")# å‡å€¼æ»¤æ³¢blur = cv.blur(img, (5, 5))# å›¾åƒæ˜¾ç¤ºplt.figure(figsize=(10, 8), dpi=100)plt.subplot(121), plt.imshow(img[:, :, ::-1]), plt.title('from')plt.xticks([]), plt.yticks([])plt.subplot(122), plt.imshow(blur[:, :, ::-1]), plt.title('blur')plt.xticks([]), plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8B%E5%8D%884.16.32.png" alt=""></p><h6 id="é«˜æ–¯æ»¤æ³¢">é«˜æ–¯æ»¤æ³¢</h6><p>cv.GaussianBlur(src,ksize,sigmaX,sigmaY,borderType)<br>srcï¼šè¾“å…¥å›¾åƒ<br>ksizeï¼šé«˜æ–¯å·ç§¯æ ¸å¤§å°ï¼Œæ³¨æ„ï¼šå·ç§¯æ ¸çš„å®½åº¦å’Œé«˜åº¦éƒ½åº”ä¸ºå¥‡æ•°ï¼Œä¸”å¯ä»¥ä¸åŒ<br>sigmaXï¼šæ°´å¹³æ–¹å‘çš„æ ‡å‡†å·®<br>sigmaYï¼šå‚ç›´æ–¹å‘çš„æ ‡å‡†å·®ï¼Œé»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸sigmaXç›¸åŒ<br>borderTypeï¼šå¡«å……è¾¹ç•Œç±»å‹</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvimport matplotlib.pyplot as plt# å›¾åƒè¯»å–img = cv.imread("/Users/dinggongcheng/Downloads/me.png")# é«˜æ–¯æ»¤æ³¢gauss = cv.GaussianBlur(img, (3, 3), 1)# å›¾åƒæ˜¾ç¤ºplt.figure(figsize=(10, 8), dpi=100)plt.subplot(121), plt.imshow(img[:, :, ::-1]), plt.title('from')plt.xticks([]), plt.yticks([])plt.subplot(122), plt.imshow(gauss[:, :, ::-1]), plt.title('gauss')plt.xticks([]), plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8B%E5%8D%884.26.06.png" alt=""></p><h6 id="ä¸­å€¼æ»¤æ³¢">ä¸­å€¼æ»¤æ³¢</h6><p>ä¸­å€¼æ»¤æ³¢æ˜¯ä¸€ç§å…¸å‹çš„éçº¿æ€§æ»¤æ³¢æŠ€æœ¯ï¼ŒåŸºæœ¬æ€æƒ³é€‚ç”¨åƒç´ ç‚¹é¢†åŸŸç°åº¦å€¼çš„ä¸­å€¼æ¥ä»£æ›¿è¯¥åƒç´ ç‚¹çš„ç°åº¦å€¼ã€‚ä¸­å€¼æ»¤æ³¢å¯¹æ¤’ç›å™ªå£°æ¥è¯´å°¤å…¶æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä¸ä¾èµ–äºé¢†åŸŸå†…é‚£äº›ä¸å…¸å‹å€¼å·®åˆ«å¾ˆå¤§çš„å€¼ã€‚<br>cv.medianBlur(src,ksize)<br>srcï¼šè¾“å…¥å›¾åƒ<br>ksizeï¼šå·ç§¯æ ¸çš„å¤§å°</p><pre class=" language-language-python"><code class="language-language-python">import numpy as npimport cv2 as cvimport matplotlib.pyplot as plt# å›¾åƒè¯»å–img = cv.imread("/Users/dinggongcheng/Downloads/me.png")# ä¸­å€¼æ»¤æ³¢media = cv.medianBlur(img, 5)# å›¾åƒæ˜¾ç¤ºplt.figure(figsize=(10, 8), dpi=100)plt.subplot(121), plt.imshow(img[:, :, ::-1]), plt.title('from')plt.xticks([]), plt.yticks([])plt.subplot(122), plt.imshow(media[:, :, ::-1]), plt.title('media')plt.xticks([]), plt.yticks([])plt.show()</code></pre><p><img src="http://dingdm.online/%E6%88%AA%E5%B1%8F2021-03-29%20%E4%B8%8B%E5%8D%884.30.18.png" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒå¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°(ä¸€)</title>
      <link href="/2021/03/27/python-xue-xi-bi-ji/"/>
      <url>/2021/03/27/python-xue-xi-bi-ji/</url>
      
        <content type="html"><![CDATA[<h2 id="pythonå­¦ä¹ ç¬”è®°-ä¸€">pythonå­¦ä¹ ç¬”è®°(ä¸€)</h2><h3 id="pythonå‡½æ•°">pythonå‡½æ•°</h3><p>printè¾“å‡ºå‡½æ•°<br>id(var) è·å–å¯¹è±¡çš„å”¯ä¸€id type(var) è·å–å¯¹è±¡çš„ç±»å‹ var å­˜å‚¨çš„å€¼</p><p>openå‡½æ•° var3 = open(var1 var2) var1å‚æ•°å€¼ä»£è¡¨è¾“å‡ºæ–‡ä»¶è·¯å¾„ var2ä»£è¡¨æ–‡ä»¶åˆ›å»ºçš„å½¢å¼ 'a+'ä»£è¡¨æ— åˆ™åˆ›å»ºï¼Œæœ‰åˆ™è¿½åŠ ã€‚var3ä»£è¡¨è¿”å›å¯¹è±¡<br>print(var1 var2) var1ä»£è¡¨è¾“å‡ºå†…å®¹ var2ä»£è¡¨ä½¿ç”¨çš„è¿”å›å‚æ•°ï¼Œå¯¹äºè¾“å…¥åˆ°æ–‡ä»¶æ¥è¯´ï¼Œfile=var3è¿›è¡Œè¾“å…¥<br><strong>ä½¿ç”¨openè¿›è¡Œè¾“å…¥åˆ°æ–‡ä»¶ï¼Œéœ€è¦å…³é—­è¿”å›var3çš„å¯¹è±¡(å…³é—­æµ)</strong></p><p>chr(0bäºŒè¿›åˆ¶) è¾“å‡ºå¯¹åº”çš„æ±‰å­—ç¼–ç å¯¹åº”çš„æ±‰å­—<br>ord(å­—ç¬¦ä¸²) è¾“å‡ºå¯¹åº”æ±‰å­—çš„äºŒè¿›åˆ¶ç¼–ç  éƒ½éœ€è¦å€ŸåŠ©printè¾“å‡º</p><p>var2 = input(var1) var1ä½œä¸ºè„šæœ¬æé—®ï¼Œvar2ä½œä¸ºç”¨æˆ·è¾“å…¥</p><p>bool() è·å–å¯¹è±¡çš„boolå€¼ã€‚é»˜è®¤ä¸ºFalseçš„æ•°æ®ç»“æ„é»˜è®¤å€¼ï¼ŒFalseï¼Œ0ï¼Œ0.0ï¼ŒNoneï¼Œâ€™â€™ï¼Œ""ï¼Œ[]ï¼Œlist()ï¼Œ()ï¼Œtuple()ï¼Œ{}ï¼Œdict()ï¼Œset()</p><p>var = range(stop) é»˜è®¤ä»0å¼€å§‹ï¼Œæ­¥é•¿ä¸º1ã€‚ç»™å‡ºç»“æŸ<br>var = range(start,stop) é»˜è®¤æ­¥é•¿ä¸º1ï¼Œç»™å‡ºå¼€å§‹ä¸ç»“æŸã€‚<br>var = range(start,stop,step) ç»™å‡ºå¼€å§‹ï¼Œç»“æŸä¸æ­¥é•¿ã€‚å·¦é—­å³å¼€ã€‚<br>listÂ® åˆ—è¡¨è¾“å‡º ä½¿ç”¨inæˆ–not inåˆ¤æ–­æ•´æ•°åœ¨åˆ—è¡¨ä¸­æ˜¯å¦å­˜åœ¨ï¼Œè¿”å›bool</p><h3 id="è½¬ä¹‰å­—ç¬¦">è½¬ä¹‰å­—ç¬¦</h3><p>\n æ¢è¡Œ \t åˆ¶è¡¨ç¬¦ åˆ¶è¡¨ç¬¦ä»¥é¦–å­—æ¯å¼€å§‹ä»¥å››ä¸ªå ä½ä¸ºæ ‡å‡†è¿›è¡Œ<br>\r å›è½¦ \b å›é€€ æ’¤é”€å‰ä¸€æ ¼<br>ä¸å¸Œæœ›è½¬ä¹‰ï¼Œå­—ç¬¦ä¸²å‰åŠ ræˆ–Rå³å¯<br>ä¸‰å¼•å·å¯ä»¥æ¢è¡Œ</p><h3 id="å­—ç¬¦ç¼–ç ">å­—ç¬¦ç¼–ç </h3><p>50 2 70 F 100 d</p><h3 id="ç±»å‹è½¬æ¢">ç±»å‹è½¬æ¢</h3><p>ç›´æ¥ä½¿ç”¨æ•°æ®ç±»å‹ï¼Œstr(),int(),float()</p><h3 id="è¿ç®—ç¬¦">è¿ç®—ç¬¦</h3><p>//æ•´é™¤è¿ç®—ï¼Œå–æ•´æ•°éƒ¨åˆ†ï¼Œæ­£è´Ÿæ•´é™¤è¿ç®—ï¼Œå‘ä¸‹å–æ•´æ•°<br>**å¹‚è¿ç®—ï¼Œæ¬¡æ–¹è¿ç®—<br>æ­£è´Ÿå–ä½™è¿ç®—æ—¶ï¼Œå…¬å¼ä¸ºä½™æ•°=è¢«é™¤æ•°-é™¤æ•°âœ–ï¸å•†<br>è§£åŒ…èµ‹å€¼ï¼Œa,b,c = 20,30,40<br>isè¿›è¡Œå¯¹è±¡åˆ¤æ–­<br>pythonä¸­ç›´æ¥ä½¿ç”¨è‹±æ–‡and,oræˆ–not<br>å­—ç¬¦ä¸²åˆ¤æ–­å­˜åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨inæˆ–not in</p><h3 id="åˆ†æ”¯ç»“æ„">åˆ†æ”¯ç»“æ„</h3><p>ifè¯­æ³•:<br>if æ¡ä»¶è¡¨è¾¾å¼:<br>ä¸šåŠ¡é€»è¾‘<br>else:<br>ä¸šåŠ¡é€»è¾‘</p><p>if æ¡ä»¶è¡¨è¾¾å¼:<br>if æ¡ä»¶è¡¨è¾¾å¼:<br>ä¸šåŠ¡é€»è¾‘<br>else:<br>ä¸šåŠ¡é€»è¾‘<br>else:<br>ä¸šåŠ¡é€»è¾‘</p><p>(var1) if var1&gt;=var2 else (var2)  ç±»ä¼¼ä¸‰å…ƒè¡¨è¾¾å¼ï¼ŒTrueå‰ï¼ŒFalseå</p><p>passå ä½ç¬¦ï¼Œä»£æ›¿æ¨¡ç³Šçš„ä¸šåŠ¡é€»è¾‘</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring bootæ¥å£é˜²åˆ·</title>
      <link href="/2021/02/17/springboot-jie-kou-fang-shua/"/>
      <url>/2021/02/17/springboot-jie-kou-fang-shua/</url>
      
        <content type="html"><![CDATA[<h3 id="Springbootæ¥å£é˜²åˆ·">Springbootæ¥å£é˜²åˆ·</h3><p>è‡ªå®šä¹‰æ³¨è§£</p><pre class=" language-language-java"><code class="language-language-java">import java.lang.annotation.Retention;import java.lang.annotation.Target; import static java.lang.annotation.ElementType.METHOD;import static java.lang.annotation.RetentionPolicy.RUNTIME; @Target(ElementType.METHOD)@Retention(RetentionPolicy.RUNTIME)public @interface AccessLimit {     int seconds();    int maxCount();    boolean needLogin() default true;}</code></pre><p>æ‹¦æˆªå™¨</p><p>ç”¨æˆ·çš„ IDå’Œè¯·æ±‚çš„è·¯å¾„ä½œä¸ºkey,é¦–å…ˆä»redisä¸­æ ¹æ®è¯¥keyå»å–å¾—ç”¨æˆ·çš„è®¿é—®æ¬¡æ•°ï¼Œå¦‚æœä¸ºnull,åˆ™æ ¹æ®è¯¥keyé‡æ–°è®¾ç½®key,value,valueçš„å€¼æ˜¯ï¼‘ï¼Œèƒ½å–åˆ°keyå¯¹åº”çš„valueï¼Œåˆ™åˆ¤æ–­vlaueæ˜¯å¦å°äºï¼•ï¼Œæ˜¯åˆ™å¤„ç†è¯·æ±‚ï¼Œå¦åˆ™è¿”å›errorã€‚</p><pre class=" language-language-java"><code class="language-language-java">import com.alibaba.fastjson.JSON;import com.example.demo.action.AccessLimit;import com.example.demo.redis.RedisService;import com.example.demo.result.CodeMsg;import com.example.demo.result.Result;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Component;import org.springframework.web.method.HandlerMethod;import org.springframework.web.servlet.handler.HandlerInterceptorAdapter; import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.OutputStream; @Componentpublic class AntiBrushInterceptor extends HandlerInterceptorAdapter {     @Autowired    private RedisService redisService;     @Override    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {         if(handler instanceof HandlerMethod){             HandlerMethod hm = (HandlerMethod) handler;             AccessLimit accessLimit = hm.getMethodAnnotation(AccessLimit.class);            if(accessLimit == null){                return true;            }            int seconds = accessLimit.seconds();            int maxCount = accessLimit.maxCount();            boolean login = accessLimit.needLogin();            String key = request.getRequestURI();            if(login){                //ä¸šåŠ¡é€»è¾‘            }             AccessKey ak = AccessKey.withExpire(seconds);            Integer count = redisService.get(ak,key,Integer.class);            if(count == null){                redisService.set(ak,key,1);            }else if(count < maxCount){                redisService.incr(ak,key);            }else{                render(response,CodeMsg.ACCESS_LIMIT_REACHED);                 return false;            }        }         return true;     }    private void render(HttpServletResponse response, CodeMsg cm)throws Exception {        response.setContentType("application/json;charset=UTF-8");        OutputStream out = response.getOutputStream();        String str  = JSON.toJSONString(Result.error(cm));        out.write(str.getBytes("UTF-8"));        out.flush();        out.close();    }}</code></pre><p>æ‹¦æˆªå™¨æ³¨å†Œå’Œæ³¨è§£ä½¿ç”¨</p><pre class=" language-language-java"><code class="language-language-java">import com.example.demo.ExceptionHander.AntiBrushInterceptor;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.context.annotation.Configuration;import org.springframework.web.servlet.config.annotation.InterceptorRegistry;import org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;@Configurationpublic class WebConfig extends WebMvcConfigurerAdapter {     @Autowired    private AntiBrushInterceptor interceptor;      @Override    public void addInterceptors(InterceptorRegistry registry) {        registry.addInterceptor(interceptor);    }}</code></pre><pre class=" language-language-java"><code class="language-language-java">@PostMapping("getNewsModule")@AccessLimit(seconds=5, maxCount=10, needLogin=true)public Result<List<NewsModuleDTO>> getNewsModule(@ApiIgnore @RequestParam Map<String, Object> params){        PageData<NewsModuleDTO> page = newsModuleService.page(params);        return new Result<List<NewsModuleDTO>>().ok(page.getList());    }</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ—¥å¸¸éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring Boot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨dockeråˆ›å»ºé¡¹ç›®é•œåƒ</title>
      <link href="/2021/02/05/shi-yong-docker-chuang-jian-xiang-mu-jing-xiang/"/>
      <url>/2021/02/05/shi-yong-docker-chuang-jian-xiang-mu-jing-xiang/</url>
      
        <content type="html"><![CDATA[<h3 id="ä½¿ç”¨dockeråˆ›å»ºé¡¹ç›®é•œåƒ">ä½¿ç”¨dockeråˆ›å»ºé¡¹ç›®é•œåƒ</h3><p>æœ¬æ–‡åˆ›å»ºçš„é•œåƒä¸ºhexoé™æ€åšå®¢çš„é•œåƒï¼Œé˜²æ­¢è‡ªå·±çš„æœåŠ¡å™¨åˆ°æœŸä¹‹åè¿›è¡Œè¿ç§»çš„éº»çƒ¦ã€‚</p><h4 id="ç¡®å®šåˆ›å»ºé•œåƒæ‰€éœ€çš„ç¯å¢ƒ">ç¡®å®šåˆ›å»ºé•œåƒæ‰€éœ€çš„ç¯å¢ƒ</h4><ul><li>node.js</li><li>git</li><li>nginx</li></ul><h4 id="ç¼–å†™è‡ªå·±çš„é•œåƒçš„Dockerfileæ–‡ä»¶">ç¼–å†™è‡ªå·±çš„é•œåƒçš„Dockerfileæ–‡ä»¶</h4><p>dockeræŒ‡ä»¤è¯¦è§£</p><table><thead><tr><th>æŒ‡ä»¤åç§°</th><th>ç”¨æ³•</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>FROM</td><td>FROM image</td><td>FROMæŒ‡å®šæ„å»ºé•œåƒçš„åŸºç¡€æºé•œåƒï¼Œå¦‚æœæœ¬åœ°æ²¡æœ‰æŒ‡å®šçš„é•œåƒï¼Œåˆ™ä¼šè‡ªåŠ¨ä» Docker çš„å…¬å…±åº“ pull é•œåƒä¸‹æ¥ï¼›FROMå¿…é¡»æ˜¯ Dockerfile ä¸­éæ³¨é‡Šè¡Œçš„ç¬¬ä¸€ä¸ªæŒ‡ä»¤ï¼Œå³ä¸€ä¸ª Dockerfile ä»FROMè¯­å¥å¼€å§‹ï¼›FROMå¯ä»¥åœ¨ä¸€ä¸ª Dockerfile ä¸­å‡ºç°å¤šæ¬¡ï¼Œå¦‚æœæœ‰éœ€æ±‚åœ¨ä¸€ä¸ª Dockerfile ä¸­åˆ›å»ºå¤šä¸ªé•œåƒï¼›å¦‚æœFROMè¯­å¥æ²¡æœ‰æŒ‡å®šé•œåƒæ ‡ç­¾ï¼Œåˆ™é»˜è®¤ä½¿ç”¨latestæ ‡ç­¾ã€‚</td></tr><tr><td>MAINTAINER</td><td>MAINTAINER name</td><td>æŒ‡å®šåˆ›å»ºé•œåƒçš„ç”¨æˆ·</td></tr><tr><td>RUN</td><td>RUN â€œexecutableâ€, â€œparam1â€, â€œparam2â€</td><td>æ¯æ¡RUNæŒ‡ä»¤å°†åœ¨å½“å‰é•œåƒåŸºç¡€ä¸Šæ‰§è¡ŒæŒ‡å®šå‘½ä»¤ï¼Œå¹¶æäº¤ä¸ºæ–°çš„é•œåƒï¼Œåç»­çš„RUNéƒ½åœ¨ä¹‹å‰RUNæäº¤åçš„é•œåƒä¸ºåŸºç¡€ï¼Œé•œåƒæ˜¯åˆ†å±‚çš„ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªé•œåƒçš„ä»»ä½•ä¸€ä¸ªå†å²æäº¤ç‚¹æ¥åˆ›å»ºï¼Œç±»ä¼¼æºç çš„ç‰ˆæœ¬æ§åˆ¶ï¼›</td></tr><tr><td></td><td>RUN [ â€œechoâ€, â€œ$HOMEâ€ ]</td><td></td></tr><tr><td></td><td>RUN [ â€œshâ€, â€œ-câ€, â€œechoâ€, â€œ$HOMEâ€ ]</td><td>RUNäº§ç”Ÿçš„ç¼“å­˜åœ¨ä¸‹ä¸€æ¬¡æ„å»ºçš„æ—¶å€™æ˜¯ä¸ä¼šå¤±æ•ˆçš„ï¼Œä¼šè¢«é‡ç”¨ï¼Œå¯ä»¥ä½¿ç”¨â€“no-cacheé€‰é¡¹ï¼Œå³docker build â€“no-cacheï¼Œå¦‚æ­¤ä¾¿ä¸ä¼šç¼“å­˜ã€‚</td></tr><tr><td>CMD</td><td>CMD â€œexecutableâ€,â€œparam1â€,â€œparam2â€</td><td>CMDæŒ‡å®šåœ¨ Dockerfile ä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œåˆ™åªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆã€‚</td></tr><tr><td></td><td>CMD â€œparam1â€,â€œparam2â€</td><td>CMDçš„ç›®çš„æ˜¯ä¸ºäº†åœ¨å¯åŠ¨å®¹å™¨æ—¶æä¾›ä¸€ä¸ªé»˜è®¤çš„å‘½ä»¤æ‰§è¡Œé€‰é¡¹ã€‚å¦‚æœç”¨æˆ·å¯åŠ¨å®¹å™¨æ—¶æŒ‡å®šäº†è¿è¡Œçš„å‘½ä»¤ï¼Œåˆ™ä¼šè¦†ç›–æ‰CMDæŒ‡å®šçš„å‘½ä»¤ã€‚</td></tr><tr><td></td><td>CMD command param1 param2 (shell form)</td><td>CMDä¼šåœ¨å¯åŠ¨å®¹å™¨çš„æ—¶å€™æ‰§è¡Œï¼Œbuild æ—¶ä¸æ‰§è¡Œï¼Œè€ŒRUNåªæ˜¯åœ¨æ„å»ºé•œåƒçš„æ—¶å€™æ‰§è¡Œï¼Œåç»­é•œåƒæ„å»ºå®Œæˆä¹‹åï¼Œå¯åŠ¨å®¹å™¨å°±ä¸RUNæ— å…³äº†</td></tr><tr><td>EXPOSE</td><td>EXPOSE port [portâ€¦]</td><td>å‘Šè¯‰ Docker æœåŠ¡ç«¯å®¹å™¨å¯¹å¤–æ˜ å°„çš„æœ¬åœ°ç«¯å£ï¼Œéœ€è¦åœ¨ docker run çš„æ—¶å€™ä½¿ç”¨-pæˆ–è€…-Pé€‰é¡¹ç”Ÿæ•ˆã€‚</td></tr><tr><td>ENV</td><td>ENV key value       <em># åªèƒ½è®¾ç½®ä¸€ä¸ªå˜é‡</em></td><td></td></tr><tr><td></td><td>ENV key=value â€¦   <em># å…è®¸ä¸€æ¬¡è®¾ç½®å¤šä¸ªå˜é‡</em></td><td>æŒ‡å®šä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œä¼šè¢«åç»­RUNæŒ‡ä»¤ä½¿ç”¨ï¼Œå¹¶åœ¨å®¹å™¨è¿è¡Œæ—¶ä¿ç•™ã€‚</td></tr><tr><td>ADD</td><td>ADD srcâ€¦ dest</td><td>ADDå¤åˆ¶æœ¬åœ°ä¸»æœºæ–‡ä»¶ã€ç›®å½•æˆ–è€…è¿œç¨‹æ–‡ä»¶ URLS ä» å¹¶ä¸”æ·»åŠ åˆ°å®¹å™¨æŒ‡å®šè·¯å¾„ä¸­ ã€‚</td></tr><tr><td>COPY</td><td>COPY srcâ€¦ dest</td><td>COPYå¤åˆ¶æ–°æ–‡ä»¶æˆ–è€…ç›®å½•ä» å¹¶ä¸”æ·»åŠ åˆ°å®¹å™¨æŒ‡å®šè·¯å¾„ä¸­ ã€‚ç”¨æ³•åŒADDï¼Œå”¯ä¸€çš„ä¸åŒæ˜¯ä¸èƒ½æŒ‡å®šè¿œç¨‹æ–‡ä»¶ URLSã€‚</td></tr><tr><td>ENTRYPOINT</td><td>ENTRYPOINT â€œexecutableâ€, â€œparam1â€, â€œparam2â€</td><td>æ¯ä¸ª Dockerfile ä¸­åªèƒ½æœ‰ä¸€ä¸ªENTRYPOINTï¼Œå½“æŒ‡å®šå¤šä¸ªæ—¶ï¼Œåªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚</td></tr><tr><td></td><td>ENTRYPOINT command param1 param2 (shell form)</td><td>é…ç½®å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤ï¼Œå¹¶ä¸”ä¸å¯è¢« docker run æä¾›çš„å‚æ•°è¦†ç›–ï¼Œè€ŒCMDæ˜¯å¯ä»¥è¢«è¦†ç›–çš„ã€‚å¦‚æœéœ€è¦è¦†ç›–ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<code>docker run --entrypoint</code>é€‰é¡¹ã€‚</td></tr><tr><td>VOLUME</td><td>VOLUME ["/data"]</td><td>å°†æœ¬åœ°ä¸»æœºç›®å½•æŒ‚è½½åˆ°ç›®æ ‡å®¹å™¨ä¸­ï¼Œæˆ–è€…å°†å…¶ä»–å®¹å™¨æŒ‚è½½çš„æŒ‚è½½ç‚¹ æŒ‚è½½åˆ°ç›®æ ‡å®¹å™¨ä¸­</td></tr><tr><td>USER</td><td>USER daemon</td><td>æŒ‡å®šè¿è¡Œå®¹å™¨æ—¶çš„ç”¨æˆ·åæˆ– UIDï¼Œåç»­çš„RUNã€CMDã€ENTRYPOINTä¹Ÿä¼šä½¿ç”¨æŒ‡å®šç”¨æˆ·ã€‚</td></tr><tr><td>WORKDIR</td><td>WORKDIR /path/to/workdir</td><td>ä¸ºåç»­çš„RUNã€CMDã€ENTRYPOINTæŒ‡ä»¤é…ç½®å·¥ä½œç›®å½•ã€‚å¯ä»¥ä½¿ç”¨å¤šä¸ªWORKDIRæŒ‡ä»¤ï¼Œåç»­å‘½ä»¤å¦‚æœå‚æ•°æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™ä¼šåŸºäºä¹‹å‰å‘½ä»¤æŒ‡å®šçš„è·¯å¾„ã€‚</td></tr><tr><td>ONBUILD</td><td>ONBUILD [INSTRUCTION]</td><td>ä½¿ç”¨è¯¥dockerfileç”Ÿæˆçš„é•œåƒAï¼Œå¹¶ä¸æ‰§è¡ŒONBUILDä¸­å‘½ä»¤ï¼Œå¦‚å†æ¥ä¸ªdockerfile åŸºç¡€é•œåƒä¸ºé•œåƒAæ—¶ï¼Œç”Ÿæˆçš„é•œåƒBæ—¶å°±ä¼šæ‰§è¡ŒONBUILDä¸­çš„å‘½ä»¤</td></tr></tbody></table><p><strong>æ‹‰å–ubuntuç¯å¢ƒé•œåƒ</strong></p><pre class=" language-language-dockerfile"><code class="language-language-dockerfile">docker pull ubuntu:18.04</code></pre><p><img src="http://dingdm.online/%E6%8B%89%E5%8F%96ubuntu.png" alt=""></p><p>å¦‚æœæ‹‰å–é•œåƒæ…¢çš„è¯ï¼Œå¯ä»¥é…ç½®ä¸€ä¸‹é•œåƒåŠ é€Ÿã€‚</p><p>ä½¿ç”¨<code>docker version</code>æŸ¥çœ‹è‡ªå·±çš„dockerç‰ˆæœ¬ï¼Œå¤§äº1.10å¯ä»¥è¿›è¡ŒåŠ é€Ÿé…ç½®ï¼Œå°äºçš„æ›´æ–°ä¸€ä¸‹å³å¯ã€‚</p><pre><code>mkdir -p /etc/dockertee /etc/docker/daemon.json &lt;&lt;-'EOF'{  "registry-mirrors": ["https://xxxxx.mirror.aliyuncs.com"]  #è¿™é‡Œä¹Ÿå¯ä»¥ç”¨ç½‘æ˜“çš„é•œåƒåŠ é€Ÿå™¨ï¼š"http://hub-mirror.c.163.com"}EOFsystemctl daemon-reloadsystemctl restart docker</code></pre><p><strong>é…ç½®nginxç¯å¢ƒ</strong></p><p>å®‰è£…æ­¥éª¤åœ¨åé¢çš„Dockerfileä¸­ï¼Œå®‰è£…å®Œnginxåï¼Œè¿™é‡Œä»¥ubuntu18.04ä¸ºä¾‹ï¼Œnginxçš„ç›®å½•ä¸º/ect/nginxã€‚æˆ‘ä»¬ä¿®æ”¹é…ç½®æ–‡ä»¶åªéœ€è¦ä¿®æ”¹sites-availableä¸‹çš„defaultå³å¯ã€‚æˆ‘è¿™é‡Œåœ¨ä¹‹å‰å­¦ä¹ çš„æ—¶å€™éƒ½æ˜¯ä¸ä¸€æ ·çš„è·¯å¾„ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œä»¥ubuntuä¸ºä¾‹ã€‚å‡†å¤‡å¥½ä¸€ä»½defaulté…ç½®æ–‡ä»¶COPYå³å¯ã€‚</p><pre><code>server {        listen 80 default_server;        listen [::]:80 default_server;        listen 443 ssl;        ssl off;        ssl_certificate cert/4287626_www.dingdm.club.pem;        ssl_certificate_key cert/4287626_www.dingdm.club.key;        ssl_session_timeout 5m;        #ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aN$        ssl_ciphers ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA:ECDHE-ECDSA-DES-CBC3-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:DES-CBC3-SHA:!DSS;        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;        ssl_prefer_server_ciphers on;        root /home/www/hexo;        server_name dingdm.club;}</code></pre><p>server_nameä¸ºä½ çš„åŸŸåï¼Œrootä¸ºä½ çš„é™æ€ç½‘ç«™æ‰€åœ¨çš„è·¯å¾„ï¼Œå¯ä»¥è‡ªå·±åˆ›å»ºï¼Œ<strong>æ³¨æ„è¿™é‡Œçš„è·¯å¾„ä¸æ˜¯ä½ çš„hexoåšå®¢çš„è·¯å¾„ï¼Œå¦‚æœä½ åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºåšå®¢çš„è¯</strong>ã€‚</p><p>sslçš„é…ç½®ä¸ºå¼€å¯httpsçš„é…ç½®ï¼Œè¿™é‡Œå…ˆä¸èµ˜è¿°ï¼Œä¸éœ€è¦çš„è¯å¯ä»¥å°†sslç›¸å…³çš„é…ç½®æ³¨é‡Šæ‰å³å¯</p><p><strong>åœ¨ä½ ä½¿ç”¨dockeré•œåƒæœåŠ¡å™¨ä¸Šé…ä¸€ä¸‹è‡ªå·±çš„gitç¯å¢ƒå’Œä»“åº“ã€‚(édockerå®¹å™¨)</strong></p><p>æ›´æ–°é¢‘ç¹å› æ­¤ä¸å°†gitæ•´åˆåˆ°å®¹å™¨å†…ã€‚</p><pre><code>apt-get update apt-get install gitgit config --global user.name "ä½ çš„ç”¨æˆ·å"git config --global user.email "ä½ çš„æ³¨å†Œé‚®ç®±"</code></pre><p>æ·»åŠ gitç”¨æˆ·ï¼Œä½¿ç”¨rootè´¦æˆ·ä¹Ÿå¯ä»¥ã€‚</p><pre><code>adduser git</code></pre><p>ä¿®æ”¹æ–‡ä»¶å†…å®¹èµ‹äºˆæƒé™</p><pre><code>chmod 740 /etc/sudoersnano /etc/sudoers</code></pre><p>æ‰¾åˆ°rootç”¨æˆ·é‚£ï¼Œåœ¨ä¸‹æ–¹æ·»åŠ ä¸€æ¡</p><pre><code>git ALL=(ALL) ALL</code></pre><p>å°†æ–‡ä»¶æƒé™æ¢å¤</p><pre><code>chmod 400 /etc/sudoers</code></pre><p>åˆ‡æ¢åˆ°gitç”¨æˆ·ï¼Œå¹¶åˆ›å»ºsshæ–‡ä»¶å¤¹</p><pre><code>su gitcd ~mkdir .sshcd .ssh</code></pre><p>ç”Ÿæˆå¯†é’¥å…¬é’¥å¹¶é…ç½®</p><pre><code>ssh-keygencp id_rsa.pub authorized_keyschmod 600 ~/.ssh/authorized_keyschmod 700 ~/.ssh</code></pre><p>é…ç½®å®Œæˆä¹‹åå¯ä»¥ä½¿ç”¨<code>ssh -v git@ip</code>è¿æ¥æµ‹è¯•</p><p>æ–°å»ºä»“åº“å¹¶è®¾ç½®é’©å­è„šæœ¬</p><pre><code>cd ~git init --bare blog.gitnano ~/blog.git/hooks/post-receive</code></pre><p>è¾“å…¥ä»¥ä¸‹å†…å®¹</p><pre><code>git --work-tree=/home/www/hexo --git-dir=/home/git/blog.git checkout -f</code></pre><p>/home/www/hexoä¸ºä½ åˆšåˆšåœ¨nginxçš„é…ç½®æ–‡ä»¶é‡Œçš„rootè·¯å¾„ï¼Œ/home/git/blog.gitä¸ºä½ çš„ä»“åº“åœ°å€</p><p><strong>åˆ¶ä½œDockerfileæ–‡ä»¶</strong></p><p>ä½¿ç”¨è‡ªå·±åˆšåˆšæ‹‰å–çš„ubuntué•œåƒå¹¶å®‰è£…nginxå’Œé…ç½®ç¯å¢ƒ</p><pre class=" language-language-dockerfile"><code class="language-language-dockerfile">FROM c090eaba6b94RUN apt-get update && apt-get install -y nginxCOPY default /etc/nginx/sites-available/COPY www/ /home/wwwCMD ["/usr/sbin/nginx","-g","daemon off;"]</code></pre><p><strong>åˆ¶ä½œé•œåƒ</strong></p><pre><code>docker build -t dingdm:1.0.0 .</code></pre><p><img src="http://dingdm.online/%E8%BF%90%E8%A1%8C%E9%95%9C%E5%83%8F.png" alt=""></p><p><img src="http://dingdm.online/%E8%BF%90%E8%A1%8C%E6%88%90%E5%8A%9F.png" alt=""></p><p><strong>é•œåƒä¸ºnginxåŠ é™æ€åšå®¢é¡µé¢ã€‚æœåŠ¡å™¨åˆ°æœŸååœ¨è€ƒè™‘æœ¬åœ°éƒ¨ç½²ï¼Œä½¿ç”¨ADDåŠ è½½gitä»“åº“é‡Œæ–°éƒ¨ç½²çš„æ–‡ä»¶ä¿¡æ¯å¹¶å‘å¸ƒæ–°ç‰ˆé•œåƒã€‚</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Dockerfile </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KMPå­—ç¬¦ä¸²åŒ¹é…</title>
      <link href="/2020/09/07/kmp-zi-fu-chuan-pi-pei/"/>
      <url>/2020/09/07/kmp-zi-fu-chuan-pi-pei/</url>
      
        <content type="html"><![CDATA[<h3 id="KMPå­—ç¬¦ä¸²åŒ¹é…">KMPå­—ç¬¦ä¸²åŒ¹é…</h3><pre class=" language-language-java"><code class="language-language-java">package com.zjr.wholesale.config;import java.util.ArrayList;import java.util.List;public class KMP {    /*public static String [] str = new String[]{"b","a","c","b","a","d",            "a","b","a","d","a","b","a","b","a","c","a","m","b","a","b","a","c","a","d","d","a","b","a","b","a","c","a","s","d"};    public static String [] ptr = new String[]{"a","b","a","b","a","c","a"};*/    public static String [] str = new String[]{"a","b","c","a","a","b",            "a","b","a","b","a","a"};    public static String [] ptr = new String[]{"a","b","a","b"};    public static void main(String []args) {        List<Integer> array = getPtrArray(ptr);        ifEquals(0,0,array);    }    //é€’å½’åˆ¤æ–­å­—ç¬¦ä¸²æ¯”è¾ƒ    public static void ifEquals(int i,int j,List<Integer> array){        if(i < str.length){            if(j < ptr.length){                if(str[i].equals(ptr[j])){                    i++;                    j++;                    ifEquals(i,j,array);                }else{                    if(j == 0){                        i++;                    }else{                        int length = getArrayValue(j,array);                        if(length != 0){                            i = i - length;                        }                        j = 0;                    }                    ifEquals(i,j,array);                }            }else{                System.out.println("Ptr åŒ¹é…æˆåŠŸï¼Œä¸‹æ ‡å¼€å§‹ä½ç½®ä¸º:" + (i - ptr.length));                j = 0;                ifEquals(i,j,array);            }        }else{            System.out.println("å­—ç¬¦ä¸²åŒ¹é…ç»“æŸ");        }    }    //è·å–å‰ç¼€åç¼€æ•°ç»„ä¸­çš„é•¿åº¦    public static int getArrayValue(int j,List<Integer> array){        return array.get(j-1);    }    //è·å–æ¯”è¾ƒå­—ç¬¦ä¸²çš„å‰ç¼€åç¼€æ•°ç»„    public static List<Integer> getPtrArray(String []str){        int j = 1;        List<Integer> array = new ArrayList<Integer>();        while(j <= str.length){            List<String> nStr = new ArrayList<String>();            for(int i=0;i<j;i++){                nStr.add(str[i]);            }            int number = getNStrNumber(nStr);            array.add(number);            j++;        }        return array;    }    //è·å–å½“å‰åˆ—è¡¨å­—ç¬¦ä¸²çš„å‰ç¼€åç¼€ä¸ªæ•°    public static int getNStrNumber(List<String> nStr){        int length = 0;        if(nStr.size() == 1){            length = 0;        }else{            int i = nStr.size();            boolean flag = true;            while(i > 0 && flag){                i--;                StringBuilder str = new StringBuilder();                StringBuilder ptr = new StringBuilder();                for(int index = 0;index < i;index++){                    str.append(nStr.get(index));                }                for(int lIndex=(nStr.size() - i);lIndex < nStr.size();lIndex++){                    ptr.append(nStr.get(lIndex));                }                if(str.toString().equals(ptr.toString())){                    flag = false;                    length = str.length();                }            }        }        return length;    }}</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> KMP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>steamåŠå…¶ä»–å…è´¹æ¸¸æˆç™½å«–(æ›´æ–°)</title>
      <link href="/2020/08/08/steam-ji-qi-ta-mian-fei-you-xi-bai-piao-geng-xin/"/>
      <url>/2020/08/08/steam-ji-qi-ta-mian-fei-you-xi-bai-piao-geng-xin/</url>
      
        <content type="html"><![CDATA[<h3 id="steamåŠå…¶ä»–å…è´¹æ¸¸æˆç™½å«–-æ›´æ–°">steamåŠå…¶ä»–å…è´¹æ¸¸æˆç™½å«–(æ›´æ–°)</h3><h4 id="2020-11-05">2020-11-05</h4><p>æ— ä¸»ä¹‹åœ°3 61å…ƒ<br><a href="https://www.greenmangaming.com/zh/" target="_blank" rel="noopener">https://www.greenmangaming.com/zh/</a></p><h4 id="2020-09-02">2020-09-02</h4><p>è¿œå“­3é¢†å–<br><a href="https://register.ubisoft.com/far-cry-3/zh-CN" target="_blank" rel="noopener">https://register.ubisoft.com/far-cry-3/zh-CN</a><br>å…¨å¢ƒå°é”é¢†å–<br><a href="https://register.ubisoft.com/the-division/en-US" target="_blank" rel="noopener">https://register.ubisoft.com/the-division/en-US</a><br>å…¨å¢ƒå°é”éœ€æŒ‚ä¸‹æ¢¯å­ï¼Œæ¨èefan</p><h4 id="2020-08-16">2020-08-16</h4><p>NBK 2K20<br><a href="https://www.greenmangaming.com/zh/games/nba-2k20-pc/" target="_blank" rel="noopener">https://www.greenmangaming.com/zh/games/nba-2k20-pc/</a><br>é¬¼æ³£5å’Œç”ŸåŒ–å±æœº2 3ä¼˜æƒ <br><a href="https://chinaplay.store/china-keys/" target="_blank" rel="noopener">https://chinaplay.store/china-keys/</a></p><h4 id="2020-08-13">2020-08-13</h4><p>å…¨é¢æˆ˜äº‰ç‰¹æ´›ä¼Š<br>æœ¬ä½“é¢†å–åœ°å€ï¼š<a href="https://www.epicgames.com/store/zh-CN/product/a-total-war-saga-troy" target="_blank" rel="noopener">https://www.epicgames.com/store/zh-CN/product/a-total-war-saga-troy</a><br>æœ¬ä½“é¢†å–æ—¶é—´ï¼š8æœˆ13æ—¥21:00-8æœˆ14æ—¥21:00<br>DLCé¢†å–åœ°å€<br>æ³¨å†Œåœ°å€ï¼š<a href="https://access.totalwar.com/auth/email_register/" target="_blank" rel="noopener">https://access.totalwar.com/auth/email_register/</a><br>ï¼ˆå¦‚æœæ³¨å†Œåœ°å€æ‰“ä¸å¼€å»è¿™é‡Œhttps://access.totalwar.com/ç‚¹å‡»æ³¨å†Œï¼‰<br>å…³è”è´¦å·ï¼š<a href="https://access.totalwar.com/auth/control_panel/" target="_blank" rel="noopener">https://access.totalwar.com/auth/control_panel/</a></p><h4 id="2020-08-08">2020-08-08</h4><h5 id="steam">steam</h5><p><a href="https://www.humblebundle.com/store/f1-2018-free-game?hmb_campaign=freegame_2020_homepage_f12018&amp;hmb_medium=banner" target="_blank" rel="noopener">F1 2018</a></p><p>**ã€ŠF1 2018ã€‹**æ˜¯Codemasterså¼€å‘åˆ¶ä½œçš„ä¸€æ¬¾ä»¥ä¸–ç•Œä¸€çº§æ–¹ç¨‹å¼èµ›è½¦ä¸ºèƒŒæ™¯åˆ¶ä½œçš„ä¸€æ¬¾èµ›è½¦ç«é€Ÿç±»æ¸¸æˆã€‚</p><p><a href="https://store.steampowered.com/app/397540/3/" target="_blank" rel="noopener">æ— ä¸»ä¹‹åœ°3</a></p><p>æ— ä¸»ä¹‹åœ°3å…è´¹å‘¨æœ«è¯•ç©</p><h5 id="EPIC">EPIC</h5><p><a href="https://www.epicgames.com/store/zh-CN/free-games" target="_blank" rel="noopener">å…è´¹æ¸¸æˆ</a></p><p>é—è¿¹ç°çƒ¬é‡ç”Ÿè¿˜ä¸é”™</p><h5 id="GMG">GMG</h5><p><a href="https://www.epicgames.com/store/zh-CN/free-games" target="_blank" rel="noopener">GMGå¤ä¿ƒ</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ¸¸æˆ </category>
          
          <category> ç™½å«– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> steam </tag>
            
            <tag> epic </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win10ç³»ç»Ÿçš„æ¡Œé¢ç¾åŒ–</title>
      <link href="/2020/08/05/win10-xi-tong-de-zhuo-mian-mei-hua/"/>
      <url>/2020/08/05/win10-xi-tong-de-zhuo-mian-mei-hua/</url>
      
        <content type="html"><![CDATA[<h3 id="win10ç³»ç»Ÿçš„æ¡Œé¢ç¾åŒ–">win10ç³»ç»Ÿçš„æ¡Œé¢ç¾åŒ–</h3><p>é¦–å…ˆæ”¾ä¸ªäººæ¡Œé¢å’Œå¼€å§‹èœå•çš„é¢„è§ˆå›¾ã€‚</p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805114944.png" alt="1596599399928"></p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805115313.png" alt=""></p><p>æ¡Œé¢ç¾åŒ–çš„éƒ¨åˆ†ç½‘ç»œå®æ—¶æ•°æ®ï¼Œåº”ç”¨å›¾æ ‡ç¾åŒ–ï¼Œä»»åŠ¡æ é€æ˜å›¾æ ‡å±…ä¸­ï¼Œå¼€å§‹èœå•ä»¥åŠé¼ æ ‡ç¾åŒ–ã€‚</p><h4 id="ç¾åŒ–è½¯ä»¶ä»¥åŠç›¸å…³æ–‡ä»¶">ç¾åŒ–è½¯ä»¶ä»¥åŠç›¸å…³æ–‡ä»¶</h4><p><a href="http://dingdm.online/TrafficMonitor.rar" target="_blank" rel="noopener">å®æ—¶æ•°æ®è½¯ä»¶</a></p><p><a href="http://dingdm.online/TrafficMonitor.rar" target="_blank" rel="noopener">ä»»åŠ¡æ è½¯ä»¶</a></p><p><a href="http://dingdm.online/RocketDock-v1.3.5.exe" target="_blank" rel="noopener">åº”ç”¨è®¾ç½®è½¯ä»¶</a></p><p><a href="http://dingdm.online/%E7%BE%8E%E5%8C%96.rar" target="_blank" rel="noopener">å›¾æ ‡åŠå¼€å§‹ç¨‹åºæŒ‰é’®ç¾åŒ–åŒ…</a></p><p><a href="http://dingdm.online/Ori%E9%BC%A0%E6%A0%87%E5%85%89%E6%A0%872.0.rar" target="_blank" rel="noopener">å¥¥æ—¥é¼ æ ‡èµ„æº</a></p><h4 id="å®æ—¶æ•°æ®ç¾åŒ–">å®æ—¶æ•°æ®ç¾åŒ–</h4><p>ä¸‹è½½æä¾›çš„å®æ—¶æ•°æ®è½¯ä»¶åè¿›è¡Œè§£å‹ã€‚æ‰“å¼€TrafficMonitor.exeè½¯ä»¶ã€‚è¿™æ—¶å°±ä¼šå‡ºç°ç›¸å…³å†…å®¹ã€‚</p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805120508.png" alt=""></p><h5 id="é€‰é¡¹è®¾ç½®">é€‰é¡¹è®¾ç½®</h5><p>åœ¨å®æ—¶æ•°æ®ä¸Š<strong>å³é”®</strong></p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805120752.png" alt=""></p><p>å°†æ˜¾ç¤ºé€šçŸ¥åŒºåŸŸå›¾æ ‡å…³æ‰ï¼Œæ‰“å¼€æ˜¾ç¤ºCPUå’Œå†…å­˜åˆ©ç”¨ç‡çš„é€‰é¡¹ã€‚</p><h5 id="æ ·å¼æ›´æ”¹">æ ·å¼æ›´æ”¹</h5><p>åˆšå¼€å§‹çš„ä½ç½®å¹¶ä¸åœ¨ä»»åŠ¡æ ä¸Šï¼Œå› æ­¤éœ€è¦å¯¹é…ç½®è¿›è¡Œä¿®æ”¹ã€‚è¿™é‡Œåœ¨å®æ—¶æ•°æ®ä¸Š<strong>å³é”®æ‰“å¼€é€‰é¡¹</strong>ï¼ŒæŒ‰ç…§ä»¥ä¸‹é…ç½®è¿›è¡Œä¿®æ”¹å³å¯ã€‚</p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805145216.png" alt=""></p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805145222.png" alt=""></p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805145229.png" alt=""></p><h4 id="ä»»åŠ¡æ è®¾ç½®">ä»»åŠ¡æ è®¾ç½®</h4><p>å®‰è£…StartIsBack   2.9.exe</p><h5 id="å±æ€§è®¾ç½®">å±æ€§è®¾ç½®</h5><p>å®‰è£…å®Œæˆåå³é”®å¼€å§‹èœå•é€‰æ‹©<strong>å±æ€§</strong>é¡¹</p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805150108.png" alt=""></p><h5 id="å›¾æ ‡ç¾åŒ–">å›¾æ ‡ç¾åŒ–</h5><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805150201.png" alt=""></p><p>ä¸‹è½½ä¸Šé¢æä¾›çš„ç¾åŒ–å›¾æ ‡ï¼Œç‚¹å‡»<strong>åŠ å·æŒ‰é’®</strong>æ·»åŠ å³å¯ã€‚æˆ‘è¿™é‡Œå·²ç»æ·»åŠ è¿‡äº†ï¼Œæ‰€æœ‰å·²ç»æœ‰äº†æ–°çš„å¼€å§‹èœå•çš„ç¾åŒ–å›¾æ ‡ã€‚</p><h5 id="ä»»åŠ¡æ é€æ˜">ä»»åŠ¡æ é€æ˜</h5><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805150321.png" alt=""></p><p>ç‚¹å‡»<strong>è‡ªå®šä¹‰ä»»åŠ¡æ ç‰¹æ•ˆ</strong>ï¼Œé€‰æ‹©ä»»åŠ¡æ å›¾æ ‡å±…ä¸­å’ŒåŠ¨æ€é€æ˜åº¦å³å¯ã€‚</p><h4 id="åº”ç”¨å›¾æ ‡è®¾ç½®">åº”ç”¨å›¾æ ‡è®¾ç½®</h4><p>ä¸‹è½½ä¸Šé¢æä¾›çš„åº”ç”¨è½¯ä»¶RocketDock-v1.3.5è¿›è¡Œå®‰è£…ï¼Œå®‰è£…å®Œæˆåä¼šå‡ºç°ç±»ä¼¼macçš„æ•ˆæœï¼Œè‡ªå¸¦é»˜è®¤çš„å›¾æ ‡ã€‚</p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805150715.png" alt=""></p><p>å› ä¸ºæˆ‘è¿™é‡Œå°†æˆ‘çš„ç”µè„‘ä¸Šçš„åº”ç”¨æ·»åŠ è¿›æ¥äº†ï¼Œæ‰€ä»¥æ˜¯å®Œæˆåçš„æ•ˆæœã€‚å®‰è£…å®Œæˆåå°†è‡ªå¸¦çš„å›¾æ ‡ç§»é™¤ï¼Œç„¶åå°†è‡ªå·±çš„è½¯ä»¶å›¾æ ‡æ‹‰å…¥åˆ°å¯¹åº”çš„ä½ç½®å³å¯ã€‚</p><h5 id="é…ç½®è®¾ç½®">é…ç½®è®¾ç½®</h5><p>åœ¨rockeddockä¸Šå³é”®ç¨‹åºè®¾ç½®è¿›è¡Œé…ç½®ä¿®æ”¹</p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805150823.png" alt=""></p><p>ç‚¹å‡»ç¨‹åºè®¾ç½®åæŒ‰ç…§æˆ‘æä¾›çš„é…ç½®è¿›è¡Œä¿®æ”¹å³å¯ã€‚</p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805150837.png" alt=""></p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805150842.png" alt=""></p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805150848.png" alt=""></p><p>ä¿®æ”¹å®Œæˆä¹‹åå°±æ˜¯æˆ‘ç°åœ¨çš„æ•ˆæœã€‚</p><h5 id="å›¾æ ‡è®¾ç½®">å›¾æ ‡è®¾ç½®</h5><p>å¦‚æœä½ æƒ³è¦æ›´æ”¹å›¾æ ‡çš„æ ·å¼çš„è¯ã€‚åœ¨å›¾æ ‡ä¸Šå³é”®ç‚¹å‡»å›¾æ ‡è®¾ç½®ã€‚</p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805151023.png" alt=""></p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805151030.png" alt=""></p><p>ä¸‹è½½ä¸Šé¢æä¾›çš„ç¾åŒ–å›¾æ ‡è¿›è¡Œæ›¿æ¢å³å¯ã€‚</p><h5 id="å›¾æ ‡åˆ†éš”">å›¾æ ‡åˆ†éš”</h5><p>å¦‚æœå›¾æ ‡ä¹‹é—´æƒ³è¦ç•™å‡ºç©ºéš™çš„è¯ï¼Œé€‰æ‹©**æ·»åŠ é¡¹ç›®ä¸­çš„åˆ†éš”ç¬¦****å³å¯ã€‚</p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805151143.png" alt=""></p><p>è‡³æ­¤åº”ç”¨å›¾æ ‡çš„ç¾åŒ–å®Œæˆã€‚</p><h4 id="é¼ æ ‡è®¾ç½®">é¼ æ ‡è®¾ç½®</h4><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805151400.png" alt=""></p><p>æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯å¥¥æ—¥çš„å›¾æ ‡ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨çš„è¯ä¸‹è½½ä¸Šé¢çš„èµ„æºå³å¯ã€‚</p><h5 id="ç½‘ç«™ä¸‹è½½">ç½‘ç«™ä¸‹è½½</h5><p>å¦‚æœä¸æƒ³ä½¿ç”¨çš„è¯ï¼Œé‰´äºå›½å¤–ç½‘ç«™éœ€è¦ç¿»å¢™ï¼Œæˆ‘è¿™é‡Œæä¾›é¼ æ ‡æ ·å¼ä¸‹è½½çš„å›½å†…ç½‘ç«™ï¼Œè‡ªå·±é€‰æ‹©ä¸‹è½½å³å¯ã€‚</p><p><a href="https://zhutix.com/tag/cursors/" target="_blank" rel="noopener">https://zhutix.com/tag/cursors/</a></p><h5 id="é¼ æ ‡æ›¿æ¢">é¼ æ ‡æ›¿æ¢</h5><p>æ‰“å¼€ç”µè„‘çš„è®¾ç½®ç•Œé¢ï¼Œé€‰æ‹©è®¾å¤‡</p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805152038.png" alt=""></p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805152053.png" alt=""></p><p>åˆ‡æ¢åˆ°é¼ æ ‡ï¼Œç‚¹å‡»å³é¢çš„å…¶ä»–é¼ æ ‡é€‰é¡¹</p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805152109.png" alt=""></p><p>é€‰æ‹©æŒ‡é’ˆæ¨¡å—ï¼Œæµè§ˆè‡ªå·±ä¸‹è½½çš„é¼ æ ‡èµ„æºè¿›è¡Œæ›¿æ¢å³å¯ã€‚</p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805152118.png" alt=""></p><h3 id="å¼€å§‹èœå•åˆ‡ç‰‡è®¾ç½®">å¼€å§‹èœå•åˆ‡ç‰‡è®¾ç½®</h3><p>åœ¨win10ç³»ç»Ÿè‡ªå¸¦çš„å•†åº—ä¸‹è½½tile genieè½¯ä»¶ï¼Œä¸‹è½½æˆåŠŸåé€‰æ‹©å›¾ç‰‡åˆ‡å‰²å³å¯ã€‚</p><p>å›¾ç‰‡åˆ‡ç‰‡å¹¶ä¸éš¾ï¼Œä¸»è¦æ˜¯éœ€è¦è€—è´¹æ—¶é—´æ‹¼ã€‚</p><h3 id="win10å£çº¸è®¾ç½®">win10å£çº¸è®¾ç½®</h3><h4 id="wallpaper-engine">wallpaper engine</h4><p>è¿™é‡Œæœ‰æ¡ä»¶çš„å°ä¼™ä¼´æ¨èå»steamè´­ä¹°ä¸€ä¸ªå£çº¸è½¯ä»¶wallpaper engineï¼Œ18å—é’±ä½ ä¹°ä¸äº†åƒäºï¼Œä½ ä¹°ä¸äº†ä¸Šå½“ã€‚æœ€é‡è¦çš„é™¤äº†å®ƒæ˜¯ä¸€æ¬¾å£çº¸è½¯ä»¶ä¹‹å¤–ï¼Œå®ƒè¿˜æ˜¯ä¸€å—éå¸¸ç‰›é€¼çš„å°„å‡»æ¸¸æˆã€‚</p><p>æˆ‘è¿™é‡Œæ¨èå‡ ä¸ªå£çº¸ã€‚æˆ–è€…ä½ ä¹Ÿå¯ä»¥å»å“”å“©å“”å“©è‡ªè¡Œæœç´¢ç›¸å…³çš„è§†é¢‘ã€‚</p><p>The Last of Us</p><p><img src="http://dingdm.online/eafa3cfba8c7a0f380fb792d3e310ffb.jpg" alt=""></p><p>Time lapse + 3D Digital Clock</p><p><img src="http://dingdm.online/d4aab6a9232e65e55778219d64bbd9b4.jpg" alt=""></p><p>Lamp</p><p><img src="http://dingdm.online/97bb304efc12b1e4525274e89bb980bf.jpg" alt=""></p><p>Alone</p><p><img src="http://dingdm.online/fee7c1563c02682d02d17ec00ab878e0.jpg" alt=""></p><p>PCB City</p><p><img src="http://dingdm.online/668df914429c2e529556b6e350b9e6b0.jpg" alt=""></p><h4 id="å…è´¹å£çº¸">å…è´¹å£çº¸</h4><p>å¦‚æœä¸æƒ³è´­ä¹°çš„è¯æˆ‘è¿™é‡Œä¹Ÿæ¨èå‡ ä¸ªé™æ€çš„å…è´¹çš„å£çº¸ã€‚</p><p><img src="http://dingdm.online/v2-02e8a470854063843938274a14cbe238_r.jpg" alt=""></p><p><img src="http://dingdm.online/v2-81b1f2f30d62487bb6f47ab08155cc69_r.jpg" alt=""></p><p><img src="http://dingdm.online/v2-8262525f9d0681e6b996bc758229f90c_r.jpg" alt=""></p><p><img src="http://dingdm.online/v2-c2c137fa7017fc27b454651dafb36b0f_r.jpg" alt=""></p><p><img src="http://dingdm.online/v2-dabcb2e02b94f7c8dfefae1ac7e4f591_r.jpg" alt=""></p><p><img src="http://dingdm.online/v2-db782cbaced5180b9037064ff9905afe_r.jpg" alt=""></p><p><img src="http://dingdm.online/v2-e35ed2b90501aea545ee73e2decebf6a_r.jpg" alt=""></p><p><img src="http://dingdm.online/v2-e3fd094f1f8555c4abcbf98ab9119d70_r.jpg" alt=""></p><p><img src="http://dingdm.online/v2-ff96a816315c9e7c28e48899c9f8df7e_r.jpg" alt=""></p><h4 id="å£çº¸ç½‘ç«™">å£çº¸ç½‘ç«™</h4><p><a href="https://hddesktopwallpapers.in/" target="_blank" rel="noopener">https://hddesktopwallpapers.in/</a></p><p><a href="http://simpledesktops.com/" target="_blank" rel="noopener">http://simpledesktops.com/</a></p><p><a href="http://www.obzhi.com/" target="_blank" rel="noopener">http://www.obzhi.com/</a></p><p><a href="https://ss.netnr.com/wallpaper" target="_blank" rel="noopener">https://ss.netnr.com/wallpaper</a></p><p><a href="http://spotlight.shijuewuyu.com/" target="_blank" rel="noopener">http://spotlight.shijuewuyu.com/</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ç¾åŒ– </category>
          
          <category> å£çº¸ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> win10 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç­”è¾©çŸ¥è¯†æ¶æ„åŠä¼ä¸šOAé¡¹ç›®å¼€å‘æ±‡æ€»</title>
      <link href="/2020/08/02/da-bian-zhi-shi-jia-gou-ji-qi-ye-oa-xiang-mu-kai-fa-hui-zong/"/>
      <url>/2020/08/02/da-bian-zhi-shi-jia-gou-ji-qi-ye-oa-xiang-mu-kai-fa-hui-zong/</url>
      
        <content type="html"><![CDATA[<h3 id="1-Vueæ¡†æ¶">1.Vueæ¡†æ¶</h3><p><strong>MVVMæ¶æ„ï¼Œmodelï¼Œviewï¼Œviewmodelï¼Œmodelå’Œviewä¹‹é—´æ— æ³•ç›´æ¥äº¤äº’ï¼Œé€šè¿‡viewmodelè¿›è¡Œäº¤äº’ï¼Œåˆ›å»ºæ–°çš„æ¨¡æ¿ï¼Œåœ¨æ¨¡æ¿ä¸­ä½¿ç”¨jså‡½æ•°åˆ›å»ºç›‘å¬å™¨ï¼Œä½¿ç”¨vm_patchæ¸²æŸ“é¡µé¢å®Œæˆæ•°æ®æ¨¡æ¿çš„ç»‘å®šï¼Œå½“æ•°æ®æ›´æ–°æ—¶è‡ªåŠ¨åŒæ­¥æ•°æ®ã€‚viewå’Œmodelè‡ªåŠ¨åŒæ­¥ï¼Œå¼€å‘äººå‘˜åªéœ€è¦å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œè€Œéæ“ä½œdomå¯¹è±¡ã€‚<br>å‰å°ä½¿ç”¨VUEè¿›è¡Œå¼€å‘ï¼ŒVue.jsæ˜¯ä¸€ä¸ªæ„å»ºæ•°æ®é©±åŠ¨çš„webç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚Vueçš„ç›®æ ‡æ˜¯é€šè¿‡å°½å¯èƒ½ç®€å•APIå®ç°å“åº”çš„æ•°æ®ç»‘å®šå’Œç»„åˆçš„è§†å›¾ç»„ä»¶ã€‚æ ¸å¿ƒæ˜¯ä¸€ä¸ªå“åº”çš„æ•°æ®ç»‘å®šç³»ç»Ÿã€‚å³vueæ˜¯å•é¡µé¢åº”ç”¨ï¼Œé¡µé¢å±€éƒ¨åˆ·æ–°ï¼Œä¸ç”¨æ¯æ¬¡è·³è½¬é¡µé¢éƒ½å»è¯·æ±‚æ‰€æœ‰æ•°æ®å’Œdomå¯¹è±¡ï¼Œè¿™æ ·å¤§å¤§åŠ å¿«äº†è®¿é—®é€Ÿåº¦å’Œæå‡ç”¨æˆ·ä½“éªŒã€‚è€Œä¸”ä»–çš„ç¬¬ä¸‰æ–¹uiåº“å¯ä»¥èŠ‚çœå¾ˆå¤šä¸å¿…è¦çš„å¼€å‘æ—¶é—´ã€‚<br>é€‰ç”¨Vueçš„åŸå› ä¸­å¾ˆé‡è¦çš„ä¸€ç‚¹å³ä¸ºå›¾ä¸­çš„MVVMæ¶æ„ï¼Œåœ¨MVVMä¸­è§†å›¾å’Œæ¨¡å‹æ˜¯æ— æ³•ç›´æ¥è¿›è¡Œäº¤äº’çš„ï¼Œè€Œä»–ä»¬ä¸­é—´å­˜åœ¨ç€ä¸€ä¸ªä¸­è½¬ç«™ï¼Œå°±æ˜¯ViewModelã€‚å½“ç”¨æˆ·å¯¹è§†å›¾è¿›è¡Œç›¸å…³æ“ä½œæ—¶ï¼Œå’Œè§†å›¾ç›¸è¿çš„ViewModelä¸­çš„ä¸€éƒ¨åˆ†å°±ä¼šé€šçŸ¥æ¨¡å‹å±‚å†…å®¹çš„å˜åŒ–ï¼ŒåŒç†ï¼Œå½“æ¨¡å‹å˜åŒ–æ—¶ï¼ŒViewModelä¹Ÿå¯ä»¥é€šçŸ¥è¯•å›¾å±‚è¿›è¡Œæ”¹å˜ï¼Œè¿™å°±æ˜¯Vueä¸­çš„åŒå‘æ•°æ®ç»‘å®šã€‚ç±»ä¼¼äºé€šçŸ¥è€…é€šè¿‡å…³é”®å­—æ¥é€šçŸ¥è®¢é˜…è€…çš„æ¨¡å¼ã€‚<br>1.åŒå‘æ•°æ®ç»‘å®šå®ç°æµè§ˆå™¨é¡µé¢çš„è‡ªåŠ¨åˆ·æ–°ã€‚<br>2.è½»é‡çº§jsåº“ï¼ŒAPIç®€æ´æ˜“ç”¨ã€‚<br>3.element-uiåº“</strong></p><h3 id="2-springbootæ¡†æ¶">2.springbootæ¡†æ¶</h3><p><strong>åå°ä½¿ç”¨spring bootæ¡†æ¶ï¼Œspring boot å¹¶ä¸æ˜¯ç”¨æ¥æ›¿ä»£ Spring çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯å’Œ Spring æ¡†æ¶ç´§å¯†ç»“åˆç”¨äºæå‡ Spring å¼€å‘è€…ä½“éªŒçš„å·¥å…·ã€‚åŒæ—¶å®ƒé›†æˆäº†å¤§é‡å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“é…ç½®ï¼ŒSpring Bootåº”ç”¨ä¸­è¿™äº›ç¬¬ä¸‰æ–¹åº“å‡ ä¹å¯ä»¥æ˜¯é›¶é…ç½®çš„å¼€ç®±å³ç”¨ï¼ˆout-of-the-boxï¼‰ï¼Œå¤§éƒ¨åˆ†çš„ Spring Boot åº”ç”¨éƒ½åªéœ€è¦éå¸¸å°‘é‡çš„é…ç½®ä»£ç ï¼ˆåŸºäº Java çš„é…ç½®ï¼‰ï¼Œå¼€å‘è€…èƒ½å¤Ÿæ›´åŠ ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ã€‚<br>AOPä¸ºspringæ¡†æ¶ä¸­åˆ‡é¢ç¼–ç¨‹çš„å®ç°ï¼ŒAOPå¯ä»¥é™ä½ä»£ç ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæ–¹ä¾¿dangå½“å‰ç³»ç»Ÿçš„æ‰©å±•å’Œä»£ç å¤ç”¨ï¼Œåœ¨OAç³»ç»Ÿä¸­ï¼Œæˆ‘ä½¿ç”¨AOPè¿›è¡Œæ—¥å¿—çš„ç›¸å…³ç®¡ç†å’Œæ“ä½œã€‚AOPçš„è‡ªå®šä¹‰æ ‡ç­¾ä»AopNamespaceHandlerè¿™ä¸ªç±»å¼€å§‹è§£æï¼Œè¿›å…¥åˆ°AspectJAutoProxyBeanDefinitionParserè§£æå™¨åï¼Œè°ƒç”¨BeanDefinitionParserçš„parseræ–¹æ³•å°†è¯·æ±‚è½¬äº¤ç»™registerAspectJAnnotationAutoProxyCreatorIfNecessaryå»å®ç°ã€‚åœ¨æ³¨å†Œæˆ–å‡çº§å³registerAspectJAnnotationAutoProxyCreatorIfNecessaryæ–¹æ³•å¤„ç†å®Œæˆä»¥åæ ¹æ®proxy-target-classçš„å±æ€§æ¥ç¡®å®šä½¿ç”¨ä»€ä¹ˆæ–¹å¼çš„ä»£ç†ï¼Œæœ€åè°ƒç”¨registerComponentIfNecessaryé€šçŸ¥ç›‘å¬å™¨ã€‚æˆ‘åœ¨ä½¿ç”¨ä¸­æ­£æ˜¯è¿ç”¨äº†æ­¤æµç¨‹ï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„AOPæ³¨è§£ï¼Œå°†æ³¨è§£æ³¨é‡Šåœ¨éœ€è¦è®°å½•æ“ä½œçš„æ¥å£æ–¹æ³•ä¸Šï¼Œé€šè¿‡é€šçŸ¥ç±»å‹æ¥è·å–æ¥å£æ•°æ®ï¼Œè¿›è€Œå’Œæ•°æ®åº“äº¤äº’å­˜å‚¨å¯¹åº”çš„æ—¥å¿—ä¿¡æ¯ã€‚<br>springbootæ˜¯å¯¹springæ¡†æ¶çš„å°è£…ã€‚<br>1.ç®€åŒ–é…ç½®ï¼Œæ— éœ€é…ç½®xml<br>2.å†…ç½®tomcatï¼Œå¯æ˜¯ä½¿ç”¨mavenæ‰“åŒ…æˆjaråŒ…ä¹‹åç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œã€‚<br>3.å®Œç¾å…¼å®¹å½“å‰æˆç†Ÿçš„å¼€å‘ç»„ä»¶ã€‚</strong></p><h3 id="3-å‰åç«¯åˆ†ç¦»">3.å‰åç«¯åˆ†ç¦»</h3><p><strong>å‰å°é€šè¿‡ajaxå‘åå°restfulé£æ ¼çš„æ¥å£å‘èµ·è¯·æ±‚ï¼Œè·å–jsonæ ¼å¼çš„æ•°æ®è¿›è¡Œè§£æå±•ç¤ºã€‚<br>1.å‰åç«¯ä¸šåŠ¡é€»è¾‘è§£è€¦ã€‚<br>2.åˆ†æ‹…åç«¯æœåŠ¡å™¨æ‰¿å—å‹åŠ›ã€‚<br>3.åˆ†å¼€éƒ¨ç½²ï¼Œè§£è€¦æ“ä½œï¼Œæ›´æ–°æ–¹ä¾¿ã€‚</strong></p><h3 id="4-JWT">4.JWT</h3><p><strong>ç”±äºåå°ç®¡ç†ç³»ç»Ÿé‡‡ç”¨äº†å‰åç«¯åˆ†ç¦»å¼€å‘çš„æ–¹å¼ï¼Œé‚£ä¹ˆå°±å¿…ç„¶å­˜åœ¨å‰ç«¯ä¸åç«¯çš„æ¥å£äº¤äº’ï¼Œäºæ˜¯å°±æ¶‰åŠåˆ°äº†å®‰å…¨é—®é¢˜ï¼Œåç«¯è¯¥å¦‚ä½•ç¡®è®¤æ”¶åˆ°çš„è¯·æ±‚æ˜¯åˆæ³•çš„å®¢æˆ·ç«¯å‘å‡ºçš„ã€‚æ™®é€šçš„sessionä¸­å­˜å‚¨ç”¨æˆ·ä¿¡æ¯çš„æ–¹æ³•åœ¨å‰åç«¯äº¤äº’ä¸­ä¸å¯é¿å…çš„ä¼šå­˜åœ¨èµ„æºå¼€é”€è¾ƒå¤§çš„é—®é¢˜ï¼Œå› æ­¤ï¼Œåœ¨æ™ºæ…§è°·OAç³»ç»Ÿçš„å¼€å‘ä¸­ï¼Œæˆ‘ä½¿ç”¨äº†JWTæ¥è¿›è¡Œè®¤è¯ã€‚JWTè®¤è¯åœ¨ç”¨æˆ·ç™»å½•æ—¶ç”Ÿæˆtokenï¼Œå¹¶ä¸”åœ¨ä¸‹æ¬¡æ¥å£è¯·æ±‚æ—¶æºå¸¦ç›¸åŒçš„tokenï¼Œä¸ä»…è§£å†³äº†èµ„æºå¼€é”€çš„é—®é¢˜ï¼Œè€Œä¸”JWTçš„ä¿¡æ¯ä½¿ç”¨HS256å’ŒRS256ç®—æ³•ç­¾åï¼Œä¿è¯äº†å…¶åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„å®‰å…¨æ€§ã€‚<br>JWTä¸€å…±ç”±ä¸‰æ®µå†…å®¹ç»„æˆï¼ŒJWTåœ¨è®¤è¯è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨å¯¹ç§°ç®—æ³•æ—¶ï¼ŒæœåŠ¡å™¨ç«¯å°±è·å–åˆ°æ¥æ”¶çš„JWTçš„å‰ä¸¤æ®µä¿¡æ¯ä½œä¸ºæ•°æ®ï¼Œç”¨ç›¸åŒçš„ç®—æ³•å’Œå¯†é’¥è¿›è¡Œç­¾åï¼Œå¾—åˆ°ç­¾ååå°†æœåŠ¡å™¨ç«¯çš„ç­¾åå’ŒJWTä¸­çš„ç¬¬ä¸‰æ®µå†…å®¹è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒè®¤è¯å³ä¸ºæˆåŠŸã€‚ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•æ—¶ï¼Œç”±ä¸€å¯¹å¯†é’¥æ„æˆï¼Œç§é’¥ç”±æœåŠ¡å™¨ç«¯å­˜å‚¨ï¼Œå…¬é’¥å®¢æˆ·ç«¯å­˜å‚¨ï¼Œå®¢æˆ·ç«¯è¿›è¡ŒéªŒè¯çš„æ—¶å€™ï¼Œç”¨å…¬é’¥è§£å¯†æ”¶åˆ°çš„ç­¾å,å¾—åˆ°JWTä¸‰æ®µå†…å®¹ä¸­çš„å‰ä¸¤æ®µï¼Œå†ç”¨è¿™ä¸¤æ®µå†…å®¹å’ŒJWTè¿›è¡Œæ¯”è¾ƒï¼Œç›¸åŒåˆ™éªŒè¯æˆåŠŸã€‚<br>ç”±äºJWTä¸èƒ½ä¿è¯æ•°æ®åœ¨ä¼ è¾“ä¸­ä¸è¢«çªƒå–ï¼Œå› æ­¤é™¤äº†ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•ä¹‹å¤–ï¼Œè¿˜éœ€è¦åœ¨JWTçš„å†…å®¹ä¸­è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´æ¥ç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§ã€‚<br>sessionæ–¹å¼å°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°sessionä¸­ï¼Œsessionå­˜å‚¨åˆ°å†…å­˜ä¸­ï¼Œå½“ç”¨æˆ·æ•°æ®å¢å¤šæ—¶ï¼Œå¢å¤§æœåŠ¡å™¨çš„å¼€é”€ã€‚<br>tokenæ–¹å¼å°†ç”¨æˆ·æ•°æ®å‘é€åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä½¿ç”¨SHA256æˆ–å…¶ä»–ç®—æ³•è®¡ç®—tokenï¼Œå®¢æˆ·ç«¯æ¥æ”¶å­˜å‚¨ï¼Œåœ¨è¯·æ±‚æ—¶å°†tokenå­˜å‚¨äºè¯·æ±‚å¤´ä¸­ã€‚</strong></p><h3 id="5-Activiti">5.Activiti</h3><p><img src="http://dingdm.online/9f2d207d579d4c7ea7114ab042429f0d.png" alt=""><br><strong>Activitiç”±å›¾ä¸­æ¨¡å—æ„æˆï¼ŒActiviti Engineä¸ºActivitiçš„æ ¸å¿ƒï¼Œè´Ÿè´£æ•°æ®çš„å¤„ç†ï¼ŒActiviti Modelerä¸ºæ¨¡å‹è®¾è®¡å™¨ï¼ŒActivities Restæ”¯æŒRestfulé£æ ¼çš„æœåŠ¡ï¼Œå…è®¸ä»¥JSONçš„æ ¼å¼è¿›è¡Œäº¤äº’ï¼Œæ”¯æŒè·¨è¯­è¨€å’Œè·¨å¹³å°ã€‚<br>Activitiç»„ä»¶ä½¿ç”¨Mybatiså’Œæ•°æ®åº“è¿›è¡Œäº¤äº’ï¼Œå®Œå…¨å¥‘åˆå½“å‰çš„æ™ºæ…§è°·OAç³»ç»Ÿï¼Œä¸”Activitiå…·æœ‰ç®€å•æ˜“æ‡‚çš„æ¥å£å’Œå…¨é¢çš„æµç¨‹è®¾è®¡å™¨ï¼Œé€‚åˆä»»ä½•äººçš„ä½¿ç”¨ä¸å¼€å‘ã€‚è€ŒActivitiåŸç”Ÿæ”¯æŒspringè¿™ä¸€ç‰¹æ€§å¤§å¤§å‡å°‘äº†åœ¨å¼€å‘è¿‡ç¨‹ä¸­çš„éš¾åº¦å’Œå·¥ä½œé‡ã€‚<br>å¼•å…¥å®˜æ–¹ä¾èµ–ï¼Œä½¿ç”¨Activitiçš„å¯è§†åŒ–æµç¨‹ç¼–è¾‘å™¨æ•´åˆã€‚<br>ç¼–å†™å¯¹åº”çš„æµç¨‹æ–¹æ³•å’Œç›‘å¬å™¨ã€‚</strong></p><h3 id="å‰ç«¯ä»£ç ">å‰ç«¯ä»£ç </h3><pre class=" language-language-html"><code class="language-language-html">**é…ç½®**<!-- å¼€å‘ç¯å¢ƒ -->  <% if (process.env.VUE_APP_NODE_ENV === 'dev') { %>    <script>window.SITE_CONFIG['apiURL'] = 'http://127.0.0.1:8081/wisdom';</script>  <% } %>  <!-- é›†æˆæµ‹è¯•ç¯å¢ƒ -->  <% if (process.env.VUE_APP_NODE_ENV === 'prod:sit') { %>    <script>window.SITE_CONFIG['apiURL'] = 'http://47.100.126.191:8081/wisdom';</script>  <% } %>  <!-- éªŒæ”¶æµ‹è¯•ç¯å¢ƒ -->  <% if (process.env.VUE_APP_NODE_ENV === 'prod:uat') { %>    <script>window.SITE_CONFIG['apiURL'] = 'http://47.100.126.191:8081/wisdom';</script>  <% } %>  <!-- ç”Ÿäº§ç¯å¢ƒ -->  <% if (process.env.VUE_APP_NODE_ENV === 'prod') { %>    <script>window.SITE_CONFIG['apiURL'] = 'http://47.100.126.191:8081/wisdom';</script>  <% } %></code></pre><p><strong>æ•°æ®æ¥å£</strong></p><pre class=" language-language-javascript"><code class="language-language-javascript">export default {  data () {    /* eslint-disable */    return {      // è®¾ç½®å±æ€§      mixinViewModuleOptions: {        activatedIsNeed: true,    // æ­¤é¡µé¢æ˜¯å¦åœ¨æ¿€æ´»ï¼ˆè¿›å…¥ï¼‰æ—¶ï¼Œè°ƒç”¨æŸ¥è¯¢æ•°æ®åˆ—è¡¨æ¥å£ï¼Ÿ        getDataListURL: '',       // æ•°æ®åˆ—è¡¨æ¥å£ï¼ŒAPIåœ°å€        getDataListIsPage: false, // æ•°æ®åˆ—è¡¨æ¥å£ï¼Œæ˜¯å¦éœ€è¦åˆ†é¡µï¼Ÿ        deleteURL: '',            // åˆ é™¤æ¥å£ï¼ŒAPIåœ°å€        deleteIsBatch: false,     // åˆ é™¤æ¥å£ï¼Œæ˜¯å¦éœ€è¦æ‰¹é‡ï¼Ÿ        deleteIsBatchKey: 'id',   // åˆ é™¤æ¥å£ï¼Œæ‰¹é‡çŠ¶æ€ä¸‹ç”±é‚£ä¸ªkeyè¿›è¡Œæ ‡è®°æ“ä½œï¼Ÿæ¯”å¦‚ï¼špidï¼Œuid...        exportURL: ''             // å¯¼å‡ºæ¥å£ï¼ŒAPIåœ°å€      },      // é»˜è®¤å±æ€§      dataForm: {},               // æŸ¥è¯¢æ¡ä»¶      dataList: [],               // æ•°æ®åˆ—è¡¨      order: 'desc',                  // æ’åºï¼Œascï¼desc      orderField: 'create_date',             // æ’åºï¼Œå­—æ®µ      page: 1,                    // å½“å‰é¡µç       limit: 10,                  // æ¯é¡µæ•°      total: 0,                   // æ€»æ¡æ•°      dataListLoading: false,     // æ•°æ®åˆ—è¡¨ï¼ŒloadingçŠ¶æ€      dataListSelections: [],     // æ•°æ®åˆ—è¡¨ï¼Œå¤šé€‰é¡¹      addOrUpdateVisible: false   // æ–°å¢ï¼æ›´æ–°ï¼Œå¼¹çª—visibleçŠ¶æ€    }    /* eslint-enable */  },  activated () {    if (this.mixinViewModuleOptions.activatedIsNeed) {      this.getDataList()    }  },  methods: {    // è·å–æ•°æ®åˆ—è¡¨    getDataList () {      this.dataListLoading = true      this.$http.get(        this.mixinViewModuleOptions.getDataListURL,        {          params: {            order: this.order,            orderField: this.orderField,            page: this.mixinViewModuleOptions.getDataListIsPage ? this.page : null,            limit: this.mixinViewModuleOptions.getDataListIsPage ? this.limit : null,            ...this.dataForm          }        }      ).then(({ data: res }) => {        this.dataListLoading = false        if (res.code !== 0) {          this.dataList = []          this.total = 0          return this.$message.error(res.msg)        }        this.dataList = this.mixinViewModuleOptions.getDataListIsPage ? res.data.list : res.data        this.total = this.mixinViewModuleOptions.getDataListIsPage ? res.data.total : 0      }).catch(() => {        this.dataListLoading = false      })    },    // å¤šé€‰    dataListSelectionChangeHandle (val) {      this.dataListSelections = val    },    // æ’åº    dataListSortChangeHandle (data) {      if (!data.order || !data.prop) {        this.order = ''        this.orderField = ''        return false      }      this.order = data.order.replace(/ending$/, '')      this.orderField = data.prop.replace(/([A-Z])/g, '_$1').toLowerCase()      this.getDataList()    },    // åˆ†é¡µ, æ¯é¡µæ¡æ•°    pageSizeChangeHandle (val) {      this.page = 1      this.limit = val      this.getDataList()    },    // åˆ†é¡µ, å½“å‰é¡µ    pageCurrentChangeHandle (val) {      this.page = val      this.getDataList()    },    // æ–°å¢ / ä¿®æ”¹    addOrUpdateHandle (id) {      this.addOrUpdateVisible = true      this.$nextTick(() => {        this.$refs.addOrUpdate.dataForm.id = id        this.$refs.addOrUpdate.init()      })    },    // åˆ é™¤    deleteHandle (id) {      if (this.mixinViewModuleOptions.deleteIsBatch && !id && this.dataListSelections.length <= 0) {        return this.$message({          message: this.$t('prompt.deleteBatch'),          type: 'warning',          duration: 500        })      }      this.$confirm(this.$t('prompt.info', { 'handle': this.$t('delete') }), this.$t('prompt.title'), {        confirmButtonText: this.$t('confirm'),        cancelButtonText: this.$t('cancel'),        type: 'warning'      }).then(() => {        this.$http.delete(          `${this.mixinViewModuleOptions.deleteURL}${this.mixinViewModuleOptions.deleteIsBatch ? '' : '/' + id}`,          this.mixinViewModuleOptions.deleteIsBatch ? {            'data': id ? [id] : this.dataListSelections.map(item => item[this.mixinViewModuleOptions.deleteIsBatchKey])          } : {}        ).then(({ data: res }) => {          if (res.code !== 0) {            return this.$message.error(res.msg)          }          this.$message({            message: this.$t('prompt.success'),            type: 'success',            duration: 500,            onClose: () => {              this.getDataList()            }          })        }).catch(() => {})      }).catch(() => {})    },    // å¯¼å‡º    exportHandle () {      var params = qs.stringify({        'token': Cookies.get('token'),        ...this.dataForm      })      window.location.href = `${window.SITE_CONFIG['apiURL']}${this.mixinViewModuleOptions.exportURL}?${params}`    }  }</code></pre><p><strong>ç¼“å­˜</strong></p><pre class=" language-language-javascript"><code class="language-language-javascript">export default new Vuex.Store({  namespaced: true,  state: {    // å¯¼èˆªæ¡, å¸ƒå±€é£æ ¼, defalut(ç™½è‰²) / colorful(é²œè‰³)    navbarLayoutType: 'colorful',    // ä¾§è¾¹æ , å¸ƒå±€çš®è‚¤, default(ç™½è‰²) / dark(é»‘è‰²)    sidebarLayoutSkin: 'dark',    // ä¾§è¾¹æ , æŠ˜å çŠ¶æ€    sidebarFold: false,    // ä¾§è¾¹æ , èœå•    sidebarMenuList: [],    sidebarMenuActiveName: '',    // å†…å®¹, æ˜¯å¦éœ€è¦åˆ·æ–°    contentIsNeedRefresh: false,    ip: 'http://47.100.126.191:8081',    // å†…å®¹, æ ‡ç­¾é¡µ(é»˜è®¤æ·»åŠ é¦–é¡µ)    contentTabs: [      {        ...window.SITE_CONFIG['contentTabDefault'],        'name': 'home',        'title': 'home'      }    ],    contentTabsActiveName: 'home'  },  modules: {    user  },  mutations: {    // é‡ç½®vuexæœ¬åœ°å‚¨å­˜çŠ¶æ€    resetStore (state) {      Object.keys(state).forEach((key) => {        state[key] = cloneDeep(window.SITE_CONFIG['storeState'][key])      })    }  }})</code></pre><p><strong>å›½é™…åŒ–</strong></p><pre class=" language-language-javascript"><code class="language-language-javascript"><script>import Cookies from 'js-cookie'import { messages } from '@/i18n'export default {  watch: {    '$i18n.locale': 'i18nHandle'  },  created () {    this.i18nHandle(this.$i18n.locale)  },  methods: {    i18nHandle (val, oldVal) {      Cookies.set('language', val)      document.querySelector('html').setAttribute('lang', val)      document.title = messages[val].brand.lg      // éç™»å½•é¡µé¢ï¼Œåˆ‡æ¢è¯­è¨€åˆ·æ–°é¡µé¢      if (this.$route.name !== 'login' && oldVal) {        window.location.reload()      }    }  }}</script></code></pre><h3 id="åå°ç›¸å…³ä»£ç ">åå°ç›¸å…³ä»£ç </h3><p><strong>è¯·æ±‚å¤´tokenéªŒè¯</strong></p><pre class=" language-language-java"><code class="language-language-java">public class Oauth2Filter extends AuthenticatingFilter {    @Override    protected AuthenticationToken createToken(ServletRequest request, ServletResponse response) throws Exception {        //è·å–è¯·æ±‚token        String token = getRequestToken((HttpServletRequest) request);        if(StringUtils.isBlank(token)){            return null;        }        return new Oauth2Token(token);    }    @Override    protected boolean isAccessAllowed(ServletRequest request, ServletResponse response, Object mappedValue) {        if(((HttpServletRequest) request).getMethod().equals(RequestMethod.OPTIONS.name())){            return true;        }        return false;    }    @Override    protected boolean onAccessDenied(ServletRequest request, ServletResponse response) throws Exception {        //è·å–è¯·æ±‚tokenï¼Œå¦‚æœtokenä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›401        String token = getRequestToken((HttpServletRequest) request);        if(StringUtils.isBlank(token)){            HttpServletResponse httpResponse = (HttpServletResponse) response;            httpResponse.setContentType("application/json;charset=utf-8");            httpResponse.setHeader("Access-Control-Allow-Credentials", "true");            httpResponse.setHeader("Access-Control-Allow-Origin", HttpContextUtils.getOrigin());            String json = new Gson().toJson(new Result().error(ErrorCode.UNAUTHORIZED));            httpResponse.getWriter().print(json);            return false;        }        return executeLogin(request, response);    }    @Override    protected boolean onLoginFailure(AuthenticationToken token, AuthenticationException e, ServletRequest request, ServletResponse response) {        HttpServletResponse httpResponse = (HttpServletResponse) response;        httpResponse.setContentType("application/json;charset=utf-8");        httpResponse.setHeader("Access-Control-Allow-Credentials", "true");        httpResponse.setHeader("Access-Control-Allow-Origin", HttpContextUtils.getOrigin());        try {            //å¤„ç†ç™»å½•å¤±è´¥çš„å¼‚å¸¸            Throwable throwable = e.getCause() == null ? e : e.getCause();            Result r = new Result().error(HttpStatus.SC_UNAUTHORIZED, throwable.getMessage());            String json = new Gson().toJson(r);            httpResponse.getWriter().print(json);        } catch (IOException e1) {        }        return false;    }    /**     * è·å–è¯·æ±‚çš„token     */    private String getRequestToken(HttpServletRequest httpRequest){        //ä»headerä¸­è·å–token        String token = httpRequest.getHeader(Constant.TOKEN_HEADER);        //å¦‚æœheaderä¸­ä¸å­˜åœ¨tokenï¼Œåˆ™ä»å‚æ•°ä¸­è·å–token        if(StringUtils.isBlank(token)){            token = httpRequest.getParameter(Constant.TOKEN_HEADER);        }        return token;    }}</code></pre><p><strong>éªŒè¯æˆæƒ</strong></p><pre class=" language-language-java"><code class="language-language-java">@Componentpublic class Oauth2Realm extends AuthorizingRealm {    @Autowired    private ShiroService shiroService;    @Override    public boolean supports(AuthenticationToken token) {        return token instanceof Oauth2Token;    }    /**     * æˆæƒ(éªŒè¯æƒé™æ—¶è°ƒç”¨)     */    @Override    protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principals) {        UserDetail user = (UserDetail)principals.getPrimaryPrincipal();        //ç”¨æˆ·æƒé™åˆ—è¡¨        Set<String> permsSet = shiroService.getUserPermissions(user);        SimpleAuthorizationInfo info = new SimpleAuthorizationInfo();        info.setStringPermissions(permsSet);        return info;    }    /**     * è®¤è¯(ç™»å½•æ—¶è°ƒç”¨)     */    @Override    protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) throws AuthenticationException {        String accessToken = (String) token.getPrincipal();        //æ ¹æ®accessTokenï¼ŒæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯        SysUserTokenEntity tokenEntity = shiroService.getByToken(accessToken);        //tokenå¤±æ•ˆ        if(tokenEntity == null || tokenEntity.getExpireDate().getTime() < System.currentTimeMillis()){            throw new IncorrectCredentialsException(MessageUtils.getMessage(ErrorCode.TOKEN_INVALID));        }        //æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯        SysUserEntity userEntity = shiroService.getUser(tokenEntity.getUserId());        //è½¬æ¢æˆUserDetailå¯¹è±¡        UserDetail userDetail = ConvertUtils.sourceToTarget(userEntity, UserDetail.class);        //è·å–ç”¨æˆ·å¯¹åº”çš„éƒ¨é—¨æ•°æ®æƒé™        List<Long> deptIdList = shiroService.getDataScopeList(userDetail.getId());        userDetail.setDeptIdList(deptIdList);        //è´¦å·é”å®š        if(userDetail.getStatus() == 0){            throw new LockedAccountException(MessageUtils.getMessage(ErrorCode.ACCOUNT_LOCK));        }        SimpleAuthenticationInfo info = new SimpleAuthenticationInfo(userDetail, accessToken, getName());        return info;    }}</code></pre><p><strong>tokenç”Ÿæˆ</strong></p><pre class=" language-language-java"><code class="language-language-java">public class TokenGenerator {    public static String generateValue() {        return generateValue(UUID.randomUUID().toString());    }    private static final char[] HEX_CODE = "0123456789abcdef".toCharArray();    public static String toHexString(byte[] data) {        if(data == null) {            return null;        }        StringBuilder r = new StringBuilder(data.length*2);        for ( byte b : data) {            r.append(HEX_CODE[(b >> 4) & 0xF]);            r.append(HEX_CODE[(b & 0xF)]);        }        return r.toString();    }    public static String generateValue(String param) {        try {            MessageDigest algorithm = MessageDigest.getInstance("MD5");            algorithm.reset();            algorithm.update(param.getBytes());            byte[] messageDigest = algorithm.digest();            return toHexString(messageDigest);        } catch (Exception e) {            throw new RenException("token invalid", e);        }    }}</code></pre><p><strong>ç›‘å¬å™¨</strong></p><pre class=" language-language-java"><code class="language-language-java">public class LeaderListenImpl implements TaskListener{    @Override    public void notify(DelegateTask delegateTask) {        ServletRequestAttributes requestAttributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();        HttpServletRequest request = requestAttributes.getRequest();        WebApplicationContext webApplicationContext = WebApplicationContextUtils.getWebApplicationContext(request.getServletContext());        SysUserService userService = webApplicationContext.getBean(SysUserService.class);        List<String> strings = new ArrayList<String>();        List<SysUserDTO> list = userService.getUserByRole(RoleEnum.LEADER.value());        for (SysUserDTO user : list) {            strings.add(user.getUsername());        }        delegateTask.addCandidateUsers(strings);        ApprovalTbService approvalTbService = webApplicationContext.getBean(ApprovalTbService.class);        ApprovalTbDTO approvalTbDTO = (ApprovalTbDTO) delegateTask.getVariable(ActivitiEnum.APPROVAL.value());        approvalTbService.updateType(RoleEnum.LEADERNAME.value(),approvalTbDTO.getId());        if(list.size() > 0){            Long dealId = (Long) delegateTask.getVariable(ActivitiEnum.DEALID.value());            UtilService utilService = webApplicationContext.getBean(UtilService.class);            utilService.updateDeal(dealId,list);        }    }}</code></pre><p><strong>å®šæ—¶ä»»åŠ¡</strong></p><pre class=" language-language-java"><code class="language-language-java">@Component("downTask")public class DownTask implements ITask{private Logger logger = LoggerFactory.getLogger(getClass());@Autowiredprivate ActivityService activityService;@Overridepublic void run(String params){List<ActivityDTO> allActivity = activityService.getAllActivity(ActivityEnum.DOWN.value());if(allActivity.size() > 0){for(ActivityDTO activityDTO : allActivity){activityService.changeState(activityDTO.getId());logger.debug(activityDTO.getId() + "èµ„æºå·²é‡Šæ”¾ï¼");}}}}</code></pre><h3 id="ä¼ä¸šé¡¹ç›®æ·®å®‰æ™ºæ…§è°·OAç›¸å…³æ–‡ä»¶">ä¼ä¸šé¡¹ç›®æ·®å®‰æ™ºæ…§è°·OAç›¸å…³æ–‡ä»¶</h3><h4 id="æ–‡æ¡£æ–‡ä»¶">æ–‡æ¡£æ–‡ä»¶</h4><p><a href="http://dingdm.online/%E6%99%BA%E6%85%A7%E8%B0%B7OA-%E5%8E%9F%E5%A7%8B%E9%9C%80%E6%B1%8220200110.doc" target="_blank" rel="noopener">æ™ºæ…§è°·OA-åŸå§‹éœ€æ±‚20200110.doc</a></p><p><a href="http://dingdm.online/%E6%99%BA%E6%85%A7%E8%B0%B7OA-%E5%88%9D%E6%AD%A5%E9%9C%80%E6%B1%8220200112.docx" target="_blank" rel="noopener">æ™ºæ…§è°·OA-åˆæ­¥éœ€æ±‚20200112.docx</a></p><p><a href="http://dingdm.online/%E7%B3%BB%E7%BB%9F%E5%AE%8C%E5%96%84%E9%9C%80%E6%B1%82.docx" target="_blank" rel="noopener">ç³»ç»Ÿå®Œå–„éœ€æ±‚.doc</a></p><p><a href="http://dingdm.online/%E7%B3%BB%E7%BB%9F%E5%AE%8C%E5%96%84%E9%9C%80%E6%B1%822.docx" target="_blank" rel="noopener">ç³»ç»Ÿå®Œå–„éœ€æ±‚2.doc</a></p><p><a href="http://dingdm.online/%E5%89%A9%E4%BD%99%E5%A4%84%E7%90%86%E9%A1%B9.docx" target="_blank" rel="noopener">å‰©ä½™å¤„ç†é¡¹.doc</a></p><p><a href="http://dingdm.online/%E5%89%A9%E4%BD%99%E5%A4%84%E7%90%86%E9%A1%B93.docx" target="_blank" rel="noopener">å‰©ä½™å¤„ç†é¡¹3.doc</a></p><p><a href="http://dingdm.online/%E5%89%A9%E4%BD%99%E5%A4%84%E7%90%86%E9%A1%B94.1.docx" target="_blank" rel="noopener">å‰©ä½™å¤„ç†é¡¹4.1.doc</a></p><p><a href="http://dingdm.online/%E5%89%A9%E4%BD%99%E5%A4%84%E7%90%86%E9%A1%B95-%E6%9C%80%E6%96%B0.docx" target="_blank" rel="noopener">å‰©ä½™å¤„ç†é¡¹4.5-æœ€æ–°.doc</a></p><p><a href="http://dingdm.online/%E5%89%A9%E4%BD%99%E5%A4%84%E7%90%86%E9%A1%B94.2--%E5%A4%84%E7%90%86%E7%BB%93%E6%9E%9C.docx" target="_blank" rel="noopener">å‰©ä½™å¤„ç†é¡¹4.2.doc</a></p><p><a href="http://dingdm.online/11.27%E5%AE%8C%E5%96%84%E6%95%B4%E7%90%86.docx" target="_blank" rel="noopener">11.27å®Œå–„æ•´ç†.doc</a></p><p><a href="http://dingdm.online/11.27%E5%AE%8C%E5%96%84%E6%95%B4%E7%90%86%20-%20%E5%8F%8D%E9%A6%88.docx" target="_blank" rel="noopener">11.27å®Œå–„æ•´ç† - åé¦ˆ.doc</a></p><p><a href="http://dingdm.online/1.21.docx" target="_blank" rel="noopener">1.9 åå°æµ‹è¯•åé¦ˆ.doc</a></p><p><a href="http://dingdm.online/1.21.docx" target="_blank" rel="noopener">1.21.doc</a></p><p><a href="http://dingdm.online/%E9%A1%B9%E7%9B%AE%E4%BF%A1%E6%81%AF.xlsx" target="_blank" rel="noopener">èµ„äº§ç®¡ç†æ¨¡å—éœ€æ±‚-äºŒæœŸ-æš‚æ—¶ä¸åš.docx</a></p><h4 id="è¡¨å•æ–‡ä»¶">è¡¨å•æ–‡ä»¶</h4><p><a href="http://dingdm.online/%E6%9D%A5%E8%AE%BF%E8%A1%A8%E5%8D%95.docx" target="_blank" rel="noopener">æ¥è®¿è¡¨å•.doc</a></p><p><a href="http://dingdm.online/%E6%B4%BB%E5%8A%A8%E7%94%B3%E8%AF%B7%E8%A1%A8%E5%8D%95.docx" target="_blank" rel="noopener">æ´»åŠ¨ç”³è¯·è¡¨å•.doc</a></p><h4 id="xlsxå¯¼å…¥æ¨¡æ¿">xlsxå¯¼å…¥æ¨¡æ¿</h4><p><a href="http://dingdm.online/%E9%A1%B9%E7%9B%AE%E4%BF%A1%E6%81%AF.xlsx" target="_blank" rel="noopener">é¡¹ç›®ä¿¡æ¯.xlsx</a></p><p><a href="http://dingdm.online/%E4%BA%BA%E6%89%8D%E4%BF%A1%E6%81%AF.xlsx" target="_blank" rel="noopener">äººæ‰ä¿¡æ¯.xlsx</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®å¼€å‘ </category>
          
          <category> ç­”è¾© </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> JWT </tag>
            
            <tag> Avtiviti </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¢é»‘æ ‘</title>
      <link href="/2020/08/01/hong-hei-shu/"/>
      <url>/2020/08/01/hong-hei-shu/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¢é»‘æ ‘">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¢é»‘æ ‘</h3><p><strong>å½“å†²çªçš„é“¾è¡¨é•¿åº¦è¶…è¿‡8ä¸ªæ—¶ï¼Œé“¾è¡¨ç»“æ„å°±ä¼šè½¬ä¸ºçº¢é»‘æ ‘ç»“æ„ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯é¿å…åœ¨æç«¯æ¡ä»¶çš„æƒ…å†µä¸‹å†²çªé“¾è¡¨è¿‡é•¿è€Œå¯¼è‡´æŸ¥è¯¢æ•ˆç‡éå¸¸æ…¢</strong><br><strong>çº¢é»‘æ ‘æ˜¯ä¸€ç§è¿‘ä¼¼å¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå…¶ä¸»è¦çš„ä¼˜ç‚¹å°±æ˜¯å¹³è¡¡ï¼Œå³å·¦å³å­æ ‘é«˜åº¦å‡ ä¹ä¸€è‡´ï¼Œä»¥æ­¤æ¥é˜²æ­¢æ ‘é€€åŒ–ä¸ºé“¾è¡¨ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ¥ä¿éšœæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸ºlog(n)</strong></p><h3 id="çº¢é»‘æ ‘">çº¢é»‘æ ‘</h3><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200626184132.png" alt="çº¢é»‘æ ‘" title="çº¢é»‘æ ‘"></p><table><thead><tr><th>çº¢é»‘æ ‘è¦æ±‚</th></tr></thead><tbody><tr><td>1.æ¯ä¸ªèŠ‚ç‚¹æˆ–è€…æ˜¯é»‘è‰²ï¼Œæˆ–è€…æ˜¯çº¢è‰²</td></tr><tr><td>2.æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²</td></tr><tr><td>3.æ¯ä¸ªå¶å­ç»“ç‚¹ï¼ˆè¿™é‡Œçš„å¶å­ç»“ç‚¹ä¸æ˜¯ä¼ ç»Ÿçš„å¶å­ç»“ç‚¹ï¼Œæ˜¯æŒ‡ä¸ºç©ºçš„å¶å­ç»“ç‚¹ï¼‰æ˜¯é»‘è‰²</td></tr><tr><td>4.å¦‚æœä¸€ä¸ªç»“ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„å­ç»“ç‚¹å¿…é¡»æ˜¯é»‘è‰²çš„</td></tr><tr><td>5.ä»ä¸€ä¸ªç»“ç‚¹åˆ°è¯¥ç»“ç‚¹çš„å­å­™ç»“ç‚¹çš„æ‰€æœ‰è·¯å¾„ä¸ŠåŒ…å«ç›¸åŒæ•°ç›®çš„é»‘ç»“ç‚¹</td></tr><tr><td>6.æ–°åŠ å…¥åˆ°çº¢é»‘æ ‘çš„èŠ‚ç‚¹ä¸ºçº¢è‰²èŠ‚ç‚¹</td></tr></tbody></table><p><strong>åœ¨æ ‘çš„ç»“æ„å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå¾€å¾€ä¼šç ´åçº¢è‰²èŠ‚ç‚¹çš„å­©å­å’Œçˆ¶äº²éƒ½ä¸èƒ½æ˜¯çº¢è‰²çš„å’Œä»ä»»æ„èŠ‚ç‚¹åˆ°å…¶å­æ ‘ä¸­æ¯ä¸ªå¶å­ç»“ç‚¹çš„è·¯å¾„æœ‰ç›¸åŒæ•°é‡çš„é»‘è‰²èŠ‚ç‚¹è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œéœ€è¦é€šè¿‡è°ƒæ•´ä½¿å¾—æŸ¥æ‰¾æ ‘é‡æ–°æ»¡è¶³çº¢é»‘æ ‘çš„æ¡ä»¶</strong></p><h3 id="è°ƒæ•´æ–¹å¼">è°ƒæ•´æ–¹å¼</h3><h4 id="é¢œè‰²è°ƒæ•´">é¢œè‰²è°ƒæ•´</h4><p><strong>è½¬æ¢èŠ‚ç‚¹çš„é¢œè‰²</strong></p><h4 id="ç»“æ„è°ƒæ•´">ç»“æ„è°ƒæ•´</h4><h5 id="å·¦æ—‹">å·¦æ—‹</h5><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200626185320.png" alt="å·¦æ—‹" title="å·¦æ—‹"></p><table><thead><tr><th>åºå·</th><th>æ­¥éª¤</th></tr></thead><tbody><tr><td>1</td><td>Yçš„å·¦å­©å­è®¾ä¸ºXçš„å³å­©å­ï¼Œå³Î²çš„çˆ¶äº²ä¸ºX</td></tr><tr><td>2</td><td>å°†Xçš„çˆ¶äº²è®¾ä¸ºYçš„çˆ¶äº²</td></tr><tr><td>2.1</td><td>è‹¥Xçš„çˆ¶äº²ä¸ºç©ºï¼Œåˆ™Yä¸ºæ ¹èŠ‚ç‚¹</td></tr><tr><td>2.2</td><td>Xä¸ºä»–çˆ¶äº²çš„å·¦èŠ‚ç‚¹ï¼Œåˆ™Yä¸ºXçˆ¶äº²çš„å·¦èŠ‚ç‚¹ï¼›Xä¸ºä»–çˆ¶äº²çš„å³èŠ‚ç‚¹ï¼Œåˆ™Yä¸ºXçˆ¶äº²çš„å³èŠ‚ç‚¹</td></tr><tr><td>3</td><td>Xè®¾ä¸ºYçš„å·¦èŠ‚ç‚¹ï¼Œå³Xçš„çˆ¶äº²ä¸ºY</td></tr></tbody></table><pre class=" language-language-java"><code class="language-language-java">static final class TreeNode<K,V> extends LinkedHashMap.Entry<K,V> {    //æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆ TreeNode<K,V> parent;    //æŒ‡å‘å·¦å­©å­çš„æŒ‡é’ˆ TreeNode<K,V> left;    //æŒ‡å‘å³å­©å­çš„æŒ‡é’ˆ TreeNode<K,V> right;    //å‰é©±æŒ‡é’ˆï¼Œè·Ÿnextå±æ€§ç›¸åçš„æŒ‡å‘ TreeNode<K,V> prev;    //æ˜¯å¦ä¸ºçº¢è‰²èŠ‚ç‚¹ boolean red;    //å·¦æ—‹æ–¹æ³•å¦‚ä¸‹    static <K, V> TreeNode<K, V> rotateLeft(TreeNode<K, V> root,                                            TreeNode<K, V> x) {        TreeNode<K, V> y, parent, Î²;//xè¡¨ç¤ºè¦è°ƒæ•´çš„èŠ‚ç‚¹ï¼Œyè¡¨ç¤ºxçš„å³èŠ‚ç‚¹ï¼Œparentè¡¨ç¤ºxçš„parentèŠ‚ç‚¹ï¼ŒÎ²è¡¨ç¤ºxçš„å³å­©å­çš„å·¦å­©å­èŠ‚ç‚¹        //åˆ¤æ–­yï¼Œå¦‚æœyä¸ºç©ºåˆ™æ—‹è½¬æ²¡æœ‰æ„ä¹‰        if (y != null && (Î² = y.left) != null) {            //è®¾ç½®çš„Î²çˆ¶äº²ä¸ºxï¼ŒÎ²ä¸ºxçš„å³èŠ‚ç‚¹            if ((Î² = y.left) != null)                x.right = Î²;            //åˆ¤æ–­xçš„çˆ¶äº²ï¼Œä¸ºç©ºï¼Œyä¸ºæ ¹èŠ‚ç‚¹ï¼Œæ ¹èŠ‚ç‚¹çš„è¯å°±è®¾ç½®ä¸ºé»‘è‰²            if ((parent = x.parent ) == null)                (root = y).red = false;                //åˆ¤æ–­xèŠ‚ç‚¹æ˜¯å·¦å„¿å­è¿˜æ˜¯å³å„¿å­            else if (parent.left == x)                parent.left = y;            else                parent.right = y;            y.left = x;            x.parent = y;        }        return root;    }}</code></pre><h5 id="å³æ—‹">å³æ—‹</h5><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200626191905.png" alt="å³æ—‹" title="å³æ—‹"><br><strong>å³æ—‹å’Œå·¦æ—‹çš„åŸç†ç›¸åŒ</strong></p><h5 id="æ’å…¥æ–°èŠ‚ç‚¹è°ƒæ•´">æ’å…¥æ–°èŠ‚ç‚¹è°ƒæ•´</h5><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200626192839.png" alt="æ’å…¥" title="æ’å…¥"><br><strong>æ’å…¥æ–°èŠ‚ç‚¹ä¸ºçº¢è‰²æ˜¯ä¸ºäº†ä¸è¿èƒŒç‰¹æ€§5</strong><br><strong>å½“å‰èŠ‚ç‚¹(å³ï¼Œè¢«æ’å…¥èŠ‚ç‚¹)çš„çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œä¸”å½“å‰èŠ‚ç‚¹çš„ç¥–çˆ¶èŠ‚ç‚¹çš„å¦ä¸€ä¸ªå­èŠ‚ç‚¹ï¼ˆå”å”èŠ‚ç‚¹ï¼‰ä¹Ÿæ˜¯çº¢è‰²</strong><br><strong>(1) å°†â€œçˆ¶èŠ‚ç‚¹â€è®¾ä¸ºé»‘è‰²ã€‚<br>(2) å°†â€œå”å”èŠ‚ç‚¹â€è®¾ä¸ºé»‘è‰²ã€‚<br>(3) å°†â€œç¥–çˆ¶èŠ‚ç‚¹â€è®¾ä¸ºâ€œçº¢è‰²â€ã€‚<br>(4) å°†â€œç¥–çˆ¶èŠ‚ç‚¹â€è®¾ä¸ºâ€œå½“å‰èŠ‚ç‚¹â€(çº¢è‰²èŠ‚ç‚¹)ï¼›å³ï¼Œä¹‹åç»§ç»­å¯¹â€œå½“å‰èŠ‚ç‚¹â€è¿›è¡Œæ“ä½œ</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200626193021.png" alt="è°ƒæ•´" title="è°ƒæ•´"><br><strong>â€œå½“å‰èŠ‚ç‚¹â€å’Œâ€œçˆ¶èŠ‚ç‚¹â€éƒ½æ˜¯çº¢è‰²ï¼Œè¿èƒŒâ€œç‰¹æ€§(4)â€ã€‚å°†â€œçˆ¶èŠ‚ç‚¹â€è®¾ç½®â€œé»‘è‰²â€ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br>ä½†æ˜¯ï¼Œå°†â€œçˆ¶èŠ‚ç‚¹â€ç”±â€œçº¢è‰²â€å˜æˆâ€œé»‘è‰²â€ä¹‹åï¼Œè¿èƒŒäº†â€œç‰¹æ€§(5)â€ï¼šå› ä¸ºï¼ŒåŒ…å«â€œçˆ¶èŠ‚ç‚¹â€çš„åˆ†æ”¯çš„é»‘è‰²èŠ‚ç‚¹çš„æ€»æ•°å¢åŠ äº†1ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•æ˜¯ï¼šå°†â€œç¥–çˆ¶èŠ‚ç‚¹â€ç”±â€œé»‘è‰²â€å˜æˆçº¢è‰²ï¼ŒåŒæ—¶ï¼Œå°†â€œå”å”èŠ‚ç‚¹â€ç”±â€œçº¢è‰²â€å˜æˆâ€œé»‘è‰²â€ã€‚å…³äºè¿™é‡Œï¼Œè¯´æ˜å‡ ç‚¹ï¼šç¬¬ä¸€ï¼Œä¸ºä»€ä¹ˆâ€œç¥–çˆ¶èŠ‚ç‚¹â€ä¹‹å‰æ˜¯é»‘è‰²ï¼Ÿè¿™ä¸ªåº”è¯¥å¾ˆå®¹æ˜“æƒ³æ˜ç™½ï¼Œå› ä¸ºåœ¨å˜æ¢æ“ä½œä¹‹å‰ï¼Œè¯¥æ ‘æ˜¯çº¢é»‘æ ‘ï¼Œâ€œçˆ¶èŠ‚ç‚¹â€æ˜¯çº¢è‰²ï¼Œé‚£ä¹ˆâ€œç¥–çˆ¶èŠ‚ç‚¹â€ä¸€å®šæ˜¯é»‘è‰²ã€‚ ç¬¬äºŒï¼Œä¸ºä»€ä¹ˆå°†â€œç¥–çˆ¶èŠ‚ç‚¹â€ç”±â€œé»‘è‰²â€å˜æˆçº¢è‰²ï¼ŒåŒæ—¶ï¼Œå°†â€œå”å”èŠ‚ç‚¹â€ç”±â€œçº¢è‰²â€å˜æˆâ€œé»‘è‰²â€ï¼›èƒ½è§£å†³â€œåŒ…å«â€˜çˆ¶èŠ‚ç‚¹â€™çš„åˆ†æ”¯çš„é»‘è‰²èŠ‚ç‚¹çš„æ€»æ•°å¢åŠ äº†1â€çš„é—®é¢˜ã€‚è¿™ä¸ªé“ç†ä¹Ÿå¾ˆç®€å•ã€‚â€œåŒ…å«â€˜çˆ¶èŠ‚ç‚¹â€™çš„åˆ†æ”¯çš„é»‘è‰²èŠ‚ç‚¹çš„æ€»æ•°å¢åŠ äº†1â€ åŒæ—¶ä¹Ÿæ„å‘³ç€ â€œåŒ…å«â€˜ç¥–çˆ¶èŠ‚ç‚¹â€™çš„åˆ†æ”¯çš„é»‘è‰²èŠ‚ç‚¹çš„æ€»æ•°å¢åŠ äº†1â€ï¼Œæ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬é€šè¿‡å°†â€œç¥–çˆ¶èŠ‚ç‚¹â€ç”±â€œé»‘è‰²â€å˜æˆâ€œçº¢è‰²â€ä»¥è§£å†³â€œåŒ…å«â€˜ç¥–çˆ¶èŠ‚ç‚¹â€™çš„åˆ†æ”¯çš„é»‘è‰²èŠ‚ç‚¹çš„æ€»æ•°å¢åŠ äº†1â€çš„é—®é¢˜ï¼› ä½†æ˜¯ï¼Œè¿™æ ·å¤„ç†ä¹‹ååˆä¼šå¼•èµ·å¦ä¸€ä¸ªé—®é¢˜â€œåŒ…å«â€˜å”å”â€™èŠ‚ç‚¹çš„åˆ†æ”¯çš„é»‘è‰²èŠ‚ç‚¹çš„æ€»æ•°å‡å°‘äº†1â€ï¼Œç°åœ¨æˆ‘ä»¬å·²çŸ¥â€œå”å”èŠ‚ç‚¹â€æ˜¯â€œçº¢è‰²â€ï¼Œå°†â€œå”å”èŠ‚ç‚¹â€è®¾ä¸ºâ€œé»‘è‰²â€å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ æ‰€ä»¥ï¼Œå°†â€œç¥–çˆ¶èŠ‚ç‚¹â€ç”±â€œé»‘è‰²â€å˜æˆçº¢è‰²ï¼ŒåŒæ—¶ï¼Œå°†â€œå”å”èŠ‚ç‚¹â€ç”±â€œçº¢è‰²â€å˜æˆâ€œé»‘è‰²â€ï¼›å°±è§£å†³äº†è¯¥é—®é¢˜ã€‚<br>æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤å¤„ç†ä¹‹åï¼šå½“å‰èŠ‚ç‚¹ã€çˆ¶èŠ‚ç‚¹ã€å”å”èŠ‚ç‚¹ä¹‹é—´éƒ½ä¸ä¼šè¿èƒŒçº¢é»‘æ ‘ç‰¹æ€§ï¼Œä½†ç¥–çˆ¶èŠ‚ç‚¹å´ä¸ä¸€å®šã€‚è‹¥æ­¤æ—¶ï¼Œç¥–çˆ¶èŠ‚ç‚¹æ˜¯æ ¹èŠ‚ç‚¹ï¼Œç›´æ¥å°†ç¥–çˆ¶èŠ‚ç‚¹è®¾ä¸ºâ€œé»‘è‰²â€ï¼Œé‚£å°±å®Œå…¨è§£å†³è¿™ä¸ªé—®é¢˜äº†ï¼›è‹¥ç¥–çˆ¶èŠ‚ç‚¹ä¸æ˜¯æ ¹èŠ‚ç‚¹ï¼Œé‚£æˆ‘ä»¬éœ€è¦å°†â€œç¥–çˆ¶èŠ‚ç‚¹â€è®¾ä¸ºâ€œæ–°çš„å½“å‰èŠ‚ç‚¹â€ï¼Œæ¥ç€å¯¹â€œæ–°çš„å½“å‰èŠ‚ç‚¹â€è¿›è¡Œåˆ†æã€‚</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200626193519.png" alt=""><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200626193543.png" alt=""></p><h5 id="çº¢é»‘æ ‘çš„æŸ¥è¯¢">çº¢é»‘æ ‘çš„æŸ¥è¯¢</h5><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200626193712.png" alt="çº¢é»‘æ ‘æŸ¥è¯¢" title="çº¢é»‘æ ‘æŸ¥è¯¢"></p><h5 id="çº¢é»‘æ ‘çš„åˆ é™¤">çº¢é»‘æ ‘çš„åˆ é™¤</h5><h6 id="è¢«åˆ é™¤çš„DèŠ‚ç‚¹ä¸ºçº¢è‰²ã€‚è¿™ç§æƒ…å†µï¼Œåˆ™ä¸Dç›¸å…³çš„é¢œè‰²ä»¥åŠç»“æ„å…³ç³»å¿…ç„¶åªæœ‰å¦‚ä¸‹ä¸€ç§æƒ…å†µ">è¢«åˆ é™¤çš„DèŠ‚ç‚¹ä¸ºçº¢è‰²ã€‚è¿™ç§æƒ…å†µï¼Œåˆ™ä¸Dç›¸å…³çš„é¢œè‰²ä»¥åŠç»“æ„å…³ç³»å¿…ç„¶åªæœ‰å¦‚ä¸‹ä¸€ç§æƒ…å†µ</h6><p><img src="http://dingdm.online/317300-20160505091642982-1989959722.png" alt="DèŠ‚ç‚¹ä¸ºçº¢è‰²" title="DèŠ‚ç‚¹ä¸ºçº¢è‰²"><br><strong>å› ä¸ºDä¸ºçº¢è‰²ï¼Œæ‰€ä»¥Pä¸ºé»‘è‰²ï¼ŒåŒæ—¶DRä¸å¯èƒ½ä¸ºçº¢è‰²(å¦åˆ™è¿åæ€§è´¨4)ã€‚åŒæ—¶ç”±äºæ€§è´¨5ï¼Œåˆ™DRå¿…ä¸ºNilï¼Œå¦åˆ™å°±Dæ ‘æ¥è¯´ï¼Œç»è¿‡DRä¸ä¸ç»è¿‡DRçš„è·¯å¾„çš„é»‘èŠ‚ç‚¹æ•°å¿…ä¸ç›¸åŒã€‚ç°åœ¨è¦åˆ é™¤DèŠ‚ç‚¹ï¼Œåªéœ€è¦ç›´æ¥å°†DèŠ‚ç‚¹åˆ é™¤ï¼Œå¹¶å°†DRä½œä¸ºPçš„å·¦å­èŠ‚ç‚¹</strong></p><h6 id="è¢«åˆ é™¤çš„DèŠ‚ç‚¹ä¸ºé»‘è‰²">è¢«åˆ é™¤çš„DèŠ‚ç‚¹ä¸ºé»‘è‰²</h6><p><img src="http://dingdm.online/317300-20160505091836732-1760252339.png" alt="Dä¸ºé»‘è‰²" title="Dä¸ºé»‘è‰²"><br><strong>ç”±äºåˆ é™¤çš„Dä¸ºé»‘è‰²ï¼Œåˆ é™¤åPçš„å·¦å­æ ‘çš„é»‘èŠ‚ç‚¹æ•°å¿…å°‘1ï¼Œæ­¤æ—¶åˆšå¥½DRä¸ºé»‘è‰²ï¼Œå¹¶ä¸”åˆ é™¤åDRå¯ä»¥å æ®Dçš„ä½ç½®ï¼Œç„¶åå†å°†DRçš„é¢œè‰²æ”¹ä¸ºé»‘è‰²ï¼Œåˆšå¥½å¯ä»¥å¡«è¡¥På·¦å­æ ‘æ‰€å‡å°‘çš„é»‘èŠ‚ç‚¹æ•°ã€‚</strong></p><h6 id="è¢«åˆ é™¤çš„Dä¸ºé»‘è‰²ï¼Œä¸”DRä¸ºNil">è¢«åˆ é™¤çš„Dä¸ºé»‘è‰²ï¼Œä¸”DRä¸ºNil</h6><p><img src="http://dingdm.online/317300-20160505091941513-167154460.png" alt=""><br><img src="http://dingdm.online/317300-20160505092013701-2109174939.png" alt=""><br><strong>è½¬æ¢åï¼Œè™½ç„¶å¯¹äºPæ ‘çš„å·¦å­æ ‘çš„é»‘èŠ‚ç‚¹æ•°ä»ç„¶ä¼šæ¯”å³å­æ ‘çš„é»‘èŠ‚ç‚¹æ•°å°‘1ï¼Œä½†æ­¤æ—¶DRçš„å…„å¼Ÿ(ä»¥å‰çš„SèŠ‚ç‚¹)ç°åœ¨å·²ç»å˜ä¸ºSLï¼Œå³å·²ç»ç”±çº¢è‰²å˜ä¸ºé»‘è‰²ï¼Œå¹¶ä¸”éå¸¸é‡è¦çš„æ­¤æ—¶çš„DRçš„å…„å¼ŸèŠ‚ç‚¹SLçš„å­ç»“ç‚¹(å³ï¼šDRçš„ä¸¤ä¸ªä¾„å­èŠ‚ç‚¹)ï¼Œè¦ä¸å°±æ˜¯çº¢è‰²èŠ‚ç‚¹è¦ä¸å°±å¿…ä¸ºNilèŠ‚ç‚¹ï¼Œè€Œè¿™ç§æƒ…å†µæ­£æ˜¯Dä¸ºé»‘è‰²ã€Sä¹Ÿé»‘è‰²çš„æƒ…å†µ</strong></p><p><strong>æ‰€æœ‰å›¾ç‰‡æ¥æºäºç½‘ç»œã€‚</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HashMap </tag>
            
            <tag> äºŒå‰æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexoæ’ä»¶åŠä¼˜åŒ–</title>
      <link href="/2020/07/31/hexo-cha-jian-tui-jian/"/>
      <url>/2020/07/31/hexo-cha-jian-tui-jian/</url>
      
        <content type="html"><![CDATA[<h3 id="hexoå¸¸ç”¨æ’ä»¶åŠä¼˜åŒ–">hexoå¸¸ç”¨æ’ä»¶åŠä¼˜åŒ–</h3><p>è¿™é‡Œä½¿ç”¨çš„ä¸»é¢˜ä¸ºmateryï¼Œé—ªçƒä¹‹ç‹ï¼Œmateryä¸»é¢˜çš„<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank" rel="noopener">github</a>ä»“åº“ï¼Œä½œè€…æä¾›çš„æ–‡æ¡£é‡Œå·²ç»ç»™å‡ºäº†åƒä»£ç é«˜äº®ï¼Œæ‹¼éŸ³è½¬æ¢ç­‰æ’ä»¶ï¼Œæ‰€ä»¥æœ¬æ–‡ä»‹ç»çš„æ˜¯é™¤äº†ä½œè€…æä¾›çš„ä¹‹å¤–çš„å…¶ä»–ç®€çº¦æ’ä»¶ã€‚</p><h4 id="materyä½¿ç”¨éœ€çŸ¥">materyä½¿ç”¨éœ€çŸ¥</h4><h5 id="èƒŒæ™¯ç²’å­å’Œå½©å¸¦è®¾ç½®">èƒŒæ™¯ç²’å­å’Œå½©å¸¦è®¾ç½®</h5><p>materyçš„ä¸»é¢˜æä¾›äº†è¿™å‡ é¡¹åŠŸèƒ½ï¼Œä½†æ˜¯é»˜è®¤æ˜¯æ²¡æœ‰å¼€å¯çš„ï¼Œå› æ­¤ä½¿ç”¨è¯¥ä¸»é¢˜éœ€è¦æ‰‹åŠ¨å¼€å¯ï¼Œåœ¨themes/hexo-theme-materyç›®å½•ä¸‹çš„_config.ymlé…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ä»¥ä¸‹å‡ é¡¹ã€‚</p><pre class=" language-language-yml"><code class="language-language-yml">#èƒŒæ™¯canvas-nestcanvas_nest:  enable: true  color: 0,0,255 # çº¿æ¡é¢œè‰², é»˜è®¤: '0,0,0' ï¼›ä¸‰ä¸ªæ•°å­—åˆ†åˆ«ä¸º(R,G,B)ï¼Œæ³¨æ„ç”¨,åˆ†$  pointColor: 0,0,255 # äº¤ç‚¹é¢œè‰², é»˜è®¤: '0,0,0' ï¼›ä¸‰ä¸ªæ•°å­—åˆ†åˆ«ä¸º(R,G,B)ï¼Œæ³¨æ„$  opacity: 0.7 # çº¿æ¡é€æ˜åº¦ï¼ˆ0~1ï¼‰, é»˜è®¤: 0.5  zIndex: -1 # èƒŒæ™¯çš„ z-index å±æ€§ï¼Œcss å±æ€§ç”¨äºæ§åˆ¶æ‰€åœ¨å±‚çš„ä½ç½®, é»˜è®¤: -1.  count: 99 # çº¿æ¡çš„æ€»æ•°é‡, é»˜è®¤: 99  # èƒŒæ™¯é™æ­¢å½©å¸¦.ribbon:  enable: true  size: 150 # å½©å¸¦å¤§å°, é»˜è®¤: 90.  alpha: 0.6 # å½©å¸¦é€æ˜åº¦ (0 ~ 1), é»˜è®¤: 0.6.  zIndex: -1 # èƒŒæ™¯çš„z-indexå±æ€§ï¼Œcsså±æ€§ç”¨äºæ§åˆ¶æ‰€åœ¨å±‚çš„ä½ç½®, é»˜è®¤: -1.  clickChange: false  # è®¾ç½®æ˜¯å¦æ¯æ¬¡ç‚¹å‡»éƒ½æ›´æ¢å½©å¸¦.# èƒŒæ™¯åŠ¨æ€å½©å¸¦.ribbon_dynamic:  enable: true</code></pre><p>enableé€‰é¡¹è®¾ç½®ä¸ºtrueå³å¯ã€‚</p><p>å› ä¸ºæˆ‘è¿™é‡Œçš„hexoåšå®¢æ˜¯æ”¾åœ¨æˆ‘çš„é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šçš„ï¼Œå› æ­¤å¦‚æœè¦ä¿®æ”¹å†…å®¹æˆ‘æ¨èsmarttyè½¯ä»¶è¿›è¡Œè¿œç¨‹å¹¶ä¿®æ”¹æ–‡ä»¶ç›¸å¯¹æ–¹ä¾¿ã€‚</p><h5 id="å¯¼èˆªæ ä»¥åŠåº•éƒ¨çš„é…è‰²ä¿®æ”¹">å¯¼èˆªæ ä»¥åŠåº•éƒ¨çš„é…è‰²ä¿®æ”¹</h5><p>materyçš„è‡ªå¸¦çš„å¯¼èˆªæ é²œè‰³çš„é…è‰²æœ‰ç‚¹é—®é¢˜ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥è‡ªå·±ä¿®æ”¹ä¸€ä¸‹ã€‚</p><p>åœ¨ä¸»é¢˜ä¸‹sourceä¸‹çš„cssç›®å½•ä¸‹ï¼Œä¿®æ”¹matery.cssã€‚åˆ†åˆ«ä¿®æ”¹ç¬¬268å’Œ280è¡Œã€‚</p><pre class=" language-language-css"><code class="language-language-css">.bg-color {    background-image: linear-gradient(to right, #4cbf30 0%, #0f9d58 100%);}.progress-bar {    height: 4px;    position: fixed;    bottom: 0;    z-index: 300;    background: linear-gradient(to right, #4cbf30 0%, #0f9d58 100%);    opacity: 0.8;}</code></pre><p>æˆ‘è¿™é‡Œä¿®æ”¹ä¸º#4cbf30 0%, #0f9d58 100%</p><p><img src="http://dingdm.online/%E6%B8%90%E5%8F%98.png" alt=""></p><p>ä½ ä¹Ÿå¯ä»¥ä¿®æ”¹ä¸ºè‡ªå·±çœ‹ç€å¥½çœ‹çš„é¢œè‰²ï¼Œæˆ‘è¿™é‡Œæ”¾ä¸Šå‡ ä¸ªé…è‰²çš„ç½‘ç«™ï¼Œå¯ä»¥ç”±è‡ªå·±é€‰æ‹©ã€‚</p><p><a href="https://coolors.co/" target="_blank" rel="noopener">https://coolors.co/</a></p><p><a href="http://www.materialpalette.com/" target="_blank" rel="noopener">http://www.materialpalette.com/</a></p><h5 id="è½®æ’­å›¾å’Œç¬”è®°å±•ç¤ºå›¾">è½®æ’­å›¾å’Œç¬”è®°å±•ç¤ºå›¾</h5><p>å¦‚æœä½ åœ¨å†™ç¬”è®°çš„æ—¶å€™ä¸æƒ³è‡ªå·±ä¸Šä¼ å°é¢çš„è¯è€Œä½¿ç”¨é»˜è®¤çš„å›¾ç‰‡çš„è¯ï¼Œè¿™é‡Œå¯ä»¥å¯¹å°é¢çš„å›¾ç‰‡è¿›è¡Œé‡æ–°ä¸Šä¼ ï¼Œé€‰æ‹©å¥½çœ‹çš„å³å¯ã€‚</p><p>åˆ†åˆ«æ›¿æ¢æ‰ä¸»é¢˜ä¸‹sourceä¸‹mediasä¸­çš„bannerå’Œfeatureimagesè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„å›¾ç‰‡å³å¯ã€‚</p><p>åŒæ—¶å¦‚æœæƒ³è¦å¢åŠ featureimagesä¸‹çš„å›¾ç‰‡ï¼Œè¿˜éœ€åŒæ­¥æ›´æ”¹ä¸»é¢˜ä¸‹_config.ymlé…ç½®æ–‡ä»¶é‡Œçš„featureImagesæ¨¡å—</p><pre class=" language-language-yml"><code class="language-language-yml"># The post featured images that needs to be displayed when there is no image.# æ— æ–‡ç« ç‰¹è‰²å›¾ç‰‡æ—¶éœ€è¦æ˜¾ç¤ºçš„æ–‡ç« ç‰¹è‰²å›¾ç‰‡.featureImages:- /medias/featureimages/0.jpg- /medias/featureimages/1.jpg- /medias/featureimages/2.jpg- /medias/featureimages/3.jpg- /medias/featureimages/4.jpg- /medias/featureimages/5.jpg- /medias/featureimages/6.jpg- /medias/featureimages/7.jpg- /medias/featureimages/8.jpg- /medias/featureimages/9.jpg- /medias/featureimages/10.jpg- /medias/featureimages/11.jpg- /medias/featureimages/12.jpg- /medias/featureimages/13.jpg- /medias/featureimages/14.jpg- /medias/featureimages/15.jpg- /medias/featureimages/16.jpg- /medias/featureimages/17.jpg- /medias/featureimages/18.jpg- /medias/featureimages/19.jpg- /medias/featureimages/20.jpg- /medias/featureimages/21.jpg- /medias/featureimages/22.jpg- /medias/featureimages/23.jpg</code></pre><p>åŒæ ·ï¼Œè¿™é‡Œæä¾›å‡ ä¸ªå›¾ç‰‡ç½‘ç«™ã€‚æ›¿æ¢å›¾ç‰‡æ—¶ï¼Œå›¾ç‰‡çš„åˆ†è¾¨ç‡æ— éœ€ä¿®æ”¹ã€‚</p><p><a href="https://wallhaven.cc/(%E8%B6%85%E6%A3%92)" target="_blank" rel="noopener">https://wallhaven.cc/(è¶…æ£’)</a></p><p><a href="https://konachan.net/post" target="_blank" rel="noopener">https://konachan.net/post</a></p><h3 id="çœ‹æ¿å¨˜æ’ä»¶">çœ‹æ¿å¨˜æ’ä»¶</h3><p>æ³¨ï¼šå¦‚æœä½ ä½¿ç”¨äº†materyçš„åœç®—å­æ¥ç»Ÿè®¡æ•°æ®çš„è¯ï¼Œå®˜æ–¹çš„helper-liveçš„çœ‹æ¿å¨˜æ’ä»¶ä¼šä½¿åœç®—å­å¤±æ•ˆï¼ŒåŒæ—¶å®˜æ–¹æä¾›çš„æ’ä»¶åŠŸèƒ½ä¹Ÿè¾ƒå°‘ï¼Œæˆ‘è¿™é‡Œæ¨èä½¿ç”¨<a href="https://github.com/stevenjoezhang/live2d-widget" target="_blank" rel="noopener">è¯¥æ’ä»¶</a>ã€‚</p><p>å¦‚æœæ˜¯æ–°æ‰‹å¯ä»¥ç›´æ¥ä½¿ç”¨ä½œè€…æä¾›çš„jså³å¯ã€‚</p><p><a href="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js</a></p><p>å¦‚æœä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼Œä¼šè¦†ç›–åŸmateryä¸»é¢˜çš„å¸åº•æ¨¡å¼çš„éŸ³ä¹æ’­æ”¾æ’ä»¶ã€‚è¿™é‡Œæä¾›ä¸¤ç§æ–¹å¼è§£å†³ã€‚</p><h4 id="forkæ–°çš„ä»“åº“">forkæ–°çš„ä»“åº“</h4><p>é€šè¿‡forkä½œè€…æ–°çš„ä»“åº“ï¼Œä¿®æ”¹å¯¹åº”çš„csså’Œjsæ–‡ä»¶ï¼Œè¿™é‡Œåœ¨ä½œè€…çš„githubä»“åº“ä¸‹æœ‰å¯¹åº”çš„ä»‹ç»ï¼Œå› æ­¤ä¸å†èµ˜è¿°ã€‚</p><p><img src="http://dingdm.online/fork.png" alt=""></p><p>ä¿®æ”¹é€‚åˆè‡ªå·±çš„csså’Œjsæ–‡ä»¶åï¼Œå‘å¸ƒæ–°çš„ç‰ˆæœ¬ï¼Œä½¿ç”¨githubçš„cdnåŠ é€Ÿè·å–jså³å¯ã€‚</p><p>src=â€œ<a href="https://cdn.jsdelivr.net/gh/username/live2d-widget@latest/autoload.js" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/username/live2d-widget@latest/autoload.js</a>â€</p><p>å°†è¿™é‡Œçš„ç”¨æˆ·åæ›¿æ¢è‡ªå·±çš„å³å¯ã€‚è‹¥ç›´æ¥è®¿é—®jsæ–‡ä»¶è®¿é—®å¤±è´¥403çš„è¯ï¼Œå› ä¸ºç¼“å­˜çš„åŸå› å¯èƒ½ä¸èƒ½æ˜¾ç¤ºï¼Œä½†æ˜¯åœ¨è‡ªå·±çš„åšå®¢ä½¿ç”¨æ²¡æœ‰é—®é¢˜ã€‚</p><h4 id="ä¿®æ”¹å¸åº•æ¨¡å¼çš„éŸ³ä¹æ’ä»¶ã€‚">ä¿®æ”¹å¸åº•æ¨¡å¼çš„éŸ³ä¹æ’ä»¶ã€‚</h4><p>å› ä¸ºä¿®æ”¹çœ‹æ¿å¨˜çš„æ–‡ä»¶ä¹‹åè¿˜è¦ä¿®æ”¹å›åˆ°é¡¶ç«¯æ’ä»¶ï¼Œå¦‚æœä½ è®¾ç½®äº†åœ¨çº¿èŠå¤©ä¹Ÿè¦ä¿®æ”¹ã€‚å¦‚æœä½ è¿™é‡Œä¸æƒ³éº»çƒ¦çš„è¯ï¼Œç›´æ¥å°†éŸ³ä¹æ’ä»¶çš„å¸åº•æ¨¡å¼å–æ¶ˆå³å¯ã€‚</p><p>åœ¨ä¸»é¢˜ä¸‹çš„_config.ymlé…ç½®æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹musicæ¨¡å—ã€‚å°†å¸åº•æ¨¡å¼å…³é—­å³å¯ã€‚</p><pre class=" language-language-yml"><code class="language-language-yml"># Whether to display the musics.# æ˜¯å¦åœ¨é¦–é¡µæ˜¾ç¤ºéŸ³ä¹.music:  enable: true  title: #éå¸åº•æ¨¡å¼æœ‰æ•ˆ    enable: true    show: å¬å¬éŸ³ä¹  autoHide: true    # hide automaticaly  server: netease   #requiremusic platform: netease, tencent, kugou, xiami, baidu  type: playlist    #require song, playlist, album, search, artist  id: 503838841     #requiresong id / playlist id / album id / search keyword  fixed: false       # å¼€å¯å¸åº•æ¨¡å¼  autoplay: false   # æ˜¯å¦è‡ªåŠ¨æ’­æ”¾  theme: '#42b983'  loop: 'all'       # éŸ³é¢‘å¾ªç¯æ’­æ”¾, å¯é€‰å€¼: 'all', 'one', 'none'  order: 'random'   # éŸ³é¢‘å¾ªç¯é¡ºåº, å¯é€‰å€¼: 'list', 'random'  preload: 'auto'   # é¢„åŠ è½½ï¼Œå¯é€‰å€¼: 'none', 'metadata', 'auto'  volume: 0.7       # é»˜è®¤éŸ³é‡ï¼Œè¯·æ³¨æ„æ’­æ”¾å™¨ä¼šè®°å¿†ç”¨æˆ·è®¾ç½®ï¼Œç”¨æˆ·æ‰‹åŠ¨è®¾ç½®éŸ³é‡åé»˜è®¤éŸ³é‡å³å¤±æ•ˆ  listFolded: true  # åˆ—è¡¨é»˜è®¤æŠ˜å   hideLrc: true     # éšè—æ­Œè¯</code></pre><h3 id="å°åœ°çƒæ’ä»¶">å°åœ°çƒæ’ä»¶</h3><p>å°åœ°çƒæ’ä»¶çš„åœ°å€<br><a href="https://www.revolvermaps.com/?target=setupgl">https://www.revolvermaps.com/?target=setupgl</a></p><p><img src="http://dingdm.online/%E5%B0%8F%E5%9C%B0%E7%90%83.png" alt=""></p><p>å¤åˆ¶ä¸Šé¢çš„srciptæ ‡ç­¾æ”¾åœ¨è‡ªå·±çš„åšå®¢ä¸­åˆé€‚çš„ä½ç½®å³å¯ã€‚</p><h3 id="å¤©æ°”æ’ä»¶">å¤©æ°”æ’ä»¶</h3><p>ç”Ÿæˆjsåœ°å€</p><p><a href="https://cj.weather.com.cn/plugin/index" target="_blank" rel="noopener">https://cj.weather.com.cn/plugin/index</a></p><p>æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©å¯¹åº”çš„æ’ä»¶å³å¯ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ç®€çº¦æ’ä»¶ï¼ŒUIæ¯”è¾ƒæ¼‚äº®</p><p><img src="http://dingdm.online/%E6%A0%B9%E6%8D%AE%E8%87%AA%E5%B7%B1%E9%80%89%E6%8B%A9%E5%AF%B9%E5%BA%94%E6%A8%A1%E5%9D%97.png" alt=""></p><p>é€‰æ‹©å¯¹åº”çš„é€‰é¡¹ï¼Œåœ¨ä¸‹æ–¹ç”Ÿæˆå¯¹åº”çš„jsæ–‡ä»¶å³å¯ã€‚</p><p><img src="http://dingdm.online/%E7%94%9F%E6%88%90js.png" alt=""></p><p>å¤åˆ¶ä½ çš„jsæ–‡ä»¶æ”¾åˆ°ä½ çš„ä¸»é¢˜ä¸‹çš„ç›¸åº”çš„æ–‡ä»¶é‡Œå³å¯ï¼Œè¿™é‡Œä¸å¯¹ä¸»é¢˜çš„æ–‡ä»¶è¿›è¡Œä»‹ç»äº†ï¼Œæœ‰ä¸€äº›vueåŸºç¡€å°±å¯ä»¥çœ‹æ‡‚äº†ã€‚</p><h3 id="é˜¿é‡Œäº‘éƒ¨ç½²åšå®¢">é˜¿é‡Œäº‘éƒ¨ç½²åšå®¢</h3><p>å¦‚æœä½¿ç”¨githubæ¥éƒ¨ç½²çš„è¯è®¿é—®è¾ƒæ…¢ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œæ¨èé˜¿é‡Œäº‘æœåŠ¡å™¨éƒ¨ç½²ï¼Œå­¦ç”Ÿæœº10å—é’±ä¸€ä¸ªæœˆå¾ˆä¾¿å®œã€‚å¦‚æœæ˜¯ä¸Šç­æ—çš„è¯ï¼Œæ‰¾ä¸ªäº²æˆšæˆ–æœ‹å‹å®¶çš„å¤§å­¦ç”Ÿä¸æ˜¯è®¡ç®—æœºä¸“ä¸šçš„è®¤è¯ä¸€ä¸‹å°±å¥½ã€‚</p><h4 id="å®‰è£…node-ä»¥ubuntu16-04ä¸ºä¾‹">å®‰è£…node(ä»¥ubuntu16.04ä¸ºä¾‹)</h4><p>æ›´æ–°ä¸€ä¸‹æœåŠ¡å™¨çš„æº</p><pre><code>apt-get updateapt-get install -y python-software-properties software-properties-commonadd-apt-repository ppa:chris-lea/node.jsapt-get update</code></pre><p>nodeå®‰è£…</p><pre><code>apt-get install nodejsapt install nodejs-legacyapt install npm</code></pre><p>å°†npmçš„æºè®¾ç½®ä¸ºæ·˜å®æºï¼Œä¸‹è½½åŠ é€Ÿã€‚</p><pre><code>npm config set registry https://registry.npm.taobao.orgnpm config list</code></pre><p>å®‰è£…ç‰ˆæœ¬ç®¡ç†å™¨</p><pre><code>npm install n -g</code></pre><h4 id="å®‰è£…git">å®‰è£…git</h4><pre><code>apt-get install git</code></pre><p>é…ç½®ç”¨æˆ·åå’Œé‚®ç®±</p><pre><code>git config --global user.name "ä½ çš„ç”¨æˆ·å"git config --global user.email "ä½ çš„æ³¨å†Œé‚®ç®±"</code></pre><h4 id="å®‰è£…nginx">å®‰è£…nginx</h4><pre><code>apt-get install nginx</code></pre><p>å®‰è£…å®Œnginxåï¼Œè¿™é‡Œä»¥ubuntu16.04ä¸ºä¾‹ï¼Œnginxçš„ç›®å½•ä¸º/ect/nginxã€‚æˆ‘ä»¬ä¿®æ”¹é…ç½®æ–‡ä»¶åªéœ€è¦ä¿®æ”¹sites-availableä¸‹çš„defaultå³å¯ã€‚æˆ‘è¿™é‡Œåœ¨ä¹‹å‰å­¦ä¹ çš„æ—¶å€™éƒ½æ˜¯ä¸ä¸€æ ·çš„è·¯å¾„ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œä»¥ubuntuä¸ºä¾‹ã€‚</p><pre><code>server {        listen 80 default_server;        listen [::]:80 default_server;        listen 443 ssl;        ssl off;        ssl_certificate cert/4287626_www.dingdm.club.pem;        ssl_certificate_key cert/4287626_www.dingdm.club.key;        ssl_session_timeout 5m;        #ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aN$        ssl_ciphers ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA:ECDHE-ECDSA-DES-CBC3-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:DES-CBC3-SHA:!DSS;        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;        ssl_prefer_server_ciphers on;        root /home/www/hexo;        server_name dingdm.club;}</code></pre><p>server_nameä¸ºä½ çš„åŸŸåï¼Œrootä¸ºä½ çš„é™æ€ç½‘ç«™æ‰€åœ¨çš„è·¯å¾„ï¼Œå¯ä»¥è‡ªå·±åˆ›å»ºï¼Œ<strong>æ³¨æ„è¿™é‡Œçš„è·¯å¾„ä¸æ˜¯ä½ çš„hexoåšå®¢çš„è·¯å¾„ï¼Œå¦‚æœä½ åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºåšå®¢çš„è¯</strong>ã€‚</p><p>sslçš„é…ç½®ä¸ºå¼€å¯httpsçš„é…ç½®ï¼Œè¿™é‡Œå…ˆä¸èµ˜è¿°ï¼Œä¸éœ€è¦çš„è¯å¯ä»¥å°†sslç›¸å…³çš„é…ç½®æ³¨é‡Šæ‰å³å¯ã€‚</p><h4 id="åˆå§‹åŒ–gitä»“åº“">åˆå§‹åŒ–gitä»“åº“</h4><p>æ·»åŠ gitç”¨æˆ·ï¼Œä½¿ç”¨rootè´¦æˆ·ä¹Ÿå¯ä»¥ã€‚</p><pre><code>adduser git</code></pre><p>ä¿®æ”¹æ–‡ä»¶å†…å®¹èµ‹äºˆæƒé™</p><pre><code>chmod 740 /etc/sudoersnano /etc/sudoers</code></pre><p>æ‰¾åˆ°rootç”¨æˆ·é‚£ï¼Œåœ¨ä¸‹æ–¹æ·»åŠ ä¸€æ¡</p><pre><code>git ALL=(ALL) ALL</code></pre><p>å°†æ–‡ä»¶æƒé™æ¢å¤</p><pre><code>chmod 400 /etc/sudoers</code></pre><p>åˆ‡æ¢åˆ°gitç”¨æˆ·ï¼Œå¹¶åˆ›å»ºsshæ–‡ä»¶å¤¹</p><pre><code>su gitcd ~mkdir .sshcd .ssh</code></pre><p>ç”Ÿæˆå¯†é’¥å…¬é’¥å¹¶é…ç½®</p><pre><code>ssh-keygencp id_rsa.pub authorized_keyschmod 600 ~/.ssh/authorized_keyschmod 700 ~/.ssh</code></pre><p>é…ç½®å®Œæˆä¹‹åå¯ä»¥ä½¿ç”¨<code>ssh -v git@ip</code>è¿æ¥æµ‹è¯•</p><p>æ–°å»ºä»“åº“å¹¶è®¾ç½®é’©å­è„šæœ¬</p><pre><code>cd ~git init --bare blog.gitnano ~/blog.git/hooks/post-receive</code></pre><p>è¾“å…¥ä»¥ä¸‹å†…å®¹</p><pre><code>git --work-tree=/home/www/hexo --git-dir=/home/git/blog.git checkout -f</code></pre><p>/home/www/hexoä¸ºä½ åˆšåˆšåœ¨nginxçš„é…ç½®æ–‡ä»¶é‡Œçš„rootè·¯å¾„ï¼Œ/home/git/blog.gitä¸ºä½ çš„ä»“åº“åœ°å€</p><h4 id="hexoéƒ¨ç½²">hexoéƒ¨ç½²</h4><p>åœ¨ä½ çš„hexoåšå®¢ä¸‹çš„_config.ymlé…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹deployæ¨¡å—</p><pre class=" language-language-yml"><code class="language-language-yml">deploy:  type: git  repo: git@å…¬ç½‘IP:/home/git/blog.git    </code></pre><p>ä¿®æ”¹å®Œæˆä¹‹åè¿è¡Œ<code>hexo clean &amp;&amp; hexo deploy</code>éƒ¨ç½²ä½ çš„hexoåšå®¢å³å¯ã€‚</p><p>éƒ¨ç½²å®Œæˆä¹‹åï¼Œä½¿ç”¨/etc/init.d/nginx configtestæ£€æŸ¥ä¸€ä¸‹nginxçš„é…ç½®æ˜¯å¦æœ‰é—®é¢˜ï¼Œå¦‚æœæ²¡é—®é¢˜ï¼Œè¿è¡Œ<code>/etc/init.d/nginx restart</code>é‡å¯nginxæœåŠ¡å³å¯ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
          <category> ç¾åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
            <tag> git </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€æ¬¡steamä¸ªäººèµ„æ–™åŠ¨æ€è®¾ç½®</title>
      <link href="/2020/07/30/yi-ci-steam-ge-ren-zi-liao-dong-tai-she-zhi/"/>
      <url>/2020/07/30/yi-ci-steam-ge-ren-zi-liao-dong-tai-she-zhi/</url>
      
        <content type="html"><![CDATA[<h3 id="é¦–å…ˆæ”¾ä¸Šé¢„è§ˆå›¾">é¦–å…ˆæ”¾ä¸Šé¢„è§ˆå›¾</h3><p><a href="https://steamcommunity.com/profiles/76561198366411843" target="_blank" rel="noopener">https://steamcommunity.com/profiles/76561198366411843</a></p><h3 id="èµ„æ–™èƒŒæ™¯è®¾ç½®">èµ„æ–™èƒŒæ™¯è®¾ç½®</h3><p><strong>éœ€è¦steamç­‰çº§åˆ°è¾¾åçº§ï¼Œæ‹¥æœ‰è‡ªå·±çš„è‰ºæœ¯å±•æŸœã€‚</strong><br><strong>é¦–å…ˆéœ€è¦åœ¨steamçš„ç¤¾åŒº-å¸‚åœºè´­ä¹°è‡ªå·±æƒ³è¦çš„ä¸ªäººèµ„æ–™èƒŒæ™¯ï¼Œå½“ç„¶ç›®å‰å¤„äºå¤å­£ä¿ƒé”€ï¼Œå¯ä»¥é€šè¿‡ç‚¹æ•°è´­ä¹°æ¯”è¾ƒå¥½çœ‹çš„èƒŒæ™¯ã€‚å¦‚æœæ²¡æœ‰æ¸¸æˆçš„è¯ï¼Œå¯ä»¥å…ˆä¹°æ¸¸æˆï¼Œä¹°å®ŒèƒŒæ™¯ä¹‹ååœ¨é€€æ¬¾å°±å¥½äº†ã€‚</strong><br><strong>è¿™é‡Œç™»é™†ä¸ä¸Šå¸‚åœºéœ€è¦æŒ‚åŠ é€Ÿå™¨ï¼ŒUUåŠ é€Ÿå™¨çš„å…è´¹steamåŠ é€Ÿå°±å¯ä»¥ã€‚</strong><br><strong>æˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯Meteor Shower</strong><br><img src="https://steamcdn-a.akamaihd.net/steamcommunity/public/images/items/645690/06e52a6057125c91e4d88fd00e1f486bdee9a654.jpg" alt=""></p><h4 id="èµ„æ–™èƒŒæ™¯åˆ‡å‰²">èµ„æ–™èƒŒæ™¯åˆ‡å‰²</h4><p><a href="http://sapic.github.io/" target="_blank" rel="noopener">http://sapic.github.io/</a><br><strong>åœ¨å½“å‰é¡µé¢ä¸Šè¿›è¡Œsteamçš„ç™»å½•ï¼Œä»–ä¼šè‡ªåŠ¨æ£€ç´¢ä½ çš„åº“å­˜ä¸­çš„èƒŒæ™¯èµ„æ–™ï¼Œè‡ªå·±é€‰æ‹©å³å¯ã€‚</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200628231317.png" alt="ä¸‹è½½" title="ä¸‹è½½"><br><strong>è‡ªè¡Œä¸‹è½½å¯¹åº”çš„æ–‡ä»¶ç„¶åè§£å‹å°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ä¸‰ä¸ªæ–‡ä»¶ã€‚</strong></p><h4 id="PSè¿›è¡ŒåŠ¨æ€è®¾ç½®">PSè¿›è¡ŒåŠ¨æ€è®¾ç½®</h4><p><strong>é¦–å…ˆæ‰“å¼€é™æ€èƒŒæ™¯å›¾ç‰‡ï¼Œç„¶åè°ƒå‡ºæ—¶é—´è½´ï¼Œåˆ›å»ºå¸§åŠ¨ç”»ã€‚</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200628231525.png" alt="é™æ€å›¾ç‰‡" title="é™æ€å›¾ç‰‡"><br><strong>å¯¼å…¥ä½ è‡ªå·±çš„åŠ¨æ€å›¾ç‰‡ï¼Œç„¶åé€‰æ‹©æ‰€æœ‰å¸§ä¹‹åï¼Œåœ¨é€‰æ‹©æ‹·è´æ‰€æœ‰å¸§ã€‚</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200628231735.png" alt="é€‰æ‹©æ‰€æœ‰å¸§" title="é€‰æ‹©æ‰€æœ‰å¸§"><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200628231748.png" alt="æ‹·è´æ‰€æœ‰å¸§" title="æ‹·è´æ‰€æœ‰å¸§"><br><strong>é€‰æ‹©é™æ€èƒŒæ™¯ï¼Œç²˜è´´æ‰€æœ‰çš„å¸§ï¼Œå¹¶ç½®äºå›¾å±‚ä¹‹ä¸Š</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200628231911.png" alt="ç²˜è´´æ‰€æœ‰å¸§" title="ç²˜è´´æ‰€æœ‰å¸§"><br><img src="http://144.202.57.217:8080/uploadImages/63ac0df5b0ee466e83c0945faa381be8.png" alt="å›¾å±‚ä¹‹ä¸Š" title="å›¾å±‚ä¹‹ä¸Š"><br><strong>è°ƒæ•´åŠ¨ç”»ä½ç½®ï¼Œè®¾ç½®åŠ¨ç”»å¾ªç¯ï¼Œå¯¼å‡ºå³å¯ã€‚</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200628232116.png" alt="å¾ªç¯" title="å¾ªç¯"><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200628232133.png" alt="å¯¼å‡º" title="å¯¼å‡º"><br><strong>é¢„è§ˆæ²¡æœ‰é—®é¢˜ï¼Œå¯¼å‡ºå³å¯ã€‚æ³¨æ„gifçš„å¤§å°ä¸åº”è¶…è¿‡8M</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200628232148.png" alt="ä¿å­˜" title="ä¿å­˜"></p><h4 id="èƒŒæ™¯èµ„æ–™ä¸Šä¼ ">èƒŒæ™¯èµ„æ–™ä¸Šä¼ </h4><p><a href="https://steamcommunity.com/login/home/?goto=%2Fsharedfiles%2Fedititem%2F767%2F3%2F" target="_blank" rel="noopener">https://steamcommunity.com/login/home/?goto=%2Fsharedfiles%2Fedititem%2F767%2F3%2F</a><br><strong>æ‰“å¼€ç½‘é¡µç‰ˆçš„steamè¿›è¡ŒèƒŒæ™¯ä¸Šä¼ ã€‚</strong><br><strong>è‰ºæœ¯ä½œå“çš„åå­—ä¸ºç©ºï¼Œé˜²æ­¢ä¸Šä¼ å®Œæˆä¹‹åå‡ºç°åå­—ã€‚ç›´æ¥å¤åˆ¶å³å¯ã€‚</strong><br><code>â¡â¡â¡â€ƒâ¡â </code><br><strong>ä¸Šä¼ è‡ªå·±çš„é™¤äº†å¤´åƒå¤–çš„å…¶ä»–ä¸¤å¼ å›¾ç‰‡ï¼Œä¾§è¾¹å’Œè‡ªå·±çš„gifã€‚å›¾ç‰‡éœ€è¦ä¸€å¼ ä¸€å¼ ä¼ </strong><br><strong>æ³¨æ„</strong><br><strong>ä¸Šä¼ å®Œå›¾ç‰‡å’Œæ·»åŠ å®Œåå­—åï¼Œæ‰“å¼€ç½‘é¡µçš„consoleæ§åˆ¶å°ã€‚chromeå³é”®æ£€æŸ¥å³å¯ã€‚è¾“å…¥ä»¥ä¸‹ä»£ç ã€‚</strong></p><pre class=" language-language-javascript"><code class="language-language-javascript">var num= document.getElementsByName("image_width")[0].value;document.getElementsByName("image_height")[0].value = num-(num-1);document.getElementsByName("image_width")[0].value= num*100;</code></pre><p><strong>è¿™é‡Œä»£ç çš„è¿è¡Œç»“æœä¸ä¸º0å³å¯ï¼Œä¸º0çš„è¯é‡å¤è¿è¡Œã€‚</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200628232812.png" alt="ä»£ç " title="ä»£ç "></p><h4 id="å±•æŸœè®¾ç½®">å±•æŸœè®¾ç½®</h4><p><strong>é€‰æ‹©åˆšåˆšä¸Šä¼ çš„å›¾ç‰‡ä¿å­˜å³å¯ã€‚</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200628232908.png" alt="è‰ºæœ¯å±•æŸœ" title="è‰ºæœ¯å±•æŸœ"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æ¸¸æˆ </category>
          
          <category> ç¾åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> steam </tag>
            
            <tag> ps </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡æœåŠ¡å™¨éƒ¨ç½²å†…å®¹</title>
      <link href="/2020/07/28/ji-yi-ci-fu-wu-qi-bu-shu-nei-rong/"/>
      <url>/2020/07/28/ji-yi-ci-fu-wu-qi-bu-shu-nei-rong/</url>
      
        <content type="html"><![CDATA[<hr><p><strong>ç”±äºç›®å‰å›½å†…çš„åŸŸåéœ€è¦å¤‡æ¡ˆï¼Œå› æ­¤è´­ä¹°å›½å¤–çš„åŸŸåï¼ŒåŒæ—¶ç”±äºå›½å¤–çš„åŸŸåè§£æåˆ°å›½å†…çš„æœåŠ¡å™¨ä¹Ÿéœ€è¦å¤‡æ¡ˆï¼Œå› æ­¤æœåŠ¡å™¨ä¹Ÿä½¿ç”¨å›½å¤–çš„ï¼Œå½“ç„¶ï¼Œéœ€è¦ä¸€ä¸ªå¤‡æ¡ˆçš„å›½å†…åŸŸåç”¨äºä¸ƒç‰›CDNä½¿ç”¨ã€‚</strong></p><h1>1.æœåŠ¡å™¨åŸŸåé€‰æ‹©</h1><p><strong>ä¹‹å‰ä¸€ç›´ç”¨çš„æ¬ç“¦å·¥çš„æœåŠ¡å™¨ï¼Œä½†æ˜¯ç°åœ¨æ¬ç“¦å·¥çš„æœåŠ¡å™¨é…ç½®é«˜äº†ï¼Œä»·æ ¼å¾ˆè´µï¼Œä¸æ˜¯å¾ˆåˆ’ç®—ï¼Œäºæ˜¯å°±ç”¨äº†vultrçš„æœåŠ¡å™¨ï¼Œäº”ç¾å…ƒä¸€ä¸ªæœˆï¼Œä»·æ ¼è¿˜å¯ä»¥ï¼Œé™¤äº†å»ºç«™ä¹‹å¤–ï¼Œå½“ä½œæ¢¯å­ä¹Ÿæ˜¯åˆ’ç®—çš„ã€‚<br>vultrçš„å¹³å°éœ€è¦å…ˆå……å€¼ï¼Œæœ€ä½é¢åº¦åç¾å…ƒï¼Œæ”¯æŒæ”¯ä»˜å®ä»˜æ¬¾è¿˜æ˜¯å¯ä»¥çš„ã€‚</strong></p><h2 id="1-1-æœåŠ¡å™¨è´­ä¹°">1.1 æœåŠ¡å™¨è´­ä¹°</h2><p><img src="http://dingdm.online/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%89%E6%8B%A9.png" alt=""><br><strong>æœåŠ¡å™¨ç±»å‹é€‰æ‹©Cloud Computeå°±å¯ä»¥ï¼Œç”¨æ¥ä¸ªäººéœ€æ±‚ç»°ç»°æœ‰ä½™ã€‚</strong><br><img src="http://dingdm.online/fuwuqixuanze" alt=""><br><strong>å›½å®¶åŠåŸå¸‚æ ¹æ®è‡ªå·±éœ€æ±‚é€‰æ‹©å°±å¯ä»¥ã€‚<br>æœåŠ¡å™¨æ“ä½œç³»ç»Ÿæˆ‘æ¨èUbuntu16.04</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200624211528.png" alt=""><br><strong>å…¶ä»–é»˜è®¤å°±å¥½ï¼Œè´­ä¹°å®Œæˆå°±ä¼šçœ‹åˆ°è‡ªå·±çš„æœåŠ¡å™¨</strong></p><h3 id="1-1-1">1.1.1</h3><p><strong>è¿™é‡Œæ¨èä¸¤ä¸ªè½¯ä»¶ï¼Œsmarrtyç”¨äºè¿œç¨‹è¿æ¥ï¼ŒFilezillaç”¨äºå‘æœåŠ¡å™¨ä¼ è¾“æ–‡ä»¶ã€‚<br>å®‰è£…åŒ…æˆ‘æ”¾åœ¨èµ„æºé‡Œé¢ï¼Œå¯ä»¥åœ¨ä¸‹è½½ä¸­è‡ªè¡Œä¸‹è½½ã€‚</strong></p><h2 id="1-2-åŸŸåè´­ä¹°">1.2 åŸŸåè´­ä¹°</h2><p><strong>åŸŸåè´­ä¹°æˆ‘æ¨ènameSiloï¼Œä¸å¿…è¦è´­ä¹°ç‰¹åˆ«è´µçš„ï¼Œè‡ªå·±å¯ä»¥ä½¿ç”¨çš„å°±å¥½<br>è´­ä¹°æ—¶æŒ‚æ¢¯å­åº”è¯¥æ‰“å¼€ä¼šå¿«ä¸€ç‚¹</strong><br><strong>å®˜æ–¹ç½‘å€<br><a href="https://www.namesilo.com/" target="_blank" rel="noopener">https://www.namesilo.com/</a><br>æœç´¢è‡ªå·±æƒ³è¦çš„åŸŸåï¼Œç„¶åè¿›è¡Œè´­ä¹°</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200624220852.png" alt=""><br><strong>é€‰æ‹©ç¬¬ä¸€ä¸ªå°±å¯ä»¥äº†</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200624220934.png" alt=""><br><strong>é€‰æ‹©å¯¹åº”çš„é…ç½®å’Œä¼˜æƒ ç ï¼Œä¼˜æƒ ç ç™¾åº¦ä¸€ä¸‹ï¼Œå¾ˆå¤šçš„ï¼ŒåŸºæœ¬éƒ½æ˜¯å‡ä¸€ç¾å…ƒ</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200624221137.png" alt=""></p><h3 id="1-2-1-åŸŸåè§£æ">1.2.1 åŸŸåè§£æ</h3><p><strong>åŸŸåè´­ä¹°å®Œæˆä¹‹åï¼Œç‚¹å‡»manage my domainsè¿›å…¥è‡ªå·±çš„åŸŸåç®¡ç†é¡µé¢</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200624221243.png" alt=""><br><strong>ä¸‹é¢æ˜¾ç¤ºçš„å°±æ˜¯ä½ åˆšåˆšè´­ä¹°çš„åŸŸåï¼Œç„¶åç‚¹å‡»è“è‰²çš„å°çƒï¼Œdnsè®¾ç½®</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200624221256.png" alt=""><br><strong>è¿›å…¥åˆ°åŸŸåè§£æé¡µé¢ä½ ä¼šçœ‹åˆ°äº”æ¡è®°å½•ï¼Œå°†ç¬¬ä¸‰æ¡å’Œç¬¬å››æ¡åˆ æ‰ï¼Œç„¶åç¼–è¾‘ç¬¬ä¸€æ¡å’Œç¬¬äºŒæ¡ã€‚<br>ç¬¬ä¸€æ¡ç¼–è¾‘çš„æ—¶å€™åœ¨ipv4æ è¾“å…¥ä½ çš„æœåŠ¡å™¨ipåœ°å€<br>ç¬¬äºŒæ¡ç¼–è¾‘çš„æ—¶å€™åœ¨1çš„åŸºç¡€ä¸Šè¿˜è¦åœ¨hostnameè¾“å…¥www</strong><br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200624221324.png" alt=""></p><p><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200624221337.png" alt=""></p><h1>2.æœåŠ¡å™¨é…ç½®åŠéƒ¨ç½²</h1><h2 id="2-1-æœåŠ¡å™¨é…ç½®">2.1 æœåŠ¡å™¨é…ç½®</h2><h3 id="2-1-1-javaç¯å¢ƒå®‰è£…">2.1.1 javaç¯å¢ƒå®‰è£…</h3><p><strong>ç”±äºæˆ‘çš„é¡¹ç›®æ˜¯åŸºäºjavaå¼€å‘çš„ï¼Œæ‰€ä»¥å®‰è£…Javaç¯å¢ƒã€‚</strong><br><strong>é¦–å…ˆå¸è½½ä¹‹å‰å®‰è£…æˆ–å‚ä¸çš„é¡¹ï¼Œå¦‚æœæ²¡æœ‰è¯·å¿½ç•¥</strong><br><code>apt-get remove openjdk</code><br><strong>å¯ä»¥é€šè¿‡Oracleå®˜ç½‘ä¸‹è½½å¯¹åº”çš„jdkå’Œåœ¨çº¿å®‰è£…ä¸¤ç§æ–¹å¼è¿›è¡Œå®‰è£…</strong><br><strong>å¯ä»¥é€šè¿‡<code>apt install openjdk-8-jdk</code>çš„æ–¹å¼åœ¨çº¿å®‰è£…<br>ä¹Ÿå¯ä»¥é€šè¿‡https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html<br>å®˜ç½‘ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬çš„jdkè¿›è¡Œè§£å‹å®‰è£…</strong></p><h4 id="2-1-1-1-é…ç½®ç¯å¢ƒå˜é‡">2.1.1.1 é…ç½®ç¯å¢ƒå˜é‡</h4><p><code>vim  ~/.bashrc</code><strong>ä¹Ÿå¯ä»¥ä½¿ç”¨nanoæˆ–vi å¦‚æœæœªå®‰è£…vim</strong><br><strong>æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹</strong></p><pre class=" language-language-shell"><code class="language-language-shell">export JAVA_HOME=/usr/local/jdk1.8.0_211export JRE_HOME=${JAVA_HOME}/jreexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/libexport PATH=.:${JAVA_HOME}/bin:$PATH</code></pre><p><strong>è®°å¾—æ›´æ¢ä¸ºè‡ªå·±æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„</strong><br><strong>ä¿å­˜å˜é‡å¹¶æ›´æ–°åº”ç”¨</strong><br><code>source ~/.bashrc</code><br><strong>ä½¿ç”¨</strong><code>java -version</code><strong>æŸ¥çœ‹è‡ªå·±çš„javaç‰ˆæœ¬å³å¯</strong></p><h3 id="2-1-2-dockerå®‰è£…">2.1.2 dockerå®‰è£…</h3><p><strong>ç”±äºé¡¹ç›®ä½¿ç”¨åˆ°çš„redisï¼Œrabbitmqï¼Œmongodbéƒ½æ˜¯åŸºäºdockerå®¹å™¨çš„ï¼Œå› æ­¤å…ˆè¿›è¡Œé…ç½®ã€‚</strong><br><strong>å¸è½½å­˜åœ¨çš„dockerçš„æ—§ç‰ˆæœ¬</strong><br><code>apt-get remove docker docker-engine docker-ce docker.io</code><br><strong>æ›´æ–°aptåŒ…</strong><br><code>apt-get update</code><br><strong>å®‰è£…ä»¥ä¸‹åŒ…é€šè¿‡httpsä½¿ç”¨å­˜å‚¨åº“</strong><br><code>apt-get install -y apt-transport-https ca-certificates curl software-properties-common</code><br><strong>æ·»åŠ dockerçš„GPGå¯†é’¥</strong><br><code>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</code><br><strong>è®¾ç½®stableå­˜å‚¨åº“</strong><br><code>add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"</code><br><strong>æ›´æ–°aptåŒ…</strong><br><code>apt-get update</code><br><strong>å®‰è£…docker</strong><br><code>apt-get install -y docker-ce</code><br><strong>éªŒè¯æœåŠ¡æ˜¯å¦å¯åŠ¨</strong><br><code>systemctl status docker</code><br><strong>dockeræœªå¯åŠ¨ï¼Œåˆ™æ‰‹åŠ¨å¯åŠ¨docker</strong><br><code>systemctl start docker</code><br><strong>dockerå®‰è£…å®Œæˆ</strong></p><h4 id="2-1-2-1-dockerå®‰è£…mongodb">2.1.2.1 dockerå®‰è£…mongodb</h4><p><strong>ä¸‹è½½é•œåƒ</strong><br><code>docker pull registry.docker-cn.com/library/mongo</code><br><strong>åˆ›å»ºæ•°æ®æ–‡ä»¶å¤¹</strong><br><code>mkdir /data/mongodb0</code><br><strong>å¯åŠ¨å®¹å™¨</strong><br><code>docker run --name mongodb-server0 -v /data/mongodb0:/data/db -p 27017:27017 -d é•œåƒID --auth</code><br><strong>-våé¢çš„å‚æ•°è¡¨ç¤ºæŠŠæ•°æ®æ–‡ä»¶æŒ‚è½½åˆ°å®¿ä¸»æœºçš„è·¯å¾„<br>-pæŠŠmongoç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„æŒ‡å®šç«¯å£<br>â€“authè¡¨ç¤ºè¿æ¥mongodbéœ€è¦æˆæƒ</strong></p><h4 id="2-1-2-2-dockerå®‰è£…redis">2.1.2.2 dockerå®‰è£…redis</h4><p><strong>æ‹‰å–é•œåƒ</strong><br><code>docker pull redis</code><br><strong>å¯åŠ¨é•œåƒ</strong><br><code>docker run -p 6379:6379 -d redis:latest redis-server</code><br><strong>-p 6379:6379 : å°†å®¹å™¨çš„6379ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„6379ç«¯å£<br>-v $PWD/data:/data : å°†ä¸»æœºä¸­å½“å‰ç›®å½•ä¸‹çš„dataæŒ‚è½½åˆ°å®¹å™¨çš„/data<br>redis-server --appendonly yes : åœ¨å®¹å™¨æ‰§è¡Œredis-serverå¯åŠ¨å‘½ä»¤ï¼Œå¹¶æ‰“å¼€redisæŒä¹…åŒ–é…ç½®</strong><br><strong>dockerçš„ç›¸å…³å‘½ä»¤åœ¨å…¶ä»–ç¬”è®°ä¸­å·²ç»è¯´æ˜è¿‡</strong><br><strong>redisçš„æ“ä½œè½¯ä»¶åœ¨é™„ä»¶ä¸­ä¹Ÿå·²ç»ä¸Šä¼ ï¼Œå¯ä»¥è‡ªè¡Œä¸‹è½½</strong></p><h4 id="2-1-2-3-dockerå®‰è£…rabbitMq">2.1.2.3 dockerå®‰è£…rabbitMq</h4><p><strong>æ‹‰å–é•œåƒ</strong><br><code>docker pull rabbitmq:management</code><br><strong>è¿è¡Œé•œåƒ</strong><br><code>docker run -d -p 5672:5672 -p 15672:15672 --name rabbitmq rabbitmq:management</code><br><strong>è®¿é—®ç®¡ç†é¡µé¢<br>http://[å®¿ä¸»æœºIP]:15672</strong></p><h3 id="2-1-3-nginxå®‰è£…">2.1.3 nginxå®‰è£…</h3><p><strong>å› ä¸ºæˆ‘ä½¿ç”¨äº†ä¸¤ä¸ªåŸŸåï¼Œä¸€ä¸ªä¸º8080ç«¯å£ï¼Œä¸€ä¸ªä¸º8060ç«¯å£ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨nginxæ¥è¿›è¡Œç«¯å£çš„è½¬å‘ã€‚</strong><br>å®‰è£…nginx<br><code>apt-get install nginx</code><br><strong>å®‰è£…å¥½ä»¥åï¼Œnginxé»˜è®¤å®‰è£…ä½ç½®åœ¨etcç›®å½•ä¸‹ï¼Œè¿™é‡Œæˆ‘åœ¨ä½¿ç”¨çš„æ—¶å€™å‡ºç°äº†nginxæ–‡ä»¶é™åˆ¶çš„é—®é¢˜ï¼Œå› æ­¤åœ¨è¿™é‡Œç»Ÿä¸€è¿›è¡Œè¯´æ˜ã€‚<br>åœ¨nginxä¸‹çš„nginx.confé…ç½®æ–‡ä»¶ä¸­çš„httpæ®µå¯¹æ–‡ä»¶å¤§å°è¿›è¡Œè®¾ç½®ã€‚</strong><br><code>client_max_body_size 100m;</code><br><strong>åœ¨sites-availableä¸‹è¿›è¡Œå¯¹åº”çš„ç«¯å£è½¬å‘é…ç½®</strong></p><pre class=" language-language-shell"><code class="language-language-shell">server {listen 80 default_server;listen [::]:80 default_server;root /var/www/html;index index.html index.htm index.nginx-debian.html;server_name dinggc.info;location / {      proxy_set_header   X-Real-IP        $remote_addr;      proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;      proxy_set_header   Host             $http_host;      proxy_set_header   Upgrade          $http_upgrade;      proxy_set_header   X-NginX-Proxy    true;      proxy_set_header   Connection "upgrade";      proxy_http_version 1.1;      proxy_pass         http://localhost:8080;   }}</code></pre><pre class=" language-language-shell"><code class="language-language-shell">server {listen 80;   # ä¿®æ”¹ä¸ºä½ çš„åŸŸå   server_name dinggc.online;   location / {      proxy_set_header   X-Real-IP        $remote_addr;      proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;      proxy_set_header   Host             $http_host;      proxy_set_header   Upgrade          $http_upgrade;      proxy_set_header   X-NginX-Proxy    true;      proxy_set_header   Connection "upgrade";      proxy_http_version 1.1;      proxy_pass         http://localhost:8060;   }}</code></pre><p><strong>ä½¿ç”¨</strong><code>/etc/init.d/nginx configtest</code><strong>è¿›è¡Œé…ç½®æµ‹è¯•å¦‚æœæˆåŠŸåˆ™ä½¿ç”¨</strong><code>/etc/init.d/nginx reload</code><strong>é‡å¯nginxå³å¯</strong><br><strong>è‡³æ­¤ï¼Œç›¸å…³çš„æœåŠ¡å™¨é…ç½®å®‰è£…å®Œæˆã€‚</strong></p><h1>3 é¡¹ç›®éƒ¨ç½²</h1><p><strong>ä½¿ç”¨filezillaè½¯ä»¶å°†ç›¸å…³æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¹‹ååœ¨çº¿è¿è¡Œå³å¯ã€‚<br>è‹¥ä½¿ç”¨nohupåå°è¿è¡Œçš„è¯ï¼Œæ³¨æ„ä¸è¦ç›´æ¥å…³æ‰smarttyï¼Œè€Œåº”è¯¥ä½¿ç”¨exitå‘½ä»¤é€€å‡ºå‘½ä»¤è¡Œã€‚</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
            <tag> ubuntu </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springbootçš„å¯åŠ¨æµç¨‹</title>
      <link href="/2020/07/28/springboot-de-qi-dong-liu-cheng/"/>
      <url>/2020/07/28/springboot-de-qi-dong-liu-cheng/</url>
      
        <content type="html"><![CDATA[<h3 id="spring-bootçš„å¯åŠ¨æµç¨‹å›¾">spring bootçš„å¯åŠ¨æµç¨‹å›¾</h3><p><img src="http://dingdm.online/qidongliucheng.png" alt="å¯åŠ¨æµç¨‹å›¾" title="å¯åŠ¨æµç¨‹å›¾"><br><strong>springbootçš„æµç¨‹å¯åŠ¨ä¸»è¦ä¸ºä¸‰ä¸ªéƒ¨åˆ†</strong></p><ul><li>SpringApplicationçš„åˆå§‹åŒ–ï¼Œé…ç½®åŸºç¡€çš„ç¯å¢ƒå˜é‡ï¼Œæ„é€ å™¨ï¼Œç›‘å¬å™¨ç­‰ã€‚</li><li>æµç¨‹å¯åŠ¨ï¼Œä¸»è¦ä¸ºå¯åŠ¨æµç¨‹çš„ç›‘å¬ï¼ŒåŠ è½½é…ç½®ç¯å¢ƒï¼Œåˆ›å»ºä¸Šä¸‹æ–‡</li><li>è‡ªåŠ¨åŒ–é…ç½®</li></ul><p><strong>springbootçš„ä¸»å¯åŠ¨ç±»å…¥å£</strong></p><pre class=" language-language-java"><code class="language-language-java">@SpringBootApplication(exclude = SecurityAutoConfiguration.class)@MapperScan(value = "cn.dingdm.website.mapper")@EnableCachingpublic class WebsiteApplication {    public static void main(String[] args) {        SpringApplication.run(WebsiteApplication.class, args);    }}</code></pre><p><strong>SpringBootApplicationæ³¨è§£è¯¦è§£</strong></p><pre class=" language-language-java"><code class="language-language-java">@Target({ElementType.TYPE}) //æ³¨è§£çš„é€‚ç”¨èŒƒå›´ï¼Œå…¶ä¸­TYPEç”¨äºæè¿°ç±»ã€æ¥å£ï¼ˆåŒ…æ‹¬åŒ…æ³¨è§£ç±»å‹ï¼‰æˆ–enumå£°æ˜@Retention(RetentionPolicy.RUNTIME) // æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¿ç•™åˆ°classæ–‡ä»¶ä¸­ï¼ˆä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸï¼‰@Documented // è¡¨æ˜è¿™ä¸ªæ³¨è§£åº”è¯¥è¢«javadocè®°å½•@Inherited // å­ç±»å¯ä»¥ç»§æ‰¿è¯¥æ³¨è§£@SpringBootConfiguration // ç»§æ‰¿äº†Configurationï¼Œè¡¨ç¤ºå½“å‰æ˜¯æ³¨è§£ç±»@EnableAutoConfiguration // å¼€å¯springbootçš„æ³¨è§£åŠŸèƒ½ï¼Œspringbootçš„å››å¤§ç¥å™¨ä¹‹ä¸€ï¼Œå…¶å€ŸåŠ©@importçš„å¸®åŠ©@ComponentScan( // æ‰«æè·¯å¾„è®¾ç½®    excludeFilters = {@Filter(    type = FilterType.CUSTOM,    classes = {TypeExcludeFilter.class}), @Filter(    type = FilterType.CUSTOM,    classes = {AutoConfigurationExcludeFilter.class})})public @interface SpringBootApplication {</code></pre><p><strong>ElementTypeæšä¸¾ç±»</strong></p><pre class=" language-language-java"><code class="language-language-java">public enum ElementType {    TYPE,    FIELD,    METHOD,    PARAMETER,    CONSTRUCTOR,    LOCAL_VARIABLE,    ANNOTATION_TYPE,    PACKAGE,    TYPE_PARAMETER,    TYPE_USE}</code></pre><p><strong>ç”Ÿå‘½å‘¨æœŸæšä¸¾ç±»</strong></p><pre class=" language-language-java"><code class="language-language-java">public enum RetentionPolicy {    SOURCE,    CLASS,    RUNTIME}</code></pre><p><strong>1ã€RetentionPolicy.SOURCEï¼šæ³¨è§£åªä¿ç•™åœ¨æºæ–‡ä»¶ï¼Œå½“Javaæ–‡ä»¶ç¼–è¯‘æˆclassæ–‡ä»¶çš„æ—¶å€™ï¼Œæ³¨è§£è¢«é—å¼ƒï¼›<br>2ã€RetentionPolicy.CLASSï¼šæ³¨è§£è¢«ä¿ç•™åˆ°classæ–‡ä»¶ï¼Œä½†jvmåŠ è½½classæ–‡ä»¶æ—¶å€™è¢«é—å¼ƒï¼Œè¿™æ˜¯é»˜è®¤çš„ç”Ÿå‘½å‘¨æœŸï¼›<br>3ã€RetentionPolicy.RUNTIMEï¼šæ³¨è§£ä¸ä»…è¢«ä¿å­˜åˆ°classæ–‡ä»¶ä¸­ï¼ŒjvmåŠ è½½classæ–‡ä»¶ä¹‹åï¼Œä»ç„¶å­˜åœ¨ï¼›</strong><br><strong>é¦–å…ˆè¦æ˜ç¡®ç”Ÿå‘½å‘¨æœŸé•¿åº¦&nbsp;SOURCE &lt; CLASS &lt; RUNTIME ï¼Œæ‰€ä»¥å‰è€…èƒ½ä½œç”¨çš„åœ°æ–¹åè€…ä¸€å®šä¹Ÿèƒ½ä½œç”¨ã€‚ä¸€èˆ¬å¦‚æœéœ€è¦åœ¨è¿è¡Œæ—¶å»åŠ¨æ€è·å–æ³¨è§£ä¿¡æ¯ï¼Œé‚£åªèƒ½ç”¨&nbsp;RUNTIME æ³¨è§£ï¼›å¦‚æœè¦åœ¨ç¼–è¯‘æ—¶è¿›è¡Œä¸€äº›é¢„å¤„ç†æ“ä½œï¼Œæ¯”å¦‚ç”Ÿæˆä¸€äº›è¾…åŠ©ä»£ç ï¼ˆå¦‚&nbsp;ButterKnifeï¼‰ï¼Œå°±ç”¨&nbsp;CLASSæ³¨è§£ï¼›å¦‚æœåªæ˜¯åšä¸€äº›æ£€æŸ¥æ€§çš„æ“ä½œï¼Œæ¯”å¦‚&nbsp;@Override å’Œ&nbsp;@SuppressWarningsï¼Œåˆ™å¯é€‰ç”¨&nbsp;SOURCE æ³¨è§£ã€‚</strong></p><table><thead><tr><th>æ³¨è§£</th><th>çˆ¶ç±»</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>SpringBootConfiguration</td><td>Configuration</td><td>æ ‡æ³¨å½“å‰ç±»æ˜¯Java configé…ç½®ç±»ï¼Œä¼šè¢«æ‰«æå¹¶åŠ è½½åˆ°iocå®¹å™¨</td></tr><tr><td>ComponentScan</td><td></td><td>æ‰«æé»˜è®¤åŒ…æˆ–æŒ‡å®šåŒ…ä¸‹é¢ç¬¦åˆæ¡ä»¶çš„ç»„ä»¶å¹¶åŠ è½½</td></tr><tr><td>EnableAutoConfiguration</td><td></td><td>ä»classpathä¸­æœå¯»æ‰€æœ‰çš„META-INF/spring.factoriesé…ç½®æ–‡ä»¶ï¼Œå¹¶å°†å…¶ä¸­org.springframework.boot.autoconfig.EnableAutoConfigurationå¯¹åº”çš„é…ç½®é¡¹é€šè¿‡åå°„å®ä¾‹åŒ–ä¸ºå¯¹åº”çš„æ ‡æ³¨äº†@Configurationçš„java configå½¢å¼çš„iocå®¹å™¨é…ç½®ç±»ï¼Œæ±‡æ€»å¹¶åŠ è½½åˆ°iocå®¹å™¨</td></tr><tr><td></td><td>@AutoConfigurationPackages</td><td>æ³¨å†Œå½“å‰ä¸»ç¨‹åºç±»çš„åŒçº§ä»¥åŠå­çº§çš„åŒ…ä¸­çš„ç¬¦åˆæ¡ä»¶çš„Beançš„å®šä¹‰</td></tr><tr><td></td><td>@Import(AutoConfigurationImportSelector.class)</td><td>æ‰«æå„ä¸ªç»„ä»¶jar META-INIFç›®å½•ä¸‹çš„spring.dactoriesæ–‡ä»¶ï¼Œå°†ä¸‹é¢çš„åŒ…å.ç±»åä¸­çš„å·¥å‚ç±»å…¨éƒ¨åŠ è½½åˆ°IOCå®¹å™¨ä¸­ï¼›å°†æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„beançš„å®šä¹‰åŠ è½½åˆ°iocå®¹å™¨ä¸­</td></tr></tbody></table><h3 id="springbootå¯åŠ¨">springbootå¯åŠ¨</h3><p><strong>æ‰§è¡Œä¸»å‡½æ•°mainæ–¹æ³•</strong><br><img src="http://dingdm.online/main.png" alt="mainå‡½æ•°" title="mainå‡½æ•°"><br><strong>åˆ›å»ºSpringApplicationå¯¹è±¡å¯¹è±¡ï¼Œå¹¶è¿è¡ŒSpringApplicationå¯¹è±¡çš„runæ–¹æ³•</strong><br><img src="http://dingdm.online/chuangjianduixiang.png" alt="åˆ›å»ºå¯¹è±¡" title="åˆ›å»ºå¯¹è±¡"><br><strong>åŠ è½½æ¥å£</strong><br><img src="http://dingdm.online/jiazaijiekou.png" alt="åŠ è½½æ¥å£" title="åŠ è½½æ¥å£"></p><pre class=" language-language-java"><code class="language-language-java">        this.primarySources = new LinkedHashSet(Arrays.asList(primarySources));        this.webApplicationType = this.deduceWebApplicationType();       // æ‰«æå½“å‰è·¯å¾„ä¸‹META-INF/spring.factoriesæ–‡ä»¶çš„ï¼ŒåŠ è½½ApplicationContextInitializeræ¥å£å®ä¾‹    this.setInitializers(this.getSpringFactoriesInstances(ApplicationContextInitializer.class));// æ‰«æå½“å‰è·¯å¾„ä¸‹META-INF/spring.factoriesæ–‡ä»¶çš„ï¼ŒåŠ è½½ApplicationListeneræ¥å£å®ä¾‹        this.setListeners(this.getSpringFactoriesInstances(ApplicationListener.class));        this.mainApplicationClass = this.deduceMainApplicationClass();</code></pre><p><strong>ApplicationContextInitializer è¿™ä¸ªç±»å½“springbootä¸Šä¸‹æ–‡Contextåˆå§‹åŒ–å®Œæˆåä¼šè°ƒç”¨<br>ApplicationListener å½“springbootå¯åŠ¨æ—¶äº‹ä»¶changeåéƒ½ä¼šè§¦å‘</strong><br><strong>è¿™ä¸¤ä¸ªæ¥å£å‡å¯è‡ªå·±è¿›è¡Œå®šä¹‰</strong><br><strong>å®ç°æ¥å£åè‡ªå·±é…ç½®è‡ªå·±çš„å®ç°ç±»</strong></p><pre class=" language-language-java"><code class="language-language-java">org.springframework.context.ApplicationContextInitializer=\org.admin.starter.test.listener.StarterApplicationContextInitializerorg.springframework.context.ApplicationListener=\org.admin.starter.test.listener.StarterApplicationListener</code></pre><p><strong>å®ç°runæ–¹æ³•</strong><br><img src="http://dingdm.online/run.png" alt="runæ–¹æ³•" title="runæ–¹æ³•"></p><pre class=" language-language-java"><code class="language-language-java">public ConfigurableApplicationContext run(String... args) {        // è®¡æ—¶å™¨StopWatch stopWatch = new StopWatch();stopWatch.start();ConfigurableApplicationContext context = null;Collection<SpringBootExceptionReporter> exceptionReporters = new ArrayList<>();        // è®¾ç½®ç¯å¢ƒå˜é‡        configureHeadlessProperty();        // è·å–äº‹ä»¶ç›‘å¬å™¨SpringApplicationRunListenerç±»å‹ï¼Œå¹¶ä¸”æ‰§è¡Œstarting()æ–¹æ³•SpringApplicationRunListeners listeners = getRunListeners(args);listeners.starting();try {            // å‚æ•°argså°è£…æˆDefaultApplicationArgumentsApplicationArguments applicationArguments = new DefaultApplicationArguments(args);            // æŠŠç¯å¢ƒè·Ÿspringä¸Šä¸‹æ–‡ç»‘å®šå¥½ï¼Œå¹¶ä¸”æ‰§è¡ŒenvironmentPrepared()æ–¹æ³•ConfigurableEnvironment environment = prepareEnvironment(listeners,applicationArguments);            // åˆ¤æ–­ä¸€äº›ç¯å¢ƒçš„å€¼ï¼Œè®¾ç½®ä¸€äº›ç¯å¢ƒçš„å€¼configureIgnoreBeanInfo(environment);            // æ‰“å°bannerBanner printedBanner = printBanner(environment);            // æ ¹æ®é¡¹ç›®ç±»å‹åˆ›å»ºä¸Šä¸‹æ–‡context = createApplicationContext();            // è·å–å¼‚å¸¸æŠ¥å‘Šäº‹ä»¶ç›‘å¬exceptionReporters = getSpringFactoriesInstances(SpringBootExceptionReporter.class,new Class[] { ConfigurableApplicationContext.class }, context);            // å‡†å¤‡ä¸Šä¸‹æ–‡ï¼Œæ‰§è¡Œå®Œæˆåè°ƒç”¨contextPrepared()æ–¹æ³•,contextLoaded()æ–¹æ³•prepareContext(context, environment, listeners, applicationArguments,printedBanner);            // springå¯åŠ¨çš„ä»£ç ï¼Œè¿™é‡Œå°±å›å»é‡Œé¢å°±å›å»æ‰«æå¹¶ä¸”åˆå§‹åŒ–å•å®åˆ—beanäº†            // è¿™ä¸ªrefreshContext()åŠ è½½äº†beanï¼Œå¯åŠ¨äº†å†…ç½®webå®¹å™¨refreshContext(context);afterRefresh(context, applicationArguments);stopWatch.stop();if (this.logStartupInfo) {new StartupInfoLogger(this.mainApplicationClass).logStarted(getApplicationLog(), stopWatch);}           // æ‰§è¡ŒApplicationRunListenersä¸­çš„started()æ–¹æ³•listeners.started(context);            <!--æ‰§è¡ŒRunnerï¼ˆApplicationRunnerå’ŒCommandLineRunnerï¼‰-->callRunners(context, applicationArguments);}catch (Throwable ex) {handleRunFailure(context, listeners, exceptionReporters, ex);throw new IllegalStateException(ex);}listeners.running(context);return context;}</code></pre><p><strong>æ ¹æ®é¡¹ç›®ç±»å‹åˆ›å»ºä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”æ³¨å…¥å‡ ä¸ªæ ¸å¿ƒç»„ä»¶ç±»ã€‚</strong><br><img src="http://dingdm.online/chuangjianshangxiawen.png" alt="åˆ›å»ºä¸Šä¸‹æ–‡" title="åˆ›å»ºä¸Šä¸‹æ–‡"><br><strong>refreshContext(context)æ–¹æ³•å¯åŠ¨springçš„ä»£ç åŠ è½½äº†beanï¼Œè¿˜å¯åŠ¨äº†å†…ç½®webå®¹å™¨</strong><br><img src="http://dingdm.online/jiazaibean.png" alt="åŠ è½½bean" title="åŠ è½½bean"></p><pre class=" language-language-java"><code class="language-language-java">public void refresh() throws BeansException, IllegalStateException {        synchronized(this.startupShutdownMonitor) {            this.prepareRefresh();            ConfigurableListableBeanFactory beanFactory = this.obtainFreshBeanFactory();            this.prepareBeanFactory(beanFactory);            try {                this.postProcessBeanFactory(beanFactory);                this.invokeBeanFactoryPostProcessors(beanFactory);                this.registerBeanPostProcessors(beanFactory);                this.initMessageSource();                this.initApplicationEventMulticaster();                this.onRefresh();                this.registerListeners();                this.finishBeanFactoryInitialization(beanFactory);                this.finishRefresh();            } catch (BeansException var9) {                if (this.logger.isWarnEnabled()) {                    this.logger.warn("Exception encountered during context initialization - cancelling refresh attempt: " + var9);                }                this.destroyBeans();                this.cancelRefresh(var9);                throw var9;            } finally {                this.resetCommonCaches();            }        }    }</code></pre><p><strong>onRefreshé’©å­æ–¹æ³•</strong><br><img src="http://dingdm.online/gouzi.png" alt=""><br>é’©å­æ–¹æ³•ï¼Œå®ƒä¼šé’©åˆ°å®ƒå­ç±»é‡å†™onRefresh()æ–¹æ³•ã€‚æ‰€ä»¥å»çœ‹å­ç±»é‡Œé¢çš„onRefresh()<br><img src="http://dingdm.online/zileishixian.png" alt="å­ç±»å®ç°" title="å­ç±»å®ç°"><br><strong>å†…ç½®å®¹å™¨</strong><br><img src="http://dingdm.online/neizhirongqi.png" alt="å†…ç½®å®¹å™¨" title="å†…ç½®å®¹å™¨"><br><img src="http://dingdm.online/neizhirongqi2.png" alt="å†…ç½®å®¹å™¨" title="å†…ç½®å®¹å™¨"><br><strong>å®¹å™¨é€‰æ‹©</strong><br><img src="http://dingdm.online/rongqixuanze.png" alt="å®¹å™¨é€‰æ‹©" title="å®¹å™¨é€‰æ‹©"><br><strong>tomcatå®¹å™¨</strong><img src="http://dingdm.online/tomcat.png" alt="tomcat" title="tomcat"></p><h3 id="springbootçš„è‡ªåŠ¨åŒ–é…ç½®">springbootçš„è‡ªåŠ¨åŒ–é…ç½®</h3><p><img src="http://dingdm.online/zidonghua.png" alt="è‡ªåŠ¨åŒ–é…ç½®" title="è‡ªåŠ¨åŒ–é…ç½®"><br><strong>è¯¥é…ç½®æ¨¡å—çš„ä¸»è¦ä½¿ç”¨åˆ°äº†SpringFactoriesLoaderï¼Œå³Springå·¥å‚åŠ è½½å™¨ï¼Œè¯¥å¯¹è±¡æä¾›äº†loadFactoryNamesæ–¹æ³•ï¼Œå…¥å‚ä¸ºfactoryClasså’ŒclassLoaderï¼Œå³éœ€è¦ä¼ å…¥ä¸Šå›¾ä¸­çš„å·¥å‚ç±»åç§°å’Œå¯¹åº”çš„ç±»åŠ è½½å™¨ï¼Œæ–¹æ³•ä¼šæ ¹æ®æŒ‡å®šçš„classLoaderï¼ŒåŠ è½½è¯¥ç±»åŠ å™¨æœç´¢è·¯å¾„ä¸‹çš„æŒ‡å®šæ–‡ä»¶ï¼Œå³spring.factoriesæ–‡ä»¶ï¼Œä¼ å…¥çš„å·¥å‚ç±»ä¸ºæ¥å£ï¼Œè€Œæ–‡ä»¶ä¸­å¯¹åº”çš„ç±»åˆ™æ˜¯æ¥å£çš„å®ç°ç±»ï¼Œæˆ–æœ€ç»ˆä½œä¸ºå®ç°ç±»ï¼Œæ‰€ä»¥æ–‡ä»¶ä¸­ä¸€èˆ¬ä¸ºå¦‚ä¸‹å›¾è¿™ç§ä¸€å¯¹å¤šçš„ç±»åé›†åˆï¼Œè·å–åˆ°è¿™äº›å®ç°ç±»çš„ç±»ååï¼ŒloadFactoryNamesæ–¹æ³•è¿”å›ç±»åé›†åˆï¼Œæ–¹æ³•è°ƒç”¨æ–¹å¾—åˆ°è¿™äº›é›†åˆåï¼Œå†é€šè¿‡åå°„è·å–è¿™äº›ç±»çš„ç±»å¯¹è±¡ã€æ„é€ æ–¹æ³•ï¼Œæœ€ç»ˆç”Ÿæˆå®ä¾‹ã€‚</strong><br><img src="http://dingdm.online/jiekoupeizhi.png" alt="æ¥å£é…ç½®" title="æ¥å£é…ç½®"><br><strong>EnableAutoConfigurationæœ€ç»ˆå®ç°äº†ImportSelector(é€‰æ‹©å™¨)å’ŒBeanClassLoaderAware(beanç±»åŠ è½½å™¨ä¸­é—´ä»¶)ï¼Œé‡ç‚¹å…³æ³¨ä¸€ä¸‹AutoConfigurationImportSelectorçš„selectImportsæ–¹æ³•</strong><br><img src="http://dingdm.online/leixinxiliebiao.png" alt="ç±»ä¿¡æ¯åˆ—è¡¨" title="ç±»ä¿¡æ¯åˆ—è¡¨"><br><strong>è¯¥æ–¹æ³•åœ¨springbootå¯åŠ¨æµç¨‹â€”â€”beanå®ä¾‹åŒ–å‰è¢«æ‰§è¡Œï¼Œè¿”å›è¦å®ä¾‹åŒ–çš„ç±»ä¿¡æ¯åˆ—è¡¨ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœè·å–åˆ°ç±»ä¿¡æ¯ï¼Œspringè‡ªç„¶å¯ä»¥é€šè¿‡ç±»åŠ è½½å™¨å°†ç±»åŠ è½½åˆ°jvmä¸­ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»é€šè¿‡spring-bootçš„starterä¾èµ–æ–¹å¼ä¾èµ–äº†æˆ‘ä»¬éœ€è¦çš„ç»„ä»¶ï¼Œé‚£ä¹ˆè¿™äº›ç»„å»ºçš„ç±»ä¿¡æ¯åœ¨selectæ–¹æ³•ä¸­ä¹Ÿæ˜¯å¯ä»¥è¢«è·å–åˆ°çš„</strong><br><strong>æ–¹æ³•ä¸­çš„getCandidateConfigurationsæ–¹æ³•ï¼Œé€šè¿‡æ–¹æ³•æ³¨é‡Šäº†è§£åˆ°ï¼Œå…¶è¿”å›ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»çš„ç±»ååˆ—è¡¨ï¼Œæ–¹æ³•è°ƒç”¨äº†loadFactoryNamesæ–¹æ³•</strong></p><pre class=" language-language-java"><code class="language-language-java">    protected List<String> getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes) {        List<String> configurations = SpringFactoriesLoader.loadFactoryNames(this.getSpringFactoriesLoaderFactoryClass(), this.getBeanClassLoader());        Assert.notEmpty(configurations, "No auto configuration classes found in META-INF/spring.factories. If you are using a custom packaging, make sure that file is correct.");        return configurations;    }</code></pre><p><strong>è‡ªåŠ¨é…ç½®å™¨ä¼šæ ¹æ®ä¼ å…¥çš„factoryClass.getName()åˆ°é¡¹ç›®ç³»ç»Ÿè·¯å¾„ä¸‹æ‰€æœ‰çš„spring.factoriesæ–‡ä»¶ä¸­æ‰¾åˆ°ç›¸åº”çš„keyï¼Œä»è€ŒåŠ è½½é‡Œé¢çš„ç±»</strong><br><img src="http://dingdm.online/jiazailei.png" alt="åŠ è½½ç±»" title="åŠ è½½ç±»"></p><pre class=" language-language-java"><code class="language-language-java">private static Map<String, List<String>> loadSpringFactories(@Nullable ClassLoader classLoader) {        MultiValueMap<String, String> result = (MultiValueMap)cache.get(classLoader);        if (result != null) {            return result;        } else {            try {                Enumeration<URL> urls = classLoader != null ? classLoader.getResources("META-INF/spring.factories") : ClassLoader.getSystemResources("META-INF/spring.factories");                LinkedMultiValueMap result = new LinkedMultiValueMap();                while(urls.hasMoreElements()) {                    URL url = (URL)urls.nextElement();                    UrlResource resource = new UrlResource(url);                    Properties properties = PropertiesLoaderUtils.loadProperties(resource);                    Iterator var6 = properties.entrySet().iterator();                    while(var6.hasNext()) {                        Entry<?, ?> entry = (Entry)var6.next();                        List<String> factoryClassNames = Arrays.asList(StringUtils.commaDelimitedListToStringArray((String)entry.getValue()));                        result.addAll((String)entry.getKey(), factoryClassNames);                    }                }                cache.put(classLoader, result);                return result;            } catch (IOException var9) {                throw new IllegalArgumentException("Unable to load factories from location [META-INF/spring.factories]", var9);            }        }    }</code></pre><p><strong>è‡ªåŠ¨é…ç½®</strong><br><img src="http://dingdm.online/zidongpeizhi2.png" alt="è‡ªåŠ¨é…ç½®" title="è‡ªåŠ¨é…ç½®"></p><pre class=" language-language-java"><code class="language-language-java">@Configuration@ConditionalOnClass({EnableAspectJAutoProxy.class, Aspect.class, Advice.class, AnnotatedElement.class})@ConditionalOnProperty(    prefix = "spring.aop",    name = {"auto"},    havingValue = "true",    matchIfMissing = true)public class AopAutoConfiguration {    public AopAutoConfiguration() {    }    @Configuration    @EnableAspectJAutoProxy(        proxyTargetClass = true    )    @ConditionalOnProperty(        prefix = "spring.aop",        name = {"proxy-target-class"},        havingValue = "true",        matchIfMissing = true    )    public static class CglibAutoProxyConfiguration {        public CglibAutoProxyConfiguration() {        }    }    @Configuration    @EnableAspectJAutoProxy(        proxyTargetClass = false    )    @ConditionalOnProperty(        prefix = "spring.aop",        name = {"proxy-target-class"},        havingValue = "false",        matchIfMissing = false    )    public static class JdkDynamicAutoProxyConfiguration {        public JdkDynamicAutoProxyConfiguration() {        }    }}</code></pre><p><strong>@Configurationï¼Œæ˜¯ä¸€ä¸ªé€šè¿‡æ³¨è§£æ ‡æ³¨çš„springBean</strong><br><strong>@ConditionalOnClass({EnableAspectJAutoProxy.class, Aspect.class, Advice.class, AnnotatedElement.class})è¿™ä¸ªæ³¨è§£çš„æ„æ€æ˜¯ï¼šEnableAspectJAutoProxy.class, Aspect.classï¼ŒAdvice.classï¼ŒAnnotatedElement.classè¿™å‡ ä¸ªç±»æ—¶æ‰è§£æAopAutoConfigurationé…ç½®ç±»ï¼Œå¦åˆ™ä¸è§£æè¿™ä¸€ä¸ªé…ç½®ç±»</strong><br><strong>å› ä¸ºmavenä¾èµ–çš„ä¼ é€’æ€§ï¼Œæˆ‘ä»¬åªè¦ä¾èµ–starterå°±å¯ä»¥ä¾èµ–åˆ°æ‰€æœ‰éœ€è¦è‡ªåŠ¨é…ç½®çš„ç±»ï¼Œå®ç°å¼€ç®±å³ç”¨çš„åŠŸèƒ½ã€‚ä¹Ÿä½“ç°å‡ºSpringbootç®€åŒ–äº†Springæ¡†æ¶å¸¦æ¥çš„å¤§é‡XMLé…ç½®ä»¥åŠå¤æ‚çš„ä¾èµ–ç®¡ç†ï¼Œè®©å¼€å‘äººå‘˜å¯ä»¥æ›´åŠ å…³æ³¨ä¸šåŠ¡é€»è¾‘çš„å¼€å‘ã€‚</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
            <tag> tomcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æœºç½‘ç»œ</title>
      <link href="/2020/05/08/ji-suan-ji-wang-luo/"/>
      <url>/2020/05/08/ji-suan-ji-wang-luo/</url>
      
        <content type="html"><![CDATA[<h3 id="åº”ç”¨è¿›ç¨‹è·¨è¶Šç½‘ç»œçš„é€šä¿¡">åº”ç”¨è¿›ç¨‹è·¨è¶Šç½‘ç»œçš„é€šä¿¡</h3><p><strong>è§£å†³çš„é—®é¢˜</strong>ï¼šä¸€äº›ç‰¹å®šçš„åº”ç”¨éœ€è¦äº’è”ç½‘ä½†æ˜¯ä¸èƒ½ä½¿ç”¨æ ‡å‡†åŒ–çš„äº’è”ç½‘åº”ç”¨åè®®<br>ç³»ç»Ÿè°ƒç”¨ï¼š<br>æµç¨‹ï¼šåº”ç”¨è¿›ç¨‹å¯åŠ¨ç³»ç»Ÿè°ƒç”¨ï¼Œæ§åˆ¶è¿›ç¨‹ä¼ é€’ç»™äº†ç³»ç»Ÿè°ƒç”¨æ¥å£ï¼Œæ¥å£å°†æ§åˆ¶æƒäº¤ç»™æ“ä½œç³»ç»Ÿã€‚å³åº”ç”¨è¿›ç¨‹çš„æ§åˆ¶æƒå’Œæ“ä½œç³»ç»Ÿçš„æƒé™è½¬æ¢çš„æ¥å£ã€‚<br>åº”ç”¨è¿›ç¨‹åªè¦ä½¿ç”¨æ ‡å‡†çš„ç³»ç»Ÿè°ƒç”¨å‡½æ•°å°±å¯å¾—åˆ°æ“ä½œç³»ç»Ÿçš„æœåŠ¡ã€‚æ‰€ä»¥ç³»ç»Ÿè°ƒç”¨æ¥å£åˆç§°ä¸ºåº”ç”¨ç¼–ç¨‹æ¥å£ã€‚<br>å…¶ä¸­TCP/IPåè®®è½¯ä»¶é©»ç•™åœ¨æ“ä½œç³»ç»Ÿä¸­ã€‚<br>åœ¨ç¼–å†™javaä»£ç æ—¶æœ‰ä¸€äº›å…¬ç”¨çš„APIï¼š<br>é€šè¿‡ä¼ å…¥ç®€å•çš„å­—ç¬¦ä¸²ï¼Œjavaé€šè¿‡APIæ¥è¿›è¡Œåˆ‡å‰²å­—ç¬¦ä¸²</p><pre class=" language-language-java"><code class="language-language-java">/**  * String ç±»å¾—splitæ–¹æ³•è§£æã€‚  * å®é™…æ˜¯è°ƒç”¨Patternç±»å¾—splitæ–¹æ³•  */  public class AboutSplit {      public String[] split(String regex, int limit) {          return Pattern.compile(regex).split("æœ¬Stringå­—ç¬¦ä¸²", limit);      }      /**      * å…³äºlimitï¼šlimitå†³å®šæ•°ç»„çš„é•¿åº¦      * å½“limitä¸º0æ—¶æ•°ç»„é•¿åº¦ä¸å—é™åˆ¶,å¹¶ä¸”å°†å‰”é™¤å°¾éƒ¨ç©ºä¸²      * å½“limitä¸ºè´Ÿæ—¶æ•°ç»„é•¿åº¦ä¸å—é™åˆ¶      * å½“limité•¿åº¦å¤§äº0ï¼Œæ•°ç»„é•¿åº¦å°†<=limitï¼Œè€Œä¸”æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ å°†åŒ…å«åŒ¹é…ç¬¦åé¢çš„æ‰€æœ‰å­—ç¬¦      */      public String[] split(CharSequence input, int limit) {          int index = 0;          boolean matchLimited = limit > 0;          ArrayList<String> matchList = new ArrayList<String>();          Matcher m = Pattern.matcher(input); //æ­¤patternä¸ºPattern.compile(regex)è¿”å›çš„Patternå¯¹è±¡            // Add segments before each match found          while(m.find()) {              if (!matchLimited || matchList.size() < limit - 1) { //é»˜è®¤limitä¸º0                  String match = input.subSequence(index, m.start()).toString();  //æ¯”å¦‚a:b:cï¼Œè¿”å›aã€‚m.start()è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…å­—ç¬¦çš„ç´¢å¼•å³1                  matchList.add(match);   //å­˜å…¥List                  index = m.end();    //è¿”å›æœ€åä¸€ä¸ªåŒ¹é…å­—ç¬¦çš„åä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•ï¼Œè¿™é‡Œæ˜¯2              } else if (matchList.size() == limit - 1) { // æœ€åä¸€ä¸ªå…ƒç´                   String match = input.subSequence(index,                                                   input.length()).toString();                  matchList.add(match);                  index = m.end();              }          }            // æ²¡æœ‰æ‰¾åˆ°åŒ¹é…ä¸²          if (index == 0)              return new String[] {input.toString()};            // æŠŠæœ€åä¸€éƒ¨åˆ†çš„ç‰‡æ®µæ·»åŠ è¿›æ¥          if (!matchLimited || matchList.size() < limit)              matchList.add(input.subSequence(index, input.length()).toString());            // Construct result          int resultSize = matchList.size();          if (limit == 0) //å¦‚æœlimitä¸º0              while (resultSize > 0 && matchList.get(resultSize-1).equals(""))                  resultSize--;   //å‰”é™¤å°¾éƒ¨ç©ºä¸²          String[] result = new String[resultSize];          return matchList.subList(0, resultSize).toArray(result);      }  }  </code></pre><p>ç›®å‰çš„åº”ç”¨ç¼–ç¨‹æ¥å£APIï¼šå¥—æ¥å­—æ¥å£(æ’å£æ¥å£)<br>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œwebsocketåœ¨è¿æ¥çš„æ—¶å€™æœ‰ä¸€ä¸ªæ¡æ‰‹é˜¶æ®µï¼Œä½†æ˜¯è¿™å’ŒTCPçš„ä¸‰æ¬¡æ¡æ‰‹åˆæ˜¯ä¸ä¸€æ ·çš„ã€‚TCPçš„ä¸‰æ¬¡æ¡æ‰‹æ˜¯ä¸ºäº†ä¿è¯è¿æ¥å¯é ï¼Œå½“TCPä¸‰æ¬¡æ¡æ‰‹æˆåŠŸçš„æ—¶å€™ï¼Œwebsocketçš„æ¡æ‰‹é˜¶æ®µæ‰çœŸæ­£å¼€å§‹ã€‚TCPä¸‰æ¬¡æ¡æ‰‹ä¼ é€çš„æ˜¯TCPæŠ¥æ–‡ï¼Œè€Œwebsocketçš„æ¡æ‰‹ä¼ é€çš„æ˜¯HTTPæŠ¥æ–‡ï¼Œè¿™ä¸ªæ˜¯ä¸å¤ªä¸€æ ·çš„åœ°æ–¹ã€‚</p><p>æ¡æ‰‹å¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç°å‘é€ä¸€ä¸ªHTTP 1.1çš„è¯·æ±‚å¤´éƒ¨ï¼š</p><pre class=" language-language-shell"><code class="language-language-shell">GET /chat HTTP/1.1Host: server.example.comUpgrade: websocketConnection: UpgradeSec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==Origin: http://example.comSec-WebSocket-Protocol: chat, superchatSec-WebSocket-Version: 13</code></pre><p>æœåŠ¡ç«¯è¿”å›çš„æˆåŠŸæ¡æ‰‹è¯·æ±‚å¤´éƒ¨å¦‚ä¸‹ï¼š</p><pre class=" language-language-java"><code class="language-language-java">HTTP/1.1 101 Switching ProtocolsUpgrade: websocketConnection: UpgradeSec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=Sec-WebSocket-Protocol: chat</code></pre><p>Upgrade:WebSocketè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ HTTP è¯·æ±‚ï¼Œè¯·æ±‚çš„ç›®çš„å°±æ˜¯è¦å°†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„é€šè®¯åè®®ä» HTTP åè®®å‡çº§åˆ° WebSocket åè®®ã€‚</p><h3 id="å¸¸ç”¨çš„ç³»ç»Ÿè°ƒç”¨">å¸¸ç”¨çš„ç³»ç»Ÿè°ƒç”¨</h3><p>TCPæœåŠ¡ï¼š<br><img src="http://dingdm.online/f0afb365fe254a1485a3460b13776aef.png" alt=""></p><h3 id="é‰´åˆ«">é‰´åˆ«</h3><p><strong>æ¦‚å¿µ</strong>ï¼šéªŒè¯é€šä¿¡çš„å¯¹æ–¹çš„ç¡®æ˜¯è‡ªå·±è¦é€šä¿¡çš„å¯¹è±¡ï¼Œæ‰€ä¼ é€çš„æŠ¥æ–‡æ˜¯å®Œæ•´çš„ã€‚</p><h4 id="æŠ¥æ–‡é‰´åˆ«">æŠ¥æ–‡é‰´åˆ«</h4><p>å¯†ç æ•£åˆ—å‡½æ•°(Hashå‡½æ•°)<br>ç‰¹ç‚¹ï¼šè¾“å…¥é•¿åº¦å¯ä»¥å¾ˆé•¿ï¼Œä½†å…¶è¾“å‡ºé•¿åº¦æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”è¾ƒçŸ­ã€‚<br>ä¸åŒçš„æ•£åˆ—å€¼è‚¯å®šå¯¹åº”ä¸åŒçš„è¾“å…¥ï¼Œä¸åŒçš„è¾“å…¥å´å¯èƒ½å¾—åˆ°ç›¸åŒçš„æ•£åˆ—å€¼ã€‚<br>ä¸€ä¸ªä¼˜è‰¯çš„Hashå‡½æ•°å¿…é¡»æ»¡è¶³å¦‚ä¸‹å‡ ä¸ªæ€§è´¨:</p><ul><li>ä»»æ„yï¼Œæ‰¾xï¼Œä½¿å¾—H(x) = yï¼Œéå¸¸å›°éš¾</li><li>ç»™å®šx1, æ‰¾x2, ä½¿å¾—H(x1) == H(x2), éå¸¸å›°éš¾</li><li>æ‰¾ä»»æ„çš„x1, x2, ä½¿å¾—H(x1) == H(x2), éå¸¸å›°éš¾ ç”Ÿæ—¥å®šç†</li></ul><p><strong>å¸¸ç”¨çš„Hashç®—æ³•</strong><br>MD5<br>SHA1<br>SHA224<br>SHA256<br>SHA384<br>SHA512<br>SM3</p><pre class=" language-language-java"><code class="language-language-java">#!/usr/bin/python#coding:utf8import hashlibdef b2s(bytes):    rets = []    for c in bytes:        rets.append("%02X" % (ord(c)))    r = ' '.join(rets)    return rdef md5(data):    hashobj = hashlib.md5()    hashobj.update(data)    return hashobj.digest()def sha1(data):    hashobj = hashlib.sha1()    hashobj.update(data)    return hashobj.digest()def sha224(data):    hashobj = hashlib.sha224()    hashobj.update(data)    return hashobj.digest()def sha256(data):    hashobj = hashlib.sha256()    hashobj.update(data)    return hashobj.digest()def sha384(data):    hashobj = hashlib.sha384()    hashobj.update(data)    return hashobj.digest()def sha512(data):    hashobj = hashlib.sha512()    hashobj.update(data)    return hashobj.digest()def main():    hash_fun_list = (md5, sha1, sha224, sha256, sha384, sha512)    data = '\x12\x34'    for fun in hash_fun_list:        print fun        r = fun(data)        print b2s(r)if __name__ == '__main__':    main()</code></pre><h4 id="MD5">MD5</h4><p>ç®—æ³•è¿‡ç¨‹ï¼š<br>å…ˆå°†æŠ¥æ–‡æŒ‰æ¨¡2^64è®¡ç®—ä½™æ•°ï¼Œè¿½åŠ åœ¨æŠ¥æ–‡åé¢<br>æŠ¥æ–‡å’Œä½™æ•°ä¹‹å¡«å……1~512ä½ï¼Œå¡«å……çš„é¦–ä½æ—¶1ï¼Œåé¢éƒ½æ˜¯0<br>æŠ¥æ–‡åˆ†å‰²ä¸ºä¸€ä¸ªä¸ª512ä½çš„æ•°æ®å—ï¼Œæ¯ä¸ª512ä½çš„æŠ¥æ–‡æ•°æ®å†åˆ†æˆ4ä¸ª128ä½çš„æ•°æ®å—ä¾æ¬¡é€åˆ°ä¸åŒçš„æ•£åˆ—å‡½æ•°è¿›è¡Œ4è½®è®¡ç®—ï¼Œæ¯ä¸€è½®åˆæŒ‰32ä½çš„å°æ•°æ®å—è¿›è¡Œè¿ç®—</p><pre class=" language-language-java"><code class="language-language-java">public class MD5 {    static final String hexs[]={"0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"};    //æ ‡å‡†çš„å¹»æ•°    private static final long A=0x67452301L;    private static final long B=0xefcdab89L;    private static final long C=0x98badcfeL;    private static final long D=0x10325476L;    //ä¸‹é¢è¿™äº›S11-S44å®é™…ä¸Šæ˜¯ä¸€ä¸ª4*4çš„çŸ©é˜µï¼Œåœ¨å››è½®å¾ªç¯è¿ç®—ä¸­ç”¨åˆ°    static final int S11 = 7;    static final int S12 = 12;    static final int S13 = 17;    static final int S14 = 22;    static final int S21 = 5;    static final int S22 = 9;    static final int S23 = 14;    static final int S24 = 20;    static final int S31 = 4;    static final int S32 = 11;    static final int S33 = 16;    static final int S34 = 23;    static final int S41 = 6;    static final int S42 = 10;    static final int S43 = 15;    static final int S44 = 21;    //javaä¸æ”¯æŒæ— ç¬¦å·çš„åŸºæœ¬æ•°æ®ï¼ˆunsignedï¼‰    private long [] result={A,B,C,D};//å­˜å‚¨hashç»“æœï¼Œå…±4Ã—32=128ä½ï¼Œåˆå§‹åŒ–å€¼ä¸ºï¼ˆå¹»æ•°çš„çº§è”ï¼‰    public static void main(String []args){        MD5 md=new MD5();        System.out.println("md5(abc)="+md.digest("abc"));    }    private String digest(String inputStr){        byte [] inputBytes=inputStr.getBytes();        int byteLen=inputBytes.length;//é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰        int groupCount=0;//å®Œæ•´åˆ†ç»„çš„ä¸ªæ•°        groupCount=byteLen/64;//æ¯ç»„512ä½ï¼ˆ64å­—èŠ‚ï¼‰        long []groups=null;//æ¯ä¸ªå°ç»„(64å­—èŠ‚)å†ç»†åˆ†åçš„16ä¸ªå°ç»„(4å­—èŠ‚)        //å¤„ç†æ¯ä¸€ä¸ªå®Œæ•´ åˆ†ç»„        for(int step=0;step<groupCount;step++){            groups=divGroup(inputBytes,step*64);            trans(groups);//å¤„ç†åˆ†ç»„ï¼Œæ ¸å¿ƒç®—æ³•        }        //å¤„ç†å®Œæ•´åˆ†ç»„åçš„å°¾å·´        int rest=byteLen%64;//512ä½åˆ†ç»„åçš„ä½™æ•°        byte [] tempBytes=new byte[64];        if(rest<=56){            for(int i=0;i<rest;i++)                tempBytes[i]=inputBytes[byteLen-rest+i];            if(rest<56){                tempBytes[rest]=(byte)(1<<7);                for(int i=1;i<56-rest;i++)                    tempBytes[rest+i]=0;            }            long len=(long)(byteLen<<3);            for(int i=0;i<8;i++){                tempBytes[56+i]=(byte)(len&0xFFL);                len=len>>8;            }            groups=divGroup(tempBytes,0);            trans(groups);//å¤„ç†åˆ†ç»„        }else{            for(int i=0;i<rest;i++)                tempBytes[i]=inputBytes[byteLen-rest+i];            tempBytes[rest]=(byte)(1<<7);            for(int i=rest+1;i<64;i++)                tempBytes[i]=0;            groups=divGroup(tempBytes,0);            trans(groups);//å¤„ç†åˆ†ç»„            for(int i=0;i<56;i++)                tempBytes[i]=0;            long len=(long)(byteLen<<3);            for(int i=0;i<8;i++){                tempBytes[56+i]=(byte)(len&0xFFL);                len=len>>8;            }            groups=divGroup(tempBytes,0);            trans(groups);//å¤„ç†åˆ†ç»„        }        //å°†Hashå€¼è½¬æ¢æˆåå…­è¿›åˆ¶çš„å­—ç¬¦ä¸²        String resStr="";        long temp=0;        for(int i=0;i<4;i++){            for(int j=0;j<4;j++){                temp=result[i]&0x0FL;                String a=hexs[(int)(temp)];                result[i]=result[i]>>4;                temp=result[i]&0x0FL;                resStr+=hexs[(int)(temp)]+a;                result[i]=result[i]>>4;            }        }        return resStr;    }    /**     * ä»inputBytesçš„indexå¼€å§‹å–512ä½ï¼Œä½œä¸ºæ–°çš„åˆ†ç»„     * å°†æ¯ä¸€ä¸ª512ä½çš„åˆ†ç»„å†ç»†åˆ†æˆ16ä¸ªå°ç»„ï¼Œæ¯ä¸ªå°ç»„64ä½ï¼ˆ8ä¸ªå­—èŠ‚ï¼‰     * @param inputBytes     * @param index     * @return     */    private static long[] divGroup(byte[] inputBytes,int index){        long [] temp=new long[16];        for(int i=0;i<16;i++){            temp[i]=b2iu(inputBytes[4*i+index])|                (b2iu(inputBytes[4*i+1+index]))<<8|                (b2iu(inputBytes[4*i+2+index]))<<16|                (b2iu(inputBytes[4*i+3+index]))<<24;        }        return temp;    }    /**     * è¿™æ—¶ä¸å­˜åœ¨ç¬¦å·ä½ï¼ˆç¬¦å·ä½å­˜å‚¨ä¸å†æ˜¯ä»£è¡¨æ­£è´Ÿï¼‰ï¼Œæ‰€ä»¥éœ€è¦å¤„ç†ä¸€ä¸‹     * @param b     * @return     */    public static long b2iu(byte b){        return b < 0 ? b & 0x7F + 128 : b;     }    /**     * ä¸»è¦çš„æ“ä½œï¼Œå››è½®å¾ªç¯     * @param groups[]--æ¯ä¸€ä¸ªåˆ†ç»„512ä½ï¼ˆ64å­—èŠ‚ï¼‰     */    private void trans(long[] groups) {        long a = result[0], b = result[1], c = result[2], d = result[3];        /*ç¬¬ä¸€è½®*/        a = FF(a, b, c, d, groups[0], S11, 0xd76aa478L); /* 1 */        d = FF(d, a, b, c, groups[1], S12, 0xe8c7b756L); /* 2 */        c = FF(c, d, a, b, groups[2], S13, 0x242070dbL); /* 3 */        b = FF(b, c, d, a, groups[3], S14, 0xc1bdceeeL); /* 4 */        a = FF(a, b, c, d, groups[4], S11, 0xf57c0fafL); /* 5 */        d = FF(d, a, b, c, groups[5], S12, 0x4787c62aL); /* 6 */        c = FF(c, d, a, b, groups[6], S13, 0xa8304613L); /* 7 */        b = FF(b, c, d, a, groups[7], S14, 0xfd469501L); /* 8 */        a = FF(a, b, c, d, groups[8], S11, 0x698098d8L); /* 9 */        d = FF(d, a, b, c, groups[9], S12, 0x8b44f7afL); /* 10 */        c = FF(c, d, a, b, groups[10], S13, 0xffff5bb1L); /* 11 */        b = FF(b, c, d, a, groups[11], S14, 0x895cd7beL); /* 12 */        a = FF(a, b, c, d, groups[12], S11, 0x6b901122L); /* 13 */        d = FF(d, a, b, c, groups[13], S12, 0xfd987193L); /* 14 */        c = FF(c, d, a, b, groups[14], S13, 0xa679438eL); /* 15 */        b = FF(b, c, d, a, groups[15], S14, 0x49b40821L); /* 16 */        /*ç¬¬äºŒè½®*/        a = GG(a, b, c, d, groups[1], S21, 0xf61e2562L); /* 17 */        d = GG(d, a, b, c, groups[6], S22, 0xc040b340L); /* 18 */        c = GG(c, d, a, b, groups[11], S23, 0x265e5a51L); /* 19 */        b = GG(b, c, d, a, groups[0], S24, 0xe9b6c7aaL); /* 20 */        a = GG(a, b, c, d, groups[5], S21, 0xd62f105dL); /* 21 */        d = GG(d, a, b, c, groups[10], S22, 0x2441453L); /* 22 */        c = GG(c, d, a, b, groups[15], S23, 0xd8a1e681L); /* 23 */        b = GG(b, c, d, a, groups[4], S24, 0xe7d3fbc8L); /* 24 */        a = GG(a, b, c, d, groups[9], S21, 0x21e1cde6L); /* 25 */        d = GG(d, a, b, c, groups[14], S22, 0xc33707d6L); /* 26 */        c = GG(c, d, a, b, groups[3], S23, 0xf4d50d87L); /* 27 */        b = GG(b, c, d, a, groups[8], S24, 0x455a14edL); /* 28 */        a = GG(a, b, c, d, groups[13], S21, 0xa9e3e905L); /* 29 */        d = GG(d, a, b, c, groups[2], S22, 0xfcefa3f8L); /* 30 */        c = GG(c, d, a, b, groups[7], S23, 0x676f02d9L); /* 31 */        b = GG(b, c, d, a, groups[12], S24, 0x8d2a4c8aL); /* 32 */        /*ç¬¬ä¸‰è½®*/        a = HH(a, b, c, d, groups[5], S31, 0xfffa3942L); /* 33 */        d = HH(d, a, b, c, groups[8], S32, 0x8771f681L); /* 34 */        c = HH(c, d, a, b, groups[11], S33, 0x6d9d6122L); /* 35 */        b = HH(b, c, d, a, groups[14], S34, 0xfde5380cL); /* 36 */        a = HH(a, b, c, d, groups[1], S31, 0xa4beea44L); /* 37 */        d = HH(d, a, b, c, groups[4], S32, 0x4bdecfa9L); /* 38 */        c = HH(c, d, a, b, groups[7], S33, 0xf6bb4b60L); /* 39 */        b = HH(b, c, d, a, groups[10], S34, 0xbebfbc70L); /* 40 */        a = HH(a, b, c, d, groups[13], S31, 0x289b7ec6L); /* 41 */        d = HH(d, a, b, c, groups[0], S32, 0xeaa127faL); /* 42 */        c = HH(c, d, a, b, groups[3], S33, 0xd4ef3085L); /* 43 */        b = HH(b, c, d, a, groups[6], S34, 0x4881d05L); /* 44 */        a = HH(a, b, c, d, groups[9], S31, 0xd9d4d039L); /* 45 */        d = HH(d, a, b, c, groups[12], S32, 0xe6db99e5L); /* 46 */        c = HH(c, d, a, b, groups[15], S33, 0x1fa27cf8L); /* 47 */        b = HH(b, c, d, a, groups[2], S34, 0xc4ac5665L); /* 48 */        /*ç¬¬å››è½®*/        a = II(a, b, c, d, groups[0], S41, 0xf4292244L); /* 49 */        d = II(d, a, b, c, groups[7], S42, 0x432aff97L); /* 50 */        c = II(c, d, a, b, groups[14], S43, 0xab9423a7L); /* 51 */        b = II(b, c, d, a, groups[5], S44, 0xfc93a039L); /* 52 */        a = II(a, b, c, d, groups[12], S41, 0x655b59c3L); /* 53 */        d = II(d, a, b, c, groups[3], S42, 0x8f0ccc92L); /* 54 */        c = II(c, d, a, b, groups[10], S43, 0xffeff47dL); /* 55 */        b = II(b, c, d, a, groups[1], S44, 0x85845dd1L); /* 56 */        a = II(a, b, c, d, groups[8], S41, 0x6fa87e4fL); /* 57 */        d = II(d, a, b, c, groups[15], S42, 0xfe2ce6e0L); /* 58 */        c = II(c, d, a, b, groups[6], S43, 0xa3014314L); /* 59 */        b = II(b, c, d, a, groups[13], S44, 0x4e0811a1L); /* 60 */        a = II(a, b, c, d, groups[4], S41, 0xf7537e82L); /* 61 */        d = II(d, a, b, c, groups[11], S42, 0xbd3af235L); /* 62 */        c = II(c, d, a, b, groups[2], S43, 0x2ad7d2bbL); /* 63 */        b = II(b, c, d, a, groups[9], S44, 0xeb86d391L); /* 64 */        /*åŠ å…¥åˆ°ä¹‹å‰è®¡ç®—çš„ç»“æœå½“ä¸­*/        result[0] += a;        result[1] += b;        result[2] += c;        result[3] += d;        result[0]=result[0]&0xFFFFFFFFL;        result[1]=result[1]&0xFFFFFFFFL;        result[2]=result[2]&0xFFFFFFFFL;        result[3]=result[3]&0xFFFFFFFFL;    }    /**     * ä¸‹é¢æ˜¯å¤„ç†è¦ç”¨åˆ°çš„çº¿æ€§å‡½æ•°     */    private static long F(long x, long y, long z) {        return (x & y) | ((~x) & z);    }    private static long G(long x, long y, long z) {        return (x & z) | (y & (~z));    }    private static long H(long x, long y, long z) {        return x ^ y ^ z;    }    private static long I(long x, long y, long z) {        return y ^ (x | (~z));    }    private static long FF(long a, long b, long c, long d, long x, long s,            long ac) {        a += (F(b, c, d)&0xFFFFFFFFL) + x + ac;        a = ((a&0xFFFFFFFFL)<< s) | ((a&0xFFFFFFFFL) >>> (32 - s));        a += b;        return (a&0xFFFFFFFFL);    }    private static long GG(long a, long b, long c, long d, long x, long s,            long ac) {        a += (G(b, c, d)&0xFFFFFFFFL) + x + ac;        a = ((a&0xFFFFFFFFL) << s) | ((a&0xFFFFFFFFL) >>> (32 - s));        a += b;        return (a&0xFFFFFFFFL);    }    private static long HH(long a, long b, long c, long d, long x, long s,            long ac) {        a += (H(b, c, d)&0xFFFFFFFFL) + x + ac;        a = ((a&0xFFFFFFFFL) << s) | ((a&0xFFFFFFFFL) >>> (32 - s));        a += b;        return (a&0xFFFFFFFFL);    }    private static long II(long a, long b, long c, long d, long x, long s,            long ac) {        a += (I(b, c, d)&0xFFFFFFFFL) + x + ac;        a = ((a&0xFFFFFFFFL) << s) | ((a&0xFFFFFFFFL) >>> (32 - s));        a += b;        return (a&0xFFFFFFFFL);    }}</code></pre><h4 id="æŠ¥æ–‡é‰´åˆ«ä½¿ç”¨æ•£åˆ—å‡½æ•°">æŠ¥æ–‡é‰´åˆ«ä½¿ç”¨æ•£åˆ—å‡½æ•°</h4><hr><ul><li>ç”¨æˆ·Aé¦–å…ˆæ ¹æ®è‡ªå·±çš„æ˜æ–‡Xè®¡ç®—å‡ºæ•£åˆ—H(X)ï¼Œ</li><li>ç”¨æˆ·AæŠŠæ•£åˆ—Hæ‹¼æ¥åœ¨æ˜æ–‡Xçš„åé¢ï¼Œç”Ÿæˆäº†æ‰©å±•çš„æŠ¥æ–‡(X,H)ï¼Œç„¶åå‘é€ç»™B</li><li>ç”¨æˆ·Bæ”¶åˆ°äº†è¿™ä¸ªæ‰©å±•çš„æŠ¥æ–‡(X,H)ï¼Œå› ä¸ºæ•£åˆ—çš„é•¿åº¦Hæ˜¯å·²çŸ¥é“çš„å›ºå®šå€¼ï¼Œå› æ­¤å¯ä»¥æŠŠæ”¶åˆ°çš„æ•£åˆ—Hå’Œæ˜æ–‡Xåˆ†ç¦»å¼€ã€‚Bé€šè¿‡æ•£åˆ—å‡½æ•°çš„è®¡ç®—ï¼Œè®¡ç®—å‡ºæ˜æ–‡Xçš„æ•£åˆ—H(X)ã€‚</li></ul><p>æ•£åˆ—åŠ å¯†é˜²æ­¢ä¼ªé€ æŠ¥æ–‡<br><img src="http://dingdm.online/5181df2368ec4c359bc18a6737b3212f.png" alt=""></p><h3 id="å¯†é’¥åˆ†é…">å¯†é’¥åˆ†é…</h3><p>å¯†é’¥ç®¡ç†ï¼šå¯†ç çš„äº§ç”Ÿã€åˆ†é…ã€æ³¨å…¥ã€éªŒè¯å’Œä½¿ç”¨</p><h4 id="å¯¹ç§°å¯†é’¥çš„åˆ†é…">å¯¹ç§°å¯†é’¥çš„åˆ†é…</h4><p>ç›®å‰å¯†é’¥åˆ†å‘çš„æ–¹å¼ï¼š<br>ã€€ã€€1ã€Aé€‰æ‹©ä¸€ä¸ªå¯†é’¥åä»¥ç‰©ç†çš„æ–¹å¼ä¼ é€’ç»™B<br>ã€€ã€€2ã€ç¬¬ä¸‰æ–¹é€‰æ‹©å¯†é’¥åç‰©ç†åœ°ä¼ ç»™Aå’ŒB<br>ã€€ã€€3ã€å¦‚æœAå’ŒBå…ˆå‰æˆ–æœ€è¿‘ä½¿ç”¨è¿‡ä¸€ä¸ªå¯†é’¥ï¼Œåˆ™ä¸€æ–¹å¯ä»¥å°† æ–°å¯†é’¥ç”¨æ—§å¯†é’¥å‘é€ç»™å¦ä¸€æ–¹<br>ã€€ã€€4ã€å¦‚æœAå’ŒBåˆ°ç¬¬ä¸‰æ–¹Cæœ‰åŠ å¯†è¿æ¥ï¼Œåˆ™Cå¯ä»¥åœ¨åŠ å¯†è¿æ¥ä¸Šå‘é€å¯†é’¥ç»™Aã€B<br>åˆ†æï¼š<br>1å’Œ2éƒ½éœ€è¦äººå·¥äº¤ä»˜ï¼Œå¯¹é“¾è·¯åŠ å¯†ï¼ˆè®¾å¤‡ä¸€å¯¹ä¸€è¿æ¥ï¼‰å¯è¡Œï¼Œå¯¹ç½‘ç»œé€šä¿¡åˆ™ä¸å¯è¡Œï¼Œå› ä¸ºç½‘ç»œé€šä¿¡æ¶‰åŠå¤§é‡å¯†é’¥<br>å¯¹äº3ï¼Œä¸€æ—¦æ”»å‡»è€…è·å¾—ä¸€ä¸ªå¯†é’¥ï¼Œåˆ™ååºæ‰€æœ‰å¯†é’¥ä¾¿éƒ½ä¸å†å®‰å…¨ã€‚<br>4éœ€è¦ç¬¬ä¸‰æ–¹å³å¯†é’¥åˆ†å‘ä¸­å¿ƒï¼Œåœ¨ç½‘ç»œé€šä¿¡ä¸­å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨<br>ä¸¾ä¾‹ï¼š</p><ol><li>ä½ å¸¦å¥½èº«ä»½è¯å’Œç›¸åº”çš„ææ–™å»æ´¾å‡ºæ‰€ï¼Œå‘JCSSè¯´æ˜ä½ è¦åŠå±…ä½è¯ï¼Œéœ€è¦å¼€æ®ç›¸åº”çš„è¯æ˜ã€‚</li><li>JCSSæ ¹æ®ä»–ä»¬çš„å†…éƒ¨ç³»ç»Ÿï¼Œæ ¸å®äº†ä½ æä¾›çš„ææ–™å¹¶å¼€æ®äº†è¯æ˜ï¼Œä¸Šé¢ç›–æœ‰æ´¾å‡ºæ‰€çš„çº¢ç« ã€‚</li><li>ä½ å†æ‹¿ç€è¿™ä¸ªè¯æ˜å†å»ç¤¾åŒºäº‹åŠ¡ä¸­å¿ƒï¼Œç¤¾åŒºäº‹åŠ¡ä¸­å¿ƒçš„å·¥ä½œäººå‘˜çœ‹åˆ°äº†JCSSæä¾›çš„è¯æ˜ï¼Œå°±å¯ä»¥ç¡®å®šä½ çš„èº«ä»½ï¼Œä¾¿å¼€å§‹ç»™ä½ åŠç†ä¸šåŠ¡ã€‚<br>å›¾è§£ï¼š<br><img src="http://dingdm.online/QQ%E6%88%AA%E5%9B%BE20200805112435.png" alt=""></li></ol><ul><li>Aæºå¸¦Aã€Bçš„èº«ä»½ä»¥åŠå”¯ä¸€æ ‡è¯†é€šè¿‡æ˜æ–‡çš„æ–¹å¼å‘KDCå‘é€è¯·æ±‚</li><li>KDCé€šè¿‡é€šè¯å¯†é’¥å’Œæ”¶åˆ°çš„è¯·æ±‚åˆ¤æ–­æ¶ˆæ¯åˆ°è¾¾ä¹‹å‰æ˜¯å¦è¢«ç¯¡æ”¹ï¼Œç„¶åæŠŠå“åº”çš„ä¿¡æ¯ç”¨Açš„å¯†é’¥åŠ å¯†è¿”å›ç»™ï¼¡</li><li>KDCé€šè¿‡é€šè¯å¯†é’¥å’Œï¼¡çš„èº«ä»½ï¼Œå°†ï¼¢çš„ä¿¡æ¯ç”¨Bçš„å¯†é’¥åŠ å¯†ç„¶åé€ç»™ï¼¡</li><li>Aã€Bè¿›è¡Œé€šè¯éªŒè¯ï¼Œï¼¢ä½¿ç”¨ä¼šè¯å¯†é’¥å’Œå”¯ä¸€æ ‡è¯†å‘é€ç»™ï¼¡ï¼Œï¼¡å¯¹æ ‡è¯†è¿›è¡Œå‡½æ•°å˜æ¢å‘é€ç»™ï¼¢éªŒè¯</li><li>ï¼¡å‘é€ä¿¡æ¯ç»™B</li></ul><h4 id="å…¬é’¥çš„åˆ†é…">å…¬é’¥çš„åˆ†é…</h4><p><img src="http://dingdm.online/0dec14b8796f425091844c2b97ae1400.png" alt=""></p><ul><li>ï¼¡å‘ç®¡ç†å‘˜å‘é€è¯·æ±‚ï¼Œç”³è¯·ï¼¢çš„å…¬é’¥</li><li>ç®¡ç†å‘˜é€šè¿‡è‡ªå·±çš„åŠ å¯†æ–¹å¼å°†è¯·æ±‚å“åº”ç»™ï¼¡ï¼Œï¼¡é€šè¿‡ç®¡ç†å‘˜åŠ å¯†çš„æ–¹å¼è§£å¯†æ¥è·å¾—æ¶ˆæ¯</li><li>ï¼¡é€šè¿‡ï¼¢çš„å…¬é’¥å’Œè‡ªèº«çš„æ ‡è¯†ä»¥åŠéšæœºæ•°åŠ å¯†æ¶ˆæ¯å‘é€ç»™ï¼¢<br>ç¼ºç‚¹ï¼šç®¡ç†å‘˜çš„ç¼ºé™·</li></ul><h3 id="å®‰å…¨åè®®">å®‰å…¨åè®®</h3><h4 id="SSH">SSH</h4><p><strong>æ¦‚å¿µ</strong><br>ä¼ ç»Ÿçš„ç½‘ç»œæœåŠ¡ç¨‹åºï¼Œå¦‚ï¼šftpã€popå’Œtelnetåœ¨æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒä»¬åœ¨ç½‘ç»œä¸Šç”¨æ˜æ–‡ä¼ é€å£ä»¤å’Œæ•°æ®ï¼Œ åˆ«æœ‰ç”¨å¿ƒçš„äººéå¸¸å®¹æ˜“å°±å¯ä»¥æˆªè·è¿™äº›å£ä»¤å’Œæ•°æ®ã€‚è€Œä¸”ï¼Œè¿™äº›æœåŠ¡ç¨‹åºçš„å®‰å…¨éªŒè¯æ–¹å¼ä¹Ÿæ˜¯æœ‰å…¶å¼±ç‚¹çš„ï¼Œ å°±æ˜¯å¾ˆå®¹æ˜“å—åˆ°â€œä¸­é—´äººâ€ï¼ˆman-in-the-middleï¼‰è¿™ç§æ–¹å¼çš„æ”»å‡»ã€‚æ‰€è°“â€œä¸­é—´äººâ€çš„æ”»å‡»æ–¹å¼ï¼Œ å°±æ˜¯â€œä¸­é—´äººâ€å†’å……çœŸæ­£çš„æœåŠ¡å™¨æ¥æ”¶ä½ çš„ä¼ ç»™æœåŠ¡å™¨çš„æ•°æ®ï¼Œç„¶åå†å†’å……ä½ æŠŠæ•°æ®ä¼ ç»™çœŸæ­£çš„æœåŠ¡å™¨ã€‚ æœåŠ¡å™¨å’Œä½ ä¹‹é—´çš„æ•°æ®ä¼ é€è¢«â€œä¸­é—´äººâ€ä¸€è½¬æ‰‹åšäº†æ‰‹è„šä¹‹åï¼Œå°±ä¼šå‡ºç°å¾ˆä¸¥é‡çš„é—®é¢˜ã€‚<br><strong>ä¸¤ç§çº§åˆ«çš„å®‰å…¨éªŒè¯</strong><br>ç¬¬ä¸€ç§çº§åˆ«ï¼ˆåŸºäºå£ä»¤çš„å®‰å…¨éªŒè¯ï¼‰åªè¦ä½ çŸ¥é“è‡ªå·±å¸å·å’Œå£ä»¤ï¼Œå°±å¯ä»¥ç™»å½•åˆ°è¿œç¨‹ä¸»æœºã€‚æ‰€æœ‰ä¼ è¾“çš„æ•°æ®éƒ½ä¼šè¢«åŠ å¯†ï¼Œ ä½†æ˜¯ä¸èƒ½ä¿è¯ä½ æ­£åœ¨è¿æ¥çš„æœåŠ¡å™¨å°±æ˜¯ä½ æƒ³è¿æ¥çš„æœåŠ¡å™¨ã€‚å¯èƒ½ä¼šæœ‰åˆ«çš„æœåŠ¡å™¨åœ¨å†’å……çœŸæ­£çš„æœåŠ¡å™¨ï¼Œ ä¹Ÿå°±æ˜¯å—åˆ°â€œä¸­é—´äººâ€è¿™ç§æ–¹å¼çš„æ”»å‡»ã€‚<br>ç¬¬äºŒç§çº§åˆ«ï¼ˆåŸºäºå¯†åŒ™çš„å®‰å…¨éªŒè¯ï¼‰éœ€è¦ä¾é å¯†åŒ™ï¼Œä¹Ÿå°±æ˜¯ä½ å¿…é¡»ä¸ºè‡ªå·±åˆ›å»ºä¸€å¯¹å¯†åŒ™ï¼Œå¹¶æŠŠå…¬ç”¨å¯†åŒ™æ”¾åœ¨éœ€è¦è®¿é—®çš„æœåŠ¡å™¨ä¸Šã€‚ å¦‚æœä½ è¦è¿æ¥åˆ°SSHæœåŠ¡å™¨ä¸Šï¼Œå®¢æˆ·ç«¯è½¯ä»¶å°±ä¼šå‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œè¯·æ±‚ç”¨ä½ çš„å¯†åŒ™è¿›è¡Œå®‰å…¨éªŒè¯ã€‚æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œ å…ˆåœ¨ä½ åœ¨è¯¥æœåŠ¡å™¨çš„å®¶ç›®å½•ä¸‹å¯»æ‰¾ä½ çš„å…¬ç”¨å¯†åŒ™ï¼Œç„¶åæŠŠå®ƒå’Œä½ å‘é€è¿‡æ¥çš„å…¬ç”¨å¯†åŒ™è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä¸¤ä¸ªå¯†åŒ™ä¸€è‡´ï¼Œ æœåŠ¡å™¨å°±ç”¨å…¬ç”¨å¯†åŒ™åŠ å¯†â€œè´¨è¯¢â€ï¼ˆchallengeï¼‰å¹¶æŠŠå®ƒå‘é€ç»™å®¢æˆ·ç«¯è½¯ä»¶ã€‚ å®¢æˆ·ç«¯è½¯ä»¶æ”¶åˆ°â€œè´¨è¯¢â€ä¹‹åå°±å¯ä»¥ç”¨ä½ çš„ç§äººå¯†åŒ™è§£å¯†å†æŠŠå®ƒå‘é€ç»™æœåŠ¡å™¨ã€‚</p><h4 id="SSL">SSL</h4><p>ä¸¾ä¾‹ï¼š<br>å½“é¡¾å®¢æƒ³ä» Web ç«™ç‚¹è´­ä¹°æŸä¸ªäº§å“æ—¶ï¼Œé¡¾å®¢å’Œ Web ç«™ç‚¹éƒ½è¦è¿›è¡Œè®¤è¯ã€‚é¡¾å®¢é€šå¸¸æ˜¯ä»¥æä¾›åå­—å’Œå¯†ç çš„æ–¹å¼æ¥è®¤è¯ä»–è‡ªå·±ã€‚ å¦ä¸€æ–¹é¢ï¼ŒWeb ç«™ç‚¹é€šè¿‡äº¤æ¢ä¸€å—ç­¾åæ•°æ®å’Œä¸€ä¸ªæœ‰æ•ˆçš„ X.509 è¯ä¹¦ï¼ˆä½œä¸º SSL æ¡æ‰‹çš„ä¸€éƒ¨åˆ†ï¼‰æ¥è®¤è¯å®ƒè‡ªå·±ã€‚ é¡¾å®¢çš„æµè§ˆå™¨éªŒè¯è¯¥è¯ä¹¦å¹¶ç”¨æ‰€é™„çš„å…¬ç”¨å¯†é’¥éªŒè¯ç­¾åæ•°æ®ã€‚ä¸€æ—¦åŒæ–¹éƒ½è®¤è¯äº†ï¼Œåˆ™äº¤æ˜“å°±å¯ä»¥å¼€å§‹äº†ã€‚<br>å®‰å…¨å¥—æ¥å­—å±‚ï¼ˆSecure Sockets Layerï¼ˆSSLï¼‰ï¼‰ ï¼ŒSSL æ˜¯ä¸€ç§å®‰å…¨åè®®ï¼Œå®ƒä¸ºç½‘ç»œï¼ˆä¾‹å¦‚å› ç‰¹ç½‘ï¼‰çš„é€šä¿¡æä¾›ç§å¯†æ€§ã€‚SSL ä½¿åº”ç”¨ç¨‹åºåœ¨é€šä¿¡æ—¶ä¸ç”¨æ‹…å¿ƒè¢«çªƒå¬å’Œç¯¡æ”¹ã€‚ SSL å®é™…ä¸Šæ˜¯å…±åŒå·¥ä½œçš„ä¸¤ä¸ªåè®®ï¼šâ€œSSL è®°å½•åè®®â€ï¼ˆSSL Record Protocolï¼‰å’Œâ€œSSL æ¡æ‰‹åè®®â€ ï¼ˆSSL Handshake Protocolï¼‰ã€‚â€œSSL è®°å½•åè®®â€æ˜¯ä¸¤ä¸ªåè®®ä¸­è¾ƒä½çº§åˆ«çš„åè®®ï¼Œå®ƒä¸ºè¾ƒé«˜çº§åˆ«çš„åè®®ï¼Œ ä¾‹å¦‚ SSL æ¡æ‰‹åè®®å¯¹æ•°æ®çš„å˜é•¿çš„è®°å½•è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ã€‚SSL æ¡æ‰‹åè®®å¤„ç†åº”ç”¨ç¨‹åºå‡­è¯çš„äº¤æ¢å’ŒéªŒè¯ã€‚<br>åä¸º A å’Œ B çš„ä¸¤å°å¯¹ç­‰æœºæƒ³å®‰å…¨åœ°è¿›è¡Œé€šä¿¡ã€‚åœ¨æˆ‘ä»¬ç®€å•çš„ p2p åº”ç”¨ç¨‹åºçš„ç¯å¢ƒä¸­ï¼Œå¯¹ç­‰æœº A æƒ³æŸ¥è¯¢å¯¹ç­‰æœº B ä¸Šçš„ä¸€ä¸ªèµ„æºã€‚ æ¯ä¸ªå¯¹ç­‰æœºéƒ½æœ‰åŒ…å«å…¶ä¸“ç”¨å¯†é’¥çš„ä¸€ä¸ªæ•°æ®åº“ï¼ˆåä¸º keystoreï¼‰å’ŒåŒ…å«å…¶å…¬ç”¨å¯†é’¥çš„è¯ä¹¦ã€‚å¯†ç ä¿æŠ¤æ•°æ®åº“çš„å†…å®¹ã€‚ è¯¥æ•°æ®åº“è¿˜åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ¥è‡ªè¢«ä¿¡ä»»çš„å¯¹ç­‰æœºçš„è‡ªç­¾åè¯ä¹¦ã€‚ å¯¹ç­‰æœº A å‘èµ·è¿™é¡¹äº‹åŠ¡ï¼Œæ¯å°å¯¹ç­‰æœºç›¸äº’è®¤è¯ï¼Œä¸¤å°å¯¹ç­‰æœºåå•†é‡‡ç”¨çš„å¯†ç åŠå…¶é•¿åº¦å¹¶å»ºç«‹ä¸€ä¸ªå®‰å…¨é€šé“ã€‚å®Œæˆè¿™äº›æ“ä½œä¹‹åï¼Œ æ¯ä¸ªå¯¹ç­‰æœºéƒ½çŸ¥é“å®ƒæ­£åœ¨è·Ÿè°äº¤è°ˆå¹¶ä¸”çŸ¥é“é€šé“æ˜¯å®‰å…¨çš„ã€‚ SSL (Secure socket Layer)å®‰å…¨å¥—æ¥å±‚åè®®ä¸»è¦æ˜¯ä½¿ç”¨å…¬å¼€å¯†é’¥ä½“åˆ¶å’ŒX.509æ•°å­—è¯ä¹¦æŠ€æœ¯ä¿æŠ¤ä¿¡æ¯ä¼ è¾“çš„æœºå¯†æ€§å’Œå®Œæ•´æ€§ï¼Œ å®ƒä¸èƒ½ä¿è¯ä¿¡æ¯çš„ä¸å¯æŠµèµ–æ€§ï¼Œä¸»è¦é€‚ç”¨äºç‚¹å¯¹ç‚¹ä¹‹é—´çš„ä¿¡æ¯ä¼ è¾“ï¼Œå¸¸ç”¨Web Serveræ–¹å¼ã€‚</p><h4 id="PKI">PKI</h4><p>PKIä½“ç³»ç»“æ„é‡‡ç”¨è¯ä¹¦ç®¡ç†å…¬é’¥ï¼Œé€šè¿‡ç¬¬ä¸‰æ–¹çš„å¯ä¿¡æœºæ„CAï¼Œ æŠŠç”¨æˆ·çš„å…¬é’¥å’Œç”¨æˆ·çš„å…¶ä»–æ ‡è¯†ä¿¡æ¯ï¼ˆå¦‚åç§°ã€e-mailã€èº«ä»½è¯å·ç­‰ï¼‰æ†ç»‘åœ¨ä¸€èµ·ï¼Œåœ¨Internetç½‘ä¸ŠéªŒè¯ç”¨æˆ·çš„èº«ä»½ï¼Œ PKIä½“ç³»ç»“æ„æŠŠå…¬é’¥å¯†ç å’Œå¯¹ç§°å¯†ç ç»“åˆèµ·æ¥ï¼Œåœ¨Internetç½‘ä¸Šå®ç°å¯†é’¥çš„è‡ªåŠ¨ç®¡ç†ï¼Œä¿è¯ç½‘ä¸Šæ•°æ®çš„æœºå¯†æ€§ã€å®Œæ•´æ€§ã€‚</p><h4 id="SET">SET</h4><p>SET(Secure Electronic Transaction)å®‰å…¨ç”µå­äº¤æ˜“åè®®æ˜¯ç”±ç¾å›½Visaå’ŒMasterCardä¸¤å¤§ä¿¡ç”¨å¡ç»„ç»‡æå‡ºçš„åº”ç”¨äº Internetä¸Šçš„ä»¥ä¿¡ç”¨å¡ä¸ºåŸºç¡€çš„ç”µå­æ”¯ä»˜ç³»ç»Ÿåè®®ã€‚å®ƒé‡‡ç”¨å…¬é’¥å¯†ç ä½“åˆ¶å’ŒX.509æ•°å­—è¯ä¹¦æ ‡å‡†ï¼Œ ä¸»è¦åº”ç”¨äºB to Cæ¨¡å¼ä¸­ä¿éšœæ”¯ä»˜ä¿¡æ¯çš„å®‰å…¨æ€§ã€‚SETåè®®æœ¬èº«æ¯”è¾ƒå¤æ‚ï¼Œè®¾è®¡æ¯”è¾ƒä¸¥æ ¼ï¼Œå®‰å…¨æ€§é«˜ï¼Œ å®ƒèƒ½ä¿è¯ä¿¡æ¯ä¼ è¾“çš„æœºå¯†æ€§ã€çœŸå®æ€§ã€å®Œæ•´æ€§å’Œä¸å¯å¦è®¤æ€§ã€‚SETåè®®æ˜¯PKIæ¡†æ¶ä¸‹çš„ä¸€ä¸ªå…¸å‹å®ç°ï¼ŒåŒæ—¶ä¹Ÿåœ¨ä¸æ–­å‡çº§å’Œå®Œå–„ï¼Œ å¦‚SET 2.0å°†æ”¯æŒå€Ÿè®°å¡ç”µå­äº¤æ˜“ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºç½‘ç»œ </category>
          
          <category> åŠ å¯†ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
            <tag> TCP </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
